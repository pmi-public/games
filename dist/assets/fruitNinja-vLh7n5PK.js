import"./modulepreload-polyfill-B5Qt9EMX.js";var Li=Object.defineProperty,xi=(s,t,n)=>t in s?Li(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n,f=(s,t,n)=>(xi(s,typeof t!="symbol"?t+"":t,n),n);const randomNumber=s=>Math.floor(Math.random()*s),nul=()=>!1,each=(s,t)=>{if(Array.isArray(s))s=[...s],s.forEach(t);else if(typeof s=="object"){const n={};for(const _ in s)if(!n[_]&&t(s[_],_)===!1)break}else if(typeof s=="number")for(let n=0;n<s&&t(n,n)!==!1;n++);else if(typeof s=="string")for(let n=0,_=s.length;n<_&&t(s.charAt(n),n)!==!1;n++);},apply=(s,t,n)=>(t||(t={}),n?each(s,(_,l)=>{l in n||(t[l]=_)}):each(s,(_,l)=>t[l]=_),t),makeElement=(s,t)=>{const n=document.createElement(s),_=l=>{typeof l=="string"?n.style.cssText=l:apply(l,n.style)};for(const l in t)l==="class"?n.className=t[l]:l==="for"?n.htmlFor=t[l]:l==="style"?_(t[l]):n.setAttribute(l,t[l]);return n};function addPonyfills(){String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/,"")},String.prototype.htmlEncode=String.prototype.htmlEncode||function(){const s=document.createElement("div");return function(){let t;return s.appendChild(document.createTextNode(this)),t=s.innerHTML,s.innerHTML="",t}}(),String.prototype.byteLength=String.prototype.byteLength||function(){return this.replace(/[^\x00-\xff]/g,"  ").length},String.prototype.subByte=String.prototype.subByte||function(s,t){let n=this;return n.byteLength()<=s?n:(t=t||"",s-=t.byteLength(),n=n.slice(0,s).replace(/([^\x00-\xff])/g,"$1 ").slice(0,s).replace(/[^\x00-\xff]$/,"").replace(/([^\x00-\xff]) /g,"$1")+t)},Function.prototype.defer=Function.prototype.defer||function(s,t){const n=this;return setTimeout(function(){n.apply(s,arguments)},t)},Function.prototype.bind=Function.prototype.bind||function(s){const t=this;return function(){return t.apply(s,arguments)}},Function.prototype.saturate=Function.prototype.saturate||function(s){const t=this,n=[].slice.call(arguments,1);return function(){return t.apply(s,[].slice.call(arguments,0).concat(n))}},Array.prototype.indexOf=Array.prototype.indexOf||function(s,t){const n=this.length;for(t||(t=0),t<0&&(t=n+t);t<n;t++)if(this[t]===s)return t;return-1},Array.prototype.every=Array.prototype.every||function(s,t){for(var n=0,_=this.length;n<_;n++)if(!s.call(t,this[n],n,this))return!1;return!0},Array.prototype.filter=Array.prototype.filter||function(s,t){let n=[],_;for(var l=0,N=this.length;l<N;l++)_=this[l],s.call(t,_,l,this)&&n.push(_);return n},Array.prototype.forEach=Array.prototype.forEach||function(s,t){for(var n=0,_=this.length;n<_;n++)s.call(t,this[n],n,this)},Array.prototype.map=Array.prototype.map||function(s,t){const n=[];for(var _=0,l=this.length;_<l;_++)n[_]=s.call(t,this[_],_,this);return n},Array.prototype.some=Array.prototype.some||function(s,t){for(var n=0,_=this.length;n<_;n++)if(s.call(t,this[n],n,this))return!0;return!1},Array.prototype.invoke=Array.prototype.invoke||function(s){const t=[].slice.call(arguments,1);return this.forEach(function(n){n instanceof Array?n[0][s].apply(n[0],n.slice(1)):n[s].apply(n,t)}),this},Array.prototype.random=Array.prototype.random||function(){let s=this.slice(0),t=[],n=s.length;for(;n--;)t.push(s.splice(randomNumber(n+1),1)[0]);return t}}addPonyfills();(function(){function s(){if(s.is(arguments[0],ct)){for(var i=arguments[0],e=he[v](s,i.splice(0,3+s.is(i[0],st))),r=e.set(),o=0,T=i[C];o<T;o++){var E=i[o]||{};n[N](E.type)&&r[Q](e[E.type]().attr(E))}return r}return he[v](s,arguments)}s.version="1.5.2";var t=/[, ]+/,n={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},_=/\{(\d+)\}/g,l="prototype",N="hasOwnProperty",u=document,L=window,X={was:Object[l][N].call(L,"Raphael"),is:L.Raphael},w=function(){this.customAttributes={}},I,x="appendChild",v="apply",Y="concat",Z="createTouch"in u,y="",K=" ",k=String,tt="split",de="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend"[tt](K),ee={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},it="join",C="length",Ut=k[l].toLowerCase,P=Math,Tt=P.max,dt=P.min,et=P.abs,J=P.pow,Et=P.PI,st="number",Gt="string",ct="array",ft="toString",It="fill",Je=Object[l][ft],Q="push",fe=/^url\(['"]?([^\)]+?)['"]?\)$/i,ti=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,ei={NaN:1,Infinity:1,"-Infinity":1},si=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,rt=P.round,Ot="setAttribute",$=parseFloat,pt=parseInt,ie=" progid:DXImageTransform.Microsoft",Yt=k[l].toUpperCase,$t={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},se={along:"along",blur:st,"clip-rect":"csv",cx:st,cy:st,fill:"colour","fill-opacity":st,"font-size":st,height:st,opacity:st,path:"path",r:st,rotation:"csv",rx:st,ry:st,scale:"csv",stroke:"colour","stroke-opacity":st,"stroke-width":st,translation:"csv",width:st,x:st,y:st},nt="replace",ri=/^(from|to|\d+%?)$/,re=/\s*,\s*/,ni={hs:1,rg:1},ai=/,?([achlmqrstvxz]),?/gi,oi=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,Ti=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,Re=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,hi=function(i,e){return i.key-e.key};if(s.type=L.SVGAngle||u.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",s.type=="VML"){var ne=u.createElement("div"),kt;if(ne.innerHTML='<v:shape adj="1"/>',kt=ne.firstChild,kt.style.behavior="url(#default#VML)",!(kt&&typeof kt.adj=="object"))return s.type=null;ne=null}s.svg=!(s.vml=s.type=="VML"),w[l]=s[l],I=w[l],s._id=0,s._oid=0,s.fn={},s.is=function(i,e){return e=Ut.call(e),e=="finite"?!ei[N](+i):e=="null"&&i===null||e==typeof i||e=="object"&&i===Object(i)||e=="array"&&Array.isArray&&Array.isArray(i)||Je.call(i).slice(8,-1).toLowerCase()==e},s.angle=function(i,e,r,o,T,E){{if(T==null){var c=i-r,h=e-o;return!c&&!h?0:((c<0)*180+P.atan(-h/-c)*180/Et+360)%360}return s.angle(i,e,T,E)-s.angle(r,o,T,E)}},s.rad=function(i){return i%360*Et/180},s.deg=function(i){return i*180/Et%360},s.snapTo=function(i,e,r){if(r=s.is(r,"finite")?r:10,s.is(i,ct)){for(var o=i.length;o--;)if(et(i[o]-e)<=r)return i[o]}else{i=+i;var T=e%i;if(T<r)return e-T;if(T>i-r)return e-T+i}return e};function Wt(){for(var i=[],e=0;e<32;e++)i[e]=(~~(P.random()*16))[ft](16);return i[12]=4,i[16]=(i[16]&3|8)[ft](16),"r-"+i[it]("")}s.setWindow=function(i){L=i,u=L.document};var Pt=function(i){if(s.vml){var e=/^\s+|\s+$/g,r;try{var o=new ActiveXObject("htmlfile");o.write("<body>"),o.close(),r=o.body}catch{r=createPopup().document.body}var T=r.createTextRange();Pt=Rt(function(c){try{r.style.color=k(c)[nt](e,y);var h=T.queryCommandValue("ForeColor");return h=(h&255)<<16|h&65280|(h&16711680)>>>16,"#"+("000000"+h[ft](16)).slice(-6)}catch{return"none"}})}else{var E=u.createElement("i");E.title="Raphaël Colour Picker",E.style.display="none",u.body[x](E),Pt=Rt(function(c){return E.style.color=c,u.defaultView.getComputedStyle(E,y).getPropertyValue("color")})}return Pt(i)},me=function(){return"hsb("+[this.h,this.s,this.b]+")"},_i=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ei=function(){return this.hex};s.hsb2rgb=function(i,e,r,o){return s.is(i,"object")&&"h"in i&&"s"in i&&"b"in i&&(r=i.b,e=i.s,i=i.h,o=i.o),s.hsl2rgb(i,e,r/2,o)},s.hsl2rgb=function(i,e,r,o){s.is(i,"object")&&"h"in i&&"s"in i&&"l"in i&&(r=i.l,e=i.s,i=i.h),(i>1||e>1||r>1)&&(i/=360,e/=100,r/=100);var T={},E=["r","g","b"],c,h,O;if(e){r<.5?c=r*(1+e):c=r+e-r*e,h=2*r-c;for(var S=0;S<3;S++)O=i+1/3*-(S-1),O<0&&O++,O>1&&O--,O*6<1?T[E[S]]=h+(c-h)*6*O:O*2<1?T[E[S]]=c:O*3<2?T[E[S]]=h+(c-h)*(2/3-O)*6:T[E[S]]=h}else T={r,g:r,b:r};return T.r*=255,T.g*=255,T.b*=255,T.hex="#"+(16777216|T.b|T.g<<8|T.r<<16).toString(16).slice(1),s.is(o,"finite")&&(T.opacity=o),T.toString=Ei,T},s.rgb2hsb=function(i,e,r){if(e==null&&s.is(i,"object")&&"r"in i&&"g"in i&&"b"in i&&(r=i.b,e=i.g,i=i.r),e==null&&s.is(i,Gt)){var o=s.getRGB(i);i=o.r,e=o.g,r=o.b}(i>1||e>1||r>1)&&(i/=255,e/=255,r/=255);var T=Tt(i,e,r),E=dt(i,e,r),c,h,O=T;{if(E==T)return{h:0,s:0,b:T,toString:me};var S=T-E;h=S/T,i==T?c=(e-r)/S:e==T?c=2+(r-i)/S:c=4+(i-e)/S,c/=6,c<0&&c++,c>1&&c--}return{h:c,s:h,b:O,toString:me}},s.rgb2hsl=function(i,e,r){if(e==null&&s.is(i,"object")&&"r"in i&&"g"in i&&"b"in i&&(r=i.b,e=i.g,i=i.r),e==null&&s.is(i,Gt)){var o=s.getRGB(i);i=o.r,e=o.g,r=o.b}(i>1||e>1||r>1)&&(i/=255,e/=255,r/=255);var T=Tt(i,e,r),E=dt(i,e,r),c,h,O=(T+E)/2,S;if(E==T)S={h:0,s:0,l:O};else{var d=T-E;h=O<.5?d/(T+E):d/(2-T-E),i==T?c=(e-r)/d:e==T?c=2+(r-i)/d:c=4+(i-e)/d,c/=6,c<0&&c++,c>1&&c--,S={h:c,s:h,l:O}}return S.toString=_i,S},s._path2string=function(){return this.join(",")[nt](ai,"$1")};function Rt(i,e,r){function o(){var T=Array[l].slice.call(arguments,0),E=T[it]("►"),c=o.cache=o.cache||{},h=o.count=o.count||[];return c[N](E)||(h[C]>=1e3&&delete c[h.shift()],h[Q](E),c[E]=i[v](e,T)),r?r(c[E]):c[E]}return o}s.getRGB=Rt(function(i){if(!i||(i=k(i)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1};if(i=="none")return{r:-1,g:-1,b:-1,hex:"none"};!(ni[N](i.toLowerCase().substring(0,2))||i.charAt()=="#")&&(i=Pt(i));var e,r,o,T,E,c,h=i.match(ti);return h?(h[2]&&(o=pt(h[2].substring(5),16),r=pt(h[2].substring(3,5),16),e=pt(h[2].substring(1,3),16)),h[3]&&(o=pt((E=h[3].charAt(3))+E,16),r=pt((E=h[3].charAt(2))+E,16),e=pt((E=h[3].charAt(1))+E,16)),h[4]&&(c=h[4][tt](re),e=$(c[0]),c[0].slice(-1)=="%"&&(e*=2.55),r=$(c[1]),c[1].slice(-1)=="%"&&(r*=2.55),o=$(c[2]),c[2].slice(-1)=="%"&&(o*=2.55),h[1].toLowerCase().slice(0,4)=="rgba"&&(T=$(c[3])),c[3]&&c[3].slice(-1)=="%"&&(T/=100)),h[5]?(c=h[5][tt](re),e=$(c[0]),c[0].slice(-1)=="%"&&(e*=2.55),r=$(c[1]),c[1].slice(-1)=="%"&&(r*=2.55),o=$(c[2]),c[2].slice(-1)=="%"&&(o*=2.55),(c[0].slice(-3)=="deg"||c[0].slice(-1)=="°")&&(e/=360),h[1].toLowerCase().slice(0,4)=="hsba"&&(T=$(c[3])),c[3]&&c[3].slice(-1)=="%"&&(T/=100),s.hsb2rgb(e,r,o,T)):h[6]?(c=h[6][tt](re),e=$(c[0]),c[0].slice(-1)=="%"&&(e*=2.55),r=$(c[1]),c[1].slice(-1)=="%"&&(r*=2.55),o=$(c[2]),c[2].slice(-1)=="%"&&(o*=2.55),(c[0].slice(-3)=="deg"||c[0].slice(-1)=="°")&&(e/=360),h[1].toLowerCase().slice(0,4)=="hsla"&&(T=$(c[3])),c[3]&&c[3].slice(-1)=="%"&&(T/=100),s.hsl2rgb(e,r,o,T)):(h={r:e,g:r,b:o},h.hex="#"+(16777216|o|r<<8|e<<16).toString(16).slice(1),s.is(T,"finite")&&(h.opacity=T),h)):{r:-1,g:-1,b:-1,hex:"none",error:1}},s),s.getColor=function(i){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:i||.75},r=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),r.hex},s.getColor.reset=function(){delete this.start},s.parsePathString=Rt(function(i){if(!i)return null;var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return s.is(i,ct)&&s.is(i[0],ct)&&(r=zt(i)),r[C]||k(i)[nt](oi,function(o,T,E){var c=[],h=Ut.call(T);for(E[nt](Ti,function(O,S){S&&c[Q](+S)}),h=="m"&&c[C]>2&&(r[Q]([T][Y](c.splice(0,2))),h="l",T=T=="m"?"l":"L");c[C]>=e[h]&&(r[Q]([T][Y](c.splice(0,e[h]))),!!e[h]););}),r[ft]=s._path2string,r}),s.findDotsAtSegment=function(i,e,r,o,T,E,c,h,O){var S=1-O,d=J(S,3)*i+J(S,2)*3*O*r+S*3*O*O*T+J(O,3)*c,U=J(S,3)*e+J(S,2)*3*O*o+S*3*O*O*E+J(O,3)*h,A=i+2*O*(r-i)+O*O*(T-2*r+i),G=e+2*O*(o-e)+O*O*(E-2*o+e),p=r+2*O*(T-r)+O*O*(c-2*T+r),m=o+2*O*(E-o)+O*O*(h-2*E+o),R=(1-O)*i+O*r,B=(1-O)*e+O*o,F=(1-O)*T+O*c,H=(1-O)*E+O*h,M=90-P.atan((A-p)/(G-m))*180/Et;return(A>p||G<m)&&(M+=180),{x:d,y:U,m:{x:A,y:G},n:{x:p,y:m},start:{x:R,y:B},end:{x:F,y:H},alpha:M}};var Vt=Rt(function(i){if(!i)return{x:0,y:0,width:0,height:0};i=Qt(i);for(var e=0,r=0,o=[],T=[],E,c=0,h=i[C];c<h;c++)if(E=i[c],E[0]=="M")e=E[1],r=E[2],o[Q](e),T[Q](r);else{var O=ci(e,r,E[1],E[2],E[3],E[4],E[5],E[6]);o=o[Y](O.min.x,O.max.x),T=T[Y](O.min.y,O.max.y),e=E[5],r=E[6]}var S=dt[v](0,o),d=dt[v](0,T);return{x:S,y:d,width:Tt[v](0,o)-S,height:Tt[v](0,T)-d}}),zt=function(i){var e=[];(!s.is(i,ct)||!s.is(i&&i[0],ct))&&(i=s.parsePathString(i));for(var r=0,o=i[C];r<o;r++){e[r]=[];for(var T=0,E=i[r][C];T<E;T++)e[r][T]=i[r][T]}return e[ft]=s._path2string,e},ae=Rt(function(i){(!s.is(i,ct)||!s.is(i&&i[0],ct))&&(i=s.parsePathString(i));var e=[],r=0,o=0,T=0,E=0,c=0;i[0][0]=="M"&&(r=i[0][1],o=i[0][2],T=r,E=o,c++,e[Q](["M",r,o]));for(var h=c,O=i[C];h<O;h++){var S=e[h]=[],d=i[h];if(d[0]!=Ut.call(d[0]))switch(S[0]=Ut.call(d[0]),S[0]){case"a":S[1]=d[1],S[2]=d[2],S[3]=d[3],S[4]=d[4],S[5]=d[5],S[6]=+(d[6]-r).toFixed(3),S[7]=+(d[7]-o).toFixed(3);break;case"v":S[1]=+(d[1]-o).toFixed(3);break;case"m":T=d[1],E=d[2];default:for(var U=1,A=d[C];U<A;U++)S[U]=+(d[U]-(U%2?r:o)).toFixed(3)}else{S=e[h]=[],d[0]=="m"&&(T=d[1]+r,E=d[2]+o);for(var G=0,p=d[C];G<p;G++)e[h][G]=d[G]}var m=e[h][C];switch(e[h][0]){case"z":r=T,o=E;break;case"h":r+=+e[h][m-1];break;case"v":o+=+e[h][m-1];break;default:r+=+e[h][m-2],o+=+e[h][m-1]}}return e[ft]=s._path2string,e},0,zt),Xt=Rt(function(i){(!s.is(i,ct)||!s.is(i&&i[0],ct))&&(i=s.parsePathString(i));var e=[],r=0,o=0,T=0,E=0,c=0;i[0][0]=="M"&&(r=+i[0][1],o=+i[0][2],T=r,E=o,c++,e[0]=["M",r,o]);for(var h=c,O=i[C];h<O;h++){var S=e[h]=[],d=i[h];if(d[0]!=Yt.call(d[0]))switch(S[0]=Yt.call(d[0]),S[0]){case"A":S[1]=d[1],S[2]=d[2],S[3]=d[3],S[4]=d[4],S[5]=d[5],S[6]=+(d[6]+r),S[7]=+(d[7]+o);break;case"V":S[1]=+d[1]+o;break;case"H":S[1]=+d[1]+r;break;case"M":T=+d[1]+r,E=+d[2]+o;default:for(var U=1,A=d[C];U<A;U++)S[U]=+d[U]+(U%2?r:o)}else for(var G=0,p=d[C];G<p;G++)e[h][G]=d[G];switch(S[0]){case"Z":r=T,o=E;break;case"H":r=S[1];break;case"V":o=S[1];break;case"M":T=e[h][e[h][C]-2],E=e[h][e[h][C]-1];default:r=e[h][e[h][C]-2],o=e[h][e[h][C]-1]}}return e[ft]=s._path2string,e},null,zt),jt=function(i,e,r,o){return[i,e,r,o,r,o]},Ie=function(i,e,r,o,T,E){var c=.3333333333333333,h=2/3;return[c*i+h*r,c*e+h*o,c*T+h*r,c*E+h*o,T,E]},pe=function(i,e,r,o,T,E,c,h,O,S){var d=Et*120/180,U=Et/180*(+T||0),A=[],G,p=Rt(function(qe,Ze,te){var Ui=qe*P.cos(te)-Ze*P.sin(te),Gi=qe*P.sin(te)+Ze*P.cos(te);return{x:Ui,y:Gi}});if(S)q=S[0],b=S[1],z=S[2],j=S[3];else{G=p(i,e,-U),i=G.x,e=G.y,G=p(h,O,-U),h=G.x,O=G.y;var m=(i-h)/2,R=(e-O)/2,B=m*m/(r*r)+R*R/(o*o);B>1&&(B=P.sqrt(B),r=B*r,o=B*o);var F=r*r,H=o*o,M=(E==c?-1:1)*P.sqrt(et((F*H-F*R*R-H*m*m)/(F*R*R+H*m*m))),z=M*r*R/o+(i+h)/2,j=M*-o*m/r+(e+O)/2,q=P.asin(((e-j)/o).toFixed(9)),b=P.asin(((O-j)/o).toFixed(9));q=i<z?Et-q:q,b=h<z?Et-b:b,q<0&&(q=Et*2+q),b<0&&(b=Et*2+b),c&&q>b&&(q=q-Et*2),!c&&b>q&&(b=b-Et*2)}var ht=b-q;if(et(ht)>d){var at=b,mt=h,At=O;b=q+d*(c&&b>q?1:-1),h=z+r*P.cos(b),O=j+o*P.sin(b),A=pe(h,O,r,o,T,0,c,mt,At,[b,at,z,j])}ht=b-q;var xt=P.cos(q),_t=P.sin(q),vt=P.cos(b),St=P.sin(b),Ct=P.tan(ht/4),Ft=4/3*r*Ct,Ve=4/3*o*Ct,ze=[i,e],Dt=[i+Ft*_t,e-Ve*xt],je=[h+Ft*St,O-Ve*vt],Ke=[h,O];Dt[0]=2*ze[0]-Dt[0],Dt[1]=2*ze[1]-Dt[1];{if(S)return[Dt,je,Ke][Y](A);A=[Dt,je,Ke][Y](A)[it]()[tt](",");for(var Qe=[],Lt=0,gi=A[C];Lt<gi;Lt++)Qe[Lt]=Lt%2?p(A[Lt-1],A[Lt],U).y:p(A[Lt],A[Lt+1],U).x;return Qe}},Kt=function(i,e,r,o,T,E,c,h,O){var S=1-O;return{x:J(S,3)*i+J(S,2)*3*O*r+S*3*O*O*T+J(O,3)*c,y:J(S,3)*e+J(S,2)*3*O*o+S*3*O*O*E+J(O,3)*h}},ci=Rt(function(i,e,r,o,T,E,c,h){var O=T-2*r+i-(c-2*T+r),S=2*(r-i)-2*(T-r),d=i-r,U=(-S+P.sqrt(S*S-4*O*d))/2/O,A=(-S-P.sqrt(S*S-4*O*d))/2/O,G=[e,h],p=[i,c],m;return et(U)>"1e12"&&(U=.5),et(A)>"1e12"&&(A=.5),U>0&&U<1&&(m=Kt(i,e,r,o,T,E,c,h,U),p[Q](m.x),G[Q](m.y)),A>0&&A<1&&(m=Kt(i,e,r,o,T,E,c,h,A),p[Q](m.x),G[Q](m.y)),O=E-2*o+e-(h-2*E+o),S=2*(o-e)-2*(E-o),d=e-o,U=(-S+P.sqrt(S*S-4*O*d))/2/O,A=(-S-P.sqrt(S*S-4*O*d))/2/O,et(U)>"1e12"&&(U=.5),et(A)>"1e12"&&(A=.5),U>0&&U<1&&(m=Kt(i,e,r,o,T,E,c,h,U),p[Q](m.x),G[Q](m.y)),A>0&&A<1&&(m=Kt(i,e,r,o,T,E,c,h,A),p[Q](m.x),G[Q](m.y)),{min:{x:dt[v](0,p),y:dt[v](0,G)},max:{x:Tt[v](0,p),y:Tt[v](0,G)}}}),Qt=Rt(function(i,e){for(var r=Xt(i),o=e&&Xt(e),T={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},E={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=function(m,R){var B,F;if(!m)return["C",R.x,R.y,R.x,R.y,R.x,R.y];switch(!(m[0]in{T:1,Q:1})&&(R.qx=R.qy=null),m[0]){case"M":R.X=m[1],R.Y=m[2];break;case"A":m=["C"][Y](pe[v](0,[R.x,R.y][Y](m.slice(1))));break;case"S":B=R.x+(R.x-(R.bx||R.x)),F=R.y+(R.y-(R.by||R.y)),m=["C",B,F][Y](m.slice(1));break;case"T":R.qx=R.x+(R.x-(R.qx||R.x)),R.qy=R.y+(R.y-(R.qy||R.y)),m=["C"][Y](Ie(R.x,R.y,R.qx,R.qy,m[1],m[2]));break;case"Q":R.qx=m[1],R.qy=m[2],m=["C"][Y](Ie(R.x,R.y,m[1],m[2],m[3],m[4]));break;case"L":m=["C"][Y](jt(R.x,R.y,m[1],m[2]));break;case"H":m=["C"][Y](jt(R.x,R.y,m[1],R.y));break;case"V":m=["C"][Y](jt(R.x,R.y,R.x,m[1]));break;case"Z":m=["C"][Y](jt(R.x,R.y,R.X,R.Y));break}return m},h=function(m,R){if(m[R][C]>7){m[R].shift();for(var B=m[R];B[C];)m.splice(R++,0,["C"][Y](B.splice(0,6)));m.splice(R,1),d=Tt(r[C],o&&o[C]||0)}},O=function(m,R,B,F,H){m&&R&&m[H][0]=="M"&&R[H][0]!="M"&&(R.splice(H,0,["M",F.x,F.y]),B.bx=0,B.by=0,B.x=m[H][1],B.y=m[H][2],d=Tt(r[C],o&&o[C]||0))},S=0,d=Tt(r[C],o&&o[C]||0);S<d;S++){r[S]=c(r[S],T),h(r,S),o&&(o[S]=c(o[S],E)),o&&h(o,S),O(r,o,T,E,S),O(o,r,E,T,S);var U=r[S],A=o&&o[S],G=U[C],p=o&&A[C];T.x=U[G-2],T.y=U[G-1],T.bx=$(U[G-4])||T.x,T.by=$(U[G-3])||T.y,E.bx=o&&($(A[p-4])||E.x),E.by=o&&($(A[p-3])||E.y),E.x=o&&A[p-2],E.y=o&&A[p-1]}return o?[r,o]:r},null,zt),Ae=Rt(function(i){for(var e=[],r=0,o=i[C];r<o;r++){var T={},E=i[r].match(/^([^:]*):?([\d\.]*)/);if(T.color=s.getRGB(E[1]),T.color.error)return null;T.color=T.color.hex,E[2]&&(T.offset=E[2]+"%"),e[Q](T)}for(r=1,o=e[C]-1;r<o;r++)if(!e[r].offset){for(var c=$(e[r-1].offset||0),h=0,O=r+1;O<o;O++)if(e[O].offset){h=e[O].offset;break}h||(h=100,O=o),h=$(h);for(var S=(h-c)/(O-r+1);r<O;r++)c+=S,e[r].offset=c+"%"}return e}),ge=function(i,e,r,o){var T;if(s.is(i,Gt)||s.is(i,"object")){if(T=s.is(i,Gt)?u.getElementById(i):i,T.tagName)return e==null?{container:T,width:T.style.pixelWidth||T.offsetWidth,height:T.style.pixelHeight||T.offsetHeight}:{container:T,width:e,height:r}}else return{container:1,x:i,y:e,width:r,height:o}},oe=function(i,e){var r=this;for(var o in e)if(e[N](o)&&!(o in i))switch(typeof e[o]){case"function":(function(T){i[o]=i===r?T:function(){return T[v](r,arguments)}})(e[o]);break;case"object":i[o]=i[o]||{},oe.call(this,i[o],e[o]);break;default:i[o]=e[o];break}},yt=function(i,e){i==e.top&&(e.top=i.prev),i==e.bottom&&(e.bottom=i.next),i.next&&(i.next.prev=i.prev),i.prev&&(i.prev.next=i.next)},Ue=function(i,e){e.top!==i&&(yt(i,e),i.next=null,i.prev=e.top,e.top.next=i,e.top=i)},Ge=function(i,e){e.bottom!==i&&(yt(i,e),i.next=e.bottom,i.prev=null,e.bottom.prev=i,e.bottom=i)},xe=function(i,e,r){yt(i,r),e==r.top&&(r.top=i),e.next&&(e.next.prev=i),i.next=e.next,i.prev=e,e.next=i},Ce=function(i,e,r){yt(i,r),e==r.bottom&&(r.bottom=i),e.prev&&(e.prev.next=i),i.prev=e.prev,e.prev=i,i.next=e},Le=function(i){return function(){throw new Error("Raphaël: you are calling to method “"+i+"” of removed object")}};if(s.pathToRelative=ae,s.svg){I.svgns="http://www.w3.org/2000/svg",I.xlink="http://www.w3.org/1999/xlink",rt=function(i){return+i+(~~i===i)*.5};var D=function(i,e){if(e)for(var r in e)e[N](r)&&i[Ot](r,k(e[r]));else return i=u.createElementNS(I.svgns,i),i.style.webkitTapHighlightColor="rgba(0,0,0,0)",i};s[ft]=function(){return`Your browser supports SVG.
You are running Raphaël `+this.version};var Fe=function(i,e){var r=D("path");e.canvas&&e.canvas[x](r);var o=new V(r,e);return o.type="path",gt(o,{fill:"none",stroke:"#000",path:i}),o},Mt=function(i,e,r){var o="linear",T=.5,E=.5,c=i.style;if(e=k(e)[nt](Re,function(R,B,F){if(o="radial",B&&F){T=$(B),E=$(F);var H=(E>.5)*2-1;J(T-.5,2)+J(E-.5,2)>.25&&(E=P.sqrt(.25-J(T-.5,2))*H+.5)&&E!=.5&&(E=E.toFixed(5)-1e-5*H)}return y}),e=e[tt](/\s*\-\s*/),o=="linear"){var h=e.shift();if(h=-$(h),isNaN(h))return null;var O=[0,0,P.cos(h*Et/180),P.sin(h*Et/180)],S=1/(Tt(et(O[2]),et(O[3]))||1);O[2]*=S,O[3]*=S,O[2]<0&&(O[0]=-O[2],O[2]=0),O[3]<0&&(O[1]=-O[3],O[3]=0)}var d=Ae(e);if(!d)return null;var U=i.getAttribute(It);U=U.match(/^url\(#(.*)\)$/),U&&r.defs.removeChild(u.getElementById(U[1]));var A=D(o+"Gradient");A.id=Wt(),D(A,o=="radial"?{fx:T,fy:E}:{x1:O[0],y1:O[1],x2:O[2],y2:O[3]}),r.defs[x](A);for(var G=0,p=d[C];G<p;G++){var m=D("stop");D(m,{offset:d[G].offset?d[G].offset:G?"100%":"0%","stop-color":d[G].color||"#fff"}),A[x](m)}return D(i,{fill:"url(#"+A.id+")",opacity:1,"fill-opacity":1}),c.fill=y,c.opacity=1,c.fillOpacity=1,1},Te=function(i){var e=i.getBBox();D(i.pattern,{patternTransform:s.format("translate({0},{1})",e.x,e.y)})},gt=function(i,e){var r={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},o=i.node,T=i.attrs,E=i.rotate(),c=function(b,ht){if(ht=r[Ut.call(ht)],ht){for(var at=b.attrs["stroke-width"]||"1",mt={round:at,square:at,butt:0}[b.attrs["stroke-linecap"]||e["stroke-linecap"]]||0,At=[],xt=ht[C];xt--;)At[xt]=ht[xt]*at+(xt%2?1:-1)*mt;D(o,{"stroke-dasharray":At[it](",")})}};e[N]("rotation")&&(E=e.rotation);var h=k(E)[tt](t);h.length-1?(h[1]=+h[1],h[2]=+h[2]):h=null,$(E)&&i.rotate(0,!0);for(var O in e)if(e[N](O)){if(!$t[N](O))continue;var S=e[O];switch(T[O]=S,O){case"blur":i.blur(S);break;case"rotation":i.rotate(S,!0);break;case"href":case"title":case"target":var d=o.parentNode;if(Ut.call(d.tagName)!="a"){var U=D("a");d.insertBefore(U,o),U[x](o),d=U}O=="target"&&S=="blank"?d.setAttributeNS(i.paper.xlink,"show","new"):d.setAttributeNS(i.paper.xlink,O,S);break;case"cursor":o.style.cursor=S;break;case"clip-rect":var A=k(S)[tt](t);if(A[C]==4){i.clip&&i.clip.parentNode.parentNode.removeChild(i.clip.parentNode);var G=D("clipPath"),p=D("rect");G.id=Wt(),D(p,{x:A[0],y:A[1],width:A[2],height:A[3]}),G[x](p),i.paper.defs[x](G),D(o,{"clip-path":"url(#"+G.id+")"}),i.clip=p}if(!S){var m=u.getElementById(o.getAttribute("clip-path")[nt](/(^url\(#|\)$)/g,y));m&&m.parentNode.removeChild(m),D(o,{"clip-path":y}),delete i.clip}break;case"path":i.type=="path"&&D(o,{d:S?T.path=Xt(S):"M0,0"});break;case"width":if(o[Ot](O,S),T.fx)O="x",S=T.x;else break;case"x":T.fx&&(S=-T.x-(T.width||0));case"rx":if(O=="rx"&&i.type=="rect")break;case"cx":h&&(O=="x"||O=="cx")&&(h[1]+=S-T[O]),o[Ot](O,S),i.pattern&&Te(i);break;case"height":if(o[Ot](O,S),T.fy)O="y",S=T.y;else break;case"y":T.fy&&(S=-T.y-(T.height||0));case"ry":if(O=="ry"&&i.type=="rect")break;case"cy":h&&(O=="y"||O=="cy")&&(h[2]+=S-T[O]),o[Ot](O,S),i.pattern&&Te(i);break;case"r":i.type=="rect"?D(o,{rx:S,ry:S}):o[Ot](O,S);break;case"src":i.type=="image"&&o.setAttributeNS(i.paper.xlink,"href",S);break;case"stroke-width":o.style.strokeWidth=S,o[Ot](O,S),T["stroke-dasharray"]&&c(i,T["stroke-dasharray"]);break;case"stroke-dasharray":c(i,S);break;case"translation":var R=k(S)[tt](t);R[0]=+R[0]||0,R[1]=+R[1]||0,h&&(h[1]+=R[0],h[2]+=R[1]),Jt.call(i,R[0],R[1]);break;case"scale":R=k(S)[tt](t),i.scale(+R[0]||1,+R[1]||+R[0]||1,isNaN($(R[2]))?null:+R[2],isNaN($(R[3]))?null:+R[3]);break;case It:var B=k(S).match(fe);if(B){G=D("pattern");var F=D("image");G.id=Wt(),D(G,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),D(F,{x:0,y:0}),F.setAttributeNS(i.paper.xlink,"href",B[1]),G[x](F);var H=u.createElement("img");H.style.cssText="position:absolute;left:-9999em;top-9999em",H.onload=function(){D(G,{width:this.offsetWidth,height:this.offsetHeight}),D(F,{width:this.offsetWidth,height:this.offsetHeight}),u.body.removeChild(this),i.paper.safari()},u.body[x](H),H.src=B[1],i.paper.defs[x](G),o.style.fill="url(#"+G.id+")",D(o,{fill:"url(#"+G.id+")"}),i.pattern=G,i.pattern&&Te(i);break}var M=s.getRGB(S);if(M.error)if(({circle:1,ellipse:1}[N](i.type)||k(S).charAt()!="r")&&Mt(o,S,i.paper)){T.gradient=S,T.fill="none";break}else delete e.gradient,delete T.gradient,!s.is(T.opacity,"undefined")&&s.is(e.opacity,"undefined")&&D(o,{opacity:T.opacity}),!s.is(T["fill-opacity"],"undefined")&&s.is(e["fill-opacity"],"undefined")&&D(o,{"fill-opacity":T["fill-opacity"]});M[N]("opacity")&&D(o,{"fill-opacity":M.opacity>1?M.opacity/100:M.opacity});case"stroke":M=s.getRGB(S),o[Ot](O,M.hex),O=="stroke"&&M[N]("opacity")&&D(o,{"stroke-opacity":M.opacity>1?M.opacity/100:M.opacity});break;case"gradient":({circle:1,ellipse:1}[N](i.type)||k(S).charAt()!="r")&&Mt(o,S,i.paper);break;case"opacity":T.gradient&&!T[N]("stroke-opacity")&&D(o,{"stroke-opacity":S>1?S/100:S});case"fill-opacity":if(T.gradient){var z=u.getElementById(o.getAttribute(It)[nt](/^url\(#|\)$/g,y));if(z){var j=z.getElementsByTagName("stop");j[j[C]-1][Ot]("stop-opacity",S)}break}default:O=="font-size"&&(S=pt(S,10)+"px");var q=O[nt](/(\-.)/g,function(b){return Yt.call(b.substring(1))});o.style[q]=S,o[Ot](O,S);break}}li(i,e),h?i.rotate(h.join(K)):$(E)&&i.rotate(E,!0)},ye=1.2,li=function(i,e){if(!(i.type!="text"||!(e[N]("text")||e[N]("font")||e[N]("font-size")||e[N]("x")||e[N]("y")))){var r=i.attrs,o=i.node,T=o.firstChild?pt(u.defaultView.getComputedStyle(o.firstChild,y).getPropertyValue("font-size"),10):10;if(e[N]("text")){for(r.text=e.text;o.firstChild;)o.removeChild(o.firstChild);for(var E=k(e.text)[tt](`
`),c=0,h=E[C];c<h;c++)if(E[c]){var O=D("tspan");c&&D(O,{dy:T*ye,x:r.x}),O[x](u.createTextNode(E[c])),o[x](O)}}else for(E=o.getElementsByTagName("tspan"),c=0,h=E[C];c<h;c++)c&&D(E[c],{dy:T*ye,x:r.x});D(o,{y:r.y});var S=i.getBBox(),d=r.y-(S.y+S.height/2);d&&s.is(d,"finite")&&D(o,{y:r.y+d})}},V=function(i,e){this[0]=i,this.id=s._oid++,this.node=i,i.raphael=this,this.paper=e,this.attrs=this.attrs||{},this.transformations=[],this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},W=V[l];V[l].rotate=function(i,e,r){if(this.removed)return this;if(i==null)return this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][it](K):this._.rt.deg;var o=this.getBBox();return i=k(i)[tt](t),i[C]-1&&(e=$(i[1]),r=$(i[2])),i=$(i[0]),e!=null&&e!==!1?this._.rt.deg=i:this._.rt.deg+=i,r==null&&(e=null),this._.rt.cx=e,this._.rt.cy=r,e=e??o.x+o.width/2,r=r??o.y+o.height/2,this._.rt.deg?(this.transformations[0]=s.format("rotate({0} {1} {2})",this._.rt.deg,e,r),this.clip&&D(this.clip,{transform:s.format("rotate({0} {1} {2})",-this._.rt.deg,e,r)})):(this.transformations[0]=y,this.clip&&D(this.clip,{transform:y})),D(this.node,{transform:this.transformations[it](K)}),this},V[l].hide=function(){return!this.removed&&(this.node.style.display="none"),this},V[l].show=function(){return!this.removed&&(this.node.style.display=""),this},V[l].remove=function(){if(!this.removed){yt(this,this.paper),this.node.parentNode.removeChild(this.node);for(var i in this)delete this[i];this.removed=!0}},V[l].getBBox=function(){if(this.removed)return this;if(this.type=="path")return Vt(this.attrs.path);if(this.node.style.display=="none"){this.show();var i=!0}var e={};try{e=this.node.getBBox()}catch{}finally{e=e||{}}if(this.type=="text"){e={x:e.x,y:1/0,width:0,height:0};for(var r=0,o=this.node.getNumberOfChars();r<o;r++){var T=this.node.getExtentOfChar(r);T.y<e.y&&(e.y=T.y),T.y+T.height-e.y>e.height&&(e.height=T.y+T.height-e.y),T.x+T.width-e.x>e.width&&(e.width=T.x+T.width-e.x)}}return i&&this.hide(),e},V[l].attr=function(i,e){if(this.removed)return this;if(i==null){var r={};for(var o in this.attrs)this.attrs[N](o)&&(r[o]=this.attrs[o]);return this._.rt.deg&&(r.rotation=this.rotate()),(this._.sx!=1||this._.sy!=1)&&(r.scale=this.scale()),r.gradient&&r.fill=="none"&&(r.fill=r.gradient)&&delete r.gradient,r}if(e==null&&s.is(i,Gt))return i=="translation"?Jt.call(this):i=="rotation"?this.rotate():i=="scale"?this.scale():i==It&&this.attrs.fill=="none"&&this.attrs.gradient?this.attrs.gradient:this.attrs[i];if(e==null&&s.is(i,ct)){for(var T={},E=0,c=i.length;E<c;E++)T[i[E]]=this.attr(i[E]);return T}if(e!=null){var h={};h[i]=e}else i!=null&&s.is(i,"object")&&(h=i);for(var O in this.paper.customAttributes)if(this.paper.customAttributes[N](O)&&h[N](O)&&s.is(this.paper.customAttributes[O],"function")){var S=this.paper.customAttributes[O].apply(this,[][Y](h[O]));this.attrs[O]=h[O];for(var d in S)S[N](d)&&(h[d]=S[d])}return gt(this,h),this},V[l].toFront=function(){if(this.removed)return this;this.node.parentNode[x](this.node);var i=this.paper;return i.top!=this&&Ue(this,i),this},V[l].toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),Ge(this,this.paper),this.paper),this)},V[l].insertAfter=function(i){if(this.removed)return this;var e=i.node||i[i.length-1].node;return e.nextSibling?e.parentNode.insertBefore(this.node,e.nextSibling):e.parentNode[x](this.node),xe(this,i,this.paper),this},V[l].insertBefore=function(i){if(this.removed)return this;var e=i.node||i[0].node;return e.parentNode.insertBefore(this.node,e),Ce(this,i,this.paper),this},V[l].blur=function(i){var e=this;if(+i!=0){var r=D("filter"),o=D("feGaussianBlur");e.attrs.blur=i,r.id=Wt(),D(o,{stdDeviation:+i||1.5}),r.appendChild(o),e.paper.defs.appendChild(r),e._blur=r,D(e.node,{filter:"url(#"+r.id+")"})}else e._blur&&(e._blur.parentNode.removeChild(e._blur),delete e._blur,delete e.attrs.blur),e.node.removeAttribute("filter")};var Be=function(i,e,r,o){var T=D("circle");i.canvas&&i.canvas[x](T);var E=new V(T,i);return E.attrs={cx:e,cy:r,r:o,fill:"none",stroke:"#000"},E.type="circle",D(T,E.attrs),E},ve=function(i,e,r,o,T,E){var c=D("rect");i.canvas&&i.canvas[x](c);var h=new V(c,i);return h.attrs={x:e,y:r,width:o,height:T,r:E||0,rx:E||0,ry:E||0,fill:"none",stroke:"#000"},h.type="rect",D(c,h.attrs),h},De=function(i,e,r,o,T){var E=D("ellipse");i.canvas&&i.canvas[x](E);var c=new V(E,i);return c.attrs={cx:e,cy:r,rx:o,ry:T,fill:"none",stroke:"#000"},c.type="ellipse",D(E,c.attrs),c},Xe=function(i,e,r,o,T,E,c="none"){var h=D("image");D(h,{x:r,y:o,width:T,height:E,preserveAspectRatio:c}),h.setAttributeNS(i.xlink,"href",e),i.canvas&&i.canvas[x](h);var O=new V(h,i);return O.attrs={x:r,y:o,width:T,height:E,src:e},O.type="image",O},Me=function(i,e,r,o){var T=D("text");D(T,{x:e,y:r,"text-anchor":"middle"}),i.canvas&&i.canvas[x](T);var E=new V(T,i);return E.attrs={x:e,y:r,"text-anchor":"middle",text:o,font:$t.font,stroke:"none",fill:"#000"},E.type="text",gt(E,E.attrs),E},be=function(i,e){return this.width=i||this.width,this.height=e||this.height,this.canvas[Ot]("width",this.width),this.canvas[Ot]("height",this.height),this},he=function(){var i=ge[v](0,arguments),e=i&&i.container,r=i.x,o=i.y,T=i.width,E=i.height;if(!e)throw new Error("SVG container not found.");var c=D("svg");return r=r||0,o=o||0,T=T||512,E=E||342,D(c,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:T,height:E}),e==1?(c.style.cssText="position:absolute;left:"+r+"px;top:"+o+"px",u.body[x](c)):e.firstChild?e.insertBefore(c,e.firstChild):e[x](c),e=new w,e.width=T,e.height=E,e.canvas=c,oe.call(e,e,s.fn),e.clear(),e};I.clear=function(){for(var i=this.canvas;i.firstChild;)i.removeChild(i.firstChild);this.bottom=this.top=null,(this.desc=D("desc"))[x](u.createTextNode("Created with Raphaël")),i[x](this.desc),i[x](this.defs=D("defs"))},I.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var i in this)this[i]=Le(i)}}if(s.vml){let i=function(e,r,o,T,E){return E?s.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",e+E,r,o-E*2,E,-E,T-E*2,E*2-o,E*2-T):s.format("M{0},{1}l{2},0,0,{3},{4},0z",e,r,o,T,-o)};var He={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},Oi=/([clmz]),?([^clmz]*)/gi,Si=/ progid:\S+Blur\([^\)]+\)/g,Ni=/-?[^,\s-]+/g,bt=1e3+K+1e3,Bt=10,Ht={path:1,rect:1},ui=function(e){var r=/[ahqstv]/ig,o=Xt;if(k(e).match(r)&&(o=Qt),r=/[clmz]/g,o==Xt&&!k(e).match(r)){var T=k(e)[nt](Oi,function(A,G,p){var m=[],R=Ut.call(G)=="m",B=He[G];return p[nt](Ni,function(F){R&&m[C]==2&&(B+=m+He[G=="m"?"l":"L"],m=[]),m[Q](rt(F*Bt))}),B+m});return T}var E=o(e),c,h;T=[];for(var O=0,S=E[C];O<S;O++){c=E[O],h=Ut.call(E[O][0]),h=="z"&&(h="x");for(var d=1,U=c[C];d<U;d++)h+=rt(c[d]*Bt)+(d!=U-1?",":y);T[Q](h)}return T[it](K)};s[ft]=function(){return`Your browser doesn’t support SVG. Falling down to VML.
You are running Raphaël `+this.version},Fe=function(e,r){var o=ot("group");o.style.cssText="position:absolute;left:0;top:0;width:"+r.width+"px;height:"+r.height+"px",o.coordsize=r.coordsize,o.coordorigin=r.coordorigin;var T=ot("shape"),E=T.style;E.width=r.width+"px",E.height=r.height+"px",T.coordsize=bt,T.coordorigin=r.coordorigin,o[x](T);var c=new V(T,o,r),h={fill:"none",stroke:"#000"};return e&&(h.path=e),c.type="path",c.path=[],c.Path=y,gt(c,h),r.canvas[x](o),c},gt=function(e,r){e.attrs=e.attrs||{};var o=e.node,T=e.attrs,E=o.style,c,h=(r.x!=T.x||r.y!=T.y||r.width!=T.width||r.height!=T.height||r.r!=T.r)&&e.type=="rect",O=e;for(var S in r)r[N](S)&&(T[S]=r[S]);if(h&&(T.path=i(T.x,T.y,T.width,T.height,T.r),e.X=T.x,e.Y=T.y,e.W=T.width,e.H=T.height),r.href&&(o.href=r.href),r.title&&(o.title=r.title),r.target&&(o.target=r.target),r.cursor&&(E.cursor=r.cursor),"blur"in r&&e.blur(r.blur),(r.path&&e.type=="path"||h)&&(o.path=ui(T.path)),r.rotation!=null&&e.rotate(r.rotation,!0),r.translation&&(c=k(r.translation)[tt](t),Jt.call(e,c[0],c[1]),e._.rt.cx!=null&&(e._.rt.cx+=+c[0],e._.rt.cy+=+c[1],e.setBox(e.attrs,c[0],c[1]))),r.scale&&(c=k(r.scale)[tt](t),e.scale(+c[0]||1,+c[1]||+c[0]||1,+c[2]||null,+c[3]||null)),"clip-rect"in r){var d=k(r["clip-rect"])[tt](t);if(d[C]==4){d[2]=+d[2]+ +d[0],d[3]=+d[3]+ +d[1];var U=o.clipRect||u.createElement("div"),A=U.style,G=o.parentNode;A.clip=s.format("rect({1}px {2}px {3}px {0}px)",d),o.clipRect||(A.position="absolute",A.top=0,A.left=0,A.width=e.paper.width+"px",A.height=e.paper.height+"px",G.parentNode.insertBefore(U,G),U[x](G),o.clipRect=U)}r["clip-rect"]||o.clipRect&&(o.clipRect.style.clip=y)}if(e.type=="image"&&r.src&&(o.src=r.src),e.type=="image"&&r.opacity&&(o.filterOpacity=ie+".Alpha(opacity="+r.opacity*100+")",E.filter=(o.filterMatrix||y)+(o.filterOpacity||y)),r.font&&(E.font=r.font),r["font-family"]&&(E.fontFamily='"'+r["font-family"][tt](",")[0][nt](/^['"]+|['"]+$/g,y)+'"'),r["font-size"]&&(E.fontSize=r["font-size"]),r["font-weight"]&&(E.fontWeight=r["font-weight"]),r["font-style"]&&(E.fontStyle=r["font-style"]),r.opacity!=null||r["stroke-width"]!=null||r.fill!=null||r.stroke!=null||r["stroke-width"]!=null||r["stroke-opacity"]!=null||r["fill-opacity"]!=null||r["stroke-dasharray"]!=null||r["stroke-miterlimit"]!=null||r["stroke-linejoin"]!=null||r["stroke-linecap"]!=null){o=e.shape||o;var p=o.getElementsByTagName(It)&&o.getElementsByTagName(It)[0],m=!1;if(!p&&(m=p=ot(It)),"fill-opacity"in r||"opacity"in r){var R=((+T["fill-opacity"]+1||2)-1)*((+T.opacity+1||2)-1)*((+s.getRGB(r.fill).o+1||2)-1);R=dt(Tt(R,0),1),p.opacity=R}if(r.fill&&(p.on=!0),(p.on==null||r.fill=="none")&&(p.on=!1),p.on&&r.fill){var B=r.fill.match(fe);B?(p.src=B[1],p.type="tile"):(p.color=s.getRGB(r.fill).hex,p.src=y,p.type="solid",s.getRGB(r.fill).error&&(O.type in{circle:1,ellipse:1}||k(r.fill).charAt()!="r")&&Mt(O,r.fill)&&(T.fill="none",T.gradient=r.fill))}m&&o[x](p);var F=o.getElementsByTagName("stroke")&&o.getElementsByTagName("stroke")[0],H=!1;!F&&(H=F=ot("stroke")),(r.stroke&&r.stroke!="none"||r["stroke-width"]||r["stroke-opacity"]!=null||r["stroke-dasharray"]||r["stroke-miterlimit"]||r["stroke-linejoin"]||r["stroke-linecap"])&&(F.on=!0),(r.stroke=="none"||F.on==null||r.stroke==0||r["stroke-width"]==0)&&(F.on=!1);var M=s.getRGB(r.stroke);F.on&&r.stroke&&(F.color=M.hex),R=((+T["stroke-opacity"]+1||2)-1)*((+T.opacity+1||2)-1)*((+M.o+1||2)-1);var z=($(r["stroke-width"])||1)*.75;if(R=dt(Tt(R,0),1),r["stroke-width"]==null&&(z=T["stroke-width"]),r["stroke-width"]&&(F.weight=z),z&&z<1&&(R*=z)&&(F.weight=1),F.opacity=R,r["stroke-linejoin"]&&(F.joinstyle=r["stroke-linejoin"]||"miter"),F.miterlimit=r["stroke-miterlimit"]||8,r["stroke-linecap"]&&(F.endcap=r["stroke-linecap"]=="butt"?"flat":r["stroke-linecap"]=="square"?"square":"round"),r["stroke-dasharray"]){var j={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};F.dashstyle=j[N](r["stroke-dasharray"])?j[r["stroke-dasharray"]]:y}H&&o[x](F)}if(O.type=="text")switch(E=O.paper.span.style,T.font&&(E.font=T.font),T["font-family"]&&(E.fontFamily=T["font-family"]),T["font-size"]&&(E.fontSize=T["font-size"]),T["font-weight"]&&(E.fontWeight=T["font-weight"]),T["font-style"]&&(E.fontStyle=T["font-style"]),O.node.string&&(O.paper.span.innerHTML=k(O.node.string)[nt](/</g,"&#60;")[nt](/&/g,"&#38;")[nt](/\n/g,"<br>")),O.W=T.w=O.paper.span.offsetWidth,O.H=T.h=O.paper.span.offsetHeight,O.X=T.x,O.Y=T.y+rt(O.H/2),T["text-anchor"]){case"start":O.node.style["v-text-align"]="left",O.bbx=rt(O.W/2);break;case"end":O.node.style["v-text-align"]="right",O.bbx=-rt(O.W/2);break;default:O.node.style["v-text-align"]="center";break}},Mt=function(e,r){e.attrs=e.attrs||{},e.attrs;var o,T="linear",E=".5 .5";if(e.attrs.gradient=r,r=k(r)[nt](Re,function(U,A,G){return T="radial",A&&G&&(A=$(A),G=$(G),J(A-.5,2)+J(G-.5,2)>.25&&(G=P.sqrt(.25-J(A-.5,2))*((G>.5)*2-1)+.5),E=A+K+G),y}),r=r[tt](/\s*\-\s*/),T=="linear"){var c=r.shift();if(c=-$(c),isNaN(c))return null}var h=Ae(r);if(!h)return null;if(e=e.shape||e.node,o=e.getElementsByTagName(It)[0]||ot(It),!o.parentNode&&e.appendChild(o),h[C]){o.on=!0,o.method="none",o.color=h[0].color,o.color2=h[h[C]-1].color;for(var O=[],S=0,d=h[C];S<d;S++)h[S].offset&&O[Q](h[S].offset+K+h[S].color);o.colors&&(o.colors.value=O[C]?O[it]():"0% "+o.color),T=="radial"?(o.type="gradientradial",o.focus="100%",o.focussize=E,o.focusposition=E):(o.type="gradient",o.angle=(270-c)%360)}return 1},V=function(e,r,o){this[0]=e,this.id=s._oid++,this.node=e,e.raphael=this,this.X=0,this.Y=0,this.attrs={},this.Group=r,this.paper=o,this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1},!o.bottom&&(o.bottom=this),this.prev=o.top,o.top&&(o.top.next=this),o.top=this,this.next=null},W=V[l],W.rotate=function(e,r,o){return this.removed?this:e==null?this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][it](K):this._.rt.deg:(e=k(e)[tt](t),e[C]-1&&(r=$(e[1]),o=$(e[2])),e=$(e[0]),r!=null?this._.rt.deg=e:this._.rt.deg+=e,o==null&&(r=null),this._.rt.cx=r,this._.rt.cy=o,this.setBox(this.attrs,r,o),this.Group.style.rotation=this._.rt.deg,this)},W.setBox=function(e,r,o){if(this.removed)return this;var T=this.Group.style,E=this.shape&&this.shape.style||this.node.style;e=e||{};for(var c in e)e[N](c)&&(this.attrs[c]=e[c]);r=r||this._.rt.cx,o=o||this._.rt.cy;var h=this.attrs,O,S,d,U;switch(this.type){case"circle":O=h.cx-h.r,S=h.cy-h.r,d=U=h.r*2;break;case"ellipse":O=h.cx-h.rx,S=h.cy-h.ry,d=h.rx*2,U=h.ry*2;break;case"image":O=+h.x,S=+h.y,d=h.width||0,U=h.height||0;break;case"text":this.textpath.v=["m",rt(h.x),", ",rt(h.y-2),"l",rt(h.x)+1,", ",rt(h.y-2)][it](y),O=h.x-rt(this.W/2),S=h.y-this.H/2,d=this.W,U=this.H;break;case"rect":case"path":if(this.attrs.path){var A=Vt(this.attrs.path);O=A.x,S=A.y,d=A.width,U=A.height}else O=0,S=0,d=this.paper.width,U=this.paper.height;break;default:O=0,S=0,d=this.paper.width,U=this.paper.height;break}r=r??O+d/2,o=o??S+U/2;var G=r-this.paper.width/2,p=o-this.paper.height/2,m;T.left!=(m=G+"px")&&(T.left=m),T.top!=(m=p+"px")&&(T.top=m),this.X=Ht[N](this.type)?-G:O,this.Y=Ht[N](this.type)?-p:S,this.W=d,this.H=U,Ht[N](this.type)?(E.left!=(m=-G*Bt+"px")&&(E.left=m),E.top!=(m=-p*Bt+"px")&&(E.top=m)):this.type=="text"?(E.left!=(m=-G+"px")&&(E.left=m),E.top!=(m=-p+"px")&&(E.top=m)):(T.width!=(m=this.paper.width+"px")&&(T.width=m),T.height!=(m=this.paper.height+"px")&&(T.height=m),E.left!=(m=O-G+"px")&&(E.left=m),E.top!=(m=S-p+"px")&&(E.top=m),E.width!=(m=d+"px")&&(E.width=m),E.height!=(m=U+"px")&&(E.height=m))},W.hide=function(){return!this.removed&&(this.Group.style.display="none"),this},W.show=function(){return!this.removed&&(this.Group.style.display="block"),this},W.getBBox=function(){return this.removed?this:Ht[N](this.type)?Vt(this.attrs.path):{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}},W.remove=function(){if(!this.removed){yt(this,this.paper),this.node.parentNode.removeChild(this.node),this.Group.parentNode.removeChild(this.Group),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var e in this)delete this[e];this.removed=!0}},W.attr=function(e,r){if(this.removed)return this;if(e==null){var o={};for(var T in this.attrs)this.attrs[N](T)&&(o[T]=this.attrs[T]);return this._.rt.deg&&(o.rotation=this.rotate()),(this._.sx!=1||this._.sy!=1)&&(o.scale=this.scale()),o.gradient&&o.fill=="none"&&(o.fill=o.gradient)&&delete o.gradient,o}if(r==null&&s.is(e,"string"))return e=="translation"?Jt.call(this):e=="rotation"?this.rotate():e=="scale"?this.scale():e==It&&this.attrs.fill=="none"&&this.attrs.gradient?this.attrs.gradient:this.attrs[e];if(this.attrs&&r==null&&s.is(e,ct)){var E,c={};for(T=0,E=e[C];T<E;T++)c[e[T]]=this.attr(e[T]);return c}var h;if(r!=null&&(h={},h[e]=r),r==null&&s.is(e,"object")&&(h=e),h){for(var O in this.paper.customAttributes)if(this.paper.customAttributes[N](O)&&h[N](O)&&s.is(this.paper.customAttributes[O],"function")){var S=this.paper.customAttributes[O].apply(this,[][Y](h[O]));this.attrs[O]=h[O];for(var d in S)S[N](d)&&(h[d]=S[d])}h.text&&this.type=="text"&&(this.node.string=h.text),gt(this,h),h.gradient&&({circle:1,ellipse:1}[N](this.type)||k(h.gradient).charAt()!="r")&&Mt(this,h.gradient),(!Ht[N](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this},W.toFront=function(){return!this.removed&&this.Group.parentNode[x](this.Group),this.paper.top!=this&&Ue(this,this.paper),this},W.toBack=function(){return this.removed?this:(this.Group.parentNode.firstChild!=this.Group&&(this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild),Ge(this,this.paper)),this)},W.insertAfter=function(e){return this.removed?this:(e.constructor==lt&&(e=e[e.length-1]),e.Group.nextSibling?e.Group.parentNode.insertBefore(this.Group,e.Group.nextSibling):e.Group.parentNode[x](this.Group),xe(this,e,this.paper),this)},W.insertBefore=function(e){return this.removed?this:(e.constructor==lt&&(e=e[0]),e.Group.parentNode.insertBefore(this.Group,e.Group),Ce(this,e,this.paper),this)},W.blur=function(e){var r=this.node.runtimeStyle,o=r.filter;o=o.replace(Si,y),+e!=0?(this.attrs.blur=e,r.filter=o+K+ie+".Blur(pixelradius="+(+e||1.5)+")",r.margin=s.format("-{0}px 0 0 -{0}px",rt(+e||1.5))):(r.filter=o,r.margin=0,delete this.attrs.blur)},Be=function(e,r,o,T){var E=ot("group"),c=ot("oval");c.style,E.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",E.coordsize=bt,E.coordorigin=e.coordorigin,E[x](c);var h=new V(c,E,e);return h.type="circle",gt(h,{stroke:"#000",fill:"none"}),h.attrs.cx=r,h.attrs.cy=o,h.attrs.r=T,h.setBox({x:r-T,y:o-T,width:T*2,height:T*2}),e.canvas[x](E),h},ve=function(e,r,o,T,E,c){var h=i(r,o,T,E,c),O=e.path(h),S=O.attrs;return O.X=S.x=r,O.Y=S.y=o,O.W=S.width=T,O.H=S.height=E,S.r=c,S.path=h,O.type="rect",O},De=function(e,r,o,T,E){var c=ot("group"),h=ot("oval");h.style,c.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",c.coordsize=bt,c.coordorigin=e.coordorigin,c[x](h);var O=new V(h,c,e);return O.type="ellipse",gt(O,{stroke:"#000"}),O.attrs.cx=r,O.attrs.cy=o,O.attrs.rx=T,O.attrs.ry=E,O.setBox({x:r-T,y:o-E,width:T*2,height:E*2}),e.canvas[x](c),O},Xe=function(e,r,o,T,E,c){var h=ot("group"),O=ot("image");h.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",h.coordsize=bt,h.coordorigin=e.coordorigin,O.src=r,h[x](O);var S=new V(O,h,e);return S.type="image",S.attrs.src=r,S.attrs.x=o,S.attrs.y=T,S.attrs.w=E,S.attrs.h=c,S.setBox({x:o,y:T,width:E,height:c}),e.canvas[x](h),S},Me=function(e,r,o,T){var E=ot("group"),c=ot("shape"),h=c.style,O=ot("path");O.style;var S=ot("textpath");E.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",E.coordsize=bt,E.coordorigin=e.coordorigin,O.v=s.format("m{0},{1}l{2},{1}",rt(r*10),rt(o*10),rt(r*10)+1),O.textpathok=!0,h.width=e.width,h.height=e.height,S.string=k(T),S.on=!0,c[x](S),c[x](O),E[x](c);var d=new V(S,E,e);return d.shape=c,d.textpath=O,d.type="text",d.attrs.text=T,d.attrs.x=r,d.attrs.y=o,d.attrs.w=1,d.attrs.h=1,gt(d,{font:$t.font,stroke:"none",fill:"#000"}),d.setBox(),e.canvas[x](E),d},be=function(e,r){var o=this.canvas.style;return e==+e&&(e+="px"),r==+r&&(r+="px"),o.width=e,o.height=r,o.clip="rect(0 "+e+" "+r+" 0)",this};var ot;u.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!u.namespaces.rvml&&u.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),ot=function(e){return u.createElement("<rvml:"+e+' class="rvml">')}}catch{ot=function(e){return u.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}he=function(){var e=ge[v](0,arguments),r=e.container,o=e.height,T=e.width,E=e.x,c=e.y;if(!r)throw new Error("VML container not found.");var h=new w,O=h.canvas=u.createElement("div"),S=O.style;return E=E||0,c=c||0,T=T||512,o=o||342,T==+T&&(T+="px"),o==+o&&(o+="px"),h.width=1e3,h.height=1e3,h.coordsize=Bt*1e3+K+Bt*1e3,h.coordorigin="0 0",h.span=u.createElement("span"),h.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",O[x](h.span),S.cssText=s.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",T,o),r==1?(u.body[x](O),S.left=E+"px",S.top=c+"px",S.position="absolute"):r.firstChild?r.insertBefore(O,r.firstChild):r[x](O),oe.call(h,h,s.fn),h},I.clear=function(){this.canvas.innerHTML=y,this.span=u.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas[x](this.span),this.bottom=this.top=null},I.remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]=Le(e);return!0}}var Ye=navigator.userAgent.match(/Version\\x2f(.*?)\s/);navigator.vendor=="Apple Computer, Inc."&&(Ye&&Ye[1]<4||navigator.platform.slice(0,2)=="iP")?I.safari=function(){var i=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});L.setTimeout(function(){i.remove()})}:I.safari=function(){};for(var di=function(){this.returnValue=!1},fi=function(){return this.originalEvent.preventDefault()},Ri=function(){this.cancelBubble=!0},mi=function(){return this.originalEvent.stopPropagation()},Ii=function(){{if(u.addEventListener)return function(i,e,r,o){var T=Z&&ee[e]?ee[e]:e,E=function(c){if(Z&&ee[N](e)){for(var h=0,O=c.targetTouches&&c.targetTouches.length;h<O;h++)if(c.targetTouches[h].target==i){var S=c;c=c.targetTouches[h],c.originalEvent=S,c.preventDefault=fi,c.stopPropagation=mi;break}}return r.call(o,c)};return i.addEventListener(T,E,!1),function(){return i.removeEventListener(T,E,!1),!0}};if(u.attachEvent)return function(i,e,r,o){var T=function(c){return c=c||L.event,c.preventDefault=c.preventDefault||di,c.stopPropagation=c.stopPropagation||Ri,r.call(o,c)};i.attachEvent("on"+e,T);var E=function(){return i.detachEvent("on"+e,T),!0};return E}}}(),Nt=[],_e=function(i){for(var e=i.clientX,r=i.clientY,o=u.documentElement.scrollTop||u.body.scrollTop,T=u.documentElement.scrollLeft||u.body.scrollLeft,E,c=Nt.length;c--;){if(E=Nt[c],Z){for(var h=i.touches.length,O;h--;)if(O=i.touches[h],O.identifier==E.el._drag.id){e=O.clientX,r=O.clientY,(i.originalEvent?i.originalEvent:i).preventDefault();break}}else i.preventDefault();e+=T,r+=o,E.move&&E.move.call(E.move_scope||E.el,e-E.el._drag.x,r-E.el._drag.y,e,r,i)}},Ee=function(i){s.unmousemove(_e).unmouseup(Ee);for(var e=Nt.length,r;e--;)r=Nt[e],r.el._drag={},r.end&&r.end.call(r.end_scope||r.start_scope||r.move_scope||r.el,i);Nt=[]},we=de[C];we--;)(function(i){s[i]=V[l][i]=function(e,r){return s.is(e,"function")&&(this.events=this.events||[],this.events.push({name:i,f:e,unbind:Ii(this.shape||this.node||u,i,e,r||this)})),this},s["un"+i]=V[l]["un"+i]=function(e){for(var r=this.events,o=r[C];o--;)if(r[o].name==i&&r[o].f==e)return r[o].unbind(),r.splice(o,1),!r.length&&delete this.events,this;return this}})(de[we]);W.hover=function(i,e,r,o){return this.mouseover(i,r).mouseout(e,o||r)},W.unhover=function(i,e){return this.unmouseover(i).unmouseout(e)},W.drag=function(i,e,r,o,T,E){return this._drag={},this.mousedown(function(c){(c.originalEvent||c).preventDefault();var h=u.documentElement.scrollTop||u.body.scrollTop,O=u.documentElement.scrollLeft||u.body.scrollLeft;this._drag.x=c.clientX+O,this._drag.y=c.clientY+h,this._drag.id=c.identifier,e&&e.call(T||o||this,c.clientX+O,c.clientY+h,c),!Nt.length&&s.mousemove(_e).mouseup(Ee),Nt.push({el:this,move:i,end:r,move_scope:o,start_scope:T,end_scope:E})}),this},W.undrag=function(i,e,r){for(var o=Nt.length;o--;)Nt[o].el==this&&Nt[o].move==i&&Nt[o].end==r&&Nt.splice(o++,1);!Nt.length&&s.unmousemove(_e).unmouseup(Ee)},I.circle=function(i,e,r){return Be(this,i||0,e||0,r||0)},I.rect=function(i,e,r,o,T){return ve(this,i||0,e||0,r||0,o||0,T||0)},I.ellipse=function(i,e,r,o){return De(this,i||0,e||0,r||0,o||0)},I.path=function(i){return i&&!s.is(i,Gt)&&!s.is(i[0],ct)&&(i+=y),Fe(s.format[v](s,arguments),this)},I.image=function(i,e,r,o,T,E){return Xe(this,i||"about:blank",e||0,r||0,o||0,T||0,E)},I.text=function(i,e,r){return Me(this,i||0,e||0,k(r))},I.set=function(i){return arguments[C]>1&&(i=Array[l].splice.call(arguments,0,arguments[C])),new lt(i)},I.setSize=be,I.top=I.bottom=null,I.raphael=s;function $e(){return this.x+K+this.y}W.resetScale=function(){if(this.removed)return this;this._.sx=1,this._.sy=1,this.attrs.scale="1 1"},W.scale=function(i,e,r,o){if(this.removed)return this;if(i==null&&e==null)return{x:this._.sx,y:this._.sy,toString:$e};e=e||i,!+e&&(e=i);var T,E,c=this.attrs;if(i!=0){var h=this.getBBox(),O=h.x+h.width/2,S=h.y+h.height/2,d=et(i/this._.sx),U=et(e/this._.sy);r=+r||r==0?r:O,o=+o||o==0?o:S;var A=this._.sx>0,G=this._.sy>0,p=~~(i/et(i)),m=~~(e/et(e)),R=d*p,B=U*m,F=this.node.style,H=r+et(O-r)*R*(O>r==A?1:-1),M=o+et(S-o)*B*(S>o==G?1:-1),z=i*p>e*m?U:d;switch(this.type){case"rect":case"image":var j=c.width*d,q=c.height*U;this.attr({height:q,r:c.r*z,width:j,x:H-j/2,y:M-q/2});break;case"circle":case"ellipse":this.attr({rx:c.rx*d,ry:c.ry*U,r:c.r*z,cx:H,cy:M});break;case"text":this.attr({x:H,y:M});break;case"path":for(var b=ae(c.path),ht=!0,at=A?R:d,mt=G?B:U,At=0,xt=b[C];At<xt;At++){var _t=b[At],vt=Yt.call(_t[0]);{if(vt=="M"&&ht)continue;ht=!1}if(vt=="A")_t[b[At][C]-2]*=at,_t[b[At][C]-1]*=mt,_t[1]*=d,_t[2]*=U,_t[5]=+(p+m?!!+_t[5]:!+_t[5]);else if(vt=="H")for(var St=1,Ct=_t[C];St<Ct;St++)_t[St]*=at;else if(vt=="V")for(St=1,Ct=_t[C];St<Ct;St++)_t[St]*=mt;else for(St=1,Ct=_t[C];St<Ct;St++)_t[St]*=St%2?at:mt}var Ft=Vt(b);T=H-Ft.x-Ft.width/2,E=M-Ft.y-Ft.height/2,b[0][1]+=T,b[0][2]+=E,this.attr({path:b});break}this.type in{text:1,image:1}&&(p!=1||m!=1)?this.transformations?(this.transformations[2]="scale("[Y](p,",",m,")"),this.node[Ot]("transform",this.transformations[it](K)),T=p==-1?-c.x-(j||0):c.x,E=m==-1?-c.y-(q||0):c.y,this.attr({x:T,y:E}),c.fx=p-1,c.fy=m-1):(this.node.filterMatrix=ie+".Matrix(M11="[Y](p,", M12=0, M21=0, M22=",m,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')"),F.filter=(this.node.filterMatrix||y)+(this.node.filterOpacity||y)):this.transformations?(this.transformations[2]=y,this.node[Ot]("transform",this.transformations[it](K)),c.fx=0,c.fy=0):(this.node.filterMatrix=y,F.filter=(this.node.filterMatrix||y)+(this.node.filterOpacity||y)),c.scale=[i,e,r,o][it](K),this._.sx=i,this._.sy=e}return this},W.clone=function(){if(this.removed)return null;var i=this.attr();return delete i.scale,delete i.translation,this.paper[this.type]().attr(i)};var ce={},qt=function(i,e,r,o,T,E,c,h,O){var S=0,d=100,U=[i,e,r,o,T,E,c,h].join(),A=ce[U],G,p;if(!A&&(ce[U]=A={data:[]}),A.timer&&clearTimeout(A.timer),A.timer=setTimeout(function(){delete ce[U]},2e3),O!=null){var m=qt(i,e,r,o,T,E,c,h);d=~~m*10}for(var R=0;R<d+1;R++){if(A.data[O]>R?p=A.data[R*d]:(p=s.findDotsAtSegment(i,e,r,o,T,E,c,h,R/d),A.data[R]=p),R&&(S+=J(J(G.x-p.x,2)+J(G.y-p.y,2),.5)),O!=null&&S>=O)return p;G=p}if(O==null)return S},le=function(i,e){return function(r,o,T){r=Qt(r);for(var E,c,h,O,S="",d={},U,A=0,G=0,p=r.length;G<p;G++){if(h=r[G],h[0]=="M")E=+h[1],c=+h[2];else{if(O=qt(E,c,h[1],h[2],h[3],h[4],h[5],h[6]),A+O>o){if(e&&!d.start){if(U=qt(E,c,h[1],h[2],h[3],h[4],h[5],h[6],o-A),S+=["C",U.start.x,U.start.y,U.m.x,U.m.y,U.x,U.y],T)return S;d.start=S,S=["M",U.x,U.y+"C",U.n.x,U.n.y,U.end.x,U.end.y,h[5],h[6]][it](),A+=O,E=+h[5],c=+h[6];continue}if(!i&&!e)return U=qt(E,c,h[1],h[2],h[3],h[4],h[5],h[6],o-A),{x:U.x,y:U.y,alpha:U.alpha}}A+=O,E=+h[5],c=+h[6]}S+=h}return d.end=S,U=i?A:e?d:s.findDotsAtSegment(E,c,h[1],h[2],h[3],h[4],h[5],h[6],1),U.alpha&&(U={x:U.x,y:U.y,alpha:U.alpha}),U}},ke=le(1),Zt=le(),Oe=le(0,1);W.getTotalLength=function(){if(this.type=="path")return this.node.getTotalLength?this.node.getTotalLength():ke(this.attrs.path)},W.getPointAtLength=function(i){if(this.type=="path")return Zt(this.attrs.path,i)},W.getSubpath=function(i,e){if(this.type=="path"){if(et(this.getTotalLength()-e)<"1e-6")return Oe(this.attrs.path,i).end;var r=Oe(this.attrs.path,e,1);return i?Oe(r,i).end:r}},s.easing_formulas={linear:function(i){return i},"<":function(i){return J(i,3)},">":function(i){return J(i-1,3)+1},"<>":function(i){return i=i*2,i<1?J(i,3)/2:(i-=2,(J(i,3)+2)/2)},backIn:function(i){var e=1.70158;return i*i*((e+1)*i-e)},backOut:function(i){i=i-1;var e=1.70158;return i*i*((e+1)*i+e)+1},elastic:function(i){if(i==0||i==1)return i;var e=.3,r=e/4;return J(2,-10*i)*P.sin((i-r)*(2*Et)/e)+1},bounce:function(i){var e=7.5625,r=2.75,o;return i<1/r?o=e*i*i:i<2/r?(i-=1.5/r,o=e*i*i+.75):i<2.5/r?(i-=2.25/r,o=e*i*i+.9375):(i-=2.625/r,o=e*i*i+.984375),o}};var ut=[],We=function(){for(var i=+new Date,e=0;e<ut[C];e++){var r=ut[e];if(!(r.stop||r.el.removed)){var o=i-r.start,T=r.ms,E=r.easing,c=r.from,h=r.diff,O=r.to,S=r.t,d=r.el,U={},A;if(o<T){var G=E(o/T);for(var p in c)if(c[N](p)){switch(se[p]){case"along":A=G*T*h[p],O.back&&(A=O.len-A);var m=Zt(O[p],A);d.translate(h.sx-h.x||0,h.sy-h.y||0),h.x=m.x,h.y=m.y,d.translate(m.x-h.sx,m.y-h.sy),O.rot&&d.rotate(h.r+m.alpha,m.x,m.y);break;case st:A=+c[p]+G*T*h[p];break;case"colour":A="rgb("+[Se(rt(c[p].r+G*T*h[p].r)),Se(rt(c[p].g+G*T*h[p].g)),Se(rt(c[p].b+G*T*h[p].b))][it](",")+")";break;case"path":A=[];for(var R=0,B=c[p][C];R<B;R++){A[R]=[c[p][R][0]];for(var F=1,H=c[p][R][C];F<H;F++)A[R][F]=+c[p][R][F]+G*T*h[p][R][F];A[R]=A[R][it](K)}A=A[it](K);break;case"csv":switch(p){case"translation":var M=G*T*h[p][0]-S.x,z=G*T*h[p][1]-S.y;S.x+=M,S.y+=z,A=M+K+z;break;case"rotation":A=+c[p][0]+G*T*h[p][0],c[p][1]&&(A+=","+c[p][1]+","+c[p][2]);break;case"scale":A=[+c[p][0]+G*T*h[p][0],+c[p][1]+G*T*h[p][1],2 in O[p]?O[p][2]:y,3 in O[p]?O[p][3]:y][it](K);break;case"clip-rect":for(A=[],R=4;R--;)A[R]=+c[p][R]+G*T*h[p][R];break}break;default:var j=[].concat(c[p]);for(A=[],R=d.paper.customAttributes[p].length;R--;)A[R]=+j[R]+G*T*h[p][R];break}U[p]=A}d.attr(U),d._run&&d._run.call(d)}else O.along&&(m=Zt(O.along,O.len*!O.back),d.translate(h.sx-(h.x||0)+m.x-h.sx,h.sy-(h.y||0)+m.y-h.sy),O.rot&&d.rotate(h.r+m.alpha,m.x,m.y)),(S.x||S.y)&&d.translate(-S.x,-S.y),O.scale&&(O.scale+=y),d.attr(O),ut.splice(e--,1)}}s.svg&&d&&d.paper&&d.paper.safari(),ut[C]&&setTimeout(We)},pi=function(i,e,r,o,T){var E=r-o;e.timeouts.push(setTimeout(function(){s.is(T,"function")&&T.call(e),e.animate(i,E,i.easing)},o))},Se=function(i){return Tt(dt(i,255),0)},Jt=function(i,e){if(i==null)return{x:this._.tx,y:this._.ty,toString:$e};switch(this._.tx+=+i,this._.ty+=+e,this.type){case"circle":case"ellipse":this.attr({cx:+i+this.attrs.cx,cy:+e+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+i+this.attrs.x,y:+e+this.attrs.y});break;case"path":var r=ae(this.attrs.path);r[0][1]+=+i,r[0][2]+=+e,this.attr({path:r});break}return this};W.animateWith=function(i,e,r,o,T){for(var E=0,c=ut.length;E<c;E++)ut[E].el.id==i.id&&(e.start=ut[E].start);return this.animate(e,r,o,T)},W.animateAlong=Pe(),W.animateAlongBack=Pe(1);function Pe(i){return function(e,r,o,T){var E={back:i};return s.is(o,"function")?T=o:E.rot=o,e&&e.constructor==V&&(e=e.attrs.path),e&&(E.along=e),this.animate(E,r,T)}}function Ai(i,e,r,o,T,E){var c=3*e,h=3*(o-e)-c,O=1-c-h,S=3*r,d=3*(T-r)-S,U=1-S-d;function A(m){return((O*m+h)*m+c)*m}function G(m,R){var B=p(m,R);return((U*B+d)*B+S)*B}function p(m,R){var B,F,H,M,z,j;for(H=m,j=0;j<8;j++){if(M=A(H)-m,et(M)<R)return H;if(z=(3*O*H+2*h)*H+c,et(z)<1e-6)break;H=H-M/z}if(B=0,F=1,H=m,H<B)return B;if(H>F)return F;for(;B<F;){if(M=A(H),et(M-m)<R)return H;m>M?B=H:F=H,H=(F-B)/2+B}return H}return G(i,1/(200*E))}W.onAnimation=function(i){return this._run=i||0,this},W.animate=function(i,e,r,o){var T=this;if(T.timeouts=T.timeouts||[],(s.is(r,"function")||!r)&&(o=r||null),T.removed)return o&&o.call(T),T;var E={},c={},h=!1,O={};for(var S in i)if(i[N](S)&&(se[N](S)||T.paper.customAttributes[N](S)))switch(h=!0,E[S]=T.attr(S),E[S]==null&&(E[S]=$t[S]),c[S]=i[S],se[S]){case"along":var d=ke(i[S]),U=Zt(i[S],d*!!i.back),A=T.getBBox();O[S]=d/e,O.tx=A.x,O.ty=A.y,O.sx=U.x,O.sy=U.y,c.rot=i.rot,c.back=i.back,c.len=d,i.rot&&(O.r=$(T.rotate())||0);break;case st:O[S]=(c[S]-E[S])/e;break;case"colour":E[S]=s.getRGB(E[S]);var G=s.getRGB(c[S]);O[S]={r:(G.r-E[S].r)/e,g:(G.g-E[S].g)/e,b:(G.b-E[S].b)/e};break;case"path":var p=Qt(E[S],c[S]);E[S]=p[0];var m=p[1];O[S]=[];for(var R=0,B=E[S][C];R<B;R++){O[S][R]=[0];for(var F=1,H=E[S][R][C];F<H;F++)O[S][R][F]=(m[R][F]-E[S][R][F])/e}break;case"csv":var M=k(i[S])[tt](t),z=k(E[S])[tt](t);switch(S){case"translation":E[S]=[0,0],O[S]=[M[0]/e,M[1]/e];break;case"rotation":E[S]=z[1]==M[1]&&z[2]==M[2]?z:[0,M[1],M[2]],O[S]=[(M[0]-E[S][0])/e,0,0];break;case"scale":i[S]=M,E[S]=k(E[S])[tt](t),O[S]=[(M[0]-E[S][0])/e,(M[1]-E[S][1])/e,0,0];break;case"clip-rect":for(E[S]=k(E[S])[tt](t),O[S]=[],R=4;R--;)O[S][R]=(M[R]-E[S][R])/e;break}c[S]=M;break;default:for(M=[].concat(i[S]),z=[].concat(E[S]),O[S]=[],R=T.paper.customAttributes[S][C];R--;)O[S][R]=((M[R]||0)-(z[R]||0))/e;break}if(h){var j=s.easing_formulas[r];if(!j)if(j=k(r).match(si),j&&j[C]==5){var q=j;j=function(mt){return Ai(mt,+q[1],+q[2],+q[3],+q[4],e)}}else j=function(mt){return mt};ut.push({start:i.start||+new Date,ms:e,easing:j,from:E,diff:O,to:c,el:T,t:{x:0,y:0}}),s.is(o,"function")&&(T._ac=setTimeout(function(){o.call(T)},e)),ut[C]==1&&setTimeout(We)}else{var b=[],ht;for(var at in i)i[N](at)&&ri.test(at)&&(S={value:i[at]},at=="from"&&(at=0),at=="to"&&(at=100),S.key=pt(at,10),b.push(S));for(b.sort(hi),b[0].key&&b.unshift({key:0,value:T.attrs}),R=0,B=b[C];R<B;R++)pi(b[R].value,T,e/100*b[R].key,e/100*(b[R-1]&&b[R-1].key||0),b[R-1]&&b[R-1].value.callback);ht=b[b[C]-1].value.callback,ht&&T.timeouts.push(setTimeout(function(){ht.call(T)},e))}return this},W.stop=function(){for(var i=0;i<ut.length;i++)ut[i].el.id==this.id&&ut.splice(i--,1);for(i=0,ii=this.timeouts&&this.timeouts.length;i<ii;i++)clearTimeout(this.timeouts[i]);return this.timeouts=[],clearTimeout(this._ac),delete this._ac,this},W.translate=function(i,e){return this.attr({translation:i+" "+e})},W[ft]=function(){return"Raphaël’s object"},s.ae=ut;var lt=function(i){if(this.items=[],this[C]=0,this.type="set",i)for(var e=0,r=i[C];e<r;e++)i[e]&&(i[e].constructor==V||i[e].constructor==lt)&&(this[this.items[C]]=this.items[this.items[C]]=i[e],this[C]++)};lt[l][Q]=function(){for(var i,e,r=0,o=arguments[C];r<o;r++)i=arguments[r],i&&(i.constructor==V||i.constructor==lt)&&(e=this.items[C],this[e]=this.items[e]=i,this[C]++);return this},lt[l].pop=function(){return delete this[this[C]--],this.items.pop()};for(var Ne in W)W[N](Ne)&&(lt[l][Ne]=function(i){return function(){for(var e=0,r=this.items[C];e<r;e++)this.items[e][i][v](this.items[e],arguments);return this}}(Ne));lt[l].attr=function(i,e){if(i&&s.is(i,ct)&&s.is(i[0],"object"))for(var r=0,o=i[C];r<o;r++)this.items[r].attr(i[r]);else for(var T=0,E=this.items[C];T<E;T++)this.items[T].attr(i,e);return this},lt[l].animate=function(i,e,r,o){(s.is(r,"function")||!r)&&(o=r||null);var T=this.items[C],E=T,c,h=this,O;for(o&&(O=function(){!--T&&o.call(h)}),r=s.is(r,Gt)?r:O,c=this.items[--E].animate(i,e,r,O);E--;)this.items[E]&&!this.items[E].removed&&this.items[E].animateWith(c,i,e,r,O);return this},lt[l].insertAfter=function(i){for(var e=this.items[C];e--;)this.items[e].insertAfter(i);return this},lt[l].getBBox=function(){for(var i=[],e=[],r=[],o=[],T=this.items[C];T--;){var E=this.items[T].getBBox();i[Q](E.x),e[Q](E.y),r[Q](E.x+E.width),o[Q](E.y+E.height)}return i=dt[v](0,i),e=dt[v](0,e),{x:i,y:e,width:Tt[v](0,r)-i,height:Tt[v](0,o)-e}},lt[l].clone=function(i){i=new lt;for(var e=0,r=this.items[C];e<r;e++)i[Q](this.items[e].clone());return i},s.registerFont=function(i){if(!i.face)return i;this.fonts=this.fonts||{};var e={w:i.w,face:{},glyphs:{}},r=i.face["font-family"];for(var o in i.face)i.face[N](o)&&(e.face[o]=i.face[o]);if(this.fonts[r]?this.fonts[r][Q](e):this.fonts[r]=[e],!i.svg){e.face["units-per-em"]=pt(i.face["units-per-em"],10);for(var T in i.glyphs)if(i.glyphs[N](T)){var E=i.glyphs[T];if(e.glyphs[T]={w:E.w,k:{},d:E.d&&"M"+E.d[nt](/[mlcxtrv]/g,function(h){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[h]||"M"})+"z"},E.k)for(var c in E.k)E[N](c)&&(e.glyphs[T].k[c]=E.k[c])}}return i},I.getFont=function(i,e,r,o){if(o=o||"normal",r=r||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400,!!s.fonts){var T=s.fonts[i];if(!T){var E=new RegExp("(^|\\s)"+i[nt](/[^\w\d\s+!~.:_-]/g,y)+"(\\s|$)","i");for(var c in s.fonts)if(s.fonts[N](c)&&E.test(c)){T=s.fonts[c];break}}var h;if(T)for(var O=0,S=T[C];O<S&&(h=T[O],!(h.face["font-weight"]==e&&(h.face["font-style"]==r||!h.face["font-style"])&&h.face["font-stretch"]==o));O++);return h}},I.print=function(i,e,r,o,T,E,c){E=E||"middle",c=Tt(dt(c||0,1),-1);var h=this.set(),O=k(r)[tt](y),S=0,d;if(s.is(o,r)&&(o=this.getFont(o)),o){d=(T||16)/o.face["units-per-em"];for(var U=o.face.bbox.split(t),A=+U[0],G=+U[1]+(E=="baseline"?U[3]-U[1]+ +o.face.descent:(U[3]-U[1])/2),p=0,m=O[C];p<m;p++){var R=p&&o.glyphs[O[p-1]]||{},B=o.glyphs[O[p]];S+=p?(R.w||o.w)+(R.k&&R.k[O[p]]||0)+o.w*c:0,B&&B.d&&h[Q](this.path(B.d).attr({fill:"#000",stroke:"none",translation:[S,0]}))}h.scale(d,d,A,G).translate(i-A,e-G)}return h},s.format=function(i,e){var r=s.is(e,ct)?[0][Y](e):arguments;return i&&s.is(i,Gt)&&r[C]-1&&(i=i[nt](_,function(o,T){return r[++T]==null?y:r[T]})),i||y},s.ninja=function(){return X.was?L.Raphael=X.is:window.Raphael=void 0,s},s.el=W,s.st=lt[l],X.was?L.Raphael=s:window.Raphael=s})();function g(s){return s instanceof HTMLElement}function a(){}const MAX_VIEWPORT_HEIGHT=932,MAX_VIEWPORT_WIDTH=640,adjustView=s=>{const t=window.innerHeight,n=window.innerWidth,_=MAX_VIEWPORT_WIDTH<n,l=MAX_VIEWPORT_HEIGHT<t,N=_?MAX_VIEWPORT_WIDTH+"px":"100%",u=l?MAX_VIEWPORT_HEIGHT+"px":"100%",L=_||l,X=L?"absolute":"static",w=L?"translate(-50%, -50%)":"none";return s.style.position=X,s.style.width=N,s.style.height=u,s.transform=w,s.getBoundingClientRect()},viewport=adjustView(document.querySelector("#extra")),HORIZONTAL_BASE=393,VERTICAL_BASE=852,BASE_RESULT_CHARS_NUMBER=6,{width:width$1,height:height$1}=viewport,calcSize=s=>{const t=width$1/HORIZONTAL_BASE;return s*t},calcVerticalSize=s=>{const t=height$1/VERTICAL_BASE;return s*t},calcResultFontSize=(s,t)=>{const n=calcSize(t),_=s.length,l=_>BASE_RESULT_CHARS_NUMBER?_:BASE_RESULT_CHARS_NUMBER;return n*BASE_RESULT_CHARS_NUMBER/l},{width:viewportWidth$4,height:viewportHeight$4}=viewport,DEBUG_MODE$2=new URLSearchParams(window.location.search).has("debug"),INTERACTION_MODES$1={TOUCH:"touch",SLICE:"slice"},INTERACTION_MODE$1=new URLSearchParams(window.location.search).has("touch")?INTERACTION_MODES$1.TOUCH:INTERACTION_MODES$1.SLICE,IS_TOUCH$1=INTERACTION_MODE$1===INTERACTION_MODES$1.TOUCH,SCORE_MULTIPLIER$1=50,FIRST_SAFE_FRUIT_NUMBER$2=10,FONT_FAMILY$1="lm",MODES$e={SHOW:"show",HIDE:"hide"},STATE_KEYS$4={CLICK_ENABLE:"click-enable",GAME_STATE:"game-state",SCENE_NAME:"scene-name",SCENE_STATE:"scene-state"},SCENE_STATES$2={READY:"ready",ENTERING:"entering",EXITING:"exiting"},GAME_STATES$1={PLAYING:"playing",OVER:"over"},SCENES$7={HOME_MENU:"home-menu",GAME_BODY:"game-body",GAME_OVER:"game-over",GAME_RESULT:"game-result",BRAND_INTRO:"brand-intro",BRAND_QUESTION:"brand-question"},LAYERS$p={PRELOAD:"preload",DEFAULT:"default",FRUIT:"fruit",JUICE:"juice",MASK:"mask",LIGHT:"light",FLASH:"flash",KNIFE:"knife",START_SCREEN:"start-screen",RESULT_SCREEN:"result-screen",BRAND_INTRO:"brand-intro",BRAND_QUESTION:"brand-question"},FRUIT_DROP_TIME=IS_TOUCH$1?2e3:1200,FRUIT_DROP_X_SCOPE=200,FRUIT_SHADOW_POS=50,FRUIT_TYPES={BOOM:"boom",PEACH:"peach",SANDIA:"sandia",APPLE:"apple",BANANA:"banana",BASAHA:"basaha"},FRUIT_JUICE_COLORS={[FRUIT_TYPES.BOOM]:null,[FRUIT_TYPES.PEACH]:"#e6c731",[FRUIT_TYPES.SANDIA]:"#c00",[FRUIT_TYPES.APPLE]:"#c8e925",[FRUIT_TYPES.BANANA]:"#e6c731",[FRUIT_TYPES.BASAHA]:"#c00"},FRUIT_IMAGES={[FRUIT_TYPES.BOOM]:"https://pmi-static.alvs.tech/ninja/default/images/fruit/boom.webp",[FRUIT_TYPES.PEACH]:"https://pmi-static.alvs.tech/ninja/default/images/fruit/mango.webp",[FRUIT_TYPES.SANDIA]:"https://pmi-static.alvs.tech/ninja/default/images/fruit/watermelon.webp",[FRUIT_TYPES.APPLE]:"https://pmi-static.alvs.tech/ninja/default/images/fruit/apple.webp",[FRUIT_TYPES.BANANA]:"https://pmi-static.alvs.tech/ninja/default/images/fruit/melon.webp",[FRUIT_TYPES.BASAHA]:"https://pmi-static.alvs.tech/ninja/default/images/fruit/raspberry.webp"},FRUIT_CUT_IMAGES={[FRUIT_TYPES.BOOM]:[],[FRUIT_TYPES.PEACH]:["https://pmi-static.alvs.tech/ninja/default/images/fruit/mango-1.webp","https://pmi-static.alvs.tech/ninja/default/images/fruit/mango-2.webp"],[FRUIT_TYPES.SANDIA]:["https://pmi-static.alvs.tech/ninja/default/images/fruit/watermelon-1.webp","https://pmi-static.alvs.tech/ninja/default/images/fruit/watermelon-2.webp"],[FRUIT_TYPES.APPLE]:["https://pmi-static.alvs.tech/ninja/default/images/fruit/apple-1.webp","https://pmi-static.alvs.tech/ninja/default/images/fruit/apple-2.webp"],[FRUIT_TYPES.BANANA]:["https://pmi-static.alvs.tech/ninja/default/images/fruit/melon-1.webp","https://pmi-static.alvs.tech/ninja/default/images/fruit/melon-2.webp"],[FRUIT_TYPES.BASAHA]:["https://pmi-static.alvs.tech/ninja/default/images/fruit/raspberry-1.webp","https://pmi-static.alvs.tech/ninja/default/images/fruit/raspberry-2.webp"]},FRUIT_SIZES={[FRUIT_TYPES.BOOM]:[calcSize(100),calcSize(100),calcSize(50)],[FRUIT_TYPES.PEACH]:[calcSize(100),calcSize(100),calcSize(50)],[FRUIT_TYPES.SANDIA]:[calcSize(100),calcSize(100),calcSize(50)],[FRUIT_TYPES.APPLE]:[calcSize(100),calcSize(100),calcSize(50)],[FRUIT_TYPES.BANANA]:[calcSize(100),calcSize(100),calcSize(50)],[FRUIT_TYPES.BASAHA]:[calcSize(100),calcSize(100),calcSize(50)]},FRUIT_FIX_ANGLE={[FRUIT_TYPES.BOOM]:-21,[FRUIT_TYPES.PEACH]:-50,[FRUIT_TYPES.SANDIA]:-100,[FRUIT_TYPES.APPLE]:-54,[FRUIT_TYPES.BANANA]:90,[FRUIT_TYPES.BASAHA]:-135},FRUIT_IS_REVERSE={[FRUIT_TYPES.BOOM]:0,[FRUIT_TYPES.PEACH]:0,[FRUIT_TYPES.SANDIA]:0,[FRUIT_TYPES.APPLE]:0,[FRUIT_TYPES.BANANA]:0,[FRUIT_TYPES.BASAHA]:0},FRUIT_INFOS={[FRUIT_TYPES.BOOM]:[FRUIT_IMAGES[FRUIT_TYPES.BOOM],...FRUIT_SIZES[FRUIT_TYPES.BOOM],FRUIT_FIX_ANGLE[FRUIT_TYPES.BOOM],FRUIT_IS_REVERSE[FRUIT_TYPES.BOOM],FRUIT_JUICE_COLORS[FRUIT_TYPES.BOOM]],[FRUIT_TYPES.PEACH]:[FRUIT_IMAGES[FRUIT_TYPES.PEACH],...FRUIT_SIZES[FRUIT_TYPES.PEACH],FRUIT_FIX_ANGLE[FRUIT_TYPES.PEACH],FRUIT_IS_REVERSE[FRUIT_TYPES.PEACH],FRUIT_JUICE_COLORS[FRUIT_TYPES.PEACH]],[FRUIT_TYPES.SANDIA]:[FRUIT_IMAGES[FRUIT_TYPES.SANDIA],...FRUIT_SIZES[FRUIT_TYPES.SANDIA],FRUIT_FIX_ANGLE[FRUIT_TYPES.SANDIA],FRUIT_IS_REVERSE[FRUIT_TYPES.SANDIA],FRUIT_JUICE_COLORS[FRUIT_TYPES.SANDIA]],[FRUIT_TYPES.APPLE]:[FRUIT_IMAGES[FRUIT_TYPES.APPLE],...FRUIT_SIZES[FRUIT_TYPES.APPLE],FRUIT_FIX_ANGLE[FRUIT_TYPES.APPLE],FRUIT_IS_REVERSE[FRUIT_TYPES.APPLE],FRUIT_JUICE_COLORS[FRUIT_TYPES.APPLE]],[FRUIT_TYPES.BANANA]:[FRUIT_IMAGES[FRUIT_TYPES.BANANA],...FRUIT_SIZES[FRUIT_TYPES.BANANA],FRUIT_FIX_ANGLE[FRUIT_TYPES.BANANA],FRUIT_IS_REVERSE[FRUIT_TYPES.BANANA],FRUIT_JUICE_COLORS[FRUIT_TYPES.BANANA]],[FRUIT_TYPES.BASAHA]:[FRUIT_IMAGES[FRUIT_TYPES.BASAHA],...FRUIT_SIZES[FRUIT_TYPES.BASAHA],FRUIT_FIX_ANGLE[FRUIT_TYPES.BASAHA],FRUIT_IS_REVERSE[FRUIT_TYPES.BASAHA],FRUIT_JUICE_COLORS[FRUIT_TYPES.BASAHA]]},FRUIT_SHADOW_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/shadow.webp",FRUIT_CONFIG$3={dropTime:FRUIT_DROP_TIME,dropXScope:FRUIT_DROP_X_SCOPE,shadowPos:FRUIT_SHADOW_POS,shadowImage:FRUIT_SHADOW_IMAGE,types:FRUIT_TYPES,infos:FRUIT_INFOS,cutImages:FRUIT_CUT_IMAGES,fruitSizes:FRUIT_SIZES},JUICE_DURATION=1500,JUICE_RADIUS=15,JUICE_NUMBER=10,JUICE_SHAPES={CIRCLE:"circle",SQUARE:"square",DIAMOND:"diamond",STAR:"star"},JUICE_CONFIG$1={duration:JUICE_DURATION,radius:JUICE_RADIUS,number:JUICE_NUMBER,shape:JUICE_SHAPES.DIAMOND,shapes:JUICE_SHAPES},BACKGROUND_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/background.webp",BACKGROUND_X=0,BACKGROUND_Y=0,BACKGROUND_WIDTH=viewportWidth$4||MAX_VIEWPORT_WIDTH,BACKGROUND_HEIGHT=viewportHeight$4||MAX_VIEWPORT_HEIGHT,BACKGROUND_CONFIG$1={image:BACKGROUND_IMAGE,x:BACKGROUND_X,y:BACKGROUND_Y,width:BACKGROUND_WIDTH,height:BACKGROUND_HEIGHT,preserveAspectRatio:"xMidYMid slice"},CONSOLE_X=16,CONSOLE_Y=0,CONSOLE_CONFIG$1={x:CONSOLE_X,y:CONSOLE_Y},MESSAGES$e={CLICK:"click",SLICE:"slice",TOUCH:"touch",FRUIT_FALL_OFF:"fruit.fallOff",FRUIT_FALL_OUT_OF_VIEWER:"fruit.fallOutOfViewer",FRUIT_REMOVE:"fruit.remove",HOME_MENU:"home-menu",SCENE_SWITCH_SCENE:"scene.switchScene",GAME_OVER:"game.over",OVER_WHITE_LIGHT_SHOW:"overWhiteLight.show",SLICE_AT:"slice.at",TOUCH_AT:"touch.at",START_GAME:"start.game",VIBRATE:"vibrate",TOGGLE_SOUND:"toggle.sound"},FLAME_RADIUS=5,SMOKE_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/smoke.png",FLAME_CONFIG={smokeImage:SMOKE_IMAGE,radius:FLAME_RADIUS},FLASH_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/flash.webp",FLASH_DURATION=100,FLASH_WIDTH=calcSize(358),FLASH_HEIGHT=calcSize(20),FLASH_CONFIG$1={image:FLASH_IMAGE,duration:FLASH_DURATION,width:FLASH_WIDTH,height:FLASH_HEIGHT},FPS_PREFIX="FPS: ",FPS_FILL="#fff",FPS_X=4,FPS_Y=viewportHeight$4-10,FPS_CONFIG$1={prefix:FPS_PREFIX,fill:FPS_FILL,x:FPS_X,y:FPS_Y},GAME_OVER_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/game-over.webp",GAME_OVER_HEIGHT=calcSize(145),GAME_OVER_WIDTH=calcSize(250),GAME_OVER_X=viewportWidth$4/2-GAME_OVER_WIDTH/2+calcSize(6),GAME_OVER_Y=viewportHeight$4/2-GAME_OVER_HEIGHT/2,GAME_OVER_CONFIG$1={image:GAME_OVER_IMAGE,x:GAME_OVER_X,y:GAME_OVER_Y,width:GAME_OVER_WIDTH,height:GAME_OVER_HEIGHT},HOME_MASK_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/blank.png",HOME_MASK_WIDTH=viewportWidth$4,HOME_MASK_HEIGHT=183,HOME_MASK_ORIG_X=0,HOME_MASK_ORIG_Y=-183,HOME_MASK_TARGET_X=0,HOME_MASK_TARGET_Y=0,HOME_MASK_DURATION=1e3,HOME_MASK_CONFIG$1={image:HOME_MASK_IMAGE,width:HOME_MASK_WIDTH,height:HOME_MASK_HEIGHT,startX:HOME_MASK_ORIG_X,startY:HOME_MASK_ORIG_Y,endX:HOME_MASK_TARGET_X,endY:HOME_MASK_TARGET_Y,duration:HOME_MASK_DURATION},KNIFE_PART_COLOR="#cbd3db",KNIFE_PART_STROKE=10,KNIFE_PART_LIFE=200,KNIFE_PART_CONFIG$1={color:KNIFE_PART_COLOR,stroke:KNIFE_PART_STROKE,life:KNIFE_PART_LIFE},LIGHTS_NUMBER=10,LIGHTS_FILL="#fff",LIGHTS_APPEARANCE_TIME=120,LIGHTS_MASK_APPEARANCE_TIME=1e3,LIGHTS_CONFIG$1={number:LIGHTS_NUMBER,fill:LIGHTS_FILL,appearanceTime:LIGHTS_APPEARANCE_TIME,maskAppearanceTime:LIGHTS_MASK_APPEARANCE_TIME},HOME_LOGO_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/logo.webp",HOME_LOGO_WIDTH=calcSize(335),HOME_LOGO_HEIGHT=calcSize(200),HOME_LOGO_ORIG_X=calcSize(38),HOME_LOGO_ORIG_Y=-HOME_LOGO_HEIGHT,HOME_LOGO_TARGET_X=HOME_LOGO_ORIG_X,HOME_LOGO_TARGET_Y=calcSize(41),HOME_LOGO_DURATION=1e3,HOME_LOGO_CONFIG$1={image:HOME_LOGO_IMAGE,width:HOME_LOGO_WIDTH,height:HOME_LOGO_HEIGHT,startX:HOME_LOGO_ORIG_X,startY:HOME_LOGO_ORIG_Y,endX:HOME_LOGO_TARGET_X,endY:HOME_LOGO_TARGET_Y,duration:HOME_LOGO_DURATION},RESULT_LOGO_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/logo.webp",RESULT_LOGO_WIDTH=calcSize(244),RESULT_LOGO_HEIGHT=calcSize(147),RESULT_LOGO_ORIG_X=calcSize(81),RESULT_LOGO_ORIG_Y=-RESULT_LOGO_HEIGHT,RESULT_LOGO_TARGET_X=RESULT_LOGO_ORIG_X,RESULT_LOGO_TARGET_Y=calcSize(24),RESULT_LOGO_DURATION=1e3,RESULT_LOGO_CONFIG$1={image:RESULT_LOGO_IMAGE,width:RESULT_LOGO_WIDTH,height:RESULT_LOGO_HEIGHT,startX:RESULT_LOGO_ORIG_X,startY:RESULT_LOGO_ORIG_Y,endX:RESULT_LOGO_TARGET_X,endY:RESULT_LOGO_TARGET_Y,duration:RESULT_LOGO_DURATION},QUIT_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/quit.png",QUIT_WIDTH=calcSize(141),QUIT_HEIGHT=calcSize(141),QUIT_X=viewportWidth$4/2-QUIT_WIDTH/2,QUIT_Y=viewportHeight$4-QUIT_HEIGHT-10,QUIT_Z=1e-5,QUIT_DURATION=500,QUIT_CONFIG={image:QUIT_IMAGE,x:QUIT_X,y:QUIT_Y,z:QUIT_Z,width:QUIT_WIDTH,height:QUIT_HEIGHT,duration:QUIT_DURATION},SCORE_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/score.webp",SCORE_IMAGE_SX=-94,SCORE_IMAGE_EX=calcSize(23),SCORE_IMAGE_Y=calcSize(8),SCORE_IMAGE_W=calcSize(40),SCORE_IMAGE_H=calcSize(40),SCORE_TEXT1_SX=-59,SCORE_TEXT1_EX=SCORE_IMAGE_EX+SCORE_IMAGE_W+calcSize(12),SCORE_TEXT1_Y=SCORE_IMAGE_Y+SCORE_IMAGE_H-calcSize(14),SCORE_TEXT1_FILL="#fff",SCORE_TEXT1_SIZE=calcVerticalSize(45)+"px",SCORE_TEXT1_VALUE="0",SCORE_TEXT2_SX=-93,SCORE_TEXT2_EX=SCORE_IMAGE_EX,SCORE_TEXT2_Y=calcSize(65),SCORE_TEXT2_FILL="#fff",SCORE_TEXT2_PREFIX="Рекорд: ",SCORE_TEXT2_VALUE=999,SCORE_TEXT2_WEIGHT="bold",SCORE_TEXT2_SIZE=calcVerticalSize(16)+"px",SCORE_ANIM_LENGTH=500,SCORE_CONFIG$1={image:SCORE_IMAGE,imageSx:SCORE_IMAGE_SX,imageEx:SCORE_IMAGE_EX,imageY:SCORE_IMAGE_Y,imageW:SCORE_IMAGE_W,imageH:SCORE_IMAGE_H,text1Sx:SCORE_TEXT1_SX,text1Ex:SCORE_TEXT1_EX,text1Y:SCORE_TEXT1_Y,text1Fill:SCORE_TEXT1_FILL,text1Size:SCORE_TEXT1_SIZE,text1Weight:"bold",text1Value:SCORE_TEXT1_VALUE,text2Sx:SCORE_TEXT2_SX,text2Ex:SCORE_TEXT2_EX,text2Y:SCORE_TEXT2_Y,text2Fill:SCORE_TEXT2_FILL,text2Prefix:SCORE_TEXT2_PREFIX,text2Value:SCORE_TEXT2_VALUE,text2Size:SCORE_TEXT2_SIZE,text2Weight:SCORE_TEXT2_WEIGHT,animLength:SCORE_ANIM_LENGTH},LOSE_WIDTH=calcSize(45.2),LOSE_HEIGHT=calcSize(37.6),LOSE_LEFT=viewportWidth$4-SCORE_IMAGE_EX-LOSE_WIDTH,LOSE_CONF=[{src:"https://pmi-static.alvs.tech/ninja/default/images/x.webp",srcF:"https://pmi-static.alvs.tech/ninja/default/images/xf.webp",sx:LOSE_LEFT+200,ex:LOSE_LEFT,y:SCORE_IMAGE_Y,w:LOSE_WIDTH,h:LOSE_HEIGHT},{src:"https://pmi-static.alvs.tech/ninja/default/images/x.webp",srcF:"https://pmi-static.alvs.tech/ninja/default/images/xf.webp",sx:LOSE_LEFT-LOSE_WIDTH+200,ex:LOSE_LEFT-LOSE_WIDTH,y:SCORE_IMAGE_Y,w:LOSE_WIDTH,h:LOSE_HEIGHT},{src:"https://pmi-static.alvs.tech/ninja/default/images/x.webp",srcF:"https://pmi-static.alvs.tech/ninja/default/images/xf.webp",sx:LOSE_LEFT-LOSE_WIDTH-LOSE_WIDTH+200,ex:LOSE_LEFT-LOSE_WIDTH-LOSE_WIDTH,y:SCORE_IMAGE_Y,w:LOSE_WIDTH,h:LOSE_HEIGHT}],LOSE_ANIMATION_LENGTH=500,LOSE_CONFIG$2={conf:LOSE_CONF,animLength:LOSE_ANIMATION_LENGTH},HOME_TEXT1_VALUE=`Тропическое путешествие
в самом разгаре!`,HOME_TEXT1_SX=-viewportWidth$4,HOME_TEXT1_EX=viewportWidth$4/2,HOME_TEXT1_Y=HOME_LOGO_TARGET_Y+HOME_LOGO_HEIGHT+calcVerticalSize(28),HOME_TEXT1_FILL="#fff",HOME_TEXT1_SIZE=calcVerticalSize(22)+"px",HOME_TEXT1_WEIGHT="bold",HOME_TEXT1_ANCHOR="middle",HOME_TEXT2_VALUE=`Разрежь как можно больше
экзотических фруктов!`,HOME_TEXT2_SX=-viewportWidth$4,HOME_TEXT2_EX=viewportWidth$4/2,HOME_TEXT2_Y=HOME_LOGO_TARGET_Y+HOME_LOGO_HEIGHT+calcVerticalSize(148),HOME_TEXT2_FILL="#fff",HOME_TEXT2_SIZE=calcVerticalSize(22)+"px",HOME_TEXT2_WEIGHT="bold",HOME_TEXT2_ANCHOR="middle",HOME_TEXT3_VALUE=`Осторожно:
избегай игрушечную
снежинку!`,HOME_TEXT3_SX=-viewportWidth$4,HOME_TEXT3_EX=viewportWidth$4/2,HOME_TEXT3_Y=HOME_LOGO_TARGET_Y+HOME_LOGO_HEIGHT+calcVerticalSize(235),HOME_TEXT3_FILL="#fff",HOME_TEXT3_SIZE=calcVerticalSize(22)+"px",HOME_TEXT3_WEIGHT="bold",HOME_TEXT3_ANCHOR="middle",HOME_TEXT_ANIM_LENGTH=500,HOME_TEXT_CONFIG$5={text1Value:HOME_TEXT1_VALUE,text1Sx:HOME_TEXT1_SX,text1Ex:HOME_TEXT1_EX,text1Y:HOME_TEXT1_Y,text1Fill:HOME_TEXT1_FILL,text1Size:HOME_TEXT1_SIZE,text1Weight:HOME_TEXT1_WEIGHT,text1Anchor:HOME_TEXT1_ANCHOR,text2Value:HOME_TEXT2_VALUE,text2Sx:HOME_TEXT2_SX,text2Ex:HOME_TEXT2_EX,text2Y:HOME_TEXT2_Y,text2Fill:HOME_TEXT2_FILL,text2Size:HOME_TEXT2_SIZE,text2Weight:HOME_TEXT2_WEIGHT,text2Anchor:HOME_TEXT2_ANCHOR,text3Value:HOME_TEXT3_VALUE,text3Sx:HOME_TEXT3_SX,text3Ex:HOME_TEXT3_EX,text3Y:HOME_TEXT3_Y,text3Fill:HOME_TEXT3_FILL,text3Size:HOME_TEXT3_SIZE,text3Weight:HOME_TEXT3_WEIGHT,text3Anchor:HOME_TEXT3_ANCHOR,animLength:HOME_TEXT_ANIM_LENGTH},RESULT_TEXT1_VALUE="",RESULT_TEXT1_X=viewportWidth$4/2,RESULT_TEXT1_SY=-200,RESULT_TEXT1_EY=RESULT_LOGO_TARGET_Y+RESULT_LOGO_HEIGHT+calcVerticalSize(4),RESULT_TEXT1_FILL="#fff",RESULT_TEXT1_SIZE=calcVerticalSize(17.8)+"px",RESULT_TEXT1_WEIGHT="bold",RESULT_TEXT1_ANCHOR="middle",RESULT_TEXT2_VALUE="Твой счёт:",RESULT_TEXT2_X=viewportWidth$4/2,RESULT_TEXT2_SY=-200,RESULT_TEXT2_EY=RESULT_LOGO_TARGET_Y+RESULT_LOGO_HEIGHT+calcVerticalSize(60),RESULT_TEXT2_FILL="#fff",RESULT_TEXT2_SIZE=calcVerticalSize(30)+"px",RESULT_TEXT2_WEIGHT="bold",RESULT_TEXT2_ANCHOR="middle",RESULT_TEXT3_VALUE="5432",RESULT_TEXT3_X=viewportWidth$4/2,RESULT_TEXT3_SY=-200,RESULT_TEXT3_EY=RESULT_LOGO_TARGET_Y+RESULT_LOGO_HEIGHT+calcVerticalSize(140),RESULT_TEXT3_FILL="270-#FFFFFF-#BCDBF8",RESULT_TEXT3_SIZE=calcVerticalSize(calcResultFontSize(RESULT_TEXT3_VALUE,115))+"px",RESULT_TEXT3_WEIGHT="bold",RESULT_TEXT3_ANCHOR="middle",RESULT_TEXT4_VALUE=`Твой
рекорд`,RESULT_TEXT4_SX=-viewportWidth$4,RESULT_TEXT4_EX=viewportWidth$4/4+calcSize(10),RESULT_TEXT4_Y=RESULT_LOGO_TARGET_Y+RESULT_LOGO_HEIGHT+calcVerticalSize(245),RESULT_TEXT4_FILL="#fff",RESULT_TEXT4_SIZE=calcVerticalSize(18)+"px",RESULT_TEXT4_WEIGHT="bold",RESULT_TEXT4_ANCHOR="middle",RESULT_TEXT5_VALUE="5,432",RESULT_TEXT5_SX=-viewportWidth$4,RESULT_TEXT5_EX=viewportWidth$4/4+calcSize(10),RESULT_TEXT5_Y=RESULT_LOGO_TARGET_Y+RESULT_LOGO_HEIGHT+calcVerticalSize(295),RESULT_TEXT5_FILL="270-#FFFFFF-#BCDBF8",RESULT_TEXT5_SIZE=calcVerticalSize(44)+"px",RESULT_TEXT5_WEIGHT="bold",RESULT_TEXT5_ANCHOR="middle",RESULT_TEXT6_VALUE=`Общий
рекорд`,RESULT_TEXT6_SX=2*viewportWidth$4,RESULT_TEXT6_EX=3*(viewportWidth$4/4)-calcSize(10),RESULT_TEXT6_Y=RESULT_LOGO_TARGET_Y+RESULT_LOGO_HEIGHT+calcVerticalSize(245),RESULT_TEXT6_FILL="#fff",RESULT_TEXT6_SIZE=calcVerticalSize(18)+"px",RESULT_TEXT6_WEIGHT="bold",RESULT_TEXT6_ANCHOR="middle",RESULT_TEXT7_VALUE="10,000",RESULT_TEXT7_SX=2*viewportWidth$4,RESULT_TEXT7_EX=3*(viewportWidth$4/4)-calcSize(10),RESULT_TEXT7_Y=RESULT_LOGO_TARGET_Y+RESULT_LOGO_HEIGHT+calcVerticalSize(295),RESULT_TEXT7_FILL="270-#FFFFFF-#BCDBF8",RESULT_TEXT7_SIZE=calcVerticalSize(44)+"px",RESULT_TEXT7_WEIGHT="bold",RESULT_TEXT7_ANCHOR="middle",RESULT_TEXT_ANIM_LENGTH=500,RESULT_TEXT_CONFIG$1={text1Value:RESULT_TEXT1_VALUE,text1X:RESULT_TEXT1_X,text1Sy:RESULT_TEXT1_SY,text1Ey:RESULT_TEXT1_EY,text1Fill:RESULT_TEXT1_FILL,text1Size:RESULT_TEXT1_SIZE,text1Weight:RESULT_TEXT1_WEIGHT,text1Anchor:RESULT_TEXT1_ANCHOR,text2Value:RESULT_TEXT2_VALUE,text2X:RESULT_TEXT2_X,text2Sy:RESULT_TEXT2_SY,text2Ey:RESULT_TEXT2_EY,text2Fill:RESULT_TEXT2_FILL,text2Size:RESULT_TEXT2_SIZE,text2Weight:RESULT_TEXT2_WEIGHT,text2Anchor:RESULT_TEXT2_ANCHOR,text3Value:RESULT_TEXT3_VALUE,text3X:RESULT_TEXT3_X,text3Sy:RESULT_TEXT3_SY,text3Ey:RESULT_TEXT3_EY,text3Fill:RESULT_TEXT3_FILL,text3Size:RESULT_TEXT3_SIZE,text3Weight:RESULT_TEXT3_WEIGHT,text3Anchor:RESULT_TEXT3_ANCHOR,text4Value:RESULT_TEXT4_VALUE,text4Sx:RESULT_TEXT4_SX,text4Ex:RESULT_TEXT4_EX,text4Y:RESULT_TEXT4_Y,text4Fill:RESULT_TEXT4_FILL,text4Size:RESULT_TEXT4_SIZE,text4Weight:RESULT_TEXT4_WEIGHT,text4Anchor:RESULT_TEXT4_ANCHOR,text5Value:RESULT_TEXT5_VALUE,text5Sx:RESULT_TEXT5_SX,text5Ex:RESULT_TEXT5_EX,text5Y:RESULT_TEXT5_Y,text5Fill:RESULT_TEXT5_FILL,text5Size:RESULT_TEXT5_SIZE,text5Weight:RESULT_TEXT5_WEIGHT,text5Anchor:RESULT_TEXT5_ANCHOR,text6Value:RESULT_TEXT6_VALUE,text6Sx:RESULT_TEXT6_SX,text6Ex:RESULT_TEXT6_EX,text6Y:RESULT_TEXT6_Y,text6Fill:RESULT_TEXT6_FILL,text6Size:RESULT_TEXT6_SIZE,text6Weight:RESULT_TEXT6_WEIGHT,text6Anchor:RESULT_TEXT6_ANCHOR,text7Value:RESULT_TEXT7_VALUE,text7Sx:RESULT_TEXT7_SX,text7Ex:RESULT_TEXT7_EX,text7Y:RESULT_TEXT7_Y,text7Fill:RESULT_TEXT7_FILL,text7Size:RESULT_TEXT7_SIZE,text7Weight:RESULT_TEXT7_WEIGHT,text7Anchor:RESULT_TEXT7_ANCHOR,animLength:RESULT_TEXT_ANIM_LENGTH},BOTTOM_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/bottom.webp",BOTTOM_WIDTH=viewportWidth$4,BOTTOM_HEIGHT=calcSize(139),BOTTOM_ORIG_X=0,BOTTOM_ORIG_Y=viewportHeight$4,BOTTOM_TARGET_X=0,BOTTOM_TARGET_Y=viewportHeight$4-BOTTOM_HEIGHT,BOTTOM_DURATION=1e3,BOTTOM_CONFIG$1={image:BOTTOM_IMAGE,width:BOTTOM_WIDTH,height:BOTTOM_HEIGHT,startX:BOTTOM_ORIG_X,startY:BOTTOM_ORIG_Y,endX:BOTTOM_TARGET_X,endY:BOTTOM_TARGET_Y,duration:BOTTOM_DURATION},START_BUTTON_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/green-button.webp",START_BUTTON_ORIG_X=calcSize(42),START_BUTTON_TARGET_X=START_BUTTON_ORIG_X,START_BUTTON_ORIG_Y=viewportHeight$4,START_BUTTON_TARGET_Y=HOME_LOGO_TARGET_X+HOME_LOGO_HEIGHT+calcVerticalSize(330),START_BUTTON_WIDTH=calcSize(325),START_BUTTON_HEIGHT=calcSize(90),START_BUTTON_ANIMATION_LENGTH=500,START_BUTTON_TEXT_VALUE="Начать",START_BUTTON_TEXT_FILL="#fff",START_BUTTON_TEXT_SIZE=calcSize(30)+"px",START_BUTTON_TEXT_START_X=viewportWidth$4/2,START_BUTTON_TEXT_START_Y=viewportHeight$4+START_BUTTON_HEIGHT,START_BUTTON_TEXT_END_X=START_BUTTON_TEXT_START_X,START_BUTTON_TEXT_END_Y=START_BUTTON_TARGET_Y-calcVerticalSize(8)+START_BUTTON_HEIGHT/2,START_BUTTON_TEXT_ANCHOR="middle",START_BUTTON_TEXT_WEIGHT="bold",START_BUTTON_CONFIG$1={image:START_BUTTON_IMAGE,startX:START_BUTTON_ORIG_X,startY:START_BUTTON_ORIG_Y,endX:START_BUTTON_TARGET_X,endY:START_BUTTON_TARGET_Y,width:START_BUTTON_WIDTH,height:START_BUTTON_HEIGHT,textValue:START_BUTTON_TEXT_VALUE,textStartX:START_BUTTON_TEXT_START_X,textStartY:START_BUTTON_TEXT_START_Y,textEndX:START_BUTTON_TEXT_END_X,textEndY:START_BUTTON_TEXT_END_Y,textFill:START_BUTTON_TEXT_FILL,textSize:START_BUTTON_TEXT_SIZE,textAnchor:START_BUTTON_TEXT_ANCHOR,textWeight:START_BUTTON_TEXT_WEIGHT,animLength:START_BUTTON_ANIMATION_LENGTH},RESULT_BUTTON_NEXT_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/green-button.webp",RESULT_BUTTON_NEXT_ORIG_X=calcSize(42),RESULT_BUTTON_NEXT_TARGET_X=RESULT_BUTTON_NEXT_ORIG_X,RESULT_BUTTON_NEXT_ORIG_Y=viewportHeight$4,RESULT_BUTTON_NEXT_TARGET_Y=RESULT_LOGO_TARGET_Y+RESULT_LOGO_HEIGHT+calcVerticalSize(360),RESULT_BUTTON_NEXT_WIDTH=calcSize(325),RESULT_BUTTON_NEXT_HEIGHT=calcSize(90),RESULT_BUTTON_NEXT_ANIMATION_LENGTH=500,RESULT_BUTTON_NEXT_TEXT_VALUE="Далее",RESULT_BUTTON_NEXT_TEXT_FILL="#fff",RESULT_BUTTON_NEXT_TEXT_SIZE=calcSize(30)+"px",RESULT_BUTTON_NEXT_TEXT_START_X=viewportWidth$4/2,RESULT_BUTTON_NEXT_TEXT_START_Y=viewportHeight$4+RESULT_BUTTON_NEXT_HEIGHT,RESULT_BUTTON_NEXT_TEXT_END_X=RESULT_BUTTON_NEXT_TEXT_START_X,RESULT_BUTTON_NEXT_TEXT_END_Y=RESULT_BUTTON_NEXT_TARGET_Y-calcSize(8)+RESULT_BUTTON_NEXT_HEIGHT/2,RESULT_BUTTON_NEXT_TEXT_ANCHOR="middle",RESULT_BUTTON_NEXT_TEXT_WEIGHT="bold",RESULT_BUTTON_NEXT_CONFIG$1={image:RESULT_BUTTON_NEXT_IMAGE,startX:RESULT_BUTTON_NEXT_ORIG_X,startY:RESULT_BUTTON_NEXT_ORIG_Y,endX:RESULT_BUTTON_NEXT_TARGET_X,endY:RESULT_BUTTON_NEXT_TARGET_Y,width:RESULT_BUTTON_NEXT_WIDTH,height:RESULT_BUTTON_NEXT_HEIGHT,textValue:RESULT_BUTTON_NEXT_TEXT_VALUE,textStartX:RESULT_BUTTON_NEXT_TEXT_START_X,textStartY:RESULT_BUTTON_NEXT_TEXT_START_Y,textEndX:RESULT_BUTTON_NEXT_TEXT_END_X,textEndY:RESULT_BUTTON_NEXT_TEXT_END_Y,textFill:RESULT_BUTTON_NEXT_TEXT_FILL,textSize:RESULT_BUTTON_NEXT_TEXT_SIZE,textAnchor:RESULT_BUTTON_NEXT_TEXT_ANCHOR,textWeight:RESULT_BUTTON_NEXT_TEXT_WEIGHT,animLength:RESULT_BUTTON_NEXT_ANIMATION_LENGTH},RESULT_BUTTON_REPLAY_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/green-button.webp",RESULT_BUTTON_REPLAY_ORIG_X=calcSize(42),RESULT_BUTTON_REPLAY_TARGET_X=RESULT_BUTTON_NEXT_ORIG_X,RESULT_BUTTON_REPLAY_ORIG_Y=viewportHeight$4,RESULT_BUTTON_REPLAY_TARGET_Y=RESULT_BUTTON_NEXT_TARGET_Y+RESULT_BUTTON_NEXT_HEIGHT,RESULT_BUTTON_REPLAY_WIDTH=calcSize(325),RESULT_BUTTON_REPLAY_HEIGHT=calcSize(90),RESULT_BUTTON_REPLAY_ANIMATION_LENGTH=500,RESULT_BUTTON_REPLAY_TEXT_VALUE="Начать заново",RESULT_BUTTON_REPLAY_TEXT_FILL="#fff",RESULT_BUTTON_REPLAY_TEXT_SIZE=calcSize(30)+"px",RESULT_BUTTON_REPLAY_TEXT_START_X=viewportWidth$4/2,RESULT_BUTTON_REPLAY_TEXT_START_Y=viewportHeight$4+RESULT_BUTTON_REPLAY_HEIGHT,RESULT_BUTTON_REPLAY_TEXT_END_X=RESULT_BUTTON_REPLAY_TEXT_START_X,RESULT_BUTTON_REPLAY_TEXT_END_Y=RESULT_BUTTON_REPLAY_TARGET_Y-calcSize(8)+RESULT_BUTTON_REPLAY_HEIGHT/2,RESULT_BUTTON_REPLAY_TEXT_ANCHOR="middle",RESULT_BUTTON_REPLAY_TEXT_WEIGHT="bold",RESULT_BUTTON_REPLAY_CONFIG$1={image:RESULT_BUTTON_REPLAY_IMAGE,startX:RESULT_BUTTON_REPLAY_ORIG_X,startY:RESULT_BUTTON_REPLAY_ORIG_Y,endX:RESULT_BUTTON_REPLAY_TARGET_X,endY:RESULT_BUTTON_REPLAY_TARGET_Y,width:RESULT_BUTTON_REPLAY_WIDTH,height:RESULT_BUTTON_REPLAY_HEIGHT,textValue:RESULT_BUTTON_REPLAY_TEXT_VALUE,textStartX:RESULT_BUTTON_REPLAY_TEXT_START_X,textStartY:RESULT_BUTTON_REPLAY_TEXT_START_Y,textEndX:RESULT_BUTTON_REPLAY_TEXT_END_X,textEndY:RESULT_BUTTON_REPLAY_TEXT_END_Y,textFill:RESULT_BUTTON_REPLAY_TEXT_FILL,textSize:RESULT_BUTTON_REPLAY_TEXT_SIZE,textAnchor:RESULT_BUTTON_REPLAY_TEXT_ANCHOR,textWeight:RESULT_BUTTON_REPLAY_TEXT_WEIGHT,animLength:RESULT_BUTTON_REPLAY_ANIMATION_LENGTH},SOUND_TEXT_SIZE=calcVerticalSize(16),SOUND_BUTTON_TEXT_VALUE_ON="Вкл. звук",SOUND_BUTTON_TEXT_VALUE_OFF="Откл. звук",SOUND_BUTTON_TEXT_FILL="#fff",SOUND_BUTTON_TEXT_SIZE=SOUND_TEXT_SIZE+"px",SOUND_BUTTON_TEXT_WEIGHT="bold",SOUND_BUTTON_TEXT_ANCHOR="end",SOUND_BUTTON_IMAGE_ON="https://pmi-static.alvs.tech/ninja/default/images/sound-on.svg",SOUND_BUTTON_IMAGE_OFF="https://pmi-static.alvs.tech/ninja/default/images/sound-off.svg",SOUND_BUTTON_IMAGE_WIDTH=calcSize(26),SOUND_BUTTON_IMAGE_HEIGHT=calcSize(26),SOUND_BUTTON_IMAGE_X=viewportWidth$4-SOUND_BUTTON_IMAGE_WIDTH-calcSize(38),SOUND_BUTTON_TEXT_X=SOUND_BUTTON_IMAGE_X-calcSize(10),SOUND_BUTTON_IMAGE_START_Y=-100,SOUND_BUTTON_IMAGE_HOME_END_Y=calcVerticalSize(13),SOUND_BUTTON_IMAGE_GAME_END_Y=SCORE_IMAGE_Y+SCORE_IMAGE_H+calcSize(4),SOUND_BUTTON_IMAGE_RESULT_END_Y=SOUND_TEXT_SIZE/2+calcSize(2),SOUND_BUTTON_TEXT_START_Y=-100,SOUND_BUTTON_TEXT_HOME_END_Y=SOUND_TEXT_SIZE/2+calcSize(18),SOUND_BUTTON_TEXT_GAME_END_Y=SCORE_TEXT2_Y,SOUND_BUTTON_TEXT_RESULT_END_Y=SOUND_TEXT_SIZE/2+calcSize(15),SOUND_BUTTON_ANIMATION_LENGTH=500,SOUND_BUTTON_CONFIG$1={textValueOn:SOUND_BUTTON_TEXT_VALUE_ON,textValueOff:SOUND_BUTTON_TEXT_VALUE_OFF,textFill:SOUND_BUTTON_TEXT_FILL,textSize:SOUND_BUTTON_TEXT_SIZE,textWeight:SOUND_BUTTON_TEXT_WEIGHT,textAnchor:SOUND_BUTTON_TEXT_ANCHOR,imageOn:SOUND_BUTTON_IMAGE_ON,imageOff:SOUND_BUTTON_IMAGE_OFF,imageWidth:SOUND_BUTTON_IMAGE_WIDTH,imageHeight:SOUND_BUTTON_IMAGE_HEIGHT,imageX:SOUND_BUTTON_IMAGE_X,textX:SOUND_BUTTON_TEXT_X,imageStartY:SOUND_BUTTON_IMAGE_START_Y,imageHomeEndY:SOUND_BUTTON_IMAGE_HOME_END_Y,imageGameEndY:SOUND_BUTTON_IMAGE_GAME_END_Y,imageResultEndY:SOUND_BUTTON_IMAGE_RESULT_END_Y,textStartY:SOUND_BUTTON_TEXT_START_Y,textHomeEndY:SOUND_BUTTON_TEXT_HOME_END_Y,textGameEndY:SOUND_BUTTON_TEXT_GAME_END_Y,textResultEndY:SOUND_BUTTON_TEXT_RESULT_END_Y,animLength:SOUND_BUTTON_ANIMATION_LENGTH},BRAND_INTRO_FILL="#fff",BRAND_INTRO_ANIMATION_LENGTH=500,BRAND_INTRO_TEXT_VALUE=`Ответь на вопрос
Программы, чтобы
получить приз`,BRAND_INTRO_TEXT_SIZE=calcVerticalSize(26)+"px",BRAND_INTRO_TEXT_WEIGHT="bold",BRAND_INTRO_TEXT_ANCHOR="middle",BRAND_INTRO_TEXT_X=viewportWidth$4/2,BRAND_INTRO_TEXT_START_Y=-400,BRAND_INTRO_TEXT_END_Y=calcVerticalSize(250),BRAND_INTRO_CONFIG$1={textValue:BRAND_INTRO_TEXT_VALUE,textFill:BRAND_INTRO_FILL,textSize:BRAND_INTRO_TEXT_SIZE,textWeight:BRAND_INTRO_TEXT_WEIGHT,textAnchor:BRAND_INTRO_TEXT_ANCHOR,textX:BRAND_INTRO_TEXT_X,textStartY:BRAND_INTRO_TEXT_START_Y,textEndY:BRAND_INTRO_TEXT_END_Y,animLength:BRAND_INTRO_ANIMATION_LENGTH},BRAND_INTRO_BUTTON_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/green-button.webp",BRAND_INTRO_BUTTON_WIDTH=calcSize(325),BRAND_INTRO_BUTTON_HEIGHT=calcSize(90),BRAND_INTRO_BUTTON_X=calcSize(42),BRAND_INTRO_BUTTON_START_Y=viewportHeight$4,BRAND_INTRO_BUTTON_END_Y=calcVerticalSize(531),BRAND_INTRO_BUTTON_TEXT_VALUE="Ответить",BRAND_INTRO_BUTTON_TEXT_SIZE=calcVerticalSize(30)+"px",BRAND_INTRO_BUTTON_TEXT_WEIGHT="bold",BRAND_INTRO_BUTTON_TEXT_ANCHOR="middle",BRAND_INTRO_BUTTON_TEXT_X=viewportWidth$4/2,BRAND_INTRO_BUTTON_TEXT_START_Y=viewportHeight$4+BRAND_INTRO_BUTTON_HEIGHT,BRAND_INTRO_BUTTON_TEXT_END_Y=BRAND_INTRO_BUTTON_END_Y-calcVerticalSize(6)+BRAND_INTRO_BUTTON_HEIGHT/2,BRAND_INTRO_BUTTON_CONFIG$1={image:BRAND_INTRO_BUTTON_IMAGE,width:BRAND_INTRO_BUTTON_WIDTH,height:BRAND_INTRO_BUTTON_HEIGHT,buttonX:BRAND_INTRO_BUTTON_X,buttonStartY:BRAND_INTRO_BUTTON_START_Y,buttonEndY:BRAND_INTRO_BUTTON_END_Y,textValue:BRAND_INTRO_BUTTON_TEXT_VALUE,textFill:BRAND_INTRO_FILL,textSize:BRAND_INTRO_BUTTON_TEXT_SIZE,textWeight:BRAND_INTRO_BUTTON_TEXT_WEIGHT,textAnchor:BRAND_INTRO_BUTTON_TEXT_ANCHOR,textX:BRAND_INTRO_BUTTON_TEXT_X,textStartY:BRAND_INTRO_BUTTON_TEXT_START_Y,textEndY:BRAND_INTRO_BUTTON_TEXT_END_Y,animLength:BRAND_INTRO_ANIMATION_LENGTH},BRAND_QUESTION_FILL="#fff",BRAND_QUESTION_ANIMATION_LENGTH=500,BRAND_QUESTION_TEXT1_VALUE="",BRAND_QUESTION_TEXT1_SIZE=calcVerticalSize(26)+"px",BRAND_QUESTION_TEXT1_WEIGHT="bold",BRAND_QUESTION_TEXT1_ANCHOR="middle",BRAND_QUESTION_TEXT1_START_X=-viewportWidth$4,BRAND_QUESTION_TEXT1_END_X=viewportWidth$4/2,BRAND_QUESTION_TEXT1_Y=calcVerticalSize(150),BRAND_QUESTION_TEXT1_CONFIG$1={textValue:BRAND_QUESTION_TEXT1_VALUE,textFill:BRAND_QUESTION_FILL,textSize:BRAND_QUESTION_TEXT1_SIZE,textWeight:BRAND_QUESTION_TEXT1_WEIGHT,textAnchor:BRAND_QUESTION_TEXT1_ANCHOR,textStartX:BRAND_QUESTION_TEXT1_START_X,textEndX:BRAND_QUESTION_TEXT1_END_X,textY:BRAND_QUESTION_TEXT1_Y,animLength:BRAND_QUESTION_ANIMATION_LENGTH},BRAND_QUESTION_TEXT2_VALUE=`Знаешь ли ты,
что табак для бренда
L&M собирается
с 4-х континентов?`,BRAND_QUESTION_TEXT2_SIZE=calcVerticalSize(26)+"px",BRAND_QUESTION_TEXT2_WEIGHT="bold",BRAND_QUESTION_TEXT2_ANCHOR="middle",BRAND_QUESTION_TEXT2_START_X=viewportWidth$4*2,BRAND_QUESTION_TEXT2_END_X=viewportWidth$4/2,BRAND_QUESTION_TEXT2_Y=calcVerticalSize(260),BRAND_QUESTION_TEXT2_CONFIG$1={textValue:BRAND_QUESTION_TEXT2_VALUE,textFill:BRAND_QUESTION_FILL,textSize:BRAND_QUESTION_TEXT2_SIZE,textWeight:BRAND_QUESTION_TEXT2_WEIGHT,textAnchor:BRAND_QUESTION_TEXT2_ANCHOR,textStartX:BRAND_QUESTION_TEXT2_START_X,textEndX:BRAND_QUESTION_TEXT2_END_X,textY:BRAND_QUESTION_TEXT2_Y,animLength:BRAND_QUESTION_ANIMATION_LENGTH},BRAND_ANSWER_BUTTON1_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/green-button.webp",BRAND_ANSWER_BUTTON1_WIDTH=calcSize(325),BRAND_ANSWER_BUTTON1_HEIGHT=calcSize(90),BRAND_ANSWER_BUTTON1_X=calcSize(42),BRAND_ANSWER_BUTTON1_START_Y=viewportHeight$4,BRAND_ANSWER_BUTTON1_END_Y=calcVerticalSize(531),BRAND_ANSWER_TEXT1_VALUE="Нет",BRAND_ANSWER_TEXT1_SIZE=calcVerticalSize(30)+"px",BRAND_ANSWER_TEXT1_WEIGHT="bold",BRAND_ANSWER_TEXT1_ANCHOR="middle",BRAND_ANSWER_TEXT1_X=viewportWidth$4/2,BRAND_ANSWER_TEXT1_START_Y=viewportHeight$4+BRAND_ANSWER_BUTTON1_HEIGHT,BRAND_ANSWER_TEXT1_END_Y=BRAND_ANSWER_BUTTON1_END_Y-calcVerticalSize(6)+BRAND_ANSWER_BUTTON1_HEIGHT/2,BRAND_ANSWER1_CONFIG$2={image:BRAND_ANSWER_BUTTON1_IMAGE,width:BRAND_ANSWER_BUTTON1_WIDTH,height:BRAND_ANSWER_BUTTON1_HEIGHT,buttonX:BRAND_ANSWER_BUTTON1_X,buttonStartY:BRAND_ANSWER_BUTTON1_START_Y,buttonEndY:BRAND_ANSWER_BUTTON1_END_Y,textValue:BRAND_ANSWER_TEXT1_VALUE,textFill:BRAND_QUESTION_FILL,textSize:BRAND_ANSWER_TEXT1_SIZE,textWeight:BRAND_ANSWER_TEXT1_WEIGHT,textAnchor:BRAND_ANSWER_TEXT1_ANCHOR,textX:BRAND_ANSWER_TEXT1_X,textStartY:BRAND_ANSWER_TEXT1_START_Y,textEndY:BRAND_ANSWER_TEXT1_END_Y,animLength:BRAND_QUESTION_ANIMATION_LENGTH},BRAND_ANSWER_BUTTON2_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/green-button.webp",BRAND_ANSWER_BUTTON2_WIDTH=calcSize(325),BRAND_ANSWER_BUTTON2_HEIGHT=calcSize(90),BRAND_ANSWER_BUTTON2_X=calcSize(42),BRAND_ANSWER_BUTTON2_START_Y=viewportHeight$4,BRAND_ANSWER_BUTTON2_END_Y=BRAND_ANSWER_BUTTON1_END_Y+BRAND_ANSWER_BUTTON1_HEIGHT,BRAND_ANSWER_TEXT2_VALUE="Да",BRAND_ANSWER_TEXT2_SIZE=calcVerticalSize(30)+"px",BRAND_ANSWER_TEXT2_WEIGHT="bold",BRAND_ANSWER_TEXT2_ANCHOR="middle",BRAND_ANSWER_TEXT2_X=viewportWidth$4/2,BRAND_ANSWER_TEXT2_START_Y=viewportHeight$4+BRAND_ANSWER_BUTTON2_HEIGHT,BRAND_ANSWER_TEXT2_END_Y=BRAND_ANSWER_BUTTON2_END_Y-calcVerticalSize(6)+BRAND_ANSWER_BUTTON2_HEIGHT/2,BRAND_ANSWER2_CONFIG$1={image:BRAND_ANSWER_BUTTON2_IMAGE,width:BRAND_ANSWER_BUTTON2_WIDTH,height:BRAND_ANSWER_BUTTON2_HEIGHT,buttonX:BRAND_ANSWER_BUTTON2_X,buttonStartY:BRAND_ANSWER_BUTTON2_START_Y,buttonEndY:BRAND_ANSWER_BUTTON2_END_Y,textValue:BRAND_ANSWER_TEXT2_VALUE,textFill:BRAND_QUESTION_FILL,textSize:BRAND_ANSWER_TEXT2_SIZE,textWeight:BRAND_ANSWER_TEXT2_WEIGHT,textAnchor:BRAND_ANSWER_TEXT2_ANCHOR,textX:BRAND_ANSWER_TEXT2_X,textStartY:BRAND_ANSWER_TEXT2_START_Y,textEndY:BRAND_ANSWER_TEXT2_END_Y,animLength:BRAND_QUESTION_ANIMATION_LENGTH},SOUNDS$3={BOOM:"https://pmi-static.alvs.tech/ninja/default/sound/boom",MENU:"https://pmi-static.alvs.tech/ninja/default/sound/menu",OVER:"",SPLATTER:"https://pmi-static.alvs.tech/ninja/default/sound/splatter",START:"https://pmi-static.alvs.tech/ninja/default/sound/start",THROW:"https://pmi-static.alvs.tech/ninja/default/sound/throw"},CONFIG_DEFAULTS=Object.freeze(Object.defineProperty({__proto__:null,BACKGROUND_CONFIG:BACKGROUND_CONFIG$1,BOTTOM_CONFIG:BOTTOM_CONFIG$1,BRAND_ANSWER1_CONFIG:BRAND_ANSWER1_CONFIG$2,BRAND_ANSWER2_CONFIG:BRAND_ANSWER2_CONFIG$1,BRAND_INTRO_BUTTON_CONFIG:BRAND_INTRO_BUTTON_CONFIG$1,BRAND_INTRO_CONFIG:BRAND_INTRO_CONFIG$1,BRAND_QUESTION_TEXT1_CONFIG:BRAND_QUESTION_TEXT1_CONFIG$1,BRAND_QUESTION_TEXT2_CONFIG:BRAND_QUESTION_TEXT2_CONFIG$1,CONSOLE_CONFIG:CONSOLE_CONFIG$1,DEBUG_MODE:DEBUG_MODE$2,FIRST_SAFE_FRUIT_NUMBER:FIRST_SAFE_FRUIT_NUMBER$2,FLAME_CONFIG,FLASH_CONFIG:FLASH_CONFIG$1,FONT_FAMILY:FONT_FAMILY$1,FPS_CONFIG:FPS_CONFIG$1,FRUIT_CONFIG:FRUIT_CONFIG$3,GAME_OVER_CONFIG:GAME_OVER_CONFIG$1,GAME_STATES:GAME_STATES$1,HOME_LOGO_CONFIG:HOME_LOGO_CONFIG$1,HOME_MASK_CONFIG:HOME_MASK_CONFIG$1,HOME_TEXT_CONFIG:HOME_TEXT_CONFIG$5,INTERACTION_MODE:INTERACTION_MODE$1,INTERACTION_MODES:INTERACTION_MODES$1,IS_TOUCH:IS_TOUCH$1,JUICE_CONFIG:JUICE_CONFIG$1,KNIFE_PART_CONFIG:KNIFE_PART_CONFIG$1,LAYERS:LAYERS$p,LIGHTS_CONFIG:LIGHTS_CONFIG$1,LOSE_CONFIG:LOSE_CONFIG$2,MESSAGES:MESSAGES$e,MODES:MODES$e,QUIT_CONFIG,RESULT_BUTTON_NEXT_CONFIG:RESULT_BUTTON_NEXT_CONFIG$1,RESULT_BUTTON_REPLAY_CONFIG:RESULT_BUTTON_REPLAY_CONFIG$1,RESULT_LOGO_CONFIG:RESULT_LOGO_CONFIG$1,RESULT_TEXT_CONFIG:RESULT_TEXT_CONFIG$1,SCENES:SCENES$7,SCENE_STATES:SCENE_STATES$2,SCORE_CONFIG:SCORE_CONFIG$1,SCORE_MULTIPLIER:SCORE_MULTIPLIER$1,SOUNDS:SOUNDS$3,SOUND_BUTTON_CONFIG:SOUND_BUTTON_CONFIG$1,START_BUTTON_CONFIG:START_BUTTON_CONFIG$1,STATE_KEYS:STATE_KEYS$4},Symbol.toStringTag,{value:"Module"}));let config=CONFIG_DEFAULTS;function setConfig(s){config={...config,...s}}function getConfig$1(){return config}class Config{constructor(t,n){this._config=t,this._logger=n,this._onReady=this._config.onReady??a,this._onReset=this._config.onReset??a,this._onSuccess=this._config.onSuccess??a,this._onError=this._config.onError??a,this._rootElement=this.getRoot(this._config.rootElement),setConfig(this)}getRoot(t){return(!g(t)||t.tagName!=="DIV")&&(this._logger.error("Root element is not an HTMLDivElement"),this.onError("config.rootElement.error")),t}get onReady(){return this._onReady}get onReset(){return this._onReset}get onSuccess(){return this._onSuccess}get onError(){return this._onError}get rootElement(){return this._rootElement}}const blankArray=[],slice=blankArray.slice,join=blankArray.join,Ucren={isIe:/msie/i.test(navigator.userAgent),isIe6:/msie 6/i.test(navigator.userAgent),isFirefox:/firefox/i.test(navigator.userAgent),isSafari:/version\/[\d.]+\s+safari/i.test(navigator.userAgent),isOpera:/opera/i.test(navigator.userAgent),isChrome:/chrome/i.test(navigator.userAgent),isStrict:document.compatMode==="CSS1Compat",tempDom:document.createElement("div"),apply,appendStyle:function(s){var t;arguments.length>1&&(s=join.call(arguments,"")),document.createStyleSheet?(t=document.createStyleSheet(),t.cssText=s):(t=document.createElement("style"),t.type="text/css",t.appendChild(document.createTextNode(s)),document.getElementsByTagName("head")[0].appendChild(t))},addEvent:function(s,t,n){var _=function(){n.apply(s,arguments)};return s.dom&&(s=s.dom),window.attachEvent?s.attachEvent("on"+t,_):window.addEventListener?s.addEventListener(t,_,!1):s["on"+t]=_,_},delEvent:function(s,t,n){window.detachEvent?s.detachEvent("on"+t,n):window.removeEventListener?s.removeEventListener(t,n,!1):s["on"+t]===n&&(s["on"+t]=null)},Class:function(s,t,n,_){var l,N;return s=s||function(){},t=t||{},l=function(){this.instanceId=Ucren.id(),s.apply(this,arguments)},N=l.prototype,Ucren.registerClassEvent.call(N),Ucren.each(t,function(u,L){N[L]=function(X,w){return typeof X=="function"?function(){var I,x;if(I=slice.call(arguments,0),!(n&&n.apply(this,[w].concat(I))===!1))return this.fireEvent("before"+w,I),x=X.apply(this,I),_&&_.apply(this,[w].concat(I)),this.fireEvent(w,I),x}:X}(u,L)}),N.getOriginMethod=function(u){return t[u]},l},registerClassEvent:function(){this.on=function(s,t){var n=this.instanceId;Ucren.dispatch(n+s,t.bind(this))},this.onbefore=function(s,t){var n=this.instanceId;Ucren.dispatch(n+"before"+s,t.bind(this))},this.un=function(s,t){},this.fireEvent=function(s,t){var n=this.instanceId;Ucren.dispatch(n+s,t)}},createFuze:function(){var s,t,n;return s=[],t=function(_){n?_():s.push(_)},t.fire=function(){for(;s.length;)s.shift()();n=!0},t.extinguish=function(){n=!1},t.wettish=function(){s.length&&s.shift()()},t},dispatch:function(){var s={},t,n;return t=function(_,l,N){var u;(u=s[_])&&Ucren.each(u,function(L){L.apply(N,l)})},n=function(_,l){s[_]||(s[_]=[]),s[_].push(l)},function(_,l,N){typeof l>"u"&&(l=[]),l instanceof Array?t.apply(this,arguments):typeof l=="function"&&n.apply(this,arguments)}}(),each,Element:function(s,t){var n,_;return s&&s.isUcrenElement?t?s.dom:s:(s=typeof s=="string"?document.getElementById(s):s,s?t?s:(_=s.getAttribute("handleId"),typeof _=="string"?Ucren.handle(_-0):(n=new Ucren.BasicElement(s),_=Ucren.handle(n),s.setAttribute("handleId",_+""),n)):null)},Event:function(s){if(s=s||window.event,!s)for(var t=this.caller;t;){if(t.arguments&&t.arguments[0]&&typeof t.arguments[0].altKey=="boolean"){s=t.arguments[0];break}t=t.caller}return s},fixNumber:function(s,t){return typeof s=="number"?s:t},fixString:function(s,t){return typeof s=="string"?s:t},fixConfig:function(s){var t;return t={},typeof s>"u"?t:typeof s=="function"?new s:s},handle:function s(t){var n,_,l;if(n=s,n.cache||(n.cache={}),typeof n.number>"u"&&(n.number=0),_=typeof t,_==="number")return n.cache[t.toString()];if(_==="object"||_==="function")return l=n.number++,n.cache[l.toString()]=t,l},id:function s(){return s.number=++s.number||0,"_"+s.number},loadImage:function(s,t){var n=s.length,_=0,l=function(){_===n&&t&&t()};Ucren.each(s,function(N){var u=document.createElement("img");u.onload=u.onerror=function(){this.onload=this.onerror=null,_++,l()},Ucren.tempDom.appendChild(u),u.src=N})},loadScript:function(src,callback){Ucren.request(src,function(text){eval(text),callback&&callback(text)})},makeElement,nul,randomNumber:function(s){return Math.floor(Math.random()*s)},randomWord:function(){var s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";return function(t,n){var _,l=[];return _=n||s,Ucren.each(t,(function(N){l[N]=_.charAt(this.randomNumber(_.length))}).bind(this)),l.join("")}}(),request:function(s,t){var n=Ucren.request,_=n.xhr;n.xhr||(window.XMLHttpRequest?_=n.xhr=new XMLHttpRequest:_=n.xhr=new ActiveXObject("Microsoft.XMLHTTP")),_.open("GET",s,!0),_.onreadystatechange=function(){_.readyState===4&&_.status===200&&t(_.responseText)},_.send(null)}};Ucren.BasicDrag=Ucren.Class(function(s){s=Ucren.fixConfig(s),this.type=Ucren.fixString(s.type,"normal");var t=this.isTouch="ontouchstart"in window;this.TOUCH_START=t?"touchstart":"mousedown",this.TOUCH_MOVE=t?"touchmove":"mousemove",this.TOUCH_END=t?"touchend":"mouseup"},{bind:function(s,t){s=Ucren.Element(s),t=Ucren.Element(t)||s;var n={};n[this.TOUCH_START]=(function(_){return _=Ucren.Event(_),this.startDrag(),_.cancelBubble=!0,_.stopPropagation&&_.stopPropagation(),_.returnValue=!1}).bind(this),t.addEvents(n),this.target=s},getCoors:function(s){var t=[];if(s.targetTouches&&s.targetTouches.length){var n=s.targetTouches[0];t[0]=n.clientX,t[1]=n.clientY}else t[0]=s.clientX,t[1]=s.clientY;return t},startDrag:function(){var s,t,n;s=this.target,t=s.draging={},this.isDraging=!0,t.x=parseInt(s.style("left"),10)||0,t.y=parseInt(s.style("top"),10)||0,n=Ucren.Event();var _=this.getCoors(n);t.mouseX=_[0],t.mouseY=_[1],this.registerDocumentEvent()},endDrag:function(){this.isDraging=!1,this.unRegisterDocumentEvent()},registerDocumentEvent:function(){var s,t;s=this.target,t=s.draging,t.documentSelectStart=Ucren.addEvent(document,"selectstart",function(n){return n=n||event,n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0,n.returnValue=!1}),t.documentMouseMove=Ucren.addEvent(document,this.TOUCH_MOVE,(function(n){var _,l;n=n||event,_=Ucren.isIe&&n.button!==1,l=!Ucren.isIe&&n.button!==0,(_||l)&&!this.isTouch&&this.endDrag();var N=this.getCoors(n);return t.newMouseX=N[0],t.newMouseY=N[1],n.stopPropagation&&n.stopPropagation(),n.returnValue=!1}).bind(this)),t.documentMouseUp=Ucren.addEvent(document,this.TOUCH_END,(function(){this.endDrag()}).bind(this)),clearInterval(t.timer),t.timer=setInterval((function(){var n,_,l,N;t.newMouseX&&(l=t.newMouseX-t.mouseX,N=t.newMouseY-t.mouseY,n=t.x+l,_=t.y+N,this.type==="calc"?this.returnValue(l,N,t.newMouseX,t.newMouseY):s.left(n).top(_))}).bind(this),10)},unRegisterDocumentEvent:function(){var s=this.target.draging;Ucren.delEvent(document,this.TOUCH_MOVE,s.documentMouseMove),Ucren.delEvent(document,this.TOUCH_END,s.documentMouseUp),Ucren.delEvent(document,"selectstart",s.documentSelectStart),clearInterval(s.timer)},returnValue:function(s,t,n,_){}});Ucren.Template=Ucren.Class(function(){this.string=join.call(arguments,"")},{apply:function(s){return this.string.format(s)}});Ucren.BasicElement=Ucren.Class(function(s){this.dom=s,this.countMapping={}},{isUcrenElement:!0,attr:function(s,t){if(typeof t=="string")this.dom.setAttribute(s,t);else return this.dom.getAttribute(s);return this},style:function(){var s=Ucren.isIe?function(t){return this.dom.currentStyle[t]}:function(t){var n;return n=document.defaultView.getComputedStyle(this.dom,null),n.getPropertyValue(t)};return function(t,n){if(typeof t=="object")Ucren.each(t,(function(_,l){this[l]=_}).bind(this.dom.style));else{if(typeof t=="string"&&typeof n>"u")return s.call(this,t);typeof t=="string"&&typeof n<"u"&&(this.dom.style[t]=n)}return this}}(),hasClass:function(s){var t=" "+this.dom.className+" ";return t.indexOf(" "+s+" ")>-1},setClass:function(s){return typeof s=="string"&&(this.dom.className=s.trim()),this},addClass:function(s){var t,n;return t=this.dom,n=" "+t.className+" ",n.indexOf(" "+s+" ")===-1&&(n+=s,n=n.trim(),n=n.replace(/ +/g," "),t.className=n),this},delClass:function(s){var t,n;return t=this.dom,n=" "+t.className+" ",n.indexOf(" "+s+" ")>-1&&(n=n.replace(" "+s+" "," "),n=n.trim(),n=n.replace(/ +/g," "),t.className=n),this},html:function(s){var t=this.dom;if(typeof s=="string")t.innerHTML=s;else if(s instanceof Array)t.innerHTML=s.join("");else return t.innerHTML;return this},left:function(s){var t=this.dom;if(typeof s=="number")t.style.left=s+"px",this.fireEvent("infect",[{left:s}]);else return this.getPos().x;return this},top:function(s){var t=this.dom;if(typeof s=="number")t.style.top=s+"px",this.fireEvent("infect",[{top:s}]);else return this.getPos().y;return this},width:function(s){var t=this.dom;if(typeof s=="number")t.style.width=s+"px",this.fireEvent("infect",[{width:s}]);else if(typeof s=="string")t.style.width=s,this.fireEvent("infect",[{width:s}]);else return this.getSize().width;return this},height:function(s){var t=this.dom;if(typeof s=="number")t.style.height=s+"px",this.fireEvent("infect",[{height:s}]);else if(typeof s=="string")t.style.height=s,this.fireEvent("infect",[{height:s}]);else return this.getSize().height;return this},count:function(s){return this.countMapping[s]=++this.countMapping[s]||1},display:function(s){var t=this.dom;if(typeof s=="boolean")t.style.display=s?"block":"none",this.fireEvent("infect",[{display:s}]);else return this.style("display")!=="none";return this},first:function(){for(var s=this.dom.firstChild;s&&!s.tagName&&s.nextSibling;)s=s.nextSibling;return s},add:function(s){var t;return t=Ucren.Element(s),this.dom.appendChild(t.dom),this},remove:function(s){var t;return s?(t=Ucren.Element(s),t.html(""),this.dom.removeChild(t.dom)):(t=Ucren.Element(this.dom.parentNode),t.remove(this)),this},insert:function(s){var t;return t=this.dom,t.firstChild?t.insertBefore(s,t.firstChild):this.add(s),this},addEvents:function(s){var t,n;return n={},t=this.dom,Ucren.each(s,function(_,l){n[l]=Ucren.addEvent(t,l,_)}),n},removeEvents:function(s){var t;return t=this.dom,Ucren.each(s,function(n,_){Ucren.delEvent(t,_,n)}),this},getPos:function(){var s,t,n,_,l;if(s=this.dom,n={},s.getBoundingClientRect){_=s.getBoundingClientRect(),l=Ucren.isIe?2:0;var N=document,u=Math.max(N.documentElement.scrollTop,N.body.scrollTop),L=Math.max(N.documentElement.scrollLeft,N.body.scrollLeft);return{x:_.left+L-l,y:_.top+u-l}}else{if(n={x:s.offsetLeft,y:s.offsetTop},t=s.offsetParent,t!==s)for(;t;)n.x+=t.offsetLeft,n.y+=t.offsetTop,t=t.offsetParent;Ucren.isSafari&&this.style("position")==="absolute"&&(n.x-=document.body.offsetLeft,n.y-=document.body.offsetTop)}for(s.parentNode?t=s.parentNode:t=null;t&&t.tagName.toUpperCase()!=="BODY"&&t.tagName.toUpperCase()!=="HTML";)n.x-=t.scrollLeft,n.y-=t.scrollTop,t.parentNode?t=t.parentNode:t=null;return n},getSize:function(){var s=this.dom,t=this.style("display");if(t&&t!=="none")return{width:s.offsetWidth,height:s.offsetHeight};var n=s.style,_={visibility:n.visibility,position:n.position,display:n.display},l={visibility:"hidden",display:"block"};_.position!=="fixed"&&(l.position="absolute"),this.style(l);var N={width:s.offsetWidth,height:s.offsetHeight};return this.style(_),N},observe:function(s,t){return s=Ucren.Element(s),s.on("infect",t.bind(this)),this},usePNGbackground:function(s){var t;return t=this.dom,/\.png$/i.test(s)&&Ucren.isIe6?t.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+s+"',sizingMethod='scale');":t.style.backgroundImage="url("+s+")",this},setAlpha:function(){var s=/alpha\s*\(\s*opacity\s*=\s*([^)]+)\)/;return function(t){var n=this.dom,_=n.style;return Ucren.isIe?(n.currentStyle&&!n.currentStyle.hasLayout&&(_.zoom=1),s.test(_.filter)?(t=t>=99.99?"":"alpha(opacity="+t+")",_.filter=_.filter.replace(s,t)):_.filter+=" alpha(opacity="+t+")"):_.opacity=t/100,this}}(),fadeIn:function(s){typeof this.fadingNumber>"u"&&(this.fadingNumber=0),this.setAlpha(this.fadingNumber);var t=(function(){this.setAlpha(this.fadingNumber),this.fadingNumber===100?(clearInterval(this.fadingInterval),s&&s()):this.fadingNumber+=10}).bind(this);return this.display(!0),clearInterval(this.fadingInterval),this.fadingInterval=setInterval(t,Ucren.isIe?20:30),this},fadeOut:function(s){typeof this.fadingNumber>"u"&&(this.fadingNumber=100),this.setAlpha(this.fadingNumber);var t=(function(){this.setAlpha(this.fadingNumber),this.fadingNumber===0?(clearInterval(this.fadingInterval),this.display(!1),s&&s()):this.fadingNumber-=10}).bind(this);return clearInterval(this.fadingInterval),this.fadingInterval=setInterval(t,Ucren.isIe?20:30),this},useMouseAction:function(s,t){return this.MouseAction||(this.MouseAction=new Ucren.MouseAction({element:this})),this.MouseAction.use(s,t),this}});const{LAYERS:LAYERS$o,FONT_FAMILY}=getConfig$1(),layers={},zIndexes={[LAYERS$o.PRELOAD]:zi(),[LAYERS$o.DEFAULT]:zi(),[LAYERS$o.FLASH]:zi(),[LAYERS$o.JUICE]:zi(),[LAYERS$o.KNIFE]:zi(),[LAYERS$o.FRUIT]:zi(),[LAYERS$o.LIGHT]:zi(),[LAYERS$o.FRUIT]:zi(),[LAYERS$o.MASK]:zi(),[LAYERS$o.START_SCREEN]:zi(),[LAYERS$o.RESULT_SCREEN]:zi(),[LAYERS$o.BRAND_INTRO]:zi(),[LAYERS$o.BRAND_QUESTION]:zi()},{width,height}=viewport;function createImage(s,t,n,_,l,N,u="none"){return s=this.getLayer(s),s.image(t,n,_,l,N,u)}function createText(s,t,n,_,l,N,u="normal",L="start"){return s=this.getLayer(s),s.text(n,_,t).attr({fill:l||"#fff","font-family":FONT_FAMILY,"font-size":N||"14px","font-weight":u,"text-anchor":L})}function getLayer(s){s=s||LAYERS$o.DEFAULT;let t=layers[s],n;return t||(n=makeElement("div",{class:"layer","data-name":s,style:"z-index: "+(zIndexes[s]||0)+";"}),Ucren.Element("extra").add(n),t=layers[s]=Raphael(n,width,height),t)}function hideLayer(s){const t=getLayer(s);t&&t.canvas&&t.canvas.parentNode&&(t.canvas.parentNode.style.display="none")}function showLayer(s){const t=getLayer(s);t&&t.canvas&&t.canvas.parentNode&&(t.canvas.parentNode.style.display="block")}function zi(){return zi.num=++zi.num||2}const layer={createImage,createText,getLayer,hideLayer,showLayer};let addingTasks=[],adding=0,tasks=[];class Timeline{constructor(){f(this,"_requestAnimationFrame",function(t){return t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||t.oRequestAnimationFrame||function(n){setTimeout(n,1)}}(window)),this.startTime=0,this.count=0}now(){return new Date().getTime()}init(){this.startTime=this.now(),this.count=0,setInterval(()=>{this.count++,this.update(this.now())},1)}createTask(t){const n=this._createTask(t);return addingTasks.unshift(n),adding=1,t.recycle&&this.taskList(t.recycle,n),n}taskList(t,n){return t.clear||(t.clear=function(){for(let _,l=this.length-1;l>=0;l--)_=this[l],_.stop(),this.splice(l,1);return this}),n&&t.unshift(n),t}setTimeout(t,n){return this.createTask({start:n,duration:0,onTimeStart:t})}_setInterval(t,n){const _=setInterval(t,n);return{stop:function(){clearInterval(_)}}}getFPS(){const t=this.now(),n=this.count/(t-this.startTime)*1e3;return this.count>1e3&&(this.count=0,this.startTime=t),n}_createTask(t){const n=t.object||{};return t.start=t.start||0,{start:t.start+this.now(),duration:t.duration===-1?864e5:t.duration,data:t.data?[0].concat(t.data):[0],started:0,object:n,onTimeStart:t.onTimeStart||n.onTimeStart||nul,onTimeUpdate:t.onTimeUpdate||n.onTimeUpdate||nul,onTimeEnd:t.onTimeEnd||n.onTimeEnd||nul,stop:function(){this.stopped=1}}}updateTask(t,n){const _=t.data;_[0]=n,t.onTimeUpdate.apply(t.object,_)}checkStartTask(t){t.started||(t.started=1,t.onTimeStart.apply(t.object,t.data.slice(1)),this.updateTask(t,0))}update(t){let n=tasks.length,_,l,N,u;for(;n--;)if(l=tasks[n],N=l.start,u=l.duration,t>=N){if(l.stopped){tasks.splice(n,1);continue}this.checkStartTask(l),(_=t-N)<u?this.updateTask(l,_):(this.updateTask(l,u),l.onTimeEnd.apply(l.object,l.data.slice(1)),tasks.splice(n,1))}adding&&(tasks.unshift.apply(tasks,addingTasks),addingTasks.length=adding=0)}}const timeline=new Timeline,{MODES:MODES$d}=getConfig$1();class Displacement{constructor({layer:t,imageSrc:n,width:_,height:l,startX:N,startY:u,endX:L,endY:X,animMap:w,duration:I}){f(this,"image"),f(this,"anim",{}),f(this,"anims",[]),this.layer=t,this.imageSrc=n,this.width=_,this.height=l,this.startX=N,this.startY=u,this.endX=L,this.endY=X,typeof w=="function"?this.anim.show=this.anim.hide=w:this.anim=w,this.duration=I}createTask(t,n,_,l,N,u,L,X){timeline.createTask({start:t,duration:n,object:this,data:[_,l,N,u,L,X],onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}set(){this.image=layer.createImage(this.layer,this.imageSrc,this.startX,this.startY,this.width,this.height)}show(t){this.createTask(t,this.duration,this.startX,this.startY,this.endX,this.endY,this.anim.show,MODES$d.SHOW)}hide(){this.anims.clear(),this.createTask(0,this.duration,this.endX,this.endY,this.startX,this.startY,this.anim.hide,MODES$d.HIDE)}onTimeUpdate(t,n,_,l,N,u){this.image.attr({x:u(t,n,l-n,this.duration),y:u(t,_,N-_,this.duration)})}onTimeStart(){}onTimeEnd(t,n,_,l,N){N===MODES$d.HIDE&&this.image.hide()}}class DisplacementFactory{create(t){return new Displacement(t)}}const displacementFactory=new DisplacementFactory,{LAYERS:LAYERS$n}=getConfig$1();class Preload{constructor(t){displacementFactory.create({layer:LAYERS$n.PRELOAD,imageSrc:t}).set()}}class PreloadFactory{create(t){return new Preload(t)}}const preloadFactory=new PreloadFactory,{FRUIT_CONFIG:FRUIT_CONFIG$2,LOSE_CONFIG:LOSE_CONFIG$1}=getConfig$1();function getURLs(){return[Object.values(FRUIT_CONFIG$2.infos).map(([s])=>s),Object.values(FRUIT_CONFIG$2.cutImages).flat(),FRUIT_CONFIG$2.shadowImage,LOSE_CONFIG$1.conf.map(({src:s})=>s)].flat()}function preload(){getURLs().forEach(preloadFactory.create)}function unsetObject(s){for(const t in s)s.hasOwnProperty(t)&&typeof s[t]=="function"&&(s[t]=function(){})}function getAngleByRadian(s){return s*180/Math.PI}function pointToRadian(s,t){if(t[0]===s[0])return t[1]>s[1]?Math.PI*.5:Math.PI*1.5;if(t[1]===s[1])return t[0]>s[0]?0:Math.PI;const n=Math.atan((s[1]-t[1])/(s[0]-t[0]));return t[0]>s[0]&&t[1]<s[1]?n+2*Math.PI:t[0]>s[0]&&t[1]>s[1]?n:n+Math.PI}const tools={unsetObject,getAngleByRadian,pointToRadian};function postMessage(s,t){const n=[].slice.call(arguments,0),_=n.length-1;t=n[_],n.slice(0,_),Ucren.dispatch(t,n)}function addEventListener(s,t){Ucren.dispatch(s,t)}const message={postMessage,addEventListener},stack={},cache={};class State{constructor(t){this.key=t}is(t){return stack[this.key]===t}isnot(t){return stack[this.key]!==t}ison(){return this.is(!0)}isoff(){return this.isnot(!0)}isunset(){return this.is(void 0)}set(t){stack[this.key]=t}get(){return stack[this.key]}on(){return this.set(!0),{keep:t=>{timeline.setTimeout(()=>this.set(!1),t)}}}off(){return this.set(!1),{keep:t=>{timeline.setTimeout(()=>this.set(!0),t)}}}}const state=s=>cache[s]?cache[s]:cache[s]=new State(s),{LAYERS:LAYERS$m,KNIFE_PART_CONFIG}=getConfig$1();class Knifes{constructor(){f(this,"_knifes",[]),f(this,"lastX",null),f(this,"lastY",null),f(this,"switchState",!0),f(this,"_anims",[])}get anims(){return this._anims}newKnife(){this.lastX=null,this.lastY=null}through(t,n){if(!this.switchState)return;let _=null;return this.lastX!==null&&(this.lastX!==t||this.lastY!==n)&&(new KnifePart({sx:this.lastX,sy:this.lastY,ex:t,ey:n}).set(),_=[this.lastX,this.lastY,t,n]),this.lastX=t,this.lastY=n,_}pause(){this.anims.clear&&this.anims.clear(),this.switchOff()}switchOff(){this.switchState=!1}switchOn(){this.switchState=!0,this.endAll()}endAll(){for(let t=this._knifes.length-1;t>=0;t--)this._knifes[t].end()}push(t){this._knifes.push(t)}indexOf(t){return this._knifes.indexOf(t)}splice(t,n){this._knifes.splice(t,n)}}const knifes=new Knifes;class KnifePart{constructor(t){f(this,"color",KNIFE_PART_CONFIG.color),f(this,"stroke",KNIFE_PART_CONFIG.stroke),f(this,"life",KNIFE_PART_CONFIG.life),this.sx=t.sx,this.sy=t.sy,this.ex=t.ex,this.ey=t.ey,knifes.push(this)}set(){const t=layer.getLayer(LAYERS$m.KNIFE);let n,_,l,N,u,L,X,w;return n=this.sx,_=this.sy,l=this.ex,N=this.ey,u=n-l,L=_-N,X=Math.abs(u),w=Math.abs(L),X>w?(n+=u<0?-1:1,_+=L<0?-(w/X):w/X):(n+=u<0?-(X/w):X/w,_+=L<0?-1:1),this.line=t.path("M"+n+","+_+"L"+l+","+N).attr({stroke:this.color,"stroke-width":this.stroke+"px"}),timeline.createTask({start:0,duration:this.life,object:this,onTimeUpdate:this.update,onTimeEnd:this.end,recycle:knifes.anims}),this}update(t){this.line.attr("stroke-width",this.stroke*(1-t/this.life)+"px")}end(){this.line.remove();const t=knifes.indexOf(this);t&&knifes.splice(t,1)}}const{MESSAGES:MESSAGES$d,INTERACTION_MODE,INTERACTION_MODES}=getConfig$1(),{width:viewportWidth$3,height:viewportHeight$3}=viewport;class Control{constructor(){f(this,"canvasTop",0),f(this,"canvasLeft",0),f(this,"fix",()=>{this.canvasLeft=(document.documentElement.clientWidth-viewportWidth$3)/2,this.canvasTop=(document.documentElement.clientHeight-viewportHeight$3)/2}),f(this,"dragHandler",(t,n,_,l,N)=>{const u=_-this.canvasLeft,L=l-this.canvasTop;if(INTERACTION_MODE===INTERACTION_MODES.SLICE){const X=knifes.through(u,L);X&&message.postMessage(X,MESSAGES$d.SLICE)}else INTERACTION_MODE===INTERACTION_MODES.TOUCH&&message.postMessage([u,L],MESSAGES$d.TOUCH)}),f(this,"startDragHandler",()=>{knifes.newKnife()})}init(){this.fixCanvasPos(),this.installDragger()}fixCanvasPos(){this.fix(),Ucren.addEvent(window,"resize",this.fix)}installDragger(){const t=new Ucren.BasicDrag({type:"calc"});t.on("returnValue",this.dragHandler),t.on("startDrag",this.startDragHandler),t.bind(document.documentElement)}}const control=new Control;function exponential(){}exponential.co=function s(t,n,_,l){return t==l?n+_:_*(-Math.pow(2,-10*t/l)+1)+n};exponential.ci=function s(t,n,_,l){return t==0?n:_*Math.pow(2,10*(t/l-1))+n};function quadratic(){}quadratic.ci=function s(t,n,_,l){return _*(t/=l)*t+n};quadratic.co=function s(t,n,_,l){return-_*(t/=l)*(t-2)+n};quadratic.cio=function s(t,n,_,l){return(t/=l/2)<1?_/2*t*t+n:-_/2*(--t*(t-2)-1)+n};function linear(s,t,n,_){return n*s/_+t}function back(){}back.ci=function s(t,n,_,l,N){return N=1.70158,_*((t=t/l-1)*t*((N+1)*t+N)+1)+n};back.co=function s(t,n,_,l,N){return N=1.70158,_*(t/=l)*t*((N+1)*t-N)+n};function init$1(){const s={defaults:{autoplay:!1,duration:5e3,formats:[],loop:!1,placeholder:"--",preload:"metadata",volume:80},types:{mp3:"audio/mpeg",ogg:"audio/ogg",wav:"audio/wav",aac:"audio/aac",m4a:"audio/x-m4a"},sounds:[],el:document.createElement("audio"),sound:function(t,n){n=n||{};let _=0,l=[],N={},u=s.isSupported();this.load=function(){return u?(this.sound.load(),this):this},this.play=function(){return u?(this.sound.play().catch(console.warn),this):this},this.togglePlay=function(){return u?(this.sound.paused?this.sound.play().catch(console.warn):this.sound.pause(),this):this},this.pause=function(){return u?(this.sound.pause(),this):this},this.isPaused=function(){return u?this.sound.paused:null},this.stop=function(){return u?(this.setTime(this.getDuration()),this.sound.pause(),this):this},this.isEnded=function(){return u?this.sound.ended:null},this.loop=function(){return u?(this.sound.loop="loop",this.bind("ended.buzzloop",function(){this.currentTime=0,this.play()}),this):this},this.unloop=function(){return u?(this.sound.removeAttribute("loop"),this.unbind("ended.buzzloop"),this):this},this.mute=function(){return u?(this.sound.muted=!0,this):this},this.unmute=function(){return u?(this.sound.muted=!1,this):this},this.toggleMute=function(){return u?(this.sound.muted=!this.sound.muted,this):this},this.isMuted=function(){return u?this.sound.muted:null},this.setVolume=function(I){return u?(I<0&&(I=0),I>100&&(I=100),this.volume=I,this.sound.volume=I/100,this):this},this.getVolume=function(){return u?this.volume:this},this.increaseVolume=function(I){return this.setVolume(this.volume+(I||1))},this.decreaseVolume=function(I){return this.setVolume(this.volume-(I||1))},this.setTime=function(I){return u?(this.whenReady(function(){this.sound.currentTime=I}),this):this},this.getTime=function(){if(!u)return null;const I=Math.round(this.sound.currentTime*100)/100;return isNaN(I)?s.defaults.placeholder:I},this.setPercent=function(I){return u?this.setTime(s.fromPercent(I,this.sound.duration)):this},this.getPercent=function(){if(!u)return null;const I=Math.round(s.toPercent(this.sound.currentTime,this.sound.duration));return isNaN(I)?s.defaults.placeholder:I},this.setSpeed=function(I){if(!u)return this;this.sound.playbackRate=I},this.getSpeed=function(){return u?this.sound.playbackRate:null},this.getDuration=function(){if(!u)return null;const I=Math.round(this.sound.duration*100)/100;return isNaN(I)?s.defaults.placeholder:I},this.getPlayed=function(){return u?L(this.sound.played):null},this.getBuffered=function(){return u?L(this.sound.buffered):null},this.getSeekable=function(){return u?L(this.sound.seekable):null},this.getErrorCode=function(){return u&&this.sound.error?this.sound.error.code:0},this.getErrorMessage=function(){if(!u)return null;switch(this.getErrorCode()){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return null}},this.getStateCode=function(){return u?this.sound.readyState:null},this.getStateMessage=function(){if(!u)return null;switch(this.getStateCode()){case 0:return"HAVE_NOTHING";case 1:return"HAVE_METADATA";case 2:return"HAVE_CURRENT_DATA";case 3:return"HAVE_FUTURE_DATA";case 4:return"HAVE_ENOUGH_DATA";default:return null}},this.getNetworkStateCode=function(){return u?this.sound.networkState:null},this.getNetworkStateMessage=function(){if(!u)return null;switch(this.getNetworkStateCode()){case 0:return"NETWORK_EMPTY";case 1:return"NETWORK_IDLE";case 2:return"NETWORK_LOADING";case 3:return"NETWORK_NO_SOURCE";default:return null}},this.set=function(I,x){return u?(this.sound[I]=x,this):this},this.get=function(I){return u?I?this.sound[I]:this.sound:null},this.bind=function(I,x){if(!u)return this;I=I.split(" ");const v=this,Y=function(Z){x.call(v,Z)};for(let Z=0;Z<I.length;Z++){let y=I[Z],K=y;y=K.split(".")[0],l.push({idx:K,func:Y}),this.sound.addEventListener(y,Y,!0)}return this},this.unbind=function(I){if(!u)return this;I=I.split(" ");for(let x=0;x<I.length;x++){const v=I[x],Y=v.split(".")[0];for(let Z=0;Z<l.length;Z++){const y=l[Z].idx.split(".");(l[Z].idx===v||y[1]&&y[1]===v.replace(".",""))&&(this.sound.removeEventListener(Y,l[Z].func,!0),l.splice(Z,1))}}return this},this.bindOnce=function(I,x){if(!u)return this;const v=this;N[_++]=!1,this.bind(_+I,function(){N[_]||(N[_]=!0,x.call(v)),v.unbind(_+I)})},this.trigger=function(I){if(!u)return this;I=I.split(" ");for(let x=0;x<I.length;x++){const v=I[x];for(let Y=0;Y<l.length;Y++){const Z=l[Y].idx.split(".");if(l[Y].idx===v||Z[0]&&Z[0]===v.replace(".","")){const y=document.createEvent("HTMLEvents");y.initEvent(Z[0],!1,!0),this.sound.dispatchEvent(y)}}}return this},this.fadeTo=function(I,x,v){if(!u)return this;x instanceof Function?(v=x,x=s.defaults.duration):x=x||s.defaults.duration;const Y=this.volume,Z=x/Math.abs(Y-I),y=this;this.play();function K(){setTimeout(function(){Y<I&&y.volume<I?(y.setVolume(y.volume+=1),K()):Y>I&&y.volume>I?(y.setVolume(y.volume-=1),K()):v instanceof Function&&v.apply(y)},Z)}return this.whenReady(function(){K()}),this},this.fadeIn=function(I,x){return u?this.setVolume(0).fadeTo(100,I,x):this},this.fadeOut=function(I,x){return u?this.fadeTo(0,I,x):this},this.fadeWith=function(I,x){return u?(this.fadeOut(x,function(){this.stop()}),I.play().fadeIn(x),this):this},this.whenReady=function(I){if(!u)return null;const x=this;this.sound.readyState===0?this.bind("canplay.buzzwhenready",function(){I.call(x)}):I.call(x)};function L(I){const x=[],v=I.length-1;for(let Y=0;Y<=v;Y++)x.push({start:I.start(v),end:I.end(v)});return x}function X(I){return I.split(".").pop()}function w(I,x){const v=document.createElement("source");v.src=x,s.types[X(x)]&&(v.type=s.types[X(x)]),I.appendChild(v)}if(u&&t){for(const I in s.defaults)s.defaults.hasOwnProperty(I)&&(n[I]=n[I]||s.defaults[I]);if(this.sound=document.createElement("audio"),t instanceof Array)for(const I in t)t.hasOwnProperty(I)&&w(this.sound,t[I]);else if(n.formats.length)for(const I in n.formats)n.formats.hasOwnProperty(I)&&w(this.sound,t+"."+n.formats[I]);else w(this.sound,t);n.loop&&this.loop(),n.autoplay&&(this.sound.autoplay="autoplay"),n.preload===!0?this.sound.preload="auto":n.preload===!1?this.sound.preload="none":this.sound.preload=n.preload,this.setVolume(n.volume),s.sounds.push(this)}},group:function(t){t=_(t,arguments),this.getSounds=function(){return t},this.add=function(l){l=_(l,arguments);for(let N=0;N<l.length;N++)t.push(l[N])},this.remove=function(l){l=_(l,arguments);for(let N=0;N<l.length;N++)for(let u=0;u<t.length;u++)if(t[u]==l[N]){delete t[u];break}},this.load=function(){return n("load"),this},this.play=function(){return n("play"),this},this.togglePlay=function(){return n("togglePlay"),this},this.pause=function(l){return n("pause",l),this},this.stop=function(){return n("stop"),this},this.mute=function(){return n("mute"),this},this.unmute=function(){return n("unmute"),this},this.toggleMute=function(){return n("toggleMute"),this},this.setVolume=function(l){return n("setVolume",l),this},this.increaseVolume=function(l){return n("increaseVolume",l),this},this.decreaseVolume=function(l){return n("decreaseVolume",l),this},this.loop=function(){return n("loop"),this},this.unloop=function(){return n("unloop"),this},this.setTime=function(l){return n("setTime",l),this},this.setduration=function(l){return n("setduration",l),this},this.set=function(l,N){return n("set",l,N),this},this.bind=function(l,N){return n("bind",l,N),this},this.unbind=function(l){return n("unbind",l),this},this.bindOnce=function(l,N){return n("bindOnce",l,N),this},this.trigger=function(l){return n("trigger",l),this},this.fade=function(l,N,u,L){return n("fade",l,N,u,L),this},this.fadeIn=function(l,N){return n("fadeIn",l,N),this},this.fadeOut=function(l,N){return n("fadeOut",l,N),this};function n(){const l=_(null,arguments),N=l.shift();for(let u=0;u<t.length;u++)t[u][N].apply(t[u],l)}function _(l,N){return l instanceof Array?l:Array.prototype.slice.call(N)}},all:function(){return new s.group(s.sounds)},isSupported:function(){return!!s.el.canPlayType},isOGGSupported:function(){return!!s.el.canPlayType&&s.el.canPlayType('audio/ogg; codecs="vorbis"')},isWAVSupported:function(){return!!s.el.canPlayType&&s.el.canPlayType('audio/wav; codecs="1"')},isMP3Supported:function(){return!!s.el.canPlayType&&s.el.canPlayType("audio/mpeg;")},isAACSupported:function(){return!!s.el.canPlayType&&(s.el.canPlayType("audio/x-m4a;")||s.el.canPlayType("audio/aac;"))},toTimer:function(t,n){let _,l,N;return _=Math.floor(t/3600),_=isNaN(_)?"--":_>=10?_:"0"+_,l=Math.floor(n?t/60%60:t/60),l=isNaN(l)?"--":l>=10?l:"0"+l,N=Math.floor(t%60),N=isNaN(N)?"--":N>=10?N:"0"+N,n?_+":"+l+":"+N:l+":"+N},fromTimer:function(t){const n=t.toString().split(":");return n&&n.length===3&&(t=parseInt(n[0],10)*3600+parseInt(n[1],10)*60+parseInt(n[2],10)),n&&n.length===2&&(t=parseInt(n[0],10)*60+parseInt(n[1],10)),t},toPercent:function(t,n,_){const l=Math.pow(10,_||0);return Math.round(t*100/n*l)/l},fromPercent:function(t,n,_){const l=Math.pow(10,_||0);return Math.round(n/100*t*l)/l}};return s}const buzz=init$1(),VIBRATION_PATTERNS={DEFAULT:[100],SOUND_BUTTON:[30],FRUIT:[30],GAME_OVER:[10,0,10,0,100,0,600],BOOM:[10,0,10,0,100,0,600,0,10,0,10,0,100,0,400]};class Vibration{vibrate(t=VIBRATION_PATTERNS.DEFAULT){navigator.vibrate&&navigator.vibrate(t)}soundButton(){this.vibrate(VIBRATION_PATTERNS.SOUND_BUTTON)}fruit(){this.vibrate(VIBRATION_PATTERNS.FRUIT)}gameOver(){this.vibrate(VIBRATION_PATTERNS.GAME_OVER)}boom(){this.vibrate(VIBRATION_PATTERNS.BOOM)}}const vibration=new Vibration,{HOME_TEXT_CONFIG:HOME_TEXT_CONFIG$4,LAYERS:LAYERS$l,SOUND_BUTTON_CONFIG,MODES:MODES$c,MESSAGES:MESSAGES$c}=getConfig$1();class SoundButton{constructor(){f(this,"startText"),f(this,"gameText"),f(this,"resultText"),f(this,"startSoundButton"),f(this,"gameSoundButton"),f(this,"resultSoundButton"),f(this,"startGroup"),f(this,"gameGroup"),f(this,"resultGroup"),f(this,"anims",[]),f(this,"anim",exponential.co),f(this,"isOn",!1)}set(){this.startSoundButton=layer.createImage(LAYERS$l.START_SCREEN,this.isOn?SOUND_BUTTON_CONFIG.imageOn:SOUND_BUTTON_CONFIG.imageOff,SOUND_BUTTON_CONFIG.imageX,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.imageWidth,SOUND_BUTTON_CONFIG.imageHeight).hide(),this.startText=layer.createText(LAYERS$l.START_SCREEN,this.isOn?SOUND_BUTTON_CONFIG.textValueOff:SOUND_BUTTON_CONFIG.textValueOn,SOUND_BUTTON_CONFIG.textX,SOUND_BUTTON_CONFIG.textStartY,SOUND_BUTTON_CONFIG.textFill,SOUND_BUTTON_CONFIG.textSize,SOUND_BUTTON_CONFIG.textWeight,SOUND_BUTTON_CONFIG.textAnchor),this.startGroup=layer.getLayer(LAYERS$l.START_SCREEN).set(),this.startGroup.push(this.startSoundButton,this.startText),this.startGroup.click(()=>{this.toggle(),message.postMessage(null,MESSAGES$c.TOGGLE_SOUND),vibration.soundButton()}),this.gameSoundButton=layer.createImage(LAYERS$l.FRUIT,this.isOn?SOUND_BUTTON_CONFIG.imageOn:SOUND_BUTTON_CONFIG.imageOff,SOUND_BUTTON_CONFIG.imageX,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.imageWidth,SOUND_BUTTON_CONFIG.imageHeight).hide(),this.gameText=layer.createText(LAYERS$l.FRUIT,this.isOn?SOUND_BUTTON_CONFIG.textValueOff:SOUND_BUTTON_CONFIG.textValueOn,SOUND_BUTTON_CONFIG.textX,SOUND_BUTTON_CONFIG.textStartY,SOUND_BUTTON_CONFIG.textFill,SOUND_BUTTON_CONFIG.textSize,SOUND_BUTTON_CONFIG.textWeight,SOUND_BUTTON_CONFIG.textAnchor),this.gameGroup=layer.getLayer(LAYERS$l.FRUIT).set(),this.gameGroup.push(this.gameSoundButton,this.gameText),this.gameGroup.click(()=>{this.toggle(),message.postMessage(null,MESSAGES$c.TOGGLE_SOUND),vibration.soundButton()}),this.resultSoundButton=layer.createImage(LAYERS$l.RESULT_SCREEN,this.isOn?SOUND_BUTTON_CONFIG.imageOn:SOUND_BUTTON_CONFIG.imageOff,SOUND_BUTTON_CONFIG.imageX,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.imageWidth,SOUND_BUTTON_CONFIG.imageHeight).hide(),this.resultText=layer.createText(LAYERS$l.RESULT_SCREEN,this.isOn?SOUND_BUTTON_CONFIG.textValueOff:SOUND_BUTTON_CONFIG.textValueOn,SOUND_BUTTON_CONFIG.textX,SOUND_BUTTON_CONFIG.textStartY,SOUND_BUTTON_CONFIG.textFill,SOUND_BUTTON_CONFIG.textSize,SOUND_BUTTON_CONFIG.textWeight,SOUND_BUTTON_CONFIG.textAnchor),this.resultGroup=layer.getLayer(LAYERS$l.START_SCREEN).set(),this.resultGroup.push(this.resultSoundButton,this.resultText),this.resultGroup.click(()=>{this.toggle(),message.postMessage(null,MESSAGES$c.TOGGLE_SOUND),vibration.soundButton()})}show(t){timeline.createTask({start:t,duration:SOUND_BUTTON_CONFIG.animLength,data:[MODES$c.SHOW,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.imageHomeEndY,SOUND_BUTTON_CONFIG.textStartY,SOUND_BUTTON_CONFIG.textHomeEndY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:SOUND_BUTTON_CONFIG.animLength,data:[MODES$c.SHOW,SOUND_BUTTON_CONFIG.imageHomeEndY,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.textHomeEndY,SOUND_BUTTON_CONFIG.textStartY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}showHomeSoundButton(t){timeline.createTask({start:t,duration:SOUND_BUTTON_CONFIG.animLength,data:[MODES$c.SHOW,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.imageHomeEndY,SOUND_BUTTON_CONFIG.textStartY,SOUND_BUTTON_CONFIG.textHomeEndY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}showResultSoundButton(t){timeline.createTask({start:t,duration:SOUND_BUTTON_CONFIG.animLength,data:[MODES$c.SHOW,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.imageResultEndY,SOUND_BUTTON_CONFIG.textStartY,SOUND_BUTTON_CONFIG.textResultEndY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}showGameSoundButton(t){timeline.createTask({start:t,duration:SOUND_BUTTON_CONFIG.animLength,data:[MODES$c.SHOW,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.imageGameEndY,SOUND_BUTTON_CONFIG.textStartY,SOUND_BUTTON_CONFIG.textGameEndY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}hideHomeSoundButton(t){timeline.createTask({start:t,duration:SOUND_BUTTON_CONFIG.animLength,data:[MODES$c.HIDE,SOUND_BUTTON_CONFIG.imageHomeEndY,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.textHomeEndY,SOUND_BUTTON_CONFIG.textStartY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}hideResultSoundButton(t){timeline.createTask({start:t,duration:SOUND_BUTTON_CONFIG.animLength,data:[MODES$c.HIDE,SOUND_BUTTON_CONFIG.imageResultEndY,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.textResultEndY,SOUND_BUTTON_CONFIG.textStartY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}hideGameSoundButton(t){timeline.createTask({start:t,duration:SOUND_BUTTON_CONFIG.animLength,data:[MODES$c.HIDE,SOUND_BUTTON_CONFIG.imageGameEndY,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.textGameEndY,SOUND_BUTTON_CONFIG.textStartY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}onTimeUpdate(t,n,_,l,N,u){this.startSoundButton.attr("y",this.anim(t,_,l-_,HOME_TEXT_CONFIG$4.animLength)),this.startText.attr("y",this.anim(t,N,u-N,HOME_TEXT_CONFIG$4.animLength)),this.gameSoundButton.attr("y",this.anim(t,_,l-_,HOME_TEXT_CONFIG$4.animLength)),this.gameText.attr("y",this.anim(t,N,u-N,HOME_TEXT_CONFIG$4.animLength)),this.resultSoundButton.attr("y",this.anim(t,_,l-_,HOME_TEXT_CONFIG$4.animLength)),this.resultText.attr("y",this.anim(t,N,u-N,HOME_TEXT_CONFIG$4.animLength))}onTimeStart(t){t===MODES$c.SHOW&&[this.startSoundButton,this.startText,this.gameSoundButton,this.gameText,this.resultSoundButton,this.resultText].invoke(t)}onTimeEnd(t){t===MODES$c.HIDE&&[this.startSoundButton,this.startText,this.gameSoundButton,this.gameText,this.resultSoundButton,this.resultText].invoke(t)}toggle(){this.isOn?this.off():this.on()}on(){this.startText.attr("text",SOUND_BUTTON_CONFIG.textValueOff),this.startSoundButton.attr("src",SOUND_BUTTON_CONFIG.imageOn),this.gameText.attr("text",SOUND_BUTTON_CONFIG.textValueOff),this.gameSoundButton.attr("src",SOUND_BUTTON_CONFIG.imageOn),this.resultText.attr("text",SOUND_BUTTON_CONFIG.textValueOff),this.resultSoundButton.attr("src",SOUND_BUTTON_CONFIG.imageOn),this.isOn=!0}off(){this.startText.attr("text",SOUND_BUTTON_CONFIG.textValueOn),this.startSoundButton.attr("src",SOUND_BUTTON_CONFIG.imageOff),this.gameText.attr("text",SOUND_BUTTON_CONFIG.textValueOn),this.gameSoundButton.attr("src",SOUND_BUTTON_CONFIG.imageOff),this.resultText.attr("text",SOUND_BUTTON_CONFIG.textValueOn),this.resultSoundButton.attr("src",SOUND_BUTTON_CONFIG.imageOff),this.isOn=!1}}const soundButton=new SoundButton;class Sound{constructor(t){this.sound=new buzz.sound(t,{formats:["ogg","mp3"],preload:!0,autoload:!0,loop:!1})}play(){this.sound.setPercent(0),this.sound.setVolume(100),soundButton.isOn&&this.sound.play()}stop(){soundButton.isOn?this.sound.fadeOut(1e3,function(){this.pause()}):this.sound.stop()}}class SoundFactory{create(t){return new Sound(t)}}const soundFactory=new SoundFactory,{LAYERS:LAYERS$k,FLASH_CONFIG,SOUNDS:SOUNDS$2}=getConfig$1();class Flash{constructor(){f(this,"image"),f(this,"snd"),f(this,"xDiff",0),f(this,"yDiff",0),f(this,"switchOn",!0),f(this,"anim",quadratic.cio),f(this,"anims",[]),f(this,"dur",FLASH_CONFIG.duration)}set(){if(!this.switchOn)return!1;this.image=layer.createImage(LAYERS$k.FLASH,FLASH_CONFIG.image,0,0,FLASH_CONFIG.width,FLASH_CONFIG.height).hide(),this.snd=soundFactory.create(SOUNDS$2.SPLATTER)}showAt(t,n,_){if(!this.switchOn)return!1;this.image&&this.image.rotate(_,!0).scale(1e-5,1e-5).attr({x:t+this.xDiff,y:n+this.yDiff}).show(),this.anims.clear&&this.anims.clear(),this.snd&&this.snd.play(),timeline.createTask({start:0,duration:this.dur,data:[1e-5,1],object:this,onTimeUpdate:this.onTimeUpdate,recycle:this.anims}),timeline.createTask({start:this.dur,duration:this.dur,data:[1,1e-5],object:this,onTimeUpdate:this.onTimeUpdate,recycle:this.anims})}onTimeUpdate(t,n,_,l){if(!this.switchOn)return!1;this.image.scale(l=this.anim(t,n,_-n,this.dur),l)}}const flash=new Flash,{LAYERS:LAYERS$j,JUICE_CONFIG}=getConfig$1();class Juice{constructor(t,n,_,l=JUICE_CONFIG.shapes.CIRCLE){f(this,"dur",JUICE_CONFIG.duration),f(this,"anim",exponential.co),f(this,"dropAnim",quadratic.co),f(this,"shape"),f(this,"figure"),this.originX=t,this.originY=n,this.color=_,this.radius=JUICE_CONFIG.radius,this.distance=randomNumber(200)+100,this.dir=randomNumber(360)*Math.PI/180,this.shape=l}render(){const t=layer.getLayer(LAYERS$j.JUICE);if(this.shape===JUICE_CONFIG.shapes.CIRCLE)this.figure=t.circle(this.originX,this.originY,this.radius).attr({fill:this.color,stroke:"none"});else if(this.shape===JUICE_CONFIG.shapes.SQUARE)this.figure=t.rect(this.originX-this.radius,this.originY-this.radius,this.radius*2,this.radius*2).attr({fill:this.color,stroke:"none"});else if(this.shape===JUICE_CONFIG.shapes.DIAMOND){const n=this.createStarPath(this.originX,this.originY,this.radius,4);this.figure=t.path(n).attr({fill:this.color,stroke:"none"})}else if(this.shape===JUICE_CONFIG.shapes.STAR){const n=this.createStarPath(this.originX,this.originY,this.radius,5);this.figure=t.path(n).attr({fill:this.color,stroke:"none"})}}createStarPath(t,n,_,l){const N=Math.PI/l;let u="";for(let L=0;L<2*l;L++){const X=L*N,w=L%2===0?_:_/2,I=t+w*Math.sin(X),x=n-w*Math.cos(X);u+=L===0?`M ${I} ${x}`:`L ${I} ${x}`}return u+="Z",u}sputter(){timeline.createTask({start:0,duration:this.dur,object:this,onTimeUpdate:this.onTimeUpdate,onTimeEnd:this.onTimeEnd})}onTimeUpdate(t){const n=this.anim(t,0,this.distance,this.dur),_=this.originX+n*Math.cos(this.dir),l=this.originY+n*Math.sin(this.dir)+this.dropAnim(t,0,200,this.dur),N=this.anim(t,1,-1,this.dur);this.shape===JUICE_CONFIG.shapes.CIRCLE?this.figure.attr({cx:_,cy:l}).scale(N,N):this.shape===JUICE_CONFIG.shapes.SQUARE?this.figure.attr({x:_-this.radius*N,y:l-this.radius*N}).scale(N,N):this.shape===JUICE_CONFIG.shapes.DIAMOND?this.figure.attr({path:this.createStarPath(_,l,this.radius*N,4)}).scale(N,N):this.shape===JUICE_CONFIG.shapes.STAR&&this.figure.attr({path:this.createStarPath(_,l,this.radius*N,5)}).scale(N,N)}onTimeEnd(){this.figure.remove(),tools.unsetObject(this)}}class JuiceFactory{constructor(){f(this,"num",JUICE_CONFIG.number),f(this,"createOne",function(t,n,_){if(!_)return;const l=new Juice(t,n,_,JUICE_CONFIG.shape);l.render(),l.sputter()})}create(t,n,_){for(let l=0;l<this.num;l++)this.createOne(t,n,_)}}const juiceFactory=new JuiceFactory,{DEBUG_MODE:DEBUG_MODE$1,FIRST_SAFE_FRUIT_NUMBER:FIRST_SAFE_FRUIT_NUMBER$1,FRUIT_CONFIG:FRUIT_CONFIG$1,IS_TOUCH,LAYERS:LAYERS$i,MESSAGES:MESSAGES$b,MODES:MODES$b}=getConfig$1(),{height:viewportHeight$2,width:viewportWidth$2}=viewport,average=function(s,t){return(s+t)/2>>0};class Fruit{constructor(t){f(this,"image"),f(this,"shadow"),f(this,"zoomAnim",exponential.co),f(this,"linearAnim",linear),f(this,"dropAnim",quadratic.ci),f(this,"fallOffAnim",quadratic.co),f(this,"rotateSpeed",[60,50,40,-40,-50,-60]),f(this,"brokend",!1),f(this,"apartAngle",0),f(this,"aparted",!1),f(this,"shotOutStartX"),f(this,"shotOutStartY"),f(this,"shotOutEndX"),f(this,"shotOutEndY"),f(this,"fallOffToX"),f(this,"fallTargetX"),f(this,"fallTargetY"),f(this,"touchedPosX"),f(this,"touchedPosY"),f(this,"brokenPosX"),f(this,"brokenPosY"),f(this,"brokenTargetX1"),f(this,"brokenTargetY1"),f(this,"brokenTargetX2"),f(this,"brokenTargetY2"),f(this,"touchedTargetX"),f(this,"touchedTargetY"),f(this,"bImage1RotateAngle"),f(this,"bImage2RotateAngle"),f(this,"fallOutOfViewerCalled",!1),f(this,"fallOffing",!1),f(this,"type"),f(this,"clickHandler",_=>{const l=_.clientX-control.canvasLeft,N=_.clientY-control.canvasTop;message.postMessage([l,N],MESSAGES$b.TOUCH)}),f(this,"shotOut",(()=>{const _=[-1,1];return(l,N)=>(this.shotOutStartX=this.originX,this.shotOutStartY=this.originY,this.shotOutEndX=average(this.originX,N),this.shotOutEndY=Math.min(this.startY-randomNumber(this.startY-100),200),this.fallOffToX=N,timeline.createTask({start:l,duration:FRUIT_CONFIG$1.dropTime,object:this,onTimeUpdate:this.onShotOuting,onTimeStart:this.onShotOutStart,onTimeEnd:this.onShotOutEnd,recycle:this.anims}),this.type!==FRUIT_CONFIG$1.types.BOOM&&this.rotate(0,(randomNumber(180)+90)*_[randomNumber(2)]),this)})()),f(this,"fallOff",(()=>{const _=[-1,1];let l=0;return(N,u)=>{if(this.aparted||this.brokend)return;this.fallOffing=1;const L=viewportHeight$2+calcSize(120);typeof u!="number"&&(u=this.originX+randomNumber(FRUIT_CONFIG$1.dropXScope)*_[l++%2]),this.fallTargetX=u,this.fallTargetY=L,timeline.createTask({start:N,duration:FRUIT_CONFIG$1.dropTime,object:this,onTimeUpdate:this.onFalling,onTimeStart:this.onFallStart,onTimeEnd:this.onFallEnd,recycle:this.anims})}})());const n=FRUIT_CONFIG$1.infos[t.type][3];this.type=t.type,this.originX=t.originX,this.originY=t.originY,this.radius=n,this.startX=t.originX,this.startY=t.originY,this.anims=[]}set(t){const n=FRUIT_CONFIG$1.infos[this.type],_=this.radius;return this.shadow=layer.createImage(LAYERS$i.FRUIT,FRUIT_CONFIG$1.shadowImage,this.startX-_,this.startY-_+FRUIT_CONFIG$1.shadowPos,106,77),this.image=layer.createImage(LAYERS$i.FRUIT,n[0],this.startX-_,this.startY-_,n[1],n[2]),IS_TOUCH&&this.addClickHandler(),this.type===FRUIT_CONFIG$1.types.BOOM&&this.image.rotate(n[4]),t&&(this.image.hide(),this.shadow.hide()),DEBUG_MODE$1&&this.showDebugCatchArea(),this}addClickHandler(){this.image.node.addEventListener("pointerdown",this.clickHandler)}removeClickHandler(){this.image.node.removeEventListener("pointerdown",this.clickHandler)}showDebugCatchArea(){const{originX:t,originY:n,radius:_}=this;this.debugArea=this.image.paper.circle(t,n,_).attr({stroke:"mediumblue","stroke-width":2,"stroke-dasharray":"- ",opacity:.5}),this.debugArea.insertBefore(this.image)}pos(t,n){const _=this.radius;this.originX=t,this.originY=n,this.image.attr({x:t-=_,y:n-=_}),this.shadow.attr({x:t,y:n+FRUIT_CONFIG$1.shadowPos}),DEBUG_MODE$1&&this.debugArea.attr({cx:t+_,cy:n+_}),this.fallOffing&&!this.fallOutOfViewerCalled&&n>viewportHeight$2+this.radius&&(this.fallOutOfViewerCalled=1,message.postMessage(this,MESSAGES$b.FRUIT_FALL_OUT_OF_VIEWER))}show(t){timeline.createTask({start:t,duration:500,data:[1e-5,1,MODES$b.SHOW],object:this,onTimeUpdate:this.onScaling,onTimeStart:this.onShowStart,recycle:this.anims})}hide(t){this.type===FRUIT_CONFIG$1.types.BOOM&&(this.anims.clear(),timeline.createTask({start:t,duration:500,data:[1,1e-5,MODES$b.HIDE],object:this,onTimeUpdate:this.onScaling,onTimeEnd:this.onHideEnd,recycle:this.anims}))}rotate(t,n){this.rotateSpeed=n||this.rotateSpeed[randomNumber(6)],timeline.createTask({start:t,duration:-1,object:this,onTimeUpdate:this.onRotating,recycle:this.anims})}broken(t){if(this.brokend)return;this.brokend=!0;const n=FruitFactory.fruitCache.indexOf(this);n>-1&&FruitFactory.fruitCache.splice(n,1),this.type!==FRUIT_CONFIG$1.types.BOOM?(flash.showAt(this.originX,this.originY,t),juiceFactory.create(this.originX,this.originY,FRUIT_CONFIG$1.infos[this.type][6]),IS_TOUCH?this.touched():this.apart(t)):this.hide()}pause(){this.brokend||this.anims.clear()}touched(){this.anims.clear(),this.shadow.hide(),timeline.createTask({start:0,duration:FRUIT_CONFIG$1.dropTime,data:[1,1e-5,MODES$b.HIDE,1500],object:this,onTimeUpdate:this.onScaling,onTimeStart:this.onTouchedDropStart,onTimeEnd:this.onTouchedDropEnd,recycle:this.anims}),this.debugArea&&this.debugArea.remove()}apart(t){this.anims.clear(),this.image.hide(),this.shadow.hide(),this.aparted=!0;const n=FRUIT_CONFIG$1.infos[this.type],_=FRUIT_CONFIG$1.cutImages[this.type],l=this.radius,N=layer.createImage.saturate(layer,this.startX-l,this.startY-l,n[1],n[2]);t=(t%180+360+n[4])%360,this.bImage1=N(LAYERS$i.FRUIT,_[0]),this.bImage2=N(LAYERS$i.FRUIT,_[1]),[this.bImage1,this.bImage2].invoke("rotate",t),this.apartAngle=t,timeline.createTask({start:0,duration:FRUIT_CONFIG$1.dropTime,object:this,onTimeUpdate:this.onBrokenDropUpdate,onTimeStart:this.onBrokenDropStart,onTimeEnd:this.onBrokenDropEnd,recycle:this.anims}),this.debugArea&&this.debugArea.remove()}remove(){IS_TOUCH&&this.removeClickHandler(),this.anims.clear(),this.image&&(this.image.remove(),this.shadow.remove(),this.debugArea&&this.debugArea.remove()),this.bImage1&&(this.bImage1.remove(),this.bImage2.remove());const t=FruitFactory.fruitCache.indexOf(this);t>-1&&FruitFactory.fruitCache.splice(t,1);for(const n in this)typeof this[n]=="function"?this[n]=function(_){return function(){throw new Error("method "+_+" has been removed")}}(n):delete this[n];message.postMessage(this,MESSAGES$b.FRUIT_REMOVE)}onShowStart(){this.image.show(),this.shadow.show()}onScaling(t,n,_,l,N=500){this.image.scale(l=this.zoomAnim(t,n,_-n,N),l),this.shadow.scale(l,l)}onHideEnd(){this.remove()}onRotating(t){this.image.rotate(this.rotateSpeed*t/1e3%360,!0)}onTouchedDropStart(){this.touchedTargetX=randomNumber(viewportWidth$2)-175,this.touchedTargetY=viewportHeight$2,this.touchedPosX=this.originX,this.touchedPosY=this.originY;for(let t=FruitFactory.fruitCache.length-1;t>=0;t--)FruitFactory.fruitCache[t]===this&&FruitFactory.fruitCache.splice(t,1)}onTouchedDropEnd(){this.remove()}onBrokenDropUpdate(t){const n=this.radius;this.bImage1.attr({x:this.linearAnim(t,this.brokenPosX-n,this.brokenTargetX1,FRUIT_CONFIG$1.dropTime),y:this.dropAnim(t,this.brokenPosY-n,this.brokenTargetY1-this.brokenPosY+n,FRUIT_CONFIG$1.dropTime)}).rotate(this.linearAnim(t,this.apartAngle,this.bImage1RotateAngle,FRUIT_CONFIG$1.dropTime),!0),this.bImage2.attr({x:this.linearAnim(t,this.brokenPosX-n,this.brokenTargetX2,FRUIT_CONFIG$1.dropTime),y:this.dropAnim(t,this.brokenPosY-n,this.brokenTargetY2-this.brokenPosY+n,FRUIT_CONFIG$1.dropTime)}).rotate(this.linearAnim(t,this.apartAngle,this.bImage2RotateAngle,FRUIT_CONFIG$1.dropTime),!0)}onBrokenDropStart(){this.brokenTargetX1=-(randomNumber(FRUIT_CONFIG$1.dropXScope)+75),this.brokenTargetX2=randomNumber(FRUIT_CONFIG$1.dropXScope+75),this.brokenTargetY1=viewportHeight$2,this.brokenTargetY2=viewportHeight$2,this.brokenPosX=this.originX,this.brokenPosY=this.originY,this.bImage1RotateAngle=-randomNumber(150)-50,this.bImage2RotateAngle=randomNumber(150)+50;for(let t=FruitFactory.fruitCache.length-1;t>=0;t--)FruitFactory.fruitCache[t]===this&&FruitFactory.fruitCache.splice(t,1)}onBrokenDropEnd(){this.remove()}onShotOuting(t){this.pos(this.linearAnim(t,this.shotOutStartX,this.shotOutEndX-this.shotOutStartX,FRUIT_CONFIG$1.dropTime),this.fallOffAnim(t,this.shotOutStartY,this.shotOutEndY-this.shotOutStartY,FRUIT_CONFIG$1.dropTime))}onShotOutStart(){}onShotOutEnd(){this.fallOff(0,this.fallOffToX)}onFalling(t){this.pos(this.linearAnim(t,this.brokenPosX,this.fallTargetX-this.brokenPosX,FRUIT_CONFIG$1.dropTime),this.dropAnim(t,this.brokenPosY,this.fallTargetY-this.brokenPosY,FRUIT_CONFIG$1.dropTime))}onFallStart(){this.brokenPosX=this.originX,this.brokenPosY=this.originY}onFallEnd(){message.postMessage(this,MESSAGES$b.FRUIT_FALL_OFF),this.remove()}}const wt=class ue{constructor(){f(this,"_safeNumber",FIRST_SAFE_FRUIT_NUMBER$1),f(this,"types",[FRUIT_CONFIG$1.types.PEACH,FRUIT_CONFIG$1.types.SANDIA,FRUIT_CONFIG$1.types.APPLE,FRUIT_CONFIG$1.types.BANANA,FRUIT_CONFIG$1.types.BASAHA])}create(t,n){const _=new Fruit({type:this.getType(),originX:t,originY:n}).set();return ue.fruitCache.unshift(_),_}getType(){const t=randomNumber(8)===4&&!this.safeNumber;return this.safeNumber=this.safeNumber-1,t?FRUIT_CONFIG$1.types.BOOM:this.types[randomNumber(5)]}getFruitInView(){return ue.fruitCache}get safeNumber(){return this._safeNumber}set safeNumber(t){this._safeNumber=Math.max(t,0)}};f(wt,"fruitCache",[]);let FruitFactory=wt;const fruitFactory=new FruitFactory;class Collide{checkSlice(t){const n=[];let _=0;return fruitFactory.getFruitInView().forEach(l=>{this.isLineIntersectingEllipse(t.slice(0,2),t.slice(2,4),[l.originX,l.originY],l.radius)&&(n[_++]=l)}),n}checkTouch(t){const n=[];let _=0;return fruitFactory.getFruitInView().forEach(l=>{this.isPointInsideEllipse(t,[l.originX,l.originY],l.radius)&&(n[_++]=l)}),n}isPointInsideEllipse(t,n,_){const l=t[0]-n[0],N=t[1]-n[1];return l*l+N*N<=_*_}isLineIntersectingEllipse(t,n,_,l,N=1){const u=this.calculateLineEllipseIntersections(t,n,_,l,N);return u&&(u[0]||u[1])}calculateLineEllipseIntersections(t,n,_,l,N=1){if(l<=0)return;const u=l,L=l*N,X=this.square(L)*this.square(t[0]-n[0])+this.square(u)*this.square(t[1]-n[1]);if(X<=0)return;const w=2*this.square(L)*(n[0]-t[0])*(t[0]-_[0])+2*this.square(u)*(n[1]-t[1])*(t[1]-_[1]),I=this.square(L)*this.square(t[0]-_[0])+this.square(u)*this.square(t[1]-_[1])-this.square(u)*this.square(L),x=this.solveQuadraticEquation(X,w,I);if(!x)return;const v=[[t[0]+x[0]*(n[0]-t[0]),t[1]+x[0]*(n[1]-t[1])],[t[0]+x[1]*(n[0]-t[0]),t[1]+x[1]*(n[1]-t[1])]];return this.isPointOnSegment(v[0],t,n)||(v[0]=null),this.isPointOnSegment(v[1],t,n)||(v[1]=null),v}isPointOnSegment(t,n,_){return t?this.getSign(t[0]-n[0])*this.getSign(t[0]-_[0])<=0&&this.getSign(t[1]-n[1])*this.getSign(t[1]-_[1])<=0:!1}square(t){return Math.pow(t,2)}getSign(t){return t<0?-1:t>0?1:0}solveQuadraticEquation(t,n,_){if(t===0)return;const l=n*n-4*t*_;if(l===0){const N=-n/(2*t);return[N,N]}else if(l>0){const N=Math.sqrt(l);return[(-n+N)/(2*t),(-n-N)/(2*t)]}}}const collide=new Collide,{LAYERS:LAYERS$h,MESSAGES:MESSAGES$a,LIGHTS_CONFIG,SCENES:SCENES$6}=getConfig$1(),{width:viewportWidth$1,height:viewportHeight$1}=viewport;class Light{constructor(){f(this,"maskLayer",layer.getLayer(LAYERS$h.MASK)),f(this,"lightLayer",layer.getLayer(LAYERS$h.LIGHT)),f(this,"lights",[]),f(this,"indexes",[]),f(this,"lightsNum",LIGHTS_CONFIG.number),f(this,"overWhiteLight",()=>{message.postMessage(MESSAGES$a.OVER_WHITE_LIGHT_SHOW),this.removeLights();const t=LIGHTS_CONFIG.maskAppearanceTime,n=this.maskLayer.rect(0,0,viewportWidth$1,viewportHeight$1).attr({fill:LIGHTS_CONFIG.fill,stroke:"none"}),_={onTimeUpdate:function(l){n.attr("opacity",1-l/t)},onTimeEnd:function(){n.remove(),message.postMessage(MESSAGES$a.GAME_OVER),message.postMessage(SCENES$6.GAME_OVER,MESSAGES$a.SCENE_SWITCH_SCENE),layer.hideLayer(LAYERS$h.LIGHT),layer.hideLayer(LAYERS$h.MASK)}};layer.showLayer(LAYERS$h.MASK),timeline.createTask({start:0,duration:t,object:_,onTimeUpdate:_.onTimeUpdate,onTimeEnd:_.onTimeEnd})});for(let t=0;t<this.lightsNum;t++)this.indexes[t]=t;layer.hideLayer(LAYERS$h.LIGHT),layer.hideLayer(LAYERS$h.MASK)}start(t,n){const _=t.originX,l=t.originY,N=this.indexes.random();let u=0;const L=X=>{this.build(_,l,N[X])};for(let X=0;X<this.lightsNum;X++)timeline.setTimeout(()=>L(X),u+=LIGHTS_CONFIG.appearanceTime);timeline.setTimeout(()=>{this.overWhiteLight(),n&&n()},u)}removeLights(){const t=this.lights.length;for(let n=0;n<t;n++)this.lights[n].remove();this.lights.length=0}build(t,n,_){let l=_*36+randomNumber(10),N=l+5;l=Math.PI*l/180,N=Math.PI*N/180;const u=t+2*viewportWidth$1*Math.cos(l),L=n+2*viewportWidth$1*Math.sin(l),X=t+2*viewportWidth$1*Math.cos(N),w=n+2*viewportWidth$1*Math.sin(N),I=this.lightLayer.path(["M",t,n,"L",u,L,"L",X,w,"Z"]).attr({stroke:"none",fill:LIGHTS_CONFIG.fill});layer.showLayer(LAYERS$h.LIGHT),this.lights.push(I)}}const light=new Light,{LAYERS:LAYERS$g,MODES:MODES$a,SCORE_CONFIG}=getConfig$1();class Score{constructor(){f(this,"setTimeout",timeline.setTimeout.bind(timeline)),f(this,"anim",exponential.co),f(this,"anims",[]),f(this,"image"),f(this,"text1"),f(this,"text2")}set(){this.image=layer.createImage(LAYERS$g.DEFAULT,SCORE_CONFIG.image,SCORE_CONFIG.imageSx,SCORE_CONFIG.imageY,SCORE_CONFIG.imageW,SCORE_CONFIG.imageH).hide(),this.text1=layer.createText(LAYERS$g.DEFAULT,SCORE_CONFIG.text1Value,SCORE_CONFIG.text1Sx,SCORE_CONFIG.text1Y,SCORE_CONFIG.text1Fill,SCORE_CONFIG.text1Size,SCORE_CONFIG.text1Weight).hide(),this.text2=layer.createText(LAYERS$g.DEFAULT,SCORE_CONFIG.text2Prefix+SCORE_CONFIG.text2Value,SCORE_CONFIG.text2Sx,SCORE_CONFIG.text2Y,SCORE_CONFIG.text2Fill,SCORE_CONFIG.text2Size,SCORE_CONFIG.text2Weight).hide()}show(t){timeline.createTask({start:t,duration:SCORE_CONFIG.animLength,data:[MODES$a.SHOW,SCORE_CONFIG.imageSx,SCORE_CONFIG.imageEx,SCORE_CONFIG.text1Sx,SCORE_CONFIG.text1Ex,SCORE_CONFIG.text2Sx,SCORE_CONFIG.text2Ex],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:SCORE_CONFIG.animLength,data:[MODES$a.HIDE,SCORE_CONFIG.imageEx,SCORE_CONFIG.imageSx,SCORE_CONFIG.text1Ex,SCORE_CONFIG.text1Sx,SCORE_CONFIG.text2Ex,SCORE_CONFIG.text2Sx],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}number(t){this.text1.attr("text",t||0),this.image.scale(1.2,1.2),this.setTimeout(()=>{this.image.scale(1,1)},60)}onTimeUpdate(t,n,_,l,N,u,L,X){this.image.attr("x",this.anim(t,_,l-_,SCORE_CONFIG.animLength)),this.text1.attr("x",this.anim(t,N,u-N,SCORE_CONFIG.animLength)),this.text2.attr("x",this.anim(t,L,X-L,SCORE_CONFIG.animLength))}onTimeStart(t){t===MODES$a.SHOW&&[this.image,this.text1,this.text2].invoke(t)}onTimeEnd(t){t===MODES$a.HIDE&&([this.image,this.text1,this.text2].invoke(t),this.text1.attr("text",0))}}const score=new Score,{BACKGROUND_CONFIG,LAYERS:LAYERS$f}=getConfig$1();class Background{constructor(){f(this,"image"),f(this,"time"),f(this,"getWobble",()=>{const t=randomNumber(12)-6,n=randomNumber(12)-6;this.image.attr({x:t,y:n})}),f(this,"stop",()=>{this.time.stop(),this.image.attr({x:0,y:0})})}set(){this.image=layer.createImage(LAYERS$f.DEFAULT,BACKGROUND_CONFIG.image,BACKGROUND_CONFIG.x,BACKGROUND_CONFIG.y,BACKGROUND_CONFIG.width,BACKGROUND_CONFIG.height,BACKGROUND_CONFIG.preserveAspectRatio)}wobble(){this.time=timeline._setInterval(this.getWobble,50)}}const background=new Background,{LAYERS:LAYERS$e,LOSE_CONFIG,MODES:MODES$9,MESSAGES:MESSAGES$9,SCENES:SCENES$5}=getConfig$1();class Lose{constructor(){f(this,"anim",exponential.co),f(this,"back",back.co),f(this,"o1"),f(this,"o2"),f(this,"o3"),f(this,"info",[]),f(this,"animLength",LOSE_CONFIG.animLength),f(this,"number",0),f(this,"anims",[])}set(){this.o1=layer.createImage(LAYERS$e.DEFAULT,LOSE_CONFIG.conf[0].src,LOSE_CONFIG.conf[0].sx,LOSE_CONFIG.conf[0].y,LOSE_CONFIG.conf[0].w,LOSE_CONFIG.conf[0].h).hide(),this.o2=layer.createImage(LAYERS$e.DEFAULT,LOSE_CONFIG.conf[1].src,LOSE_CONFIG.conf[1].sx,LOSE_CONFIG.conf[1].y,LOSE_CONFIG.conf[1].w,LOSE_CONFIG.conf[1].h).hide(),this.o3=layer.createImage(LAYERS$e.DEFAULT,LOSE_CONFIG.conf[2].src,LOSE_CONFIG.conf[2].sx,LOSE_CONFIG.conf[2].y,LOSE_CONFIG.conf[2].w,LOSE_CONFIG.conf[2].h).hide(),this.info=[{image:this.o1,config:LOSE_CONFIG.conf[0]},{image:this.o2,config:LOSE_CONFIG.conf[1]},{image:this.o3,config:LOSE_CONFIG.conf[2]}]}show(t){timeline.createTask({start:t,duration:this.animLength,data:[MODES$9.SHOW,LOSE_CONFIG.conf[0].sx,LOSE_CONFIG.conf[0].ex,LOSE_CONFIG.conf[1].sx,LOSE_CONFIG.conf[1].ex,LOSE_CONFIG.conf[2].sx,LOSE_CONFIG.conf[2].ex],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:this.animLength,data:[MODES$9.HIDE,LOSE_CONFIG.conf[0].ex,LOSE_CONFIG.conf[0].sx,LOSE_CONFIG.conf[1].ex,LOSE_CONFIG.conf[1].sx,LOSE_CONFIG.conf[2].ex,LOSE_CONFIG.conf[2].sx],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}showLoseAt(){const{image:t,config:n}=this.info[this.number]||{},_=!!t&&t.attr("src")!==n.srcF;_&&t.attr("src",n.srcF).scale(1e-5,1e-5),_&&this.scaleImage(t),_&&vibration.vibrate(),this.number++,this.number===3&&(vibration.gameOver(),this.number=0,timeline.setTimeout(()=>{message.postMessage(MESSAGES$9.GAME_OVER),message.postMessage(SCENES$5.GAME_OVER,MESSAGES$9.SCENE_SWITCH_SCENE)},1e3))}scaleImage(t){t.myOnScaling=t.myOnScaling||((n,_)=>{t.scale(_=this.back(n,1e-5,1-1e-5,500),_)}),t.myOnScaleEnd=t.myOnScaleEnd||function(){t.scale(1,1)},timeline.createTask({start:0,duration:500,object:t,onTimeUpdate:t.myOnScaling,onTimeEnd:t.myOnScaleEnd,recycle:this.anims})}onTimeUpdate(t,n,_,l,N,u,L,X){this.o1.attr("x",this.anim(t,_,l-_,this.animLength)),this.o2.attr("x",this.anim(t,N,u-N,this.animLength)),this.o3.attr("x",this.anim(t,L,X-L,this.animLength))}onTimeStart(t){t===MODES$9.SHOW&&([this.o1,this.o2,this.o3].invoke(t),this.resurrect())}onTimeEnd(t){t===MODES$9.HIDE&&([this.o1,this.o2,this.o3].invoke(t),this.die())}resurrect(){this.info.forEach(({image:t,config:n})=>{t.attr("src",n.src)})}die(){this.info.forEach(({image:t,config:n})=>{t.attr("src",n.srcF)})}}const lose=new Lose,{LAYERS:LAYERS$d,GAME_OVER_CONFIG,MODES:MODES$8,STATE_KEYS:STATE_KEYS$3}=getConfig$1();class GameOver{constructor(){f(this,"image"),f(this,"anims",[])}set(){this.image=layer.createImage(LAYERS$d.DEFAULT,GAME_OVER_CONFIG.image,GAME_OVER_CONFIG.x,GAME_OVER_CONFIG.y,GAME_OVER_CONFIG.width,GAME_OVER_CONFIG.height).hide().scale(1e-5,1e-5)}show(t){timeline.createTask({start:t,duration:500,data:[1e-5,1,MODES$8.SHOW],object:this,onTimeUpdate:this.onZooming,onTimeStart:this.onZoomStart,onTimeEnd:this.onZoomEnd,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:500,data:[1,1e-5,MODES$8.HIDE],object:this,onTimeUpdate:this.onZooming,onTimeStart:this.onZoomStart,onTimeEnd:this.onZoomEnd,recycle:this.anims})}onZoomStart(t,n,_){_===MODES$8.SHOW&&this.image.show()}onZooming(t,n,_,l){this.image.scale(l=exponential.co(t,n,_-n,500),l)}onZoomEnd(t,n,_){_===MODES$8.SHOW?state(STATE_KEYS$3.CLICK_ENABLE).on():_===MODES$8.HIDE&&this.image.hide()}}const gameOver=new GameOver,{FRUIT_CONFIG,MESSAGES:MESSAGES$8,STATE_KEYS:STATE_KEYS$2,GAME_STATES,SOUNDS:SOUNDS$1,SCORE_MULTIPLIER,FIRST_SAFE_FRUIT_NUMBER}=getConfig$1(),{width:viewportWidth,height:viewportHeight}=viewport;class Game{constructor(){f(this,"scoreNumber",0),f(this,"volleyNum",2),f(this,"volleyMultipleNumber",5),f(this,"fruits",[]),f(this,"gameInterval"),f(this,"snd"),f(this,"boomSnd"),f(this,"barbette",()=>{if(this.fruits.length>=this.volleyNum)return;const t=randomNumber(viewportWidth),n=randomNumber(viewportWidth),_=viewportHeight,l=fruitFactory.create(t,_).shotOut(0,n);this.fruits.push(l),this.snd.play(),this.barbette()}),message.addEventListener(MESSAGES$8.FRUIT_REMOVE,t=>{const n=this.fruits.indexOf(t);n>-1&&this.fruits.splice(n,1)}),message.addEventListener(MESSAGES$8.FRUIT_FALL_OUT_OF_VIEWER,t=>{t.type!==FRUIT_CONFIG.types.BOOM&&lose.showLoseAt()}),message.addEventListener(MESSAGES$8.GAME_OVER,()=>{this.gameOver(),knifes.switchOn()}),message.addEventListener(MESSAGES$8.OVER_WHITE_LIGHT_SHOW,()=>{knifes.endAll();for(let t=this.fruits.length-1;t>=0;t--)this.fruits[t].remove();background.stop()}),message.addEventListener(MESSAGES$8.CLICK,()=>{state(STATE_KEYS$2.CLICK_ENABLE).off(),gameOver.hide(),message.postMessage(MESSAGES$8.HOME_MENU,MESSAGES$8.SCENE_SWITCH_SCENE)})}start(){lose.number=0,fruitFactory.safeNumber=FIRST_SAFE_FRUIT_NUMBER,this.scoreNumber=0,this.volleyNum=2,this.snd=soundFactory.create(SOUNDS$1.THROW),this.boomSnd=soundFactory.create(SOUNDS$1.BOOM),timeline.setTimeout(()=>{state(STATE_KEYS$2.GAME_STATE).set(GAME_STATES.PLAYING),this.gameInterval=timeline._setInterval(this.barbette,1e3)},500)}gameOver(){state(STATE_KEYS$2.GAME_STATE).set(GAME_STATES.OVER),this.gameInterval.stop(),this.fruits.length=0}applyScore(t){t>this.volleyNum*this.volleyMultipleNumber&&this.volleyNum++,this.volleyMultipleNumber+=50}sliceAt(t,n){state(STATE_KEYS$2.GAME_STATE).isnot(GAME_STATES.PLAYING)||(t.type===FRUIT_CONFIG.types.BOOM?this.onHitBoom(t):this.onHitFruit(t,n))}catchFruit(t){state(STATE_KEYS$2.GAME_STATE).isnot(GAME_STATES.PLAYING)||(t.type===FRUIT_CONFIG.types.BOOM?this.onHitBoom(t):this.onHitFruit(t))}onHitFruit(t,n=0){const _=this.fruits.indexOf(t);t.broken(n),vibration.fruit(),_&&this.fruits.splice(_,1),this.scoreNumber+=SCORE_MULTIPLIER||0,score.number(this.scoreNumber),this.applyScore(this.scoreNumber)}onHitBoom(t){knifes.switchOn(),lose.die(),this.pauseAllFruit(),this.boomSnd.play(),background.wobble(),vibration.boom(),light.start(t,background.stop)}pauseAllFruit(){this.gameInterval.stop(),knifes.pause(),this.fruits.invoke("pause")}}const game=new Game,{HOME_MASK_CONFIG,LAYERS:LAYERS$c}=getConfig$1(),homeMask=displacementFactory.create({layer:LAYERS$c.START_SCREEN,imageSrc:HOME_MASK_CONFIG.image,width:HOME_MASK_CONFIG.width,height:HOME_MASK_CONFIG.height,startX:HOME_MASK_CONFIG.startX,startY:HOME_MASK_CONFIG.startY,endX:HOME_MASK_CONFIG.endX,endY:HOME_MASK_CONFIG.endY,animMap:exponential.co,duration:HOME_MASK_CONFIG.duration}),{LAYERS:LAYERS$b,HOME_LOGO_CONFIG}=getConfig$1(),homeLogo=displacementFactory.create({layer:LAYERS$b.START_SCREEN,imageSrc:HOME_LOGO_CONFIG.image,width:HOME_LOGO_CONFIG.width,height:HOME_LOGO_CONFIG.height,startX:HOME_LOGO_CONFIG.startX,startY:HOME_LOGO_CONFIG.startY,endX:HOME_LOGO_CONFIG.endX,endY:HOME_LOGO_CONFIG.endY,animMap:exponential.co,duration:HOME_LOGO_CONFIG.duration}),{HOME_TEXT_CONFIG:HOME_TEXT_CONFIG$3,LAYERS:LAYERS$a,MODES:MODES$7}=getConfig$1();class HomeText{constructor(){f(this,"setTimeout",timeline.setTimeout.bind(timeline)),f(this,"anim",exponential.co),f(this,"anims",[]),f(this,"text1"),f(this,"text2"),f(this,"text3")}set(){this.text1=layer.createText(LAYERS$a.START_SCREEN,HOME_TEXT_CONFIG$3.text1Value,HOME_TEXT_CONFIG$3.text1Sx,HOME_TEXT_CONFIG$3.text1Y,HOME_TEXT_CONFIG$3.text1Fill,HOME_TEXT_CONFIG$3.text1Size,HOME_TEXT_CONFIG$3.text1Weight,HOME_TEXT_CONFIG$3.text1Anchor).hide(),this.text2=layer.createText(LAYERS$a.START_SCREEN,HOME_TEXT_CONFIG$3.text2Value,HOME_TEXT_CONFIG$3.text2Sx,HOME_TEXT_CONFIG$3.text2Y,HOME_TEXT_CONFIG$3.text2Fill,HOME_TEXT_CONFIG$3.text2Size,HOME_TEXT_CONFIG$3.text2Weight,HOME_TEXT_CONFIG$3.text2Anchor).hide(),this.text3=layer.createText(LAYERS$a.START_SCREEN,HOME_TEXT_CONFIG$3.text3Value,HOME_TEXT_CONFIG$3.text3Sx,HOME_TEXT_CONFIG$3.text3Y,HOME_TEXT_CONFIG$3.text3Fill,HOME_TEXT_CONFIG$3.text3Size,HOME_TEXT_CONFIG$3.text3Weight,HOME_TEXT_CONFIG$3.text3Anchor).hide()}show(t){timeline.createTask({start:t,duration:HOME_TEXT_CONFIG$3.animLength,data:[MODES$7.SHOW,HOME_TEXT_CONFIG$3.text1Sx,HOME_TEXT_CONFIG$3.text1Ex,HOME_TEXT_CONFIG$3.text2Sx,HOME_TEXT_CONFIG$3.text2Ex,HOME_TEXT_CONFIG$3.text3Sx,HOME_TEXT_CONFIG$3.text3Ex],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:HOME_TEXT_CONFIG$3.animLength,data:[MODES$7.HIDE,HOME_TEXT_CONFIG$3.text1Ex,HOME_TEXT_CONFIG$3.text1Sx,HOME_TEXT_CONFIG$3.text2Ex,HOME_TEXT_CONFIG$3.text2Sx,HOME_TEXT_CONFIG$3.text3Ex,HOME_TEXT_CONFIG$3.text3Sx],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}onTimeUpdate(t,n,_,l,N,u,L,X){this.text1.attr("x",this.anim(t,_,l-_,HOME_TEXT_CONFIG$3.animLength)),this.text2.attr("x",this.anim(t,N,u-N,HOME_TEXT_CONFIG$3.animLength)),this.text3.attr("x",this.anim(t,L,X-L,HOME_TEXT_CONFIG$3.animLength))}onTimeStart(t){t===MODES$7.SHOW&&[this.text1,this.text2,this.text3].invoke(t)}onTimeEnd(t){t===MODES$7.HIDE&&[this.text1,this.text2,this.text3].invoke(t)}}const homeText=new HomeText,{LAYERS:LAYERS$9,START_BUTTON_CONFIG,HOME_TEXT_CONFIG:HOME_TEXT_CONFIG$2,MODES:MODES$6,MESSAGES:MESSAGES$7}=getConfig$1();class HomeButton{constructor(){f(this,"text"),f(this,"button"),f(this,"group"),f(this,"anims",[]),f(this,"anim",exponential.co)}set(){this.button=layer.createImage(LAYERS$9.START_SCREEN,START_BUTTON_CONFIG.image,START_BUTTON_CONFIG.startX,START_BUTTON_CONFIG.startY,START_BUTTON_CONFIG.width,START_BUTTON_CONFIG.height).hide(),this.text=layer.createText(LAYERS$9.START_SCREEN,START_BUTTON_CONFIG.textValue,START_BUTTON_CONFIG.textStartX,START_BUTTON_CONFIG.textStartY,START_BUTTON_CONFIG.textFill,START_BUTTON_CONFIG.textSize,START_BUTTON_CONFIG.textWeight,START_BUTTON_CONFIG.textAnchor),this.group=layer.getLayer(LAYERS$9.START_SCREEN).set(),this.group.push(this.button,this.text),layer.hideLayer(LAYERS$9.START_SCREEN),this.group.click(()=>{message.postMessage(MESSAGES$7.START_GAME),vibration.vibrate()})}show(t){timeline.createTask({start:t,duration:START_BUTTON_CONFIG.animLength,data:[MODES$6.SHOW,START_BUTTON_CONFIG.startY,START_BUTTON_CONFIG.endY,START_BUTTON_CONFIG.textStartY,START_BUTTON_CONFIG.textEndY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:START_BUTTON_CONFIG.animLength,data:[MODES$6.SHOW,START_BUTTON_CONFIG.endY,START_BUTTON_CONFIG.startY,START_BUTTON_CONFIG.textEndY,START_BUTTON_CONFIG.textStartY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}onTimeUpdate(t,n,_,l,N,u){this.button.attr("y",this.anim(t,_,l-_,HOME_TEXT_CONFIG$2.animLength)),this.text.attr("y",this.anim(t,N,u-N,HOME_TEXT_CONFIG$2.animLength))}onTimeStart(t){t===MODES$6.SHOW&&[this.button].invoke(t)}onTimeEnd(t){t===MODES$6.HIDE&&[this.button].invoke(t)}}const homeButton=new HomeButton,{LAYERS:LAYERS$8,RESULT_LOGO_CONFIG}=getConfig$1(),resultLogo=displacementFactory.create({layer:LAYERS$8.RESULT_SCREEN,imageSrc:RESULT_LOGO_CONFIG.image,width:RESULT_LOGO_CONFIG.width,height:RESULT_LOGO_CONFIG.height,startX:RESULT_LOGO_CONFIG.startX,startY:RESULT_LOGO_CONFIG.startY,endX:RESULT_LOGO_CONFIG.endX,endY:RESULT_LOGO_CONFIG.endY,animMap:exponential.co,duration:RESULT_LOGO_CONFIG.duration}),{RESULT_TEXT_CONFIG,LAYERS:LAYERS$7,MODES:MODES$5,MESSAGES:MESSAGES$6}=getConfig$1();class ResultText{constructor(){f(this,"setTimeout",timeline.setTimeout.bind(timeline)),f(this,"anim",exponential.co),f(this,"anims",[]),f(this,"text1"),f(this,"text2"),f(this,"text3"),f(this,"text4"),f(this,"text5"),f(this,"text6"),f(this,"text7"),message.addEventListener(MESSAGES$6.GAME_OVER,()=>{this.text3.attr("text",game.scoreNumber)})}set(){RESULT_TEXT_CONFIG.text1Value&&(this.text1=layer.createText(LAYERS$7.RESULT_SCREEN,RESULT_TEXT_CONFIG.text1Value,RESULT_TEXT_CONFIG.text1X,RESULT_TEXT_CONFIG.text1Sy,RESULT_TEXT_CONFIG.text1Fill,RESULT_TEXT_CONFIG.text1Size,RESULT_TEXT_CONFIG.text1Weight,RESULT_TEXT_CONFIG.text1Anchor).hide()),this.text2=layer.createText(LAYERS$7.RESULT_SCREEN,RESULT_TEXT_CONFIG.text2Value,RESULT_TEXT_CONFIG.text2X,RESULT_TEXT_CONFIG.text2Sy,RESULT_TEXT_CONFIG.text2Fill,RESULT_TEXT_CONFIG.text2Size,RESULT_TEXT_CONFIG.text2Weight,RESULT_TEXT_CONFIG.text2Anchor).hide(),this.text3=layer.createText(LAYERS$7.RESULT_SCREEN,game.scoreNumber,RESULT_TEXT_CONFIG.text3X,RESULT_TEXT_CONFIG.text3Sy,RESULT_TEXT_CONFIG.text3Fill,RESULT_TEXT_CONFIG.text3Size,RESULT_TEXT_CONFIG.text3Weight,RESULT_TEXT_CONFIG.text3Anchor).attr("stroke","white").attr("stroke-width",3).hide(),this.text4=layer.createText(LAYERS$7.RESULT_SCREEN,RESULT_TEXT_CONFIG.text4Value,RESULT_TEXT_CONFIG.text4Sx,RESULT_TEXT_CONFIG.text4Y,RESULT_TEXT_CONFIG.text4Fill,RESULT_TEXT_CONFIG.text4Size,RESULT_TEXT_CONFIG.text4Weight,RESULT_TEXT_CONFIG.text4Anchor).hide(),this.text5=layer.createText(LAYERS$7.RESULT_SCREEN,RESULT_TEXT_CONFIG.text5Value,RESULT_TEXT_CONFIG.text5Sx,RESULT_TEXT_CONFIG.text5Y,RESULT_TEXT_CONFIG.text5Fill,RESULT_TEXT_CONFIG.text5Size,RESULT_TEXT_CONFIG.text5Weight,RESULT_TEXT_CONFIG.text5Anchor).attr("stroke","white").attr("stroke-width",2).hide(),this.text6=layer.createText(LAYERS$7.RESULT_SCREEN,RESULT_TEXT_CONFIG.text6Value,RESULT_TEXT_CONFIG.text6Sx,RESULT_TEXT_CONFIG.text6Y,RESULT_TEXT_CONFIG.text6Fill,RESULT_TEXT_CONFIG.text6Size,RESULT_TEXT_CONFIG.text6Weight,RESULT_TEXT_CONFIG.text6Anchor).hide(),this.text7=layer.createText(LAYERS$7.RESULT_SCREEN,RESULT_TEXT_CONFIG.text7Value,RESULT_TEXT_CONFIG.text7Sx,RESULT_TEXT_CONFIG.text7Y,RESULT_TEXT_CONFIG.text7Fill,RESULT_TEXT_CONFIG.text7Size,RESULT_TEXT_CONFIG.text7Weight,RESULT_TEXT_CONFIG.text7Anchor).attr("stroke","white").attr("stroke-width",2).hide()}show(t){timeline.createTask({start:t,duration:RESULT_TEXT_CONFIG.animLength,data:[MODES$5.SHOW,RESULT_TEXT_CONFIG.text1Sy,RESULT_TEXT_CONFIG.text1Ey,RESULT_TEXT_CONFIG.text2Sy,RESULT_TEXT_CONFIG.text2Ey,RESULT_TEXT_CONFIG.text3Sy,RESULT_TEXT_CONFIG.text3Ey,RESULT_TEXT_CONFIG.text4Sx,RESULT_TEXT_CONFIG.text4Ex,RESULT_TEXT_CONFIG.text5Sx,RESULT_TEXT_CONFIG.text5Ex,RESULT_TEXT_CONFIG.text6Sx,RESULT_TEXT_CONFIG.text6Ex,RESULT_TEXT_CONFIG.text7Sx,RESULT_TEXT_CONFIG.text7Ex],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:RESULT_TEXT_CONFIG.animLength,data:[MODES$5.HIDE,RESULT_TEXT_CONFIG.text1Ey,RESULT_TEXT_CONFIG.text1Sy,RESULT_TEXT_CONFIG.text2Ey,RESULT_TEXT_CONFIG.text2Sy,RESULT_TEXT_CONFIG.text3Ey,RESULT_TEXT_CONFIG.text3Sy,RESULT_TEXT_CONFIG.text4Ex,RESULT_TEXT_CONFIG.text4Sx,RESULT_TEXT_CONFIG.text5Ex,RESULT_TEXT_CONFIG.text5Sx,RESULT_TEXT_CONFIG.text6Ex,RESULT_TEXT_CONFIG.text6Sx,RESULT_TEXT_CONFIG.text7Ex,RESULT_TEXT_CONFIG.text7Sx],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}onTimeUpdate(t,n,_,l,N,u,L,X,w,I,x,v,Y,Z,y,K){this.text1&&this.text1.attr("y",this.anim(t,_,l-_,RESULT_TEXT_CONFIG.animLength)),this.text2.attr("y",this.anim(t,N,u-N,RESULT_TEXT_CONFIG.animLength)),this.text3.attr("y",this.anim(t,L,X-L,RESULT_TEXT_CONFIG.animLength)),this.text4.attr("x",this.anim(t,w,I-w,RESULT_TEXT_CONFIG.animLength)),this.text5.attr("x",this.anim(t,x,v-x,RESULT_TEXT_CONFIG.animLength)),this.text6.attr("x",this.anim(t,Y,Z-Y,RESULT_TEXT_CONFIG.animLength)),this.text7.attr("x",this.anim(t,y,K-y,RESULT_TEXT_CONFIG.animLength))}onTimeStart(t){const n=[this.text2,this.text3,this.text4,this.text5,this.text6,this.text7];this.text1&&n.push(this.text1),t===MODES$5.SHOW&&n.invoke(t)}onTimeEnd(t){const n=[this.text2,this.text3,this.text4,this.text5,this.text6,this.text7];this.text1&&n.push(this.text1),t===MODES$5.HIDE&&n.invoke(t)}}const resultText=new ResultText,{HOME_TEXT_CONFIG:HOME_TEXT_CONFIG$1,LAYERS:LAYERS$6,RESULT_BUTTON_NEXT_CONFIG,MODES:MODES$4,SCENES:SCENES$4,MESSAGES:MESSAGES$5}=getConfig$1();class ResultButtonNext{constructor(){f(this,"text"),f(this,"button"),f(this,"group"),f(this,"anims",[]),f(this,"anim",exponential.co)}set(){this.button=layer.createImage(LAYERS$6.RESULT_SCREEN,RESULT_BUTTON_NEXT_CONFIG.image,RESULT_BUTTON_NEXT_CONFIG.startX,RESULT_BUTTON_NEXT_CONFIG.startY,RESULT_BUTTON_NEXT_CONFIG.width,RESULT_BUTTON_NEXT_CONFIG.height).hide(),this.text=layer.createText(LAYERS$6.RESULT_SCREEN,RESULT_BUTTON_NEXT_CONFIG.textValue,RESULT_BUTTON_NEXT_CONFIG.textStartX,RESULT_BUTTON_NEXT_CONFIG.textStartY,RESULT_BUTTON_NEXT_CONFIG.textFill,RESULT_BUTTON_NEXT_CONFIG.textSize,RESULT_BUTTON_NEXT_CONFIG.textWeight,RESULT_BUTTON_NEXT_CONFIG.textAnchor),this.group=layer.getLayer(LAYERS$6.RESULT_SCREEN).set(),this.group.push(this.button,this.text),layer.hideLayer(LAYERS$6.RESULT_SCREEN),this.group.click(()=>{vibration.vibrate(),message.postMessage(SCENES$4.BRAND_INTRO,MESSAGES$5.SCENE_SWITCH_SCENE)})}show(t){timeline.createTask({start:t,duration:RESULT_BUTTON_NEXT_CONFIG.animLength,data:[MODES$4.SHOW,RESULT_BUTTON_NEXT_CONFIG.startY,RESULT_BUTTON_NEXT_CONFIG.endY,RESULT_BUTTON_NEXT_CONFIG.textStartY,RESULT_BUTTON_NEXT_CONFIG.textEndY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:RESULT_BUTTON_NEXT_CONFIG.animLength,data:[MODES$4.SHOW,RESULT_BUTTON_NEXT_CONFIG.endY,RESULT_BUTTON_NEXT_CONFIG.startY,RESULT_BUTTON_NEXT_CONFIG.textEndY,RESULT_BUTTON_NEXT_CONFIG.textStartY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}onTimeUpdate(t,n,_,l,N,u){this.button.attr("y",this.anim(t,_,l-_,HOME_TEXT_CONFIG$1.animLength)),this.text.attr("y",this.anim(t,N,u-N,HOME_TEXT_CONFIG$1.animLength))}onTimeStart(t){t===MODES$4.SHOW&&[this.button].invoke(t)}onTimeEnd(t){t===MODES$4.HIDE&&[this.button].invoke(t)}}const resultButtonNext=new ResultButtonNext,{HOME_TEXT_CONFIG,LAYERS:LAYERS$5,RESULT_BUTTON_REPLAY_CONFIG,MODES:MODES$3,MESSAGES:MESSAGES$4}=getConfig$1();class ResultButtonReplay{constructor(){f(this,"text"),f(this,"button"),f(this,"group"),f(this,"anims",[]),f(this,"anim",exponential.co)}set(){this.button=layer.createImage(LAYERS$5.RESULT_SCREEN,RESULT_BUTTON_REPLAY_CONFIG.image,RESULT_BUTTON_REPLAY_CONFIG.startX,RESULT_BUTTON_REPLAY_CONFIG.startY,RESULT_BUTTON_REPLAY_CONFIG.width,RESULT_BUTTON_REPLAY_CONFIG.height).hide(),this.text=layer.createText(LAYERS$5.RESULT_SCREEN,RESULT_BUTTON_REPLAY_CONFIG.textValue,RESULT_BUTTON_REPLAY_CONFIG.textStartX,RESULT_BUTTON_REPLAY_CONFIG.textStartY,RESULT_BUTTON_REPLAY_CONFIG.textFill,RESULT_BUTTON_REPLAY_CONFIG.textSize,RESULT_BUTTON_REPLAY_CONFIG.textWeight,RESULT_BUTTON_REPLAY_CONFIG.textAnchor),this.group=layer.getLayer(LAYERS$5.RESULT_SCREEN).set(),this.group.push(this.button,this.text),layer.hideLayer(LAYERS$5.RESULT_SCREEN),this.group.click(()=>{message.postMessage(MESSAGES$4.START_GAME),vibration.vibrate()})}show(t){timeline.createTask({start:t,duration:RESULT_BUTTON_REPLAY_CONFIG.animLength,data:[MODES$3.SHOW,RESULT_BUTTON_REPLAY_CONFIG.startY,RESULT_BUTTON_REPLAY_CONFIG.endY,RESULT_BUTTON_REPLAY_CONFIG.textStartY,RESULT_BUTTON_REPLAY_CONFIG.textEndY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:RESULT_BUTTON_REPLAY_CONFIG.animLength,data:[MODES$3.SHOW,RESULT_BUTTON_REPLAY_CONFIG.endY,RESULT_BUTTON_REPLAY_CONFIG.startY,RESULT_BUTTON_REPLAY_CONFIG.textEndY,RESULT_BUTTON_REPLAY_CONFIG.textStartY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}onTimeUpdate(t,n,_,l,N,u){this.button.attr("y",this.anim(t,_,l-_,HOME_TEXT_CONFIG.animLength)),this.text.attr("y",this.anim(t,N,u-N,HOME_TEXT_CONFIG.animLength))}onTimeStart(t){t===MODES$3.SHOW&&[this.button].invoke(t)}onTimeEnd(t){t===MODES$3.HIDE&&[this.button].invoke(t)}}const resultButtonReplay=new ResultButtonReplay,{LAYERS:LAYERS$4,BOTTOM_CONFIG}=getConfig$1(),bottom=displacementFactory.create({layer:LAYERS$4.DEFAULT,imageSrc:BOTTOM_CONFIG.image,width:BOTTOM_CONFIG.width,height:BOTTOM_CONFIG.height,startX:BOTTOM_CONFIG.startX,startY:BOTTOM_CONFIG.startY,endX:BOTTOM_CONFIG.endX,endY:BOTTOM_CONFIG.endY,animMap:exponential.co,duration:BOTTOM_CONFIG.duration}),{DEBUG_MODE,LAYERS:LAYERS$3,FPS_CONFIG}=getConfig$1();class FPS{constructor(){f(this,"text"),f(this,"prefix",FPS_CONFIG.prefix),f(this,"fill",FPS_CONFIG.fill)}set(){DEBUG_MODE&&(this.text=layer.createText(LAYERS$3.DEFAULT,this.prefix+"0",FPS_CONFIG.x,FPS_CONFIG.y).attr("fill",this.fill))}update(){DEBUG_MODE&&this.text.attr("text",this.prefix+(timeline.getFPS()>>0))}}const fps=new FPS,{LAYERS:LAYERS$2,BRAND_QUESTION_TEXT1_CONFIG,BRAND_QUESTION_TEXT2_CONFIG,MODES:MODES$2,BRAND_ANSWER1_CONFIG:BRAND_ANSWER1_CONFIG$1,BRAND_ANSWER2_CONFIG,SCENES:SCENES$3,MESSAGES:MESSAGES$3}=getConfig$1();class BrandQuestion{constructor(){f(this,"setTimeout",timeline.setTimeout.bind(timeline)),f(this,"anim",exponential.co),f(this,"anims",[]),f(this,"text1"),f(this,"text2"),f(this,"text3"),f(this,"text4"),f(this,"answer1"),f(this,"answer2")}set(){BRAND_QUESTION_TEXT1_CONFIG.textValue&&(this.text1=layer.createText(LAYERS$2.BRAND_QUESTION,BRAND_QUESTION_TEXT1_CONFIG.textValue,BRAND_QUESTION_TEXT1_CONFIG.textStartX,BRAND_QUESTION_TEXT1_CONFIG.textY,BRAND_QUESTION_TEXT1_CONFIG.textFill,BRAND_QUESTION_TEXT1_CONFIG.textSize,BRAND_QUESTION_TEXT1_CONFIG.textWeight,BRAND_QUESTION_TEXT1_CONFIG.textAnchor).hide()),this.text2=layer.createText(LAYERS$2.BRAND_QUESTION,BRAND_QUESTION_TEXT2_CONFIG.textValue,BRAND_QUESTION_TEXT2_CONFIG.textStartX,BRAND_QUESTION_TEXT2_CONFIG.textY,BRAND_QUESTION_TEXT2_CONFIG.textFill,BRAND_QUESTION_TEXT2_CONFIG.textSize,BRAND_QUESTION_TEXT2_CONFIG.textWeight,BRAND_QUESTION_TEXT2_CONFIG.textAnchor).hide(),this.answer1=layer.createImage(LAYERS$2.BRAND_QUESTION,BRAND_ANSWER1_CONFIG$1.image,BRAND_ANSWER1_CONFIG$1.buttonX,BRAND_ANSWER1_CONFIG$1.buttonStartY,BRAND_ANSWER1_CONFIG$1.width,BRAND_ANSWER1_CONFIG$1.height).hide(),this.text3=layer.createText(LAYERS$2.BRAND_QUESTION,BRAND_ANSWER1_CONFIG$1.textValue,BRAND_ANSWER1_CONFIG$1.textX,BRAND_ANSWER1_CONFIG$1.textStartY,BRAND_ANSWER1_CONFIG$1.textFill,BRAND_ANSWER1_CONFIG$1.textSize,BRAND_ANSWER1_CONFIG$1.textWeight,BRAND_ANSWER1_CONFIG$1.textAnchor).hide(),this.answer2=layer.createImage(LAYERS$2.BRAND_QUESTION,BRAND_ANSWER2_CONFIG.image,BRAND_ANSWER2_CONFIG.buttonX,BRAND_ANSWER2_CONFIG.buttonStartY,BRAND_ANSWER2_CONFIG.width,BRAND_ANSWER2_CONFIG.height).hide(),this.text4=layer.createText(LAYERS$2.BRAND_QUESTION,BRAND_ANSWER2_CONFIG.textValue,BRAND_ANSWER2_CONFIG.textX,BRAND_ANSWER2_CONFIG.textStartY,BRAND_ANSWER2_CONFIG.textFill,BRAND_ANSWER2_CONFIG.textSize,BRAND_ANSWER2_CONFIG.textWeight,BRAND_ANSWER2_CONFIG.textAnchor).hide(),this.group1=layer.getLayer(LAYERS$2.RESULT_SCREEN).set(),this.group1.push(this.answer1,this.text3),this.group2=layer.getLayer(LAYERS$2.RESULT_SCREEN).set(),this.group2.push(this.answer2,this.text4),this.group1.click(()=>{vibration.vibrate(),message.postMessage(SCENES$3.HOME_MENU,MESSAGES$3.SCENE_SWITCH_SCENE)}),this.group2.click(()=>{vibration.vibrate(),message.postMessage(SCENES$3.HOME_MENU,MESSAGES$3.SCENE_SWITCH_SCENE)}),layer.getLayer(LAYERS$2.BRAND_QUESTION).set(),layer.hideLayer(LAYERS$2.BRAND_QUESTION)}show(t){timeline.createTask({start:t,duration:BRAND_QUESTION_TEXT1_CONFIG.animLength,data:[MODES$2.SHOW,BRAND_QUESTION_TEXT1_CONFIG.textStartX,BRAND_QUESTION_TEXT1_CONFIG.textEndX,BRAND_QUESTION_TEXT2_CONFIG.textStartX,BRAND_QUESTION_TEXT2_CONFIG.textEndX,BRAND_ANSWER1_CONFIG$1.textStartY,BRAND_ANSWER1_CONFIG$1.textEndY,BRAND_ANSWER1_CONFIG$1.buttonStartY,BRAND_ANSWER1_CONFIG$1.buttonEndY,BRAND_ANSWER2_CONFIG.textStartY,BRAND_ANSWER2_CONFIG.textEndY,BRAND_ANSWER2_CONFIG.buttonStartY,BRAND_ANSWER2_CONFIG.buttonEndY],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:BRAND_QUESTION_TEXT1_CONFIG.animLength,data:[MODES$2.HIDE,BRAND_QUESTION_TEXT1_CONFIG.textEndX,BRAND_QUESTION_TEXT1_CONFIG.textStartX,BRAND_QUESTION_TEXT2_CONFIG.textEndX,BRAND_QUESTION_TEXT2_CONFIG.textStartX,BRAND_ANSWER1_CONFIG$1.textEndY,BRAND_ANSWER1_CONFIG$1.textStartY,BRAND_ANSWER1_CONFIG$1.buttonEndY,BRAND_ANSWER1_CONFIG$1.buttonStartY,BRAND_ANSWER2_CONFIG.textEndY,BRAND_ANSWER2_CONFIG.textStartY,BRAND_ANSWER2_CONFIG.buttonEndY,BRAND_ANSWER2_CONFIG.buttonStartY],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}onTimeUpdate(t,n,_,l,N,u,L,X,w,I,x,v,Y,Z){this.text1&&this.text1.attr("x",this.anim(t,_,l-_,BRAND_QUESTION_TEXT1_CONFIG.animLength)),this.text2&&this.text2.attr("x",this.anim(t,N,u-N,BRAND_QUESTION_TEXT2_CONFIG.animLength)),this.text3&&this.text3.attr("y",this.anim(t,L,X-L,BRAND_ANSWER1_CONFIG$1.animLength)),this.text4&&this.text4.attr("y",this.anim(t,x,v-x,BRAND_ANSWER2_CONFIG.animLength)),this.answer1&&this.answer1.attr("y",this.anim(t,w,I-w,BRAND_ANSWER1_CONFIG$1.animLength)),this.answer2&&this.answer2.attr("y",this.anim(t,Y,Z-Y,BRAND_ANSWER2_CONFIG.animLength))}onTimeStart(t){const n=[];this.text1&&n.push(this.text1),this.text2&&n.push(this.text2),this.text3&&n.push(this.text3),this.text4&&n.push(this.text4),this.answer1&&n.push(this.answer1),this.answer2&&n.push(this.answer2),t===MODES$2.SHOW&&n.invoke(t)}onTimeEnd(t){const n=[];this.text1&&n.push(this.text1),this.text2&&n.push(this.text2),this.text3&&n.push(this.text3),this.text4&&n.push(this.text4),this.answer1&&n.push(this.answer1),this.answer2&&n.push(this.answer2),t===MODES$2.HIDE&&n.invoke(t)}}const brandQuestion=new BrandQuestion,{LAYERS:LAYERS$1,BRAND_INTRO_CONFIG,BRAND_INTRO_BUTTON_CONFIG,MODES:MODES$1,BRAND_ANSWER1_CONFIG,SCENES:SCENES$2,MESSAGES:MESSAGES$2}=getConfig$1();class BrandIntro{constructor(){f(this,"setTimeout",timeline.setTimeout.bind(timeline)),f(this,"anim",exponential.co),f(this,"anims",[]),f(this,"text"),f(this,"answerText"),f(this,"answerButton")}set(){this.text=layer.createText(LAYERS$1.BRAND_INTRO,BRAND_INTRO_CONFIG.textValue,BRAND_INTRO_CONFIG.textX,BRAND_INTRO_CONFIG.textStartY,BRAND_INTRO_CONFIG.textFill,BRAND_INTRO_CONFIG.textSize,BRAND_INTRO_CONFIG.textWeight,BRAND_INTRO_CONFIG.textAnchor).hide(),this.answerButton=layer.createImage(LAYERS$1.BRAND_INTRO,BRAND_INTRO_BUTTON_CONFIG.image,BRAND_INTRO_BUTTON_CONFIG.buttonX,BRAND_INTRO_BUTTON_CONFIG.buttonStartY,BRAND_INTRO_BUTTON_CONFIG.width,BRAND_INTRO_BUTTON_CONFIG.height).hide(),this.answerText=layer.createText(LAYERS$1.BRAND_INTRO,BRAND_INTRO_BUTTON_CONFIG.textValue,BRAND_INTRO_BUTTON_CONFIG.textX,BRAND_INTRO_BUTTON_CONFIG.textStartY,BRAND_INTRO_BUTTON_CONFIG.textFill,BRAND_INTRO_BUTTON_CONFIG.textSize,BRAND_INTRO_BUTTON_CONFIG.textWeight,BRAND_INTRO_BUTTON_CONFIG.textAnchor).hide(),this.group1=layer.getLayer(LAYERS$1.BRAND_INTRO).set(),this.group1.push(this.answerText,this.answerButton),this.group1.click(()=>{vibration.vibrate(),message.postMessage(SCENES$2.BRAND_QUESTION,MESSAGES$2.SCENE_SWITCH_SCENE)}),layer.getLayer(LAYERS$1.BRAND_INTRO).set(),layer.hideLayer(LAYERS$1.BRAND_INTRO)}show(t){timeline.createTask({start:t,duration:BRAND_INTRO_CONFIG.animLength,data:[MODES$1.SHOW,BRAND_INTRO_CONFIG.textStartY,BRAND_INTRO_CONFIG.textEndY,BRAND_INTRO_BUTTON_CONFIG.textStartY,BRAND_INTRO_BUTTON_CONFIG.textEndY,BRAND_INTRO_BUTTON_CONFIG.buttonStartY,BRAND_INTRO_BUTTON_CONFIG.buttonEndY],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:BRAND_INTRO_CONFIG.animLength,data:[MODES$1.HIDE,BRAND_INTRO_CONFIG.textEndY,BRAND_INTRO_CONFIG.textStartY,BRAND_INTRO_BUTTON_CONFIG.textEndY,BRAND_INTRO_BUTTON_CONFIG.textStartY,BRAND_INTRO_BUTTON_CONFIG.buttonEndY,BRAND_INTRO_BUTTON_CONFIG.buttonStartY],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}onTimeUpdate(t,n,_,l,N,u,L,X){this.text&&this.text.attr("y",this.anim(t,_,l-_,BRAND_INTRO_CONFIG.animLength)),this.answerText&&this.answerText.attr("y",this.anim(t,N,u-N,BRAND_ANSWER1_CONFIG.animLength)),this.answerButton&&this.answerButton.attr("y",this.anim(t,L,X-L,BRAND_ANSWER1_CONFIG.animLength))}onTimeStart(t){const n=[];this.text&&n.push(this.text),this.answerText&&n.push(this.answerText),this.answerButton&&n.push(this.answerButton),t===MODES$1.SHOW&&n.invoke(t)}onTimeEnd(t){const n=[];this.text&&n.push(this.text),this.answerText&&n.push(this.answerText),this.answerButton&&n.push(this.answerButton),t===MODES$1.SHOW&&n.invoke(t)}}const brandIntro=new BrandIntro,{LAYERS,MESSAGES:MESSAGES$1,MODES,SCENE_STATES:SCENE_STATES$1,SCENES:SCENES$1,SOUNDS,STATE_KEYS:STATE_KEYS$1}=getConfig$1();class Scene{constructor(){f(this,"menuSnd"),f(this,"gameStartSnd"),f(this,"setTimeout",timeline.setTimeout.bind(timeline)),f(this,"setInterval",timeline._setInterval.bind(timeline)),message.addEventListener(MESSAGES$1.SCENE_SWITCH_SCENE,t=>{this.switchScene(t)}),message.addEventListener(MESSAGES$1.TOGGLE_SOUND,()=>{this.toggleSound()})}init(){this.menuSnd=soundFactory.create(SOUNDS.MENU),this.gameStartSnd=soundFactory.create(SOUNDS.START),[background,homeMask,homeLogo,homeText,homeButton,score,lose,gameOver,flash,bottom,resultLogo,resultText,resultButtonNext,resultButtonReplay,soundButton,brandQuestion,brandIntro,fps].invoke("set"),this.setInterval(fps.update.bind(fps),500)}switchScene(t){const n=()=>l.set(SCENE_STATES$1.READY),_=state(STATE_KEYS$1.SCENE_NAME),l=state(STATE_KEYS$1.SCENE_STATE);if(_.is(t))return;const N=()=>{switch(_.set(t),l.set(SCENE_STATES$1.ENTERING),t){case SCENES$1.HOME_MENU:this.showMenu(n);break;case SCENES$1.GAME_BODY:this.showGame(n);break;case SCENES$1.GAME_OVER:this.showGameOver(n);break;case SCENES$1.GAME_RESULT:this.showResult(n);break;case SCENES$1.BRAND_INTRO:this.showBrandIntro(n);break;case SCENES$1.BRAND_QUESTION:this.showBrandQuestion(n);break}};l.set(SCENE_STATES$1.EXITING),_.isunset()?N():_.is(SCENES$1.HOME_MENU)?this.hideMenu(N):_.is(SCENES$1.GAME_BODY)?this.hideGame(N):_.is(SCENES$1.GAME_OVER)?this.hideGameOver(N):_.is(SCENES$1.GAME_RESULT)?this.hideResult(N):_.is(SCENES$1.BRAND_INTRO)?this.hideBrandIntro(N):_.is(SCENES$1.BRAND_QUESTION)&&this.hideBrandQuestion(N)}toggleSound(){const t=state(STATE_KEYS$1.SCENE_NAME),n=soundButton.isOn?"play":"stop";t.is(SCENES$1.HOME_MENU)?this.menuSnd[n]():t.is(SCENES$1.GAME_BODY)?this.gameStartSnd[n]():t.is(SCENES$1.GAME_RESULT)&&this.menuSnd[n]()}showMenu(t){layer.showLayer(LAYERS.START_SCREEN),[[homeMask,0],[homeLogo,0],[homeText,1e3],[bottom,1e3],[homeButton,1200]].invoke(MODES.SHOW),this.menuSnd.play(),soundButton.showHomeSoundButton(1200),this.setTimeout(t,2500)}hideMenu(t){[homeButton,homeMask,homeLogo,homeText].invoke(MODES.HIDE),soundButton.hideHomeSoundButton(),this.menuSnd.stop(),this.setTimeout(()=>{t(),layer.hideLayer(LAYERS.START_SCREEN)},1200)}showGame(t){layer.showLayer(LAYERS.FRUIT),score.show(),lose.show(),game.start(),this.gameStartSnd.play(),soundButton.showGameSoundButton(),this.setTimeout(t,700)}hideGame(t){score.hide(),lose.hide(),soundButton.hideGameSoundButton(),this.gameStartSnd.stop(),this.setTimeout(()=>{t(),layer.hideLayer(LAYERS.FRUIT)},700)}showGameOver(t){[[gameOver,0]].invoke(MODES.SHOW),this.setTimeout(()=>{t(),this.switchScene(SCENES$1.GAME_RESULT)},2e3)}hideGameOver(t){[gameOver].invoke(MODES.HIDE),this.setTimeout(t,1e3)}showResult(){layer.showLayer(LAYERS.RESULT_SCREEN),[[resultLogo,0],[resultText,700],[resultButtonNext,1e3],[resultButtonReplay,1e3]].invoke(MODES.SHOW),this.menuSnd.play(),soundButton.showResultSoundButton()}hideResult(t){[resultLogo,resultText,resultButtonNext,resultButtonReplay].invoke(MODES.HIDE),soundButton.hideResultSoundButton(),this.menuSnd.stop(),this.setTimeout(()=>{t(),layer.hideLayer(LAYERS.RESULT_SCREEN)},1e3)}showBrandIntro(){layer.showLayer(LAYERS.BRAND_INTRO),[[brandIntro,0]].invoke(MODES.SHOW),soundButton.showResultSoundButton()}hideBrandIntro(t){[brandIntro].invoke(MODES.HIDE),soundButton.hideResultSoundButton(),this.setTimeout(()=>{t(),layer.hideLayer(LAYERS.BRAND_INTRO)},1e3)}showBrandQuestion(){layer.showLayer(LAYERS.BRAND_QUESTION),[[brandQuestion,0]].invoke(MODES.SHOW),soundButton.showResultSoundButton()}hideBrandQuestion(t){[brandQuestion].invoke(MODES.HIDE),soundButton.hideResultSoundButton(),this.setTimeout(()=>{t(),layer.hideLayer(LAYERS.BRAND_QUESTION)},1e3)}}const scene=new Scene,{CONSOLE_CONFIG}=getConfig$1();class Console{constructor(){f(this,"x",CONSOLE_CONFIG.x),f(this,"y",CONSOLE_CONFIG.y),f(this,"texts",[])}set(){}clear(){const t=this.texts.length;for(let n=0;n<t;n++)this.texts[n].remove();this.texts.length=0,this.y=CONSOLE_CONFIG.y}log(t){this.y+=20,this.texts.push(layer.createText("default",t,this.x,this.y))}}const csl=new Console,{MESSAGES,SCENES,STATE_KEYS,SCENE_STATES}=getConfig$1();class Main{constructor(){var t,n;this.setTimeout=timeline.setTimeout.bind(timeline),this.log=(()=>{let _=1e3;const l=300,N=function(u){setTimeout(function(){csl.log(u)},_),_+=l};return N.clear=function(){setTimeout(csl.clear.bind(csl),_),_+=l},N})(),(n=(t=window.Telegram)==null?void 0:t.WebApp)!=null&&n.disableVerticalScroll&&window.Telegram.WebApp.disableVerticalScroll(!0),document.addEventListener("touchstart",_=>{_.preventDefault()},{passive:!1}),document.addEventListener("touchmove",_=>{_.preventDefault()},{passive:!1}),message.addEventListener(MESSAGES.SLICE,_=>{const l=collide.checkSlice(_);if(l.length){const N=tools.getAngleByRadian(tools.pointToRadian(_.slice(0,2),_.slice(2,4)));l.forEach(u=>message.postMessage(u,N,MESSAGES.SLICE_AT))}}),message.addEventListener(MESSAGES.TOUCH,_=>{const l=collide.checkTouch(_);l.length&&l.forEach(N=>message.postMessage(N,MESSAGES.TOUCH_AT))}),message.addEventListener(MESSAGES.SLICE_AT,(_,l)=>{state(STATE_KEYS.SCENE_STATE).isnot(SCENE_STATES.READY)||state(STATE_KEYS.SCENE_NAME).is(SCENES.GAME_BODY)&&game.sliceAt(_,l)}),message.addEventListener(MESSAGES.TOUCH_AT,_=>{state(STATE_KEYS.SCENE_STATE).isnot(SCENE_STATES.READY)||state(STATE_KEYS.SCENE_NAME).is(SCENES.GAME_BODY)&&game.catchFruit(_)}),message.addEventListener(MESSAGES.START_GAME,()=>{scene.switchScene(SCENES.GAME_BODY)}),preload()}start(){[timeline,scene,control].invoke("init"),this.log.clear(),this.setTimeout(scene.switchScene.saturate(scene,SCENES.HOME_MENU),3e3)}}const main=new Main;function init(s,t=console){setConfig(new Config(s,t)),main.start()}const getConfig=()=>({rootElement:document.getElementById("extra")});init(getConfig());
//# sourceMappingURL=fruitNinja-vLh7n5PK.js.map
