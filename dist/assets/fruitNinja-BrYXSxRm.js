import"./modulepreload-polyfill-B5Qt9EMX.js";var Ii=Object.defineProperty,Ri=(i,t,e)=>t in i?Ii(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,Ke=(i,t,e)=>(Ri(i,typeof t!="symbol"?t+"":t,e),e);const randomNumber=i=>Math.floor(Math.random()*i),nul=()=>!1,each=(i,t)=>{if(Array.isArray(i))i=[...i],i.forEach(t);else if(typeof i=="object"){const e={};for(const r in i)if(!e[r]&&t(i[r],r)===!1)break}else if(typeof i=="number")for(let e=0;e<i&&t(e,e)!==!1;e++);else if(typeof i=="string")for(let e=0,r=i.length;e<r&&t(i.charAt(e),e)!==!1;e++);},apply=(i,t,e)=>(t||(t={}),e?each(i,(r,h)=>{h in e||(t[h]=r)}):each(i,(r,h)=>t[h]=r),t),makeElement=(i,t)=>{const e=document.createElement(i),r=h=>{typeof h=="string"?e.style.cssText=h:apply(h,e.style)};for(const h in t)h==="class"?e.className=t[h]:h==="for"?e.htmlFor=t[h]:h==="style"?r(t[h]):e.setAttribute(h,t[h]);return e};function addPonyfills(){String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/,"")},String.prototype.htmlEncode=String.prototype.htmlEncode||function(){const i=document.createElement("div");return function(){let t;return i.appendChild(document.createTextNode(this)),t=i.innerHTML,i.innerHTML="",t}}(),String.prototype.byteLength=String.prototype.byteLength||function(){return this.replace(/[^\x00-\xff]/g,"  ").length},String.prototype.subByte=String.prototype.subByte||function(i,t){let e=this;return e.byteLength()<=i?e:(t=t||"",i-=t.byteLength(),e=e.slice(0,i).replace(/([^\x00-\xff])/g,"$1 ").slice(0,i).replace(/[^\x00-\xff]$/,"").replace(/([^\x00-\xff]) /g,"$1")+t)},Function.prototype.defer=Function.prototype.defer||function(i,t){const e=this;return setTimeout(function(){e.apply(i,arguments)},t)},Function.prototype.bind=Function.prototype.bind||function(i){const t=this;return function(){return t.apply(i,arguments)}},Function.prototype.saturate=Function.prototype.saturate||function(i){const t=this,e=[].slice.call(arguments,1);return function(){return t.apply(i,[].slice.call(arguments,0).concat(e))}},Array.prototype.indexOf=Array.prototype.indexOf||function(i,t){const e=this.length;for(t||(t=0),t<0&&(t=e+t);t<e;t++)if(this[t]===i)return t;return-1},Array.prototype.every=Array.prototype.every||function(i,t){for(var e=0,r=this.length;e<r;e++)if(!i.call(t,this[e],e,this))return!1;return!0},Array.prototype.filter=Array.prototype.filter||function(i,t){let e=[],r;for(var h=0,p=this.length;h<p;h++)r=this[h],i.call(t,r,h,this)&&e.push(r);return e},Array.prototype.forEach=Array.prototype.forEach||function(i,t){for(var e=0,r=this.length;e<r;e++)i.call(t,this[e],e,this)},Array.prototype.map=Array.prototype.map||function(i,t){const e=[];for(var r=0,h=this.length;r<h;r++)e[r]=i.call(t,this[r],r,this);return e},Array.prototype.some=Array.prototype.some||function(i,t){for(var e=0,r=this.length;e<r;e++)if(i.call(t,this[e],e,this))return!0;return!1},Array.prototype.invoke=Array.prototype.invoke||function(i){const t=[].slice.call(arguments,1);return this.forEach(function(e){e instanceof Array?e[0][i].apply(e[0],e.slice(1)):e[i].apply(e,t)}),this},Array.prototype.random=Array.prototype.random||function(){let i=this.slice(0),t=[],e=i.length;for(;e--;)t.push(i.splice(randomNumber(e+1),1)[0]);return t}}addPonyfills();(function(){function i(){if(i.is(arguments[0],ut)){for(var s=arguments[0],n=ce[U](i,s.splice(0,3+i.is(s[0],nt))),o=n.set(),c=0,l=s[b];c<l;c++){var d=s[c]||{};e[p](d.type)&&o[J](n[d.type]().attr(d))}return o}return ce[U](i,arguments)}i.version="1.5.2";var t=/[, ]+/,e={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},r=/\{(\d+)\}/g,h="prototype",p="hasOwnProperty",E=document,O=window,L={was:Object[h][p].call(O,"Raphael"),is:O.Raphael},w=function(){this.customAttributes={}},S,v="appendChild",U="apply",F="concat",X="createTouch"in E,M="",W=" ",H=String,Z="split",Bt="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend"[Z](W),Dt={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},tt="join",b="length",Et=H[h].toLowerCase,P=Math,it=P.max,gt=P.min,et=P.abs,z=P.pow,lt=P.PI,nt="number",At="string",ut="array",Tt="toString",yt="fill",$e=Object[h][Tt],J="push",Ee=/^url\(['"]?([^\)]+?)['"]?\)$/i,ti=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,ei={NaN:1,Infinity:1,"-Infinity":1},ni=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,st=P.round,ft="setAttribute",V=parseFloat,vt=parseInt,ie=" progid:DXImageTransform.Microsoft",Xt=H[h].toUpperCase,Wt={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},ne={along:"along",blur:nt,"clip-rect":"csv",cx:nt,cy:nt,fill:"colour","fill-opacity":nt,"font-size":nt,height:nt,opacity:nt,path:"path",r:nt,rotation:"csv",rx:nt,ry:nt,scale:"csv",stroke:"colour","stroke-opacity":nt,"stroke-width":nt,translation:"csv",width:nt,x:nt,y:nt},at="replace",si=/^(from|to|\d+%?)$/,se=/\s*,\s*/,ai={hs:1,rg:1},ri=/,?([achlmqrstvxz]),?/gi,oi=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,hi=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,Te=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,ci=function(s,n){return s.key-n.key};if(i.type=O.SVGAngle||E.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",i.type=="VML"){var ae=E.createElement("div"),zt;if(ae.innerHTML='<v:shape adj="1"/>',zt=ae.firstChild,zt.style.behavior="url(#default#VML)",!(zt&&typeof zt.adj=="object"))return i.type=null;ae=null}i.svg=!(i.vml=i.type=="VML"),w[h]=i[h],S=w[h],i._id=0,i._oid=0,i.fn={},i.is=function(s,n){return n=Et.call(n),n=="finite"?!ei[p](+s):n=="null"&&s===null||n==typeof s||n=="object"&&s===Object(s)||n=="array"&&Array.isArray&&Array.isArray(s)||$e.call(s).slice(8,-1).toLowerCase()==n},i.angle=function(s,n,o,c,l,d){{if(l==null){var f=s-o,u=n-c;return!f&&!u?0:((f<0)*180+P.atan(-u/-f)*180/lt+360)%360}return i.angle(s,n,l,d)-i.angle(o,c,l,d)}},i.rad=function(s){return s%360*lt/180},i.deg=function(s){return s*180/lt%360},i.snapTo=function(s,n,o){if(o=i.is(o,"finite")?o:10,i.is(s,ut)){for(var c=s.length;c--;)if(et(s[c]-n)<=o)return s[c]}else{s=+s;var l=n%s;if(l<o)return n-l;if(l>s-o)return n-l+s}return n};function Vt(){for(var s=[],n=0;n<32;n++)s[n]=(~~(P.random()*16))[Tt](16);return s[12]=4,s[16]=(s[16]&3|8)[Tt](16),"r-"+s[tt]("")}i.setWindow=function(s){O=s,E=O.document};var Pt=function(s){if(i.vml){var n=/^\s+|\s+$/g,o;try{var c=new ActiveXObject("htmlfile");c.write("<body>"),c.close(),o=c.body}catch{o=createPopup().document.body}var l=o.createTextRange();Pt=St(function(f){try{o.style.color=H(f)[at](n,M);var u=l.queryCommandValue("ForeColor");return u=(u&255)<<16|u&65280|(u&16711680)>>>16,"#"+("000000"+u[Tt](16)).slice(-6)}catch{return"none"}})}else{var d=E.createElement("i");d.title="Raphaël Colour Picker",d.style.display="none",E.body[v](d),Pt=St(function(f){return d.style.color=f,E.defaultView.getComputedStyle(d,M).getPropertyValue("color")})}return Pt(s)},Se=function(){return"hsb("+[this.h,this.s,this.b]+")"},li=function(){return"hsl("+[this.h,this.s,this.l]+")"},ui=function(){return this.hex};i.hsb2rgb=function(s,n,o,c){return i.is(s,"object")&&"h"in s&&"s"in s&&"b"in s&&(o=s.b,n=s.s,s=s.h,c=s.o),i.hsl2rgb(s,n,o/2,c)},i.hsl2rgb=function(s,n,o,c){i.is(s,"object")&&"h"in s&&"s"in s&&"l"in s&&(o=s.l,n=s.s,s=s.h),(s>1||n>1||o>1)&&(s/=360,n/=100,o/=100);var l={},d=["r","g","b"],f,u,_;if(n){o<.5?f=o*(1+n):f=o+n-o*n,u=2*o-f;for(var m=0;m<3;m++)_=s+1/3*-(m-1),_<0&&_++,_>1&&_--,_*6<1?l[d[m]]=u+(f-u)*6*_:_*2<1?l[d[m]]=f:_*3<2?l[d[m]]=u+(f-u)*(2/3-_)*6:l[d[m]]=u}else l={r:o,g:o,b:o};return l.r*=255,l.g*=255,l.b*=255,l.hex="#"+(16777216|l.b|l.g<<8|l.r<<16).toString(16).slice(1),i.is(c,"finite")&&(l.opacity=c),l.toString=ui,l},i.rgb2hsb=function(s,n,o){if(n==null&&i.is(s,"object")&&"r"in s&&"g"in s&&"b"in s&&(o=s.b,n=s.g,s=s.r),n==null&&i.is(s,At)){var c=i.getRGB(s);s=c.r,n=c.g,o=c.b}(s>1||n>1||o>1)&&(s/=255,n/=255,o/=255);var l=it(s,n,o),d=gt(s,n,o),f,u,_=l;{if(d==l)return{h:0,s:0,b:l,toString:Se};var m=l-d;u=m/l,s==l?f=(n-o)/m:n==l?f=2+(o-s)/m:f=4+(s-n)/m,f/=6,f<0&&f++,f>1&&f--}return{h:f,s:u,b:_,toString:Se}},i.rgb2hsl=function(s,n,o){if(n==null&&i.is(s,"object")&&"r"in s&&"g"in s&&"b"in s&&(o=s.b,n=s.g,s=s.r),n==null&&i.is(s,At)){var c=i.getRGB(s);s=c.r,n=c.g,o=c.b}(s>1||n>1||o>1)&&(s/=255,n/=255,o/=255);var l=it(s,n,o),d=gt(s,n,o),f,u,_=(l+d)/2,m;if(d==l)m={h:0,s:0,l:_};else{var T=l-d;u=_<.5?T/(l+d):T/(2-l-d),s==l?f=(n-o)/T:n==l?f=2+(o-s)/T:f=4+(s-n)/T,f/=6,f<0&&f++,f>1&&f--,m={h:f,s:u,l:_}}return m.toString=li,m},i._path2string=function(){return this.join(",")[at](ri,"$1")};function St(s,n,o){function c(){var l=Array[h].slice.call(arguments,0),d=l[tt]("►"),f=c.cache=c.cache||{},u=c.count=c.count||[];return f[p](d)||(u[b]>=1e3&&delete f[u.shift()],u[J](d),f[d]=s[U](n,l)),o?o(f[d]):f[d]}return c}i.getRGB=St(function(s){if(!s||(s=H(s)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1};if(s=="none")return{r:-1,g:-1,b:-1,hex:"none"};!(ai[p](s.toLowerCase().substring(0,2))||s.charAt()=="#")&&(s=Pt(s));var n,o,c,l,d,f,u=s.match(ti);return u?(u[2]&&(c=vt(u[2].substring(5),16),o=vt(u[2].substring(3,5),16),n=vt(u[2].substring(1,3),16)),u[3]&&(c=vt((d=u[3].charAt(3))+d,16),o=vt((d=u[3].charAt(2))+d,16),n=vt((d=u[3].charAt(1))+d,16)),u[4]&&(f=u[4][Z](se),n=V(f[0]),f[0].slice(-1)=="%"&&(n*=2.55),o=V(f[1]),f[1].slice(-1)=="%"&&(o*=2.55),c=V(f[2]),f[2].slice(-1)=="%"&&(c*=2.55),u[1].toLowerCase().slice(0,4)=="rgba"&&(l=V(f[3])),f[3]&&f[3].slice(-1)=="%"&&(l/=100)),u[5]?(f=u[5][Z](se),n=V(f[0]),f[0].slice(-1)=="%"&&(n*=2.55),o=V(f[1]),f[1].slice(-1)=="%"&&(o*=2.55),c=V(f[2]),f[2].slice(-1)=="%"&&(c*=2.55),(f[0].slice(-3)=="deg"||f[0].slice(-1)=="°")&&(n/=360),u[1].toLowerCase().slice(0,4)=="hsba"&&(l=V(f[3])),f[3]&&f[3].slice(-1)=="%"&&(l/=100),i.hsb2rgb(n,o,c,l)):u[6]?(f=u[6][Z](se),n=V(f[0]),f[0].slice(-1)=="%"&&(n*=2.55),o=V(f[1]),f[1].slice(-1)=="%"&&(o*=2.55),c=V(f[2]),f[2].slice(-1)=="%"&&(c*=2.55),(f[0].slice(-3)=="deg"||f[0].slice(-1)=="°")&&(n/=360),u[1].toLowerCase().slice(0,4)=="hsla"&&(l=V(f[3])),f[3]&&f[3].slice(-1)=="%"&&(l/=100),i.hsl2rgb(n,o,c,l)):(u={r:n,g:o,b:c},u.hex="#"+(16777216|c|o<<8|n<<16).toString(16).slice(1),i.is(l,"finite")&&(u.opacity=l),u)):{r:-1,g:-1,b:-1,hex:"none",error:1}},i),i.getColor=function(s){var n=this.getColor.start=this.getColor.start||{h:0,s:1,b:s||.75},o=this.hsb2rgb(n.h,n.s,n.b);return n.h+=.075,n.h>1&&(n.h=0,n.s-=.2,n.s<=0&&(this.getColor.start={h:0,s:1,b:n.b})),o.hex},i.getColor.reset=function(){delete this.start},i.parsePathString=St(function(s){if(!s)return null;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=[];return i.is(s,ut)&&i.is(s[0],ut)&&(o=Kt(s)),o[b]||H(s)[at](oi,function(c,l,d){var f=[],u=Et.call(l);for(d[at](hi,function(_,m){m&&f[J](+m)}),u=="m"&&f[b]>2&&(o[J]([l][F](f.splice(0,2))),u="l",l=l=="m"?"l":"L");f[b]>=n[u]&&(o[J]([l][F](f.splice(0,n[u]))),!!n[u]););}),o[Tt]=i._path2string,o}),i.findDotsAtSegment=function(s,n,o,c,l,d,f,u,_){var m=1-_,T=z(m,3)*s+z(m,2)*3*_*o+m*3*_*_*l+z(_,3)*f,I=z(m,3)*n+z(m,2)*3*_*c+m*3*_*_*d+z(_,3)*u,A=s+2*_*(o-s)+_*_*(l-2*o+s),R=n+2*_*(c-n)+_*_*(d-2*c+n),N=o+2*_*(l-o)+_*_*(f-2*l+o),y=c+2*_*(d-c)+_*_*(u-2*d+c),x=(1-_)*s+_*o,C=(1-_)*n+_*c,B=(1-_)*l+_*f,Y=(1-_)*d+_*u,G=90-P.atan((A-N)/(R-y))*180/lt;return(A>N||R<y)&&(G+=180),{x:T,y:I,m:{x:A,y:R},n:{x:N,y},start:{x,y:C},end:{x:B,y:Y},alpha:G}};var jt=St(function(s){if(!s)return{x:0,y:0,width:0,height:0};s=Zt(s);for(var n=0,o=0,c=[],l=[],d,f=0,u=s[b];f<u;f++)if(d=s[f],d[0]=="M")n=d[1],o=d[2],c[J](n),l[J](o);else{var _=di(n,o,d[1],d[2],d[3],d[4],d[5],d[6]);c=c[F](_.min.x,_.max.x),l=l[F](_.min.y,_.max.y),n=d[5],o=d[6]}var m=gt[U](0,c),T=gt[U](0,l);return{x:m,y:T,width:it[U](0,c)-m,height:it[U](0,l)-T}}),Kt=function(s){var n=[];(!i.is(s,ut)||!i.is(s&&s[0],ut))&&(s=i.parsePathString(s));for(var o=0,c=s[b];o<c;o++){n[o]=[];for(var l=0,d=s[o][b];l<d;l++)n[o][l]=s[o][l]}return n[Tt]=i._path2string,n},re=St(function(s){(!i.is(s,ut)||!i.is(s&&s[0],ut))&&(s=i.parsePathString(s));var n=[],o=0,c=0,l=0,d=0,f=0;s[0][0]=="M"&&(o=s[0][1],c=s[0][2],l=o,d=c,f++,n[J](["M",o,c]));for(var u=f,_=s[b];u<_;u++){var m=n[u]=[],T=s[u];if(T[0]!=Et.call(T[0]))switch(m[0]=Et.call(T[0]),m[0]){case"a":m[1]=T[1],m[2]=T[2],m[3]=T[3],m[4]=T[4],m[5]=T[5],m[6]=+(T[6]-o).toFixed(3),m[7]=+(T[7]-c).toFixed(3);break;case"v":m[1]=+(T[1]-c).toFixed(3);break;case"m":l=T[1],d=T[2];default:for(var I=1,A=T[b];I<A;I++)m[I]=+(T[I]-(I%2?o:c)).toFixed(3)}else{m=n[u]=[],T[0]=="m"&&(l=T[1]+o,d=T[2]+c);for(var R=0,N=T[b];R<N;R++)n[u][R]=T[R]}var y=n[u][b];switch(n[u][0]){case"z":o=l,c=d;break;case"h":o+=+n[u][y-1];break;case"v":c+=+n[u][y-1];break;default:o+=+n[u][y-2],c+=+n[u][y-1]}}return n[Tt]=i._path2string,n},0,Kt),Gt=St(function(s){(!i.is(s,ut)||!i.is(s&&s[0],ut))&&(s=i.parsePathString(s));var n=[],o=0,c=0,l=0,d=0,f=0;s[0][0]=="M"&&(o=+s[0][1],c=+s[0][2],l=o,d=c,f++,n[0]=["M",o,c]);for(var u=f,_=s[b];u<_;u++){var m=n[u]=[],T=s[u];if(T[0]!=Xt.call(T[0]))switch(m[0]=Xt.call(T[0]),m[0]){case"A":m[1]=T[1],m[2]=T[2],m[3]=T[3],m[4]=T[4],m[5]=T[5],m[6]=+(T[6]+o),m[7]=+(T[7]+c);break;case"V":m[1]=+T[1]+c;break;case"H":m[1]=+T[1]+o;break;case"M":l=+T[1]+o,d=+T[2]+c;default:for(var I=1,A=T[b];I<A;I++)m[I]=+T[I]+(I%2?o:c)}else for(var R=0,N=T[b];R<N;R++)n[u][R]=T[R];switch(m[0]){case"Z":o=l,c=d;break;case"H":o=m[1];break;case"V":c=m[1];break;case"M":l=n[u][n[u][b]-2],d=n[u][n[u][b]-1];default:o=n[u][n[u][b]-2],c=n[u][n[u][b]-1]}}return n[Tt]=i._path2string,n},null,Kt),qt=function(s,n,o,c){return[s,n,o,c,o,c]},xe=function(s,n,o,c,l,d){var f=.3333333333333333,u=2/3;return[f*s+u*o,f*n+u*c,f*l+u*o,f*d+u*c,l,d]},ye=function(s,n,o,c,l,d,f,u,_,m){var T=lt*120/180,I=lt/180*(+l||0),A=[],R,N=St(function(Ze,Je,ee){var Ai=Ze*P.cos(ee)-Je*P.sin(ee),Li=Ze*P.sin(ee)+Je*P.cos(ee);return{x:Ai,y:Li}});if(m)$=m[0],k=m[1],q=m[2],Q=m[3];else{R=N(s,n,-I),s=R.x,n=R.y,R=N(u,_,-I),u=R.x,_=R.y;var y=(s-u)/2,x=(n-_)/2,C=y*y/(o*o)+x*x/(c*c);C>1&&(C=P.sqrt(C),o=C*o,c=C*c);var B=o*o,Y=c*c,G=(d==f?-1:1)*P.sqrt(et((B*Y-B*x*x-Y*y*y)/(B*x*x+Y*y*y))),q=G*o*x/c+(s+u)/2,Q=G*-c*y/o+(n+_)/2,$=P.asin(((n-Q)/c).toFixed(9)),k=P.asin(((_-Q)/c).toFixed(9));$=s<q?lt-$:$,k=u<q?lt-k:k,$<0&&($=lt*2+$),k<0&&(k=lt*2+k),f&&$>k&&($=$-lt*2),!f&&k>$&&(k=k-lt*2)}var ht=k-$;if(et(ht)>T){var rt=k,xt=u,Ot=_;k=$+T*(f&&k>$?1:-1),u=q+o*P.cos(k),_=Q+c*P.sin(k),A=ye(u,_,o,c,l,0,f,xt,Ot,[k,rt,q,Q])}ht=k-$;var It=P.cos($),ct=P.sin($),Mt=P.cos(k),_t=P.sin(k),Rt=P.tan(ht/4),bt=4/3*o*Rt,Ve=4/3*c*Rt,Pe=[s,n],Ft=[s+bt*ct,n-Ve*It],je=[u+bt*_t,_-Ve*Mt],qe=[u,_];Ft[0]=2*Pe[0]-Ft[0],Ft[1]=2*Pe[1]-Ft[1];{if(m)return[Ft,je,qe][F](A);A=[Ft,je,qe][F](A)[tt]()[Z](",");for(var Qe=[],Lt=0,Ni=A[b];Lt<Ni;Lt++)Qe[Lt]=Lt%2?N(A[Lt-1],A[Lt],I).y:N(A[Lt],A[Lt+1],I).x;return Qe}},Qt=function(s,n,o,c,l,d,f,u,_){var m=1-_;return{x:z(m,3)*s+z(m,2)*3*_*o+m*3*_*_*l+z(_,3)*f,y:z(m,3)*n+z(m,2)*3*_*c+m*3*_*_*d+z(_,3)*u}},di=St(function(s,n,o,c,l,d,f,u){var _=l-2*o+s-(f-2*l+o),m=2*(o-s)-2*(l-o),T=s-o,I=(-m+P.sqrt(m*m-4*_*T))/2/_,A=(-m-P.sqrt(m*m-4*_*T))/2/_,R=[n,u],N=[s,f],y;return et(I)>"1e12"&&(I=.5),et(A)>"1e12"&&(A=.5),I>0&&I<1&&(y=Qt(s,n,o,c,l,d,f,u,I),N[J](y.x),R[J](y.y)),A>0&&A<1&&(y=Qt(s,n,o,c,l,d,f,u,A),N[J](y.x),R[J](y.y)),_=d-2*c+n-(u-2*d+c),m=2*(c-n)-2*(d-c),T=n-c,I=(-m+P.sqrt(m*m-4*_*T))/2/_,A=(-m-P.sqrt(m*m-4*_*T))/2/_,et(I)>"1e12"&&(I=.5),et(A)>"1e12"&&(A=.5),I>0&&I<1&&(y=Qt(s,n,o,c,l,d,f,u,I),N[J](y.x),R[J](y.y)),A>0&&A<1&&(y=Qt(s,n,o,c,l,d,f,u,A),N[J](y.x),R[J](y.y)),{min:{x:gt[U](0,N),y:gt[U](0,R)},max:{x:it[U](0,N),y:it[U](0,R)}}}),Zt=St(function(s,n){for(var o=Gt(s),c=n&&Gt(n),l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},d={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},f=function(y,x){var C,B;if(!y)return["C",x.x,x.y,x.x,x.y,x.x,x.y];switch(!(y[0]in{T:1,Q:1})&&(x.qx=x.qy=null),y[0]){case"M":x.X=y[1],x.Y=y[2];break;case"A":y=["C"][F](ye[U](0,[x.x,x.y][F](y.slice(1))));break;case"S":C=x.x+(x.x-(x.bx||x.x)),B=x.y+(x.y-(x.by||x.y)),y=["C",C,B][F](y.slice(1));break;case"T":x.qx=x.x+(x.x-(x.qx||x.x)),x.qy=x.y+(x.y-(x.qy||x.y)),y=["C"][F](xe(x.x,x.y,x.qx,x.qy,y[1],y[2]));break;case"Q":x.qx=y[1],x.qy=y[2],y=["C"][F](xe(x.x,x.y,y[1],y[2],y[3],y[4]));break;case"L":y=["C"][F](qt(x.x,x.y,y[1],y[2]));break;case"H":y=["C"][F](qt(x.x,x.y,y[1],x.y));break;case"V":y=["C"][F](qt(x.x,x.y,x.x,y[1]));break;case"Z":y=["C"][F](qt(x.x,x.y,x.X,x.Y));break}return y},u=function(y,x){if(y[x][b]>7){y[x].shift();for(var C=y[x];C[b];)y.splice(x++,0,["C"][F](C.splice(0,6)));y.splice(x,1),T=it(o[b],c&&c[b]||0)}},_=function(y,x,C,B,Y){y&&x&&y[Y][0]=="M"&&x[Y][0]!="M"&&(x.splice(Y,0,["M",B.x,B.y]),C.bx=0,C.by=0,C.x=y[Y][1],C.y=y[Y][2],T=it(o[b],c&&c[b]||0))},m=0,T=it(o[b],c&&c[b]||0);m<T;m++){o[m]=f(o[m],l),u(o,m),c&&(c[m]=f(c[m],d)),c&&u(c,m),_(o,c,l,d,m),_(c,o,d,l,m);var I=o[m],A=c&&c[m],R=I[b],N=c&&A[b];l.x=I[R-2],l.y=I[R-1],l.bx=V(I[R-4])||l.x,l.by=V(I[R-3])||l.y,d.bx=c&&(V(A[N-4])||d.x),d.by=c&&(V(A[N-3])||d.y),d.x=c&&A[N-2],d.y=c&&A[N-1]}return c?[o,c]:o},null,Kt),ve=St(function(s){for(var n=[],o=0,c=s[b];o<c;o++){var l={},d=s[o].match(/^([^:]*):?([\d\.]*)/);if(l.color=i.getRGB(d[1]),l.color.error)return null;l.color=l.color.hex,d[2]&&(l.offset=d[2]+"%"),n[J](l)}for(o=1,c=n[b]-1;o<c;o++)if(!n[o].offset){for(var f=V(n[o-1].offset||0),u=0,_=o+1;_<c;_++)if(n[_].offset){u=n[_].offset;break}u||(u=100,_=c),u=V(u);for(var m=(u-f)/(_-o+1);o<_;o++)f+=m,n[o].offset=f+"%"}return n}),Oe=function(s,n,o,c){var l;if(i.is(s,At)||i.is(s,"object")){if(l=i.is(s,At)?E.getElementById(s):s,l.tagName)return n==null?{container:l,width:l.style.pixelWidth||l.offsetWidth,height:l.style.pixelHeight||l.offsetHeight}:{container:l,width:n,height:o}}else return{container:1,x:s,y:n,width:o,height:c}},oe=function(s,n){var o=this;for(var c in n)if(n[p](c)&&!(c in s))switch(typeof n[c]){case"function":(function(l){s[c]=s===o?l:function(){return l[U](o,arguments)}})(n[c]);break;case"object":s[c]=s[c]||{},oe.call(this,s[c],n[c]);break;default:s[c]=n[c];break}},Ut=function(s,n){s==n.top&&(n.top=s.prev),s==n.bottom&&(n.bottom=s.next),s.next&&(s.next.prev=s.prev),s.prev&&(s.prev.next=s.next)},Ne=function(s,n){n.top!==s&&(Ut(s,n),s.next=null,s.prev=n.top,n.top.next=s,n.top=s)},Ae=function(s,n){n.bottom!==s&&(Ut(s,n),s.next=n.bottom,s.prev=null,n.bottom.prev=s,n.bottom=s)},Ie=function(s,n,o){Ut(s,o),n==o.top&&(o.top=s),n.next&&(n.next.prev=s),s.next=n.next,s.prev=n,n.next=s},Re=function(s,n,o){Ut(s,o),n==o.bottom&&(o.bottom=s),n.prev&&(n.prev.next=s),s.prev=n.prev,n.prev=s,s.next=n},Le=function(s){return function(){throw new Error("Raphaël: you are calling to method “"+s+"” of removed object")}};if(i.pathToRelative=re,i.svg){S.svgns="http://www.w3.org/2000/svg",S.xlink="http://www.w3.org/1999/xlink",st=function(s){return+s+(~~s===s)*.5};var D=function(s,n){if(n)for(var o in n)n[p](o)&&s[ft](o,H(n[o]));else return s=E.createElementNS(S.svgns,s),s.style.webkitTapHighlightColor="rgba(0,0,0,0)",s};i[Tt]=function(){return`Your browser supports SVG.
You are running Raphaël `+this.version};var be=function(s,n){var o=D("path");n.canvas&&n.canvas[v](o);var c=new K(o,n);return c.type="path",Nt(c,{fill:"none",stroke:"#000",path:s}),c},kt=function(s,n,o){var c="linear",l=.5,d=.5,f=s.style;if(n=H(n)[at](Te,function(x,C,B){if(c="radial",C&&B){l=V(C),d=V(B);var Y=(d>.5)*2-1;z(l-.5,2)+z(d-.5,2)>.25&&(d=P.sqrt(.25-z(l-.5,2))*Y+.5)&&d!=.5&&(d=d.toFixed(5)-1e-5*Y)}return M}),n=n[Z](/\s*\-\s*/),c=="linear"){var u=n.shift();if(u=-V(u),isNaN(u))return null;var _=[0,0,P.cos(u*lt/180),P.sin(u*lt/180)],m=1/(it(et(_[2]),et(_[3]))||1);_[2]*=m,_[3]*=m,_[2]<0&&(_[0]=-_[2],_[2]=0),_[3]<0&&(_[1]=-_[3],_[3]=0)}var T=ve(n);if(!T)return null;var I=s.getAttribute(yt);I=I.match(/^url\(#(.*)\)$/),I&&o.defs.removeChild(E.getElementById(I[1]));var A=D(c+"Gradient");A.id=Vt(),D(A,c=="radial"?{fx:l,fy:d}:{x1:_[0],y1:_[1],x2:_[2],y2:_[3]}),o.defs[v](A);for(var R=0,N=T[b];R<N;R++){var y=D("stop");D(y,{offset:T[R].offset?T[R].offset:R?"100%":"0%","stop-color":T[R].color||"#fff"}),A[v](y)}return D(s,{fill:"url(#"+A.id+")",opacity:1,"fill-opacity":1}),f.fill=M,f.opacity=1,f.fillOpacity=1,1},he=function(s){var n=s.getBBox();D(s.pattern,{patternTransform:i.format("translate({0},{1})",n.x,n.y)})},Nt=function(s,n){var o={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},c=s.node,l=s.attrs,d=s.rotate(),f=function(k,ht){if(ht=o[Et.call(ht)],ht){for(var rt=k.attrs["stroke-width"]||"1",xt={round:rt,square:rt,butt:0}[k.attrs["stroke-linecap"]||n["stroke-linecap"]]||0,Ot=[],It=ht[b];It--;)Ot[It]=ht[It]*rt+(It%2?1:-1)*xt;D(c,{"stroke-dasharray":Ot[tt](",")})}};n[p]("rotation")&&(d=n.rotation);var u=H(d)[Z](t);u.length-1?(u[1]=+u[1],u[2]=+u[2]):u=null,V(d)&&s.rotate(0,!0);for(var _ in n)if(n[p](_)){if(!Wt[p](_))continue;var m=n[_];switch(l[_]=m,_){case"blur":s.blur(m);break;case"rotation":s.rotate(m,!0);break;case"href":case"title":case"target":var T=c.parentNode;if(Et.call(T.tagName)!="a"){var I=D("a");T.insertBefore(I,c),I[v](c),T=I}_=="target"&&m=="blank"?T.setAttributeNS(s.paper.xlink,"show","new"):T.setAttributeNS(s.paper.xlink,_,m);break;case"cursor":c.style.cursor=m;break;case"clip-rect":var A=H(m)[Z](t);if(A[b]==4){s.clip&&s.clip.parentNode.parentNode.removeChild(s.clip.parentNode);var R=D("clipPath"),N=D("rect");R.id=Vt(),D(N,{x:A[0],y:A[1],width:A[2],height:A[3]}),R[v](N),s.paper.defs[v](R),D(c,{"clip-path":"url(#"+R.id+")"}),s.clip=N}if(!m){var y=E.getElementById(c.getAttribute("clip-path")[at](/(^url\(#|\)$)/g,M));y&&y.parentNode.removeChild(y),D(c,{"clip-path":M}),delete s.clip}break;case"path":s.type=="path"&&D(c,{d:m?l.path=Gt(m):"M0,0"});break;case"width":if(c[ft](_,m),l.fx)_="x",m=l.x;else break;case"x":l.fx&&(m=-l.x-(l.width||0));case"rx":if(_=="rx"&&s.type=="rect")break;case"cx":u&&(_=="x"||_=="cx")&&(u[1]+=m-l[_]),c[ft](_,m),s.pattern&&he(s);break;case"height":if(c[ft](_,m),l.fy)_="y",m=l.y;else break;case"y":l.fy&&(m=-l.y-(l.height||0));case"ry":if(_=="ry"&&s.type=="rect")break;case"cy":u&&(_=="y"||_=="cy")&&(u[2]+=m-l[_]),c[ft](_,m),s.pattern&&he(s);break;case"r":s.type=="rect"?D(c,{rx:m,ry:m}):c[ft](_,m);break;case"src":s.type=="image"&&c.setAttributeNS(s.paper.xlink,"href",m);break;case"stroke-width":c.style.strokeWidth=m,c[ft](_,m),l["stroke-dasharray"]&&f(s,l["stroke-dasharray"]);break;case"stroke-dasharray":f(s,m);break;case"translation":var x=H(m)[Z](t);x[0]=+x[0]||0,x[1]=+x[1]||0,u&&(u[1]+=x[0],u[2]+=x[1]),te.call(s,x[0],x[1]);break;case"scale":x=H(m)[Z](t),s.scale(+x[0]||1,+x[1]||+x[0]||1,isNaN(V(x[2]))?null:+x[2],isNaN(V(x[3]))?null:+x[3]);break;case yt:var C=H(m).match(Ee);if(C){R=D("pattern");var B=D("image");R.id=Vt(),D(R,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),D(B,{x:0,y:0}),B.setAttributeNS(s.paper.xlink,"href",C[1]),R[v](B);var Y=E.createElement("img");Y.style.cssText="position:absolute;left:-9999em;top-9999em",Y.onload=function(){D(R,{width:this.offsetWidth,height:this.offsetHeight}),D(B,{width:this.offsetWidth,height:this.offsetHeight}),E.body.removeChild(this),s.paper.safari()},E.body[v](Y),Y.src=C[1],s.paper.defs[v](R),c.style.fill="url(#"+R.id+")",D(c,{fill:"url(#"+R.id+")"}),s.pattern=R,s.pattern&&he(s);break}var G=i.getRGB(m);if(G.error)if(({circle:1,ellipse:1}[p](s.type)||H(m).charAt()!="r")&&kt(c,m,s.paper)){l.gradient=m,l.fill="none";break}else delete n.gradient,delete l.gradient,!i.is(l.opacity,"undefined")&&i.is(n.opacity,"undefined")&&D(c,{opacity:l.opacity}),!i.is(l["fill-opacity"],"undefined")&&i.is(n["fill-opacity"],"undefined")&&D(c,{"fill-opacity":l["fill-opacity"]});G[p]("opacity")&&D(c,{"fill-opacity":G.opacity>1?G.opacity/100:G.opacity});case"stroke":G=i.getRGB(m),c[ft](_,G.hex),_=="stroke"&&G[p]("opacity")&&D(c,{"stroke-opacity":G.opacity>1?G.opacity/100:G.opacity});break;case"gradient":({circle:1,ellipse:1}[p](s.type)||H(m).charAt()!="r")&&kt(c,m,s.paper);break;case"opacity":l.gradient&&!l[p]("stroke-opacity")&&D(c,{"stroke-opacity":m>1?m/100:m});case"fill-opacity":if(l.gradient){var q=E.getElementById(c.getAttribute(yt)[at](/^url\(#|\)$/g,M));if(q){var Q=q.getElementsByTagName("stop");Q[Q[b]-1][ft]("stop-opacity",m)}break}default:_=="font-size"&&(m=vt(m,10)+"px");var $=_[at](/(\-.)/g,function(k){return Xt.call(k.substring(1))});c.style[$]=m,c[ft](_,m);break}}gi(s,n),u?s.rotate(u.join(W)):V(d)&&s.rotate(d,!0)},Ue=1.2,gi=function(s,n){if(!(s.type!="text"||!(n[p]("text")||n[p]("font")||n[p]("font-size")||n[p]("x")||n[p]("y")))){var o=s.attrs,c=s.node,l=c.firstChild?vt(E.defaultView.getComputedStyle(c.firstChild,M).getPropertyValue("font-size"),10):10;if(n[p]("text")){for(o.text=n.text;c.firstChild;)c.removeChild(c.firstChild);for(var d=H(n.text)[Z](`
`),f=0,u=d[b];f<u;f++)if(d[f]){var _=D("tspan");f&&D(_,{dy:l*Ue,x:o.x}),_[v](E.createTextNode(d[f])),c[v](_)}}else for(d=c.getElementsByTagName("tspan"),f=0,u=d[b];f<u;f++)f&&D(d[f],{dy:l*Ue,x:o.x});D(c,{y:o.y});var m=s.getBBox(),T=o.y-(m.y+m.height/2);T&&i.is(T,"finite")&&D(c,{y:o.y+T})}},K=function(s,n){this[0]=s,this.id=i._oid++,this.node=s,s.raphael=this,this.paper=n,this.attrs=this.attrs||{},this.transformations=[],this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},j=K[h];K[h].rotate=function(s,n,o){if(this.removed)return this;if(s==null)return this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][tt](W):this._.rt.deg;var c=this.getBBox();return s=H(s)[Z](t),s[b]-1&&(n=V(s[1]),o=V(s[2])),s=V(s[0]),n!=null&&n!==!1?this._.rt.deg=s:this._.rt.deg+=s,o==null&&(n=null),this._.rt.cx=n,this._.rt.cy=o,n=n??c.x+c.width/2,o=o??c.y+c.height/2,this._.rt.deg?(this.transformations[0]=i.format("rotate({0} {1} {2})",this._.rt.deg,n,o),this.clip&&D(this.clip,{transform:i.format("rotate({0} {1} {2})",-this._.rt.deg,n,o)})):(this.transformations[0]=M,this.clip&&D(this.clip,{transform:M})),D(this.node,{transform:this.transformations[tt](W)}),this},K[h].hide=function(){return!this.removed&&(this.node.style.display="none"),this},K[h].show=function(){return!this.removed&&(this.node.style.display=""),this},K[h].remove=function(){if(!this.removed){Ut(this,this.paper),this.node.parentNode.removeChild(this.node);for(var s in this)delete this[s];this.removed=!0}},K[h].getBBox=function(){if(this.removed)return this;if(this.type=="path")return jt(this.attrs.path);if(this.node.style.display=="none"){this.show();var s=!0}var n={};try{n=this.node.getBBox()}catch{}finally{n=n||{}}if(this.type=="text"){n={x:n.x,y:1/0,width:0,height:0};for(var o=0,c=this.node.getNumberOfChars();o<c;o++){var l=this.node.getExtentOfChar(o);l.y<n.y&&(n.y=l.y),l.y+l.height-n.y>n.height&&(n.height=l.y+l.height-n.y),l.x+l.width-n.x>n.width&&(n.width=l.x+l.width-n.x)}}return s&&this.hide(),n},K[h].attr=function(s,n){if(this.removed)return this;if(s==null){var o={};for(var c in this.attrs)this.attrs[p](c)&&(o[c]=this.attrs[c]);return this._.rt.deg&&(o.rotation=this.rotate()),(this._.sx!=1||this._.sy!=1)&&(o.scale=this.scale()),o.gradient&&o.fill=="none"&&(o.fill=o.gradient)&&delete o.gradient,o}if(n==null&&i.is(s,At))return s=="translation"?te.call(this):s=="rotation"?this.rotate():s=="scale"?this.scale():s==yt&&this.attrs.fill=="none"&&this.attrs.gradient?this.attrs.gradient:this.attrs[s];if(n==null&&i.is(s,ut)){for(var l={},d=0,f=s.length;d<f;d++)l[s[d]]=this.attr(s[d]);return l}if(n!=null){var u={};u[s]=n}else s!=null&&i.is(s,"object")&&(u=s);for(var _ in this.paper.customAttributes)if(this.paper.customAttributes[p](_)&&u[p](_)&&i.is(this.paper.customAttributes[_],"function")){var m=this.paper.customAttributes[_].apply(this,[][F](u[_]));this.attrs[_]=u[_];for(var T in m)m[p](T)&&(u[T]=m[T])}return Nt(this,u),this},K[h].toFront=function(){if(this.removed)return this;this.node.parentNode[v](this.node);var s=this.paper;return s.top!=this&&Ne(this,s),this},K[h].toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),Ae(this,this.paper),this.paper),this)},K[h].insertAfter=function(s){if(this.removed)return this;var n=s.node||s[s.length-1].node;return n.nextSibling?n.parentNode.insertBefore(this.node,n.nextSibling):n.parentNode[v](this.node),Ie(this,s,this.paper),this},K[h].insertBefore=function(s){if(this.removed)return this;var n=s.node||s[0].node;return n.parentNode.insertBefore(this.node,n),Re(this,s,this.paper),this},K[h].blur=function(s){var n=this;if(+s!=0){var o=D("filter"),c=D("feGaussianBlur");n.attrs.blur=s,o.id=Vt(),D(c,{stdDeviation:+s||1.5}),o.appendChild(c),n.paper.defs.appendChild(o),n._blur=o,D(n.node,{filter:"url(#"+o.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter")};var we=function(s,n,o,c){var l=D("circle");s.canvas&&s.canvas[v](l);var d=new K(l,s);return d.attrs={cx:n,cy:o,r:c,fill:"none",stroke:"#000"},d.type="circle",D(l,d.attrs),d},Me=function(s,n,o,c,l,d){var f=D("rect");s.canvas&&s.canvas[v](f);var u=new K(f,s);return u.attrs={x:n,y:o,width:c,height:l,r:d||0,rx:d||0,ry:d||0,fill:"none",stroke:"#000"},u.type="rect",D(f,u.attrs),u},Fe=function(s,n,o,c,l){var d=D("ellipse");s.canvas&&s.canvas[v](d);var f=new K(d,s);return f.attrs={cx:n,cy:o,rx:c,ry:l,fill:"none",stroke:"#000"},f.type="ellipse",D(d,f.attrs),f},Be=function(s,n,o,c,l,d,f="none"){var u=D("image");D(u,{x:o,y:c,width:l,height:d,preserveAspectRatio:f}),u.setAttributeNS(s.xlink,"href",n),s.canvas&&s.canvas[v](u);var _=new K(u,s);return _.attrs={x:o,y:c,width:l,height:d,src:n},_.type="image",_},Ce=function(s,n,o,c){var l=D("text");D(l,{x:n,y:o,"text-anchor":"middle"}),s.canvas&&s.canvas[v](l);var d=new K(l,s);return d.attrs={x:n,y:o,"text-anchor":"middle",text:c,font:Wt.font,stroke:"none",fill:"#000"},d.type="text",Nt(d,d.attrs),d},De=function(s,n){return this.width=s||this.width,this.height=n||this.height,this.canvas[ft]("width",this.width),this.canvas[ft]("height",this.height),this},ce=function(){var s=Oe[U](0,arguments),n=s&&s.container,o=s.x,c=s.y,l=s.width,d=s.height;if(!n)throw new Error("SVG container not found.");var f=D("svg");return o=o||0,c=c||0,l=l||512,d=d||342,D(f,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:l,height:d}),n==1?(f.style.cssText="position:absolute;left:"+o+"px;top:"+c+"px",E.body[v](f)):n.firstChild?n.insertBefore(f,n.firstChild):n[v](f),n=new w,n.width=l,n.height=d,n.canvas=f,oe.call(n,n,i.fn),n.clear(),n};S.clear=function(){for(var s=this.canvas;s.firstChild;)s.removeChild(s.firstChild);this.bottom=this.top=null,(this.desc=D("desc"))[v](E.createTextNode("Created with Raphaël")),s[v](this.desc),s[v](this.defs=D("defs"))},S.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var s in this)this[s]=Le(s)}}if(i.vml){let s=function(n,o,c,l,d){return d?i.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",n+d,o,c-d*2,d,-d,l-d*2,d*2-c,d*2-l):i.format("M{0},{1}l{2},0,0,{3},{4},0z",n,o,c,l,-c)};var Ge={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},fi=/([clmz]),?([^clmz]*)/gi,_i=/ progid:\S+Blur\([^\)]+\)/g,pi=/-?[^,\s-]+/g,Yt=1e3+W+1e3,wt=10,Ht={path:1,rect:1},mi=function(n){var o=/[ahqstv]/ig,c=Gt;if(H(n).match(o)&&(c=Zt),o=/[clmz]/g,c==Gt&&!H(n).match(o)){var l=H(n)[at](fi,function(A,R,N){var y=[],x=Et.call(R)=="m",C=Ge[R];return N[at](pi,function(B){x&&y[b]==2&&(C+=y+Ge[R=="m"?"l":"L"],y=[]),y[J](st(B*wt))}),C+y});return l}var d=c(n),f,u;l=[];for(var _=0,m=d[b];_<m;_++){f=d[_],u=Et.call(d[_][0]),u=="z"&&(u="x");for(var T=1,I=f[b];T<I;T++)u+=st(f[T]*wt)+(T!=I-1?",":M);l[J](u)}return l[tt](W)};i[Tt]=function(){return`Your browser doesn’t support SVG. Falling down to VML.
You are running Raphaël `+this.version},be=function(n,o){var c=ot("group");c.style.cssText="position:absolute;left:0;top:0;width:"+o.width+"px;height:"+o.height+"px",c.coordsize=o.coordsize,c.coordorigin=o.coordorigin;var l=ot("shape"),d=l.style;d.width=o.width+"px",d.height=o.height+"px",l.coordsize=Yt,l.coordorigin=o.coordorigin,c[v](l);var f=new K(l,c,o),u={fill:"none",stroke:"#000"};return n&&(u.path=n),f.type="path",f.path=[],f.Path=M,Nt(f,u),o.canvas[v](c),f},Nt=function(n,o){n.attrs=n.attrs||{};var c=n.node,l=n.attrs,d=c.style,f,u=(o.x!=l.x||o.y!=l.y||o.width!=l.width||o.height!=l.height||o.r!=l.r)&&n.type=="rect",_=n;for(var m in o)o[p](m)&&(l[m]=o[m]);if(u&&(l.path=s(l.x,l.y,l.width,l.height,l.r),n.X=l.x,n.Y=l.y,n.W=l.width,n.H=l.height),o.href&&(c.href=o.href),o.title&&(c.title=o.title),o.target&&(c.target=o.target),o.cursor&&(d.cursor=o.cursor),"blur"in o&&n.blur(o.blur),(o.path&&n.type=="path"||u)&&(c.path=mi(l.path)),o.rotation!=null&&n.rotate(o.rotation,!0),o.translation&&(f=H(o.translation)[Z](t),te.call(n,f[0],f[1]),n._.rt.cx!=null&&(n._.rt.cx+=+f[0],n._.rt.cy+=+f[1],n.setBox(n.attrs,f[0],f[1]))),o.scale&&(f=H(o.scale)[Z](t),n.scale(+f[0]||1,+f[1]||+f[0]||1,+f[2]||null,+f[3]||null)),"clip-rect"in o){var T=H(o["clip-rect"])[Z](t);if(T[b]==4){T[2]=+T[2]+ +T[0],T[3]=+T[3]+ +T[1];var I=c.clipRect||E.createElement("div"),A=I.style,R=c.parentNode;A.clip=i.format("rect({1}px {2}px {3}px {0}px)",T),c.clipRect||(A.position="absolute",A.top=0,A.left=0,A.width=n.paper.width+"px",A.height=n.paper.height+"px",R.parentNode.insertBefore(I,R),I[v](R),c.clipRect=I)}o["clip-rect"]||c.clipRect&&(c.clipRect.style.clip=M)}if(n.type=="image"&&o.src&&(c.src=o.src),n.type=="image"&&o.opacity&&(c.filterOpacity=ie+".Alpha(opacity="+o.opacity*100+")",d.filter=(c.filterMatrix||M)+(c.filterOpacity||M)),o.font&&(d.font=o.font),o["font-family"]&&(d.fontFamily='"'+o["font-family"][Z](",")[0][at](/^['"]+|['"]+$/g,M)+'"'),o["font-size"]&&(d.fontSize=o["font-size"]),o["font-weight"]&&(d.fontWeight=o["font-weight"]),o["font-style"]&&(d.fontStyle=o["font-style"]),o.opacity!=null||o["stroke-width"]!=null||o.fill!=null||o.stroke!=null||o["stroke-width"]!=null||o["stroke-opacity"]!=null||o["fill-opacity"]!=null||o["stroke-dasharray"]!=null||o["stroke-miterlimit"]!=null||o["stroke-linejoin"]!=null||o["stroke-linecap"]!=null){c=n.shape||c;var N=c.getElementsByTagName(yt)&&c.getElementsByTagName(yt)[0],y=!1;if(!N&&(y=N=ot(yt)),"fill-opacity"in o||"opacity"in o){var x=((+l["fill-opacity"]+1||2)-1)*((+l.opacity+1||2)-1)*((+i.getRGB(o.fill).o+1||2)-1);x=gt(it(x,0),1),N.opacity=x}if(o.fill&&(N.on=!0),(N.on==null||o.fill=="none")&&(N.on=!1),N.on&&o.fill){var C=o.fill.match(Ee);C?(N.src=C[1],N.type="tile"):(N.color=i.getRGB(o.fill).hex,N.src=M,N.type="solid",i.getRGB(o.fill).error&&(_.type in{circle:1,ellipse:1}||H(o.fill).charAt()!="r")&&kt(_,o.fill)&&(l.fill="none",l.gradient=o.fill))}y&&c[v](N);var B=c.getElementsByTagName("stroke")&&c.getElementsByTagName("stroke")[0],Y=!1;!B&&(Y=B=ot("stroke")),(o.stroke&&o.stroke!="none"||o["stroke-width"]||o["stroke-opacity"]!=null||o["stroke-dasharray"]||o["stroke-miterlimit"]||o["stroke-linejoin"]||o["stroke-linecap"])&&(B.on=!0),(o.stroke=="none"||B.on==null||o.stroke==0||o["stroke-width"]==0)&&(B.on=!1);var G=i.getRGB(o.stroke);B.on&&o.stroke&&(B.color=G.hex),x=((+l["stroke-opacity"]+1||2)-1)*((+l.opacity+1||2)-1)*((+G.o+1||2)-1);var q=(V(o["stroke-width"])||1)*.75;if(x=gt(it(x,0),1),o["stroke-width"]==null&&(q=l["stroke-width"]),o["stroke-width"]&&(B.weight=q),q&&q<1&&(x*=q)&&(B.weight=1),B.opacity=x,o["stroke-linejoin"]&&(B.joinstyle=o["stroke-linejoin"]||"miter"),B.miterlimit=o["stroke-miterlimit"]||8,o["stroke-linecap"]&&(B.endcap=o["stroke-linecap"]=="butt"?"flat":o["stroke-linecap"]=="square"?"square":"round"),o["stroke-dasharray"]){var Q={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};B.dashstyle=Q[p](o["stroke-dasharray"])?Q[o["stroke-dasharray"]]:M}Y&&c[v](B)}if(_.type=="text")switch(d=_.paper.span.style,l.font&&(d.font=l.font),l["font-family"]&&(d.fontFamily=l["font-family"]),l["font-size"]&&(d.fontSize=l["font-size"]),l["font-weight"]&&(d.fontWeight=l["font-weight"]),l["font-style"]&&(d.fontStyle=l["font-style"]),_.node.string&&(_.paper.span.innerHTML=H(_.node.string)[at](/</g,"&#60;")[at](/&/g,"&#38;")[at](/\n/g,"<br>")),_.W=l.w=_.paper.span.offsetWidth,_.H=l.h=_.paper.span.offsetHeight,_.X=l.x,_.Y=l.y+st(_.H/2),l["text-anchor"]){case"start":_.node.style["v-text-align"]="left",_.bbx=st(_.W/2);break;case"end":_.node.style["v-text-align"]="right",_.bbx=-st(_.W/2);break;default:_.node.style["v-text-align"]="center";break}},kt=function(n,o){n.attrs=n.attrs||{},n.attrs;var c,l="linear",d=".5 .5";if(n.attrs.gradient=o,o=H(o)[at](Te,function(I,A,R){return l="radial",A&&R&&(A=V(A),R=V(R),z(A-.5,2)+z(R-.5,2)>.25&&(R=P.sqrt(.25-z(A-.5,2))*((R>.5)*2-1)+.5),d=A+W+R),M}),o=o[Z](/\s*\-\s*/),l=="linear"){var f=o.shift();if(f=-V(f),isNaN(f))return null}var u=ve(o);if(!u)return null;if(n=n.shape||n.node,c=n.getElementsByTagName(yt)[0]||ot(yt),!c.parentNode&&n.appendChild(c),u[b]){c.on=!0,c.method="none",c.color=u[0].color,c.color2=u[u[b]-1].color;for(var _=[],m=0,T=u[b];m<T;m++)u[m].offset&&_[J](u[m].offset+W+u[m].color);c.colors&&(c.colors.value=_[b]?_[tt]():"0% "+c.color),l=="radial"?(c.type="gradientradial",c.focus="100%",c.focussize=d,c.focusposition=d):(c.type="gradient",c.angle=(270-f)%360)}return 1},K=function(n,o,c){this[0]=n,this.id=i._oid++,this.node=n,n.raphael=this,this.X=0,this.Y=0,this.attrs={},this.Group=o,this.paper=c,this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1},!c.bottom&&(c.bottom=this),this.prev=c.top,c.top&&(c.top.next=this),c.top=this,this.next=null},j=K[h],j.rotate=function(n,o,c){return this.removed?this:n==null?this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][tt](W):this._.rt.deg:(n=H(n)[Z](t),n[b]-1&&(o=V(n[1]),c=V(n[2])),n=V(n[0]),o!=null?this._.rt.deg=n:this._.rt.deg+=n,c==null&&(o=null),this._.rt.cx=o,this._.rt.cy=c,this.setBox(this.attrs,o,c),this.Group.style.rotation=this._.rt.deg,this)},j.setBox=function(n,o,c){if(this.removed)return this;var l=this.Group.style,d=this.shape&&this.shape.style||this.node.style;n=n||{};for(var f in n)n[p](f)&&(this.attrs[f]=n[f]);o=o||this._.rt.cx,c=c||this._.rt.cy;var u=this.attrs,_,m,T,I;switch(this.type){case"circle":_=u.cx-u.r,m=u.cy-u.r,T=I=u.r*2;break;case"ellipse":_=u.cx-u.rx,m=u.cy-u.ry,T=u.rx*2,I=u.ry*2;break;case"image":_=+u.x,m=+u.y,T=u.width||0,I=u.height||0;break;case"text":this.textpath.v=["m",st(u.x),", ",st(u.y-2),"l",st(u.x)+1,", ",st(u.y-2)][tt](M),_=u.x-st(this.W/2),m=u.y-this.H/2,T=this.W,I=this.H;break;case"rect":case"path":if(this.attrs.path){var A=jt(this.attrs.path);_=A.x,m=A.y,T=A.width,I=A.height}else _=0,m=0,T=this.paper.width,I=this.paper.height;break;default:_=0,m=0,T=this.paper.width,I=this.paper.height;break}o=o??_+T/2,c=c??m+I/2;var R=o-this.paper.width/2,N=c-this.paper.height/2,y;l.left!=(y=R+"px")&&(l.left=y),l.top!=(y=N+"px")&&(l.top=y),this.X=Ht[p](this.type)?-R:_,this.Y=Ht[p](this.type)?-N:m,this.W=T,this.H=I,Ht[p](this.type)?(d.left!=(y=-R*wt+"px")&&(d.left=y),d.top!=(y=-N*wt+"px")&&(d.top=y)):this.type=="text"?(d.left!=(y=-R+"px")&&(d.left=y),d.top!=(y=-N+"px")&&(d.top=y)):(l.width!=(y=this.paper.width+"px")&&(l.width=y),l.height!=(y=this.paper.height+"px")&&(l.height=y),d.left!=(y=_-R+"px")&&(d.left=y),d.top!=(y=m-N+"px")&&(d.top=y),d.width!=(y=T+"px")&&(d.width=y),d.height!=(y=I+"px")&&(d.height=y))},j.hide=function(){return!this.removed&&(this.Group.style.display="none"),this},j.show=function(){return!this.removed&&(this.Group.style.display="block"),this},j.getBBox=function(){return this.removed?this:Ht[p](this.type)?jt(this.attrs.path):{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}},j.remove=function(){if(!this.removed){Ut(this,this.paper),this.node.parentNode.removeChild(this.node),this.Group.parentNode.removeChild(this.Group),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var n in this)delete this[n];this.removed=!0}},j.attr=function(n,o){if(this.removed)return this;if(n==null){var c={};for(var l in this.attrs)this.attrs[p](l)&&(c[l]=this.attrs[l]);return this._.rt.deg&&(c.rotation=this.rotate()),(this._.sx!=1||this._.sy!=1)&&(c.scale=this.scale()),c.gradient&&c.fill=="none"&&(c.fill=c.gradient)&&delete c.gradient,c}if(o==null&&i.is(n,"string"))return n=="translation"?te.call(this):n=="rotation"?this.rotate():n=="scale"?this.scale():n==yt&&this.attrs.fill=="none"&&this.attrs.gradient?this.attrs.gradient:this.attrs[n];if(this.attrs&&o==null&&i.is(n,ut)){var d,f={};for(l=0,d=n[b];l<d;l++)f[n[l]]=this.attr(n[l]);return f}var u;if(o!=null&&(u={},u[n]=o),o==null&&i.is(n,"object")&&(u=n),u){for(var _ in this.paper.customAttributes)if(this.paper.customAttributes[p](_)&&u[p](_)&&i.is(this.paper.customAttributes[_],"function")){var m=this.paper.customAttributes[_].apply(this,[][F](u[_]));this.attrs[_]=u[_];for(var T in m)m[p](T)&&(u[T]=m[T])}u.text&&this.type=="text"&&(this.node.string=u.text),Nt(this,u),u.gradient&&({circle:1,ellipse:1}[p](this.type)||H(u.gradient).charAt()!="r")&&kt(this,u.gradient),(!Ht[p](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this},j.toFront=function(){return!this.removed&&this.Group.parentNode[v](this.Group),this.paper.top!=this&&Ne(this,this.paper),this},j.toBack=function(){return this.removed?this:(this.Group.parentNode.firstChild!=this.Group&&(this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild),Ae(this,this.paper)),this)},j.insertAfter=function(n){return this.removed?this:(n.constructor==dt&&(n=n[n.length-1]),n.Group.nextSibling?n.Group.parentNode.insertBefore(this.Group,n.Group.nextSibling):n.Group.parentNode[v](this.Group),Ie(this,n,this.paper),this)},j.insertBefore=function(n){return this.removed?this:(n.constructor==dt&&(n=n[0]),n.Group.parentNode.insertBefore(this.Group,n.Group),Re(this,n,this.paper),this)},j.blur=function(n){var o=this.node.runtimeStyle,c=o.filter;c=c.replace(_i,M),+n!=0?(this.attrs.blur=n,o.filter=c+W+ie+".Blur(pixelradius="+(+n||1.5)+")",o.margin=i.format("-{0}px 0 0 -{0}px",st(+n||1.5))):(o.filter=c,o.margin=0,delete this.attrs.blur)},we=function(n,o,c,l){var d=ot("group"),f=ot("oval");f.style,d.style.cssText="position:absolute;left:0;top:0;width:"+n.width+"px;height:"+n.height+"px",d.coordsize=Yt,d.coordorigin=n.coordorigin,d[v](f);var u=new K(f,d,n);return u.type="circle",Nt(u,{stroke:"#000",fill:"none"}),u.attrs.cx=o,u.attrs.cy=c,u.attrs.r=l,u.setBox({x:o-l,y:c-l,width:l*2,height:l*2}),n.canvas[v](d),u},Me=function(n,o,c,l,d,f){var u=s(o,c,l,d,f),_=n.path(u),m=_.attrs;return _.X=m.x=o,_.Y=m.y=c,_.W=m.width=l,_.H=m.height=d,m.r=f,m.path=u,_.type="rect",_},Fe=function(n,o,c,l,d){var f=ot("group"),u=ot("oval");u.style,f.style.cssText="position:absolute;left:0;top:0;width:"+n.width+"px;height:"+n.height+"px",f.coordsize=Yt,f.coordorigin=n.coordorigin,f[v](u);var _=new K(u,f,n);return _.type="ellipse",Nt(_,{stroke:"#000"}),_.attrs.cx=o,_.attrs.cy=c,_.attrs.rx=l,_.attrs.ry=d,_.setBox({x:o-l,y:c-d,width:l*2,height:d*2}),n.canvas[v](f),_},Be=function(n,o,c,l,d,f){var u=ot("group"),_=ot("image");u.style.cssText="position:absolute;left:0;top:0;width:"+n.width+"px;height:"+n.height+"px",u.coordsize=Yt,u.coordorigin=n.coordorigin,_.src=o,u[v](_);var m=new K(_,u,n);return m.type="image",m.attrs.src=o,m.attrs.x=c,m.attrs.y=l,m.attrs.w=d,m.attrs.h=f,m.setBox({x:c,y:l,width:d,height:f}),n.canvas[v](u),m},Ce=function(n,o,c,l){var d=ot("group"),f=ot("shape"),u=f.style,_=ot("path");_.style;var m=ot("textpath");d.style.cssText="position:absolute;left:0;top:0;width:"+n.width+"px;height:"+n.height+"px",d.coordsize=Yt,d.coordorigin=n.coordorigin,_.v=i.format("m{0},{1}l{2},{1}",st(o*10),st(c*10),st(o*10)+1),_.textpathok=!0,u.width=n.width,u.height=n.height,m.string=H(l),m.on=!0,f[v](m),f[v](_),d[v](f);var T=new K(m,d,n);return T.shape=f,T.textpath=_,T.type="text",T.attrs.text=l,T.attrs.x=o,T.attrs.y=c,T.attrs.w=1,T.attrs.h=1,Nt(T,{font:Wt.font,stroke:"none",fill:"#000"}),T.setBox(),n.canvas[v](d),T},De=function(n,o){var c=this.canvas.style;return n==+n&&(n+="px"),o==+o&&(o+="px"),c.width=n,c.height=o,c.clip="rect(0 "+n+" "+o+" 0)",this};var ot;E.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!E.namespaces.rvml&&E.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),ot=function(n){return E.createElement("<rvml:"+n+' class="rvml">')}}catch{ot=function(n){return E.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}ce=function(){var n=Oe[U](0,arguments),o=n.container,c=n.height,l=n.width,d=n.x,f=n.y;if(!o)throw new Error("VML container not found.");var u=new w,_=u.canvas=E.createElement("div"),m=_.style;return d=d||0,f=f||0,l=l||512,c=c||342,l==+l&&(l+="px"),c==+c&&(c+="px"),u.width=1e3,u.height=1e3,u.coordsize=wt*1e3+W+wt*1e3,u.coordorigin="0 0",u.span=E.createElement("span"),u.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",_[v](u.span),m.cssText=i.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",l,c),o==1?(E.body[v](_),m.left=d+"px",m.top=f+"px",m.position="absolute"):o.firstChild?o.insertBefore(_,o.firstChild):o[v](_),oe.call(u,u,i.fn),u},S.clear=function(){this.canvas.innerHTML=M,this.span=E.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas[v](this.span),this.bottom=this.top=null},S.remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var n in this)this[n]=Le(n);return!0}}var ke=navigator.userAgent.match(/Version\\x2f(.*?)\s/);navigator.vendor=="Apple Computer, Inc."&&(ke&&ke[1]<4||navigator.platform.slice(0,2)=="iP")?S.safari=function(){var s=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});O.setTimeout(function(){s.remove()})}:S.safari=function(){};for(var Ei=function(){this.returnValue=!1},Ti=function(){return this.originalEvent.preventDefault()},Si=function(){this.cancelBubble=!0},xi=function(){return this.originalEvent.stopPropagation()},yi=function(){{if(E.addEventListener)return function(s,n,o,c){var l=X&&Dt[n]?Dt[n]:n,d=function(f){if(X&&Dt[p](n)){for(var u=0,_=f.targetTouches&&f.targetTouches.length;u<_;u++)if(f.targetTouches[u].target==s){var m=f;f=f.targetTouches[u],f.originalEvent=m,f.preventDefault=Ti,f.stopPropagation=xi;break}}return o.call(c,f)};return s.addEventListener(l,d,!1),function(){return s.removeEventListener(l,d,!1),!0}};if(E.attachEvent)return function(s,n,o,c){var l=function(f){return f=f||O.event,f.preventDefault=f.preventDefault||Ei,f.stopPropagation=f.stopPropagation||Si,o.call(c,f)};s.attachEvent("on"+n,l);var d=function(){return s.detachEvent("on"+n,l),!0};return d}}}(),pt=[],le=function(s){for(var n=s.clientX,o=s.clientY,c=E.documentElement.scrollTop||E.body.scrollTop,l=E.documentElement.scrollLeft||E.body.scrollLeft,d,f=pt.length;f--;){if(d=pt[f],X){for(var u=s.touches.length,_;u--;)if(_=s.touches[u],_.identifier==d.el._drag.id){n=_.clientX,o=_.clientY,(s.originalEvent?s.originalEvent:s).preventDefault();break}}else s.preventDefault();n+=l,o+=c,d.move&&d.move.call(d.move_scope||d.el,n-d.el._drag.x,o-d.el._drag.y,n,o,s)}},ue=function(s){i.unmousemove(le).unmouseup(ue);for(var n=pt.length,o;n--;)o=pt[n],o.el._drag={},o.end&&o.end.call(o.end_scope||o.start_scope||o.move_scope||o.el,s);pt=[]},Ye=Bt[b];Ye--;)(function(s){i[s]=K[h][s]=function(n,o){return i.is(n,"function")&&(this.events=this.events||[],this.events.push({name:s,f:n,unbind:yi(this.shape||this.node||E,s,n,o||this)})),this},i["un"+s]=K[h]["un"+s]=function(n){for(var o=this.events,c=o[b];c--;)if(o[c].name==s&&o[c].f==n)return o[c].unbind(),o.splice(c,1),!o.length&&delete this.events,this;return this}})(Bt[Ye]);j.hover=function(s,n,o,c){return this.mouseover(s,o).mouseout(n,c||o)},j.unhover=function(s,n){return this.unmouseover(s).unmouseout(n)},j.drag=function(s,n,o,c,l,d){return this._drag={},this.mousedown(function(f){(f.originalEvent||f).preventDefault();var u=E.documentElement.scrollTop||E.body.scrollTop,_=E.documentElement.scrollLeft||E.body.scrollLeft;this._drag.x=f.clientX+_,this._drag.y=f.clientY+u,this._drag.id=f.identifier,n&&n.call(l||c||this,f.clientX+_,f.clientY+u,f),!pt.length&&i.mousemove(le).mouseup(ue),pt.push({el:this,move:s,end:o,move_scope:c,start_scope:l,end_scope:d})}),this},j.undrag=function(s,n,o){for(var c=pt.length;c--;)pt[c].el==this&&pt[c].move==s&&pt[c].end==o&&pt.splice(c++,1);!pt.length&&i.unmousemove(le).unmouseup(ue)},S.circle=function(s,n,o){return we(this,s||0,n||0,o||0)},S.rect=function(s,n,o,c,l){return Me(this,s||0,n||0,o||0,c||0,l||0)},S.ellipse=function(s,n,o,c){return Fe(this,s||0,n||0,o||0,c||0)},S.path=function(s){return s&&!i.is(s,At)&&!i.is(s[0],ut)&&(s+=M),be(i.format[U](i,arguments),this)},S.image=function(s,n,o,c,l,d){return Be(this,s||"about:blank",n||0,o||0,c||0,l||0,d)},S.text=function(s,n,o){return Ce(this,s||0,n||0,H(o))},S.set=function(s){return arguments[b]>1&&(s=Array[h].splice.call(arguments,0,arguments[b])),new dt(s)},S.setSize=De,S.top=S.bottom=null,S.raphael=i;function He(){return this.x+W+this.y}j.resetScale=function(){if(this.removed)return this;this._.sx=1,this._.sy=1,this.attrs.scale="1 1"},j.scale=function(s,n,o,c){if(this.removed)return this;if(s==null&&n==null)return{x:this._.sx,y:this._.sy,toString:He};n=n||s,!+n&&(n=s);var l,d,f=this.attrs;if(s!=0){var u=this.getBBox(),_=u.x+u.width/2,m=u.y+u.height/2,T=et(s/this._.sx),I=et(n/this._.sy);o=+o||o==0?o:_,c=+c||c==0?c:m;var A=this._.sx>0,R=this._.sy>0,N=~~(s/et(s)),y=~~(n/et(n)),x=T*N,C=I*y,B=this.node.style,Y=o+et(_-o)*x*(_>o==A?1:-1),G=c+et(m-c)*C*(m>c==R?1:-1),q=s*N>n*y?I:T;switch(this.type){case"rect":case"image":var Q=f.width*T,$=f.height*I;this.attr({height:$,r:f.r*q,width:Q,x:Y-Q/2,y:G-$/2});break;case"circle":case"ellipse":this.attr({rx:f.rx*T,ry:f.ry*I,r:f.r*q,cx:Y,cy:G});break;case"text":this.attr({x:Y,y:G});break;case"path":for(var k=re(f.path),ht=!0,rt=A?x:T,xt=R?C:I,Ot=0,It=k[b];Ot<It;Ot++){var ct=k[Ot],Mt=Xt.call(ct[0]);{if(Mt=="M"&&ht)continue;ht=!1}if(Mt=="A")ct[k[Ot][b]-2]*=rt,ct[k[Ot][b]-1]*=xt,ct[1]*=T,ct[2]*=I,ct[5]=+(N+y?!!+ct[5]:!+ct[5]);else if(Mt=="H")for(var _t=1,Rt=ct[b];_t<Rt;_t++)ct[_t]*=rt;else if(Mt=="V")for(_t=1,Rt=ct[b];_t<Rt;_t++)ct[_t]*=xt;else for(_t=1,Rt=ct[b];_t<Rt;_t++)ct[_t]*=_t%2?rt:xt}var bt=jt(k);l=Y-bt.x-bt.width/2,d=G-bt.y-bt.height/2,k[0][1]+=l,k[0][2]+=d,this.attr({path:k});break}this.type in{text:1,image:1}&&(N!=1||y!=1)?this.transformations?(this.transformations[2]="scale("[F](N,",",y,")"),this.node[ft]("transform",this.transformations[tt](W)),l=N==-1?-f.x-(Q||0):f.x,d=y==-1?-f.y-($||0):f.y,this.attr({x:l,y:d}),f.fx=N-1,f.fy=y-1):(this.node.filterMatrix=ie+".Matrix(M11="[F](N,", M12=0, M21=0, M22=",y,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')"),B.filter=(this.node.filterMatrix||M)+(this.node.filterOpacity||M)):this.transformations?(this.transformations[2]=M,this.node[ft]("transform",this.transformations[tt](W)),f.fx=0,f.fy=0):(this.node.filterMatrix=M,B.filter=(this.node.filterMatrix||M)+(this.node.filterOpacity||M)),f.scale=[s,n,o,c][tt](W),this._.sx=s,this._.sy=n}return this},j.clone=function(){if(this.removed)return null;var s=this.attr();return delete s.scale,delete s.translation,this.paper[this.type]().attr(s)};var de={},Jt=function(s,n,o,c,l,d,f,u,_){var m=0,T=100,I=[s,n,o,c,l,d,f,u].join(),A=de[I],R,N;if(!A&&(de[I]=A={data:[]}),A.timer&&clearTimeout(A.timer),A.timer=setTimeout(function(){delete de[I]},2e3),_!=null){var y=Jt(s,n,o,c,l,d,f,u);T=~~y*10}for(var x=0;x<T+1;x++){if(A.data[_]>x?N=A.data[x*T]:(N=i.findDotsAtSegment(s,n,o,c,l,d,f,u,x/T),A.data[x]=N),x&&(m+=z(z(R.x-N.x,2)+z(R.y-N.y,2),.5)),_!=null&&m>=_)return N;R=N}if(_==null)return m},ge=function(s,n){return function(o,c,l){o=Zt(o);for(var d,f,u,_,m="",T={},I,A=0,R=0,N=o.length;R<N;R++){if(u=o[R],u[0]=="M")d=+u[1],f=+u[2];else{if(_=Jt(d,f,u[1],u[2],u[3],u[4],u[5],u[6]),A+_>c){if(n&&!T.start){if(I=Jt(d,f,u[1],u[2],u[3],u[4],u[5],u[6],c-A),m+=["C",I.start.x,I.start.y,I.m.x,I.m.y,I.x,I.y],l)return m;T.start=m,m=["M",I.x,I.y+"C",I.n.x,I.n.y,I.end.x,I.end.y,u[5],u[6]][tt](),A+=_,d=+u[5],f=+u[6];continue}if(!s&&!n)return I=Jt(d,f,u[1],u[2],u[3],u[4],u[5],u[6],c-A),{x:I.x,y:I.y,alpha:I.alpha}}A+=_,d=+u[5],f=+u[6]}m+=u}return T.end=m,I=s?A:n?T:i.findDotsAtSegment(d,f,u[1],u[2],u[3],u[4],u[5],u[6],1),I.alpha&&(I={x:I.x,y:I.y,alpha:I.alpha}),I}},Xe=ge(1),$t=ge(),fe=ge(0,1);j.getTotalLength=function(){if(this.type=="path")return this.node.getTotalLength?this.node.getTotalLength():Xe(this.attrs.path)},j.getPointAtLength=function(s){if(this.type=="path")return $t(this.attrs.path,s)},j.getSubpath=function(s,n){if(this.type=="path"){if(et(this.getTotalLength()-n)<"1e-6")return fe(this.attrs.path,s).end;var o=fe(this.attrs.path,n,1);return s?fe(o,s).end:o}},i.easing_formulas={linear:function(s){return s},"<":function(s){return z(s,3)},">":function(s){return z(s-1,3)+1},"<>":function(s){return s=s*2,s<1?z(s,3)/2:(s-=2,(z(s,3)+2)/2)},backIn:function(s){var n=1.70158;return s*s*((n+1)*s-n)},backOut:function(s){s=s-1;var n=1.70158;return s*s*((n+1)*s+n)+1},elastic:function(s){if(s==0||s==1)return s;var n=.3,o=n/4;return z(2,-10*s)*P.sin((s-o)*(2*lt)/n)+1},bounce:function(s){var n=7.5625,o=2.75,c;return s<1/o?c=n*s*s:s<2/o?(s-=1.5/o,c=n*s*s+.75):s<2.5/o?(s-=2.25/o,c=n*s*s+.9375):(s-=2.625/o,c=n*s*s+.984375),c}};var mt=[],We=function(){for(var s=+new Date,n=0;n<mt[b];n++){var o=mt[n];if(!(o.stop||o.el.removed)){var c=s-o.start,l=o.ms,d=o.easing,f=o.from,u=o.diff,_=o.to,m=o.t,T=o.el,I={},A;if(c<l){var R=d(c/l);for(var N in f)if(f[p](N)){switch(ne[N]){case"along":A=R*l*u[N],_.back&&(A=_.len-A);var y=$t(_[N],A);T.translate(u.sx-u.x||0,u.sy-u.y||0),u.x=y.x,u.y=y.y,T.translate(y.x-u.sx,y.y-u.sy),_.rot&&T.rotate(u.r+y.alpha,y.x,y.y);break;case nt:A=+f[N]+R*l*u[N];break;case"colour":A="rgb("+[_e(st(f[N].r+R*l*u[N].r)),_e(st(f[N].g+R*l*u[N].g)),_e(st(f[N].b+R*l*u[N].b))][tt](",")+")";break;case"path":A=[];for(var x=0,C=f[N][b];x<C;x++){A[x]=[f[N][x][0]];for(var B=1,Y=f[N][x][b];B<Y;B++)A[x][B]=+f[N][x][B]+R*l*u[N][x][B];A[x]=A[x][tt](W)}A=A[tt](W);break;case"csv":switch(N){case"translation":var G=R*l*u[N][0]-m.x,q=R*l*u[N][1]-m.y;m.x+=G,m.y+=q,A=G+W+q;break;case"rotation":A=+f[N][0]+R*l*u[N][0],f[N][1]&&(A+=","+f[N][1]+","+f[N][2]);break;case"scale":A=[+f[N][0]+R*l*u[N][0],+f[N][1]+R*l*u[N][1],2 in _[N]?_[N][2]:M,3 in _[N]?_[N][3]:M][tt](W);break;case"clip-rect":for(A=[],x=4;x--;)A[x]=+f[N][x]+R*l*u[N][x];break}break;default:var Q=[].concat(f[N]);for(A=[],x=T.paper.customAttributes[N].length;x--;)A[x]=+Q[x]+R*l*u[N][x];break}I[N]=A}T.attr(I),T._run&&T._run.call(T)}else _.along&&(y=$t(_.along,_.len*!_.back),T.translate(u.sx-(u.x||0)+y.x-u.sx,u.sy-(u.y||0)+y.y-u.sy),_.rot&&T.rotate(u.r+y.alpha,y.x,y.y)),(m.x||m.y)&&T.translate(-m.x,-m.y),_.scale&&(_.scale+=M),T.attr(_),mt.splice(n--,1)}}i.svg&&T&&T.paper&&T.paper.safari(),mt[b]&&setTimeout(We)},vi=function(s,n,o,c,l){var d=o-c;n.timeouts.push(setTimeout(function(){i.is(l,"function")&&l.call(n),n.animate(s,d,s.easing)},c))},_e=function(s){return it(gt(s,255),0)},te=function(s,n){if(s==null)return{x:this._.tx,y:this._.ty,toString:He};switch(this._.tx+=+s,this._.ty+=+n,this.type){case"circle":case"ellipse":this.attr({cx:+s+this.attrs.cx,cy:+n+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+s+this.attrs.x,y:+n+this.attrs.y});break;case"path":var o=re(this.attrs.path);o[0][1]+=+s,o[0][2]+=+n,this.attr({path:o});break}return this};j.animateWith=function(s,n,o,c,l){for(var d=0,f=mt.length;d<f;d++)mt[d].el.id==s.id&&(n.start=mt[d].start);return this.animate(n,o,c,l)},j.animateAlong=ze(),j.animateAlongBack=ze(1);function ze(s){return function(n,o,c,l){var d={back:s};return i.is(c,"function")?l=c:d.rot=c,n&&n.constructor==K&&(n=n.attrs.path),n&&(d.along=n),this.animate(d,o,l)}}function Oi(s,n,o,c,l,d){var f=3*n,u=3*(c-n)-f,_=1-f-u,m=3*o,T=3*(l-o)-m,I=1-m-T;function A(y){return((_*y+u)*y+f)*y}function R(y,x){var C=N(y,x);return((I*C+T)*C+m)*C}function N(y,x){var C,B,Y,G,q,Q;for(Y=y,Q=0;Q<8;Q++){if(G=A(Y)-y,et(G)<x)return Y;if(q=(3*_*Y+2*u)*Y+f,et(q)<1e-6)break;Y=Y-G/q}if(C=0,B=1,Y=y,Y<C)return C;if(Y>B)return B;for(;C<B;){if(G=A(Y),et(G-y)<x)return Y;y>G?C=Y:B=Y,Y=(B-C)/2+C}return Y}return R(s,1/(200*d))}j.onAnimation=function(s){return this._run=s||0,this},j.animate=function(s,n,o,c){var l=this;if(l.timeouts=l.timeouts||[],(i.is(o,"function")||!o)&&(c=o||null),l.removed)return c&&c.call(l),l;var d={},f={},u=!1,_={};for(var m in s)if(s[p](m)&&(ne[p](m)||l.paper.customAttributes[p](m)))switch(u=!0,d[m]=l.attr(m),d[m]==null&&(d[m]=Wt[m]),f[m]=s[m],ne[m]){case"along":var T=Xe(s[m]),I=$t(s[m],T*!!s.back),A=l.getBBox();_[m]=T/n,_.tx=A.x,_.ty=A.y,_.sx=I.x,_.sy=I.y,f.rot=s.rot,f.back=s.back,f.len=T,s.rot&&(_.r=V(l.rotate())||0);break;case nt:_[m]=(f[m]-d[m])/n;break;case"colour":d[m]=i.getRGB(d[m]);var R=i.getRGB(f[m]);_[m]={r:(R.r-d[m].r)/n,g:(R.g-d[m].g)/n,b:(R.b-d[m].b)/n};break;case"path":var N=Zt(d[m],f[m]);d[m]=N[0];var y=N[1];_[m]=[];for(var x=0,C=d[m][b];x<C;x++){_[m][x]=[0];for(var B=1,Y=d[m][x][b];B<Y;B++)_[m][x][B]=(y[x][B]-d[m][x][B])/n}break;case"csv":var G=H(s[m])[Z](t),q=H(d[m])[Z](t);switch(m){case"translation":d[m]=[0,0],_[m]=[G[0]/n,G[1]/n];break;case"rotation":d[m]=q[1]==G[1]&&q[2]==G[2]?q:[0,G[1],G[2]],_[m]=[(G[0]-d[m][0])/n,0,0];break;case"scale":s[m]=G,d[m]=H(d[m])[Z](t),_[m]=[(G[0]-d[m][0])/n,(G[1]-d[m][1])/n,0,0];break;case"clip-rect":for(d[m]=H(d[m])[Z](t),_[m]=[],x=4;x--;)_[m][x]=(G[x]-d[m][x])/n;break}f[m]=G;break;default:for(G=[].concat(s[m]),q=[].concat(d[m]),_[m]=[],x=l.paper.customAttributes[m][b];x--;)_[m][x]=((G[x]||0)-(q[x]||0))/n;break}if(u){var Q=i.easing_formulas[o];if(!Q)if(Q=H(o).match(ni),Q&&Q[b]==5){var $=Q;Q=function(xt){return Oi(xt,+$[1],+$[2],+$[3],+$[4],n)}}else Q=function(xt){return xt};mt.push({start:s.start||+new Date,ms:n,easing:Q,from:d,diff:_,to:f,el:l,t:{x:0,y:0}}),i.is(c,"function")&&(l._ac=setTimeout(function(){c.call(l)},n)),mt[b]==1&&setTimeout(We)}else{var k=[],ht;for(var rt in s)s[p](rt)&&si.test(rt)&&(m={value:s[rt]},rt=="from"&&(rt=0),rt=="to"&&(rt=100),m.key=vt(rt,10),k.push(m));for(k.sort(ci),k[0].key&&k.unshift({key:0,value:l.attrs}),x=0,C=k[b];x<C;x++)vi(k[x].value,l,n/100*k[x].key,n/100*(k[x-1]&&k[x-1].key||0),k[x-1]&&k[x-1].value.callback);ht=k[k[b]-1].value.callback,ht&&l.timeouts.push(setTimeout(function(){ht.call(l)},n))}return this},j.stop=function(){for(var s=0;s<mt.length;s++)mt[s].el.id==this.id&&mt.splice(s--,1);for(s=0,ii=this.timeouts&&this.timeouts.length;s<ii;s++)clearTimeout(this.timeouts[s]);return this.timeouts=[],clearTimeout(this._ac),delete this._ac,this},j.translate=function(s,n){return this.attr({translation:s+" "+n})},j[Tt]=function(){return"Raphaël’s object"},i.ae=mt;var dt=function(s){if(this.items=[],this[b]=0,this.type="set",s)for(var n=0,o=s[b];n<o;n++)s[n]&&(s[n].constructor==K||s[n].constructor==dt)&&(this[this.items[b]]=this.items[this.items[b]]=s[n],this[b]++)};dt[h][J]=function(){for(var s,n,o=0,c=arguments[b];o<c;o++)s=arguments[o],s&&(s.constructor==K||s.constructor==dt)&&(n=this.items[b],this[n]=this.items[n]=s,this[b]++);return this},dt[h].pop=function(){return delete this[this[b]--],this.items.pop()};for(var pe in j)j[p](pe)&&(dt[h][pe]=function(s){return function(){for(var n=0,o=this.items[b];n<o;n++)this.items[n][s][U](this.items[n],arguments);return this}}(pe));dt[h].attr=function(s,n){if(s&&i.is(s,ut)&&i.is(s[0],"object"))for(var o=0,c=s[b];o<c;o++)this.items[o].attr(s[o]);else for(var l=0,d=this.items[b];l<d;l++)this.items[l].attr(s,n);return this},dt[h].animate=function(s,n,o,c){(i.is(o,"function")||!o)&&(c=o||null);var l=this.items[b],d=l,f,u=this,_;for(c&&(_=function(){!--l&&c.call(u)}),o=i.is(o,At)?o:_,f=this.items[--d].animate(s,n,o,_);d--;)this.items[d]&&!this.items[d].removed&&this.items[d].animateWith(f,s,n,o,_);return this},dt[h].insertAfter=function(s){for(var n=this.items[b];n--;)this.items[n].insertAfter(s);return this},dt[h].getBBox=function(){for(var s=[],n=[],o=[],c=[],l=this.items[b];l--;){var d=this.items[l].getBBox();s[J](d.x),n[J](d.y),o[J](d.x+d.width),c[J](d.y+d.height)}return s=gt[U](0,s),n=gt[U](0,n),{x:s,y:n,width:it[U](0,o)-s,height:it[U](0,c)-n}},dt[h].clone=function(s){s=new dt;for(var n=0,o=this.items[b];n<o;n++)s[J](this.items[n].clone());return s},i.registerFont=function(s){if(!s.face)return s;this.fonts=this.fonts||{};var n={w:s.w,face:{},glyphs:{}},o=s.face["font-family"];for(var c in s.face)s.face[p](c)&&(n.face[c]=s.face[c]);if(this.fonts[o]?this.fonts[o][J](n):this.fonts[o]=[n],!s.svg){n.face["units-per-em"]=vt(s.face["units-per-em"],10);for(var l in s.glyphs)if(s.glyphs[p](l)){var d=s.glyphs[l];if(n.glyphs[l]={w:d.w,k:{},d:d.d&&"M"+d.d[at](/[mlcxtrv]/g,function(u){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[u]||"M"})+"z"},d.k)for(var f in d.k)d[p](f)&&(n.glyphs[l].k[f]=d.k[f])}}return s},S.getFont=function(s,n,o,c){if(c=c||"normal",o=o||"normal",n=+n||{normal:400,bold:700,lighter:300,bolder:800}[n]||400,!!i.fonts){var l=i.fonts[s];if(!l){var d=new RegExp("(^|\\s)"+s[at](/[^\w\d\s+!~.:_-]/g,M)+"(\\s|$)","i");for(var f in i.fonts)if(i.fonts[p](f)&&d.test(f)){l=i.fonts[f];break}}var u;if(l)for(var _=0,m=l[b];_<m&&(u=l[_],!(u.face["font-weight"]==n&&(u.face["font-style"]==o||!u.face["font-style"])&&u.face["font-stretch"]==c));_++);return u}},S.print=function(s,n,o,c,l,d,f){d=d||"middle",f=it(gt(f||0,1),-1);var u=this.set(),_=H(o)[Z](M),m=0,T;if(i.is(c,o)&&(c=this.getFont(c)),c){T=(l||16)/c.face["units-per-em"];for(var I=c.face.bbox.split(t),A=+I[0],R=+I[1]+(d=="baseline"?I[3]-I[1]+ +c.face.descent:(I[3]-I[1])/2),N=0,y=_[b];N<y;N++){var x=N&&c.glyphs[_[N-1]]||{},C=c.glyphs[_[N]];m+=N?(x.w||c.w)+(x.k&&x.k[_[N]]||0)+c.w*f:0,C&&C.d&&u[J](this.path(C.d).attr({fill:"#000",stroke:"none",translation:[m,0]}))}u.scale(T,T,A,R).translate(s-A,n-R)}return u},i.format=function(s,n){var o=i.is(n,ut)?[0][F](n):arguments;return s&&i.is(s,At)&&o[b]-1&&(s=s[at](r,function(c,l){return o[++l]==null?M:o[l]})),s||M},i.ninja=function(){return L.was?O.Raphael=L.is:window.Raphael=void 0,i},i.el=j,i.st=dt[h],L.was?O.Raphael=i:window.Raphael=i})();const FruitTypes={BOOM:"boom",FIRST:"first",SECOND:"second",THIRD:"third",FOURTH:"fourth",FIFTH:"fifth"},GameStates={PLAYING:"playing",OVER:"over"},InteractionModes={TOUCH:"touch",SLICE:"slice"},JuiceShapes={CIRCLE:"circle",SQUARE:"square",DIAMOND:"diamond",STAR:"star"},Layers={PRELOAD:"preload",DEFAULT:"default",FRUIT:"fruit",JUICE:"juice",MASK:"mask",LIGHT:"light",FLASH:"flash",KNIFE:"knife",START_SCREEN:"start-screen",RESULT_SCREEN:"result-screen",BRAND_INTRO:"brand-intro",BRAND_QUESTION:"brand-question"},Messages={CLICK:"click",SLICE:"slice",TOUCH:"touch",FRUIT_FALL_OFF:"fruit.fallOff",FRUIT_FALL_OUT_OF_VIEWER:"fruit.fallOutOfViewer",FRUIT_REMOVE:"fruit.remove",HOME_MENU:"home-menu",SCENE_SWITCH_SCENE:"scene.switchScene",GAME_OVER:"game.over",OVER_WHITE_LIGHT_SHOW:"overWhiteLight.show",SLICE_AT:"slice.at",TOUCH_AT:"touch.at",START_GAME:"start.game",VIBRATE:"vibrate",TOGGLE_SOUND:"toggle.sound"},Modes={SHOW:"show",HIDE:"hide"},Scenes={HOME_MENU:"home-menu",GAME_BODY:"game-body",GAME_OVER:"game-over",GAME_RESULT:"game-result",BRAND_INTRO:"brand-intro",BRAND_QUESTION:"brand-question"},SceneStates={READY:"ready",ENTERING:"entering",EXITING:"exiting"},SoundNames={BOOM:"boom",MENU:"menu",OVER:"over",SPLATTER:"splatter",START:"start",THROW:"throw"},StateKeys={CLICK_ENABLE:"click-enable",GAME_STATE:"game-state",SCENE_NAME:"scene-name",SCENE_STATE:"scene-state"},TextWeight={BOLD:"bold",NORMAL:"normal"},TextAnchor={MIDDLE:"middle",START:"start",END:"end"},MAX_VIEWPORT_HEIGHT=932,MAX_VIEWPORT_WIDTH=640,HORIZONTAL_BASE=393,VERTICAL_BASE=852,BASE_RESULT_CHARS_NUMBER=6,BACKGROUND_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/background.webp",BOTTOM_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/bottom.webp",BOTTOM_HEIGHT=139,BOTTOM_DURATION=1e3,BRAND_QUESTION_FILL="#fff",BRAND_QUESTION_ANIMATION_LENGTH=500,BRAND_ANSWER_BUTTON1_END_Y=531,BRAND_ANSWER_BUTTON1_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/green-button.webp",BRAND_ANSWER_BUTTON1_WIDTH=325,BRAND_ANSWER_BUTTON1_HEIGHT=90,BRAND_ANSWER_BUTTON1_X=42,BRAND_ANSWER_TEXT1_VALUE="Нет",BRAND_ANSWER_TEXT1_SIZE=30,BRAND_ANSWER_BUTTON2_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/green-button.webp",BRAND_ANSWER_BUTTON2_WIDTH=325,BRAND_ANSWER_BUTTON2_HEIGHT=90,BRAND_ANSWER_BUTTON2_X=42,BRAND_ANSWER_TEXT2_SIZE=30,BRAND_ANSWER_TEXT2_VALUE="Да",BRAND_INTRO_FILL="#fff",BRAND_INTRO_ANIMATION_LENGTH=500,BRAND_INTRO_TEXT_VALUE=`Ответь на вопрос
Программы, чтобы
получить приз`,BRAND_INTRO_TEXT_SIZE=26,BRAND_INTRO_TEXT_START_Y=-400,BRAND_INTRO_TEXT_END_Y=250,BRAND_INTRO_BUTTON_TEXT_VALUE="Ответить",BRAND_QUESTION_TEXT1_VALUE="",BRAND_QUESTION_TEXT1_SIZE=26,BRAND_QUESTION_TEXT1_Y=150,BRAND_QUESTION_TEXT2_VALUE=`Знаешь ли ты,
что табак для бренда
L&M собирается
с 4-х континентов?`,BRAND_QUESTION_TEXT2_SIZE=26,BRAND_QUESTION_TEXT2_Y=260,CONSOLE_X=16,CONSOLE_Y=0,FIRST_SAFE_FRUIT_NUMBER=10,FONT_FAMILY="lm",FLASH_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/flash.webp",FLASH_DURATION=100,FLASH_WIDTH=358,FLASH_HEIGHT=20,FPS_PREFIX="FPS: ",FPS_FILL="#fff",FPS_X=4,FPS_Y=10,INTERACTION_MODE=InteractionModes.SLICE,FRUIT_DROP_TIME={[InteractionModes.TOUCH]:2e3,[InteractionModes.SLICE]:1200},FRUIT_DROP_X_SCOPE=200,FRUIT_SHADOW_POS=50,FRUIT_SHADOW_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/shadow.webp",FRUIT_INFOS={[FruitTypes.BOOM]:{cutImages:[],fixAngle:-21,height:100,image:"https://pmi-static.alvs.tech/ninja/default/images/fruit/boom.webp",isReverse:!1,juiceColor:null,radius:50,width:100},[FruitTypes.FIRST]:{cutImages:["https://pmi-static.alvs.tech/ninja/default/images/fruit/mango-1.webp","https://pmi-static.alvs.tech/ninja/default/images/fruit/mango-2.webp"],fixAngle:-50,height:100,image:"https://pmi-static.alvs.tech/ninja/default/images/fruit/mango.webp",isReverse:!1,juiceColor:"#e6c731",radius:50,width:100},[FruitTypes.SECOND]:{cutImages:["https://pmi-static.alvs.tech/ninja/default/images/fruit/watermelon-1.webp","https://pmi-static.alvs.tech/ninja/default/images/fruit/watermelon-2.webp"],fixAngle:-100,height:100,image:"https://pmi-static.alvs.tech/ninja/default/images/fruit/watermelon.webp",isReverse:!1,juiceColor:"#c00",radius:50,width:100},[FruitTypes.THIRD]:{cutImages:["https://pmi-static.alvs.tech/ninja/default/images/fruit/apple-1.webp","https://pmi-static.alvs.tech/ninja/default/images/fruit/apple-2.webp"],fixAngle:-54,height:100,image:"https://pmi-static.alvs.tech/ninja/default/images/fruit/apple.webp",isReverse:!1,juiceColor:"#c8e925",radius:50,width:100},[FruitTypes.FOURTH]:{cutImages:["https://pmi-static.alvs.tech/ninja/default/images/fruit/melon-1.webp","https://pmi-static.alvs.tech/ninja/default/images/fruit/melon-2.webp"],fixAngle:90,height:100,image:"https://pmi-static.alvs.tech/ninja/default/images/fruit/melon.webp",isReverse:!1,juiceColor:"#e6c731",radius:50,width:100},[FruitTypes.FIFTH]:{cutImages:["https://pmi-static.alvs.tech/ninja/default/images/fruit/raspberry-1.webp","https://pmi-static.alvs.tech/ninja/default/images/fruit/raspberry-2.webp"],fixAngle:-135,height:100,image:"https://pmi-static.alvs.tech/ninja/default/images/fruit/raspberry.webp",isReverse:!1,juiceColor:"#c00",radius:50,width:100}},GAME_OVER_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/game-over.webp",GAME_OVER_HEIGHT=145,GAME_OVER_WIDTH=250,HOME_LOGO_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/logo.webp",HOME_LOGO_WIDTH=335,HOME_LOGO_HEIGHT=200,HOME_LOGO_ORIG_X=38,HOME_LOGO_TARGET_Y=41,HOME_LOGO_DURATION=1e3,HOME_MASK_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/blank.png",HOME_MASK_DURATION=1e3,HOME_TEXT1_VALUE=`Тропическое путешествие
в самом разгаре!`,HOME_TEXT_FILL="#fff",HOME_TEXT1_SIZE=22,HOME_TEXT2_VALUE=`Разрежь как можно больше
экзотических фруктов!`,HOME_TEXT2_SIZE=22,HOME_TEXT3_VALUE=`Осторожно:
избегай игрушечную
снежинку!`,HOME_TEXT3_SIZE=22,HOME_TEXT_ANIM_LENGTH=500,JUICE_DURATION=1500,JUICE_RADIUS=15,JUICE_NUMBER=10,KNIFE_PART_COLOR="#cbd3db",KNIFE_PART_STROKE=10,KNIFE_PART_LIFE=200,LIGHTS_NUMBER=10,LIGHTS_FILL="#fff",LIGHTS_APPEARANCE_TIME=120,LIGHTS_MASK_APPEARANCE_TIME=1e3,LOSE_NUMBER=3,LOSE_ANIMATION_LENGTH=500,LOSE_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/x.webp",LOSE_F_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/xf.webp",LOSE_WIDTH=45.2,LOSE_HEIGHT=37.6,RESULT_BUTTON_ANIMATION_LENGTH=500,RESULT_BUTTON_NEXT_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/green-button.webp",RESULT_BUTTON_ORIG_X=42,RESULT_BUTTON_NEXT_TARGET_Y=360,RESULT_BUTTON_NEXT_WIDTH=325,RESULT_BUTTON_HEIGHT=90,RESULT_BUTTON_NEXT_TEXT_VALUE="Далее",RESULT_BUTTON_NEXT_TEXT_FILL="#fff",RESULT_BUTTON_NEXT_TEXT_SIZE=30,RESULT_BUTTON_REPLAY_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/green-button.webp",RESULT_BUTTON_REPLAY_WIDTH=325,RESULT_BUTTON_REPLAY_TEXT_VALUE="Начать заново",RESULT_BUTTON_REPLAY_TEXT_FILL="#fff",RESULT_BUTTON_REPLAY_TEXT_SIZE=30,RESULT_LOGO_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/logo.webp",RESULT_LOGO_WIDTH=244,RESULT_LOGO_HEIGHT=147,RESULT_LOGO_ORIG_X=81,RESULT_LOGO_TARGET_Y=24,RESULT_LOGO_DURATION=1e3,RESULT_TEXT1_VALUE="",RESULT_TEXT1_FILL="#fff",RESULT_TEXT1_SIZE=17.8,RESULT_TEXT2_VALUE="Твой счёт:",RESULT_TEXT2_FILL="#fff",RESULT_TEXT2_SIZE=30,RESULT_TEXT3_VALUE="5432",RESULT_TEXT3_FILL="270-#FFFFFF-#BCDBF8",RESULT_TEXT4_VALUE=`Твой
рекорд`,RESULT_TEXT4_FILL="#fff",RESULT_TEXT4_SIZE=18,RESULT_TEXT5_VALUE="5,432",RESULT_TEXT5_FILL="270-#FFFFFF-#BCDBF8",RESULT_TEXT5_SIZE=44,RESULT_TEXT6_VALUE=`Общий
рекорд`,RESULT_TEXT6_FILL="#fff",RESULT_TEXT6_SIZE=18,RESULT_TEXT7_VALUE="10,000",RESULT_TEXT7_FILL="270-#FFFFFF-#BCDBF8",RESULT_TEXT7_SIZE=44,RESULT_TEXT_ANIM_LENGTH=500,SCORE_TEXT_FILL="#fff",SCORE_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/score.webp",SCORE_IMAGE_SX=-94,SCORE_IMAGE_EX=23,SCORE_IMAGE_Y=8,SCORE_IMAGE_W=40,SCORE_IMAGE_H=40,SCORE_TEXT1_SX=-59,SCORE_TEXT1_SIZE=45,SCORE_TEXT1_VALUE="0",SCORE_TEXT2_SX=-93,SCORE_TEXT2_Y=65,SCORE_TEXT2_PREFIX="Рекорд: ",SCORE_TEXT2_VALUE="999",SCORE_TEXT2_SIZE=16,SCORE_ANIM_LENGTH=500,SCORE_MULTIPLIER=50,SOUNDS={[SoundNames.BOOM]:"https://pmi-static.alvs.tech/ninja/default/sound/boom",[SoundNames.MENU]:"https://pmi-static.alvs.tech/ninja/default/sound/menu",[SoundNames.OVER]:"",[SoundNames.SPLATTER]:"https://pmi-static.alvs.tech/ninja/default/sound/splatter",[SoundNames.START]:"https://pmi-static.alvs.tech/ninja/default/sound/start",[SoundNames.THROW]:"https://pmi-static.alvs.tech/ninja/default/sound/throw"},SOUND_TEXT_SIZE=16,SOUND_BUTTON_TEXT_VALUE_ON="Вкл. звук",SOUND_BUTTON_TEXT_VALUE_OFF="Откл. звук",SOUND_BUTTON_TEXT_FILL="#fff",SOUND_BUTTON_IMAGE_ON="https://pmi-static.alvs.tech/ninja/default/images/sound-on.svg",SOUND_BUTTON_IMAGE_OFF="https://pmi-static.alvs.tech/ninja/default/images/sound-off.svg",SOUND_BUTTON_IMAGE_WIDTH=26,SOUND_BUTTON_IMAGE_HEIGHT=26,SOUND_BUTTON_IMAGE_HOME_END_Y=13,SOUND_BUTTON_ANIMATION_LENGTH=500,START_BUTTON_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/green-button.webp",START_BUTTON_ORIG_X=42,START_BUTTON_WIDTH=325,START_BUTTON_HEIGHT=90,START_BUTTON_ANIMATION_LENGTH=500,START_BUTTON_TEXT_VALUE="Начать",START_BUTTON_TEXT_FILL="#fff",START_BUTTON_TEXT_SIZE=30,viewportSize={viewportHeight:window.innerHeight,viewportWidth:window.innerWidth},adjustView=i=>{const t=window.innerHeight,e=window.innerWidth,r=MAX_VIEWPORT_WIDTH<e,h=MAX_VIEWPORT_HEIGHT<t,p=r?MAX_VIEWPORT_WIDTH+"px":"100%",E=h?MAX_VIEWPORT_HEIGHT+"px":"100%",O=r||h,L=O?"absolute":"static",w=O?"translate(-50%, -50%)":"none";i.style.position=L,i.style.width=p,i.style.height=E,i.style.transform=w;const{width:S,height:v}=i.getBoundingClientRect();viewportSize.viewportHeight=v,viewportSize.viewportWidth=S};function g(i){return i instanceof HTMLElement}function a(){}const calcSize=i=>{const{viewportWidth:t}=viewportSize;typeof i=="string"&&(i=Number(i));const e=t/HORIZONTAL_BASE;return i*e},calcVerticalSize=i=>{const{viewportHeight:t}=viewportSize;typeof i=="string"&&(i=Number(i));const e=t/VERTICAL_BASE;return i*e},calcResultFontSize=(i,t)=>{const e=calcSize(t),r=i.length,h=r>BASE_RESULT_CHARS_NUMBER?r:BASE_RESULT_CHARS_NUMBER;return e*BASE_RESULT_CHARS_NUMBER/h},convertBackgroundConfig=(i={})=>({height:viewportSize.viewportHeight,image:i.image||BACKGROUND_IMAGE,preserveAspectRatio:"xMidYMid slice",width:viewportSize.viewportWidth,x:0,y:0}),convertBottomConfig=(i={})=>{const t=calcSize(i.height||BOTTOM_HEIGHT);return{duration:BOTTOM_DURATION,endX:0,endY:viewportSize.viewportHeight-t,height:t,image:i.image||BOTTOM_IMAGE,startX:0,startY:viewportSize.viewportHeight,width:viewportSize.viewportWidth}},convertBrandAnswer1ButtonConfig=(i={})=>{const t=calcVerticalSize(i.buttonEndY||BRAND_ANSWER_BUTTON1_END_Y),e=calcSize(i.height||BRAND_ANSWER_BUTTON1_HEIGHT);return{animLength:BRAND_QUESTION_ANIMATION_LENGTH,buttonEndY:t,buttonStartY:viewportSize.viewportHeight,buttonX:calcSize(i.buttonX||BRAND_ANSWER_BUTTON1_X),height:e,image:i.image||BRAND_ANSWER_BUTTON1_IMAGE,textAnchor:i.textAnchor||TextAnchor.MIDDLE,textEndY:t-calcVerticalSize(6)+e/2,textFill:i.textFill||BRAND_QUESTION_FILL,textSize:calcVerticalSize(i.textSize||BRAND_ANSWER_TEXT1_SIZE)+"px",textStartY:viewportSize.viewportHeight+e,textValue:i.textValue||BRAND_ANSWER_TEXT1_VALUE,textWeight:i.textWeight||TextWeight.BOLD,textX:viewportSize.viewportWidth/2,width:calcSize(i.width||BRAND_ANSWER_BUTTON1_WIDTH)}},convertBrandAnswer2ButtonConfig=(i={},t)=>{const e=calcSize(i.height||BRAND_ANSWER_BUTTON2_HEIGHT),r=t.buttonEndY+e;return{animLength:BRAND_QUESTION_ANIMATION_LENGTH,buttonEndY:r,buttonStartY:viewportSize.viewportHeight,buttonX:calcSize(i.buttonX||BRAND_ANSWER_BUTTON2_X),height:e,image:i.image||BRAND_ANSWER_BUTTON2_IMAGE,textAnchor:i.textAnchor||TextAnchor.MIDDLE,textEndY:r-calcVerticalSize(6)+e/2,textFill:i.textFill||BRAND_QUESTION_FILL,textSize:calcVerticalSize(i.textSize||BRAND_ANSWER_TEXT2_SIZE)+"px",textStartY:viewportSize.viewportHeight+e,textValue:i.textValue||BRAND_ANSWER_TEXT2_VALUE,textWeight:i.textWeight||TextWeight.BOLD,textX:viewportSize.viewportWidth/2,width:calcSize(i.width||BRAND_ANSWER_BUTTON2_WIDTH)}},convertBrandIntroButtonConfig=(i={})=>{const t=calcVerticalSize(i.buttonEndY||BRAND_ANSWER_BUTTON1_END_Y),e=calcSize(i.height||BRAND_ANSWER_BUTTON1_HEIGHT);return{animLength:BRAND_QUESTION_ANIMATION_LENGTH,buttonEndY:t,buttonStartY:viewportSize.viewportHeight,buttonX:calcSize(i.buttonX||BRAND_ANSWER_BUTTON1_X),height:e,image:i.image||BRAND_ANSWER_BUTTON1_IMAGE,textAnchor:i.textAnchor||TextAnchor.MIDDLE,textEndY:t-calcVerticalSize(6)+e/2,textFill:i.textFill||BRAND_QUESTION_FILL,textSize:calcVerticalSize(i.textSize||BRAND_ANSWER_TEXT1_SIZE)+"px",textStartY:viewportSize.viewportHeight+e,textValue:i.textValue||BRAND_INTRO_BUTTON_TEXT_VALUE,textWeight:i.textWeight||TextWeight.BOLD,textX:viewportSize.viewportWidth/2,width:calcSize(i.width||BRAND_ANSWER_BUTTON1_WIDTH)}},convertBrandIntroConfig=(i={})=>({animLength:BRAND_INTRO_ANIMATION_LENGTH,textAnchor:i.textAnchor||TextAnchor.MIDDLE,textEndY:calcVerticalSize(i.textEndY||BRAND_INTRO_TEXT_END_Y),textFill:i.textFill||BRAND_INTRO_FILL,textSize:calcVerticalSize(i.textSize||BRAND_INTRO_TEXT_SIZE)+"px",textStartY:BRAND_INTRO_TEXT_START_Y,textValue:i.textValue||BRAND_INTRO_TEXT_VALUE,textWeight:i.textWeight||TextWeight.BOLD,textX:viewportSize.viewportWidth/2}),convertBrandQuestionText1=(i={})=>({animLength:BRAND_QUESTION_ANIMATION_LENGTH,textAnchor:i.textAnchor||TextAnchor.MIDDLE,textEndX:viewportSize.viewportWidth/2,textFill:i.textFill||BRAND_QUESTION_FILL,textSize:calcVerticalSize(i.textSize||BRAND_QUESTION_TEXT1_SIZE)+"px",textStartX:-viewportSize.viewportWidth,textValue:i.textValue||BRAND_QUESTION_TEXT1_VALUE,textWeight:i.textWeight||TextWeight.BOLD,textY:calcVerticalSize(i.textY||BRAND_QUESTION_TEXT1_Y)}),convertBrandQuestionText2=(i={})=>({animLength:BRAND_QUESTION_ANIMATION_LENGTH,textAnchor:i.textAnchor||TextAnchor.MIDDLE,textEndX:viewportSize.viewportWidth/2,textFill:i.textFill||BRAND_QUESTION_FILL,textSize:calcVerticalSize(i.textSize||BRAND_QUESTION_TEXT2_SIZE)+"px",textStartX:viewportSize.viewportWidth*2,textValue:i.textValue||BRAND_QUESTION_TEXT2_VALUE,textWeight:i.textWeight||TextWeight.BOLD,textY:calcVerticalSize(i.textY||BRAND_QUESTION_TEXT2_Y)}),convertConsoleConfig=()=>({x:CONSOLE_X,y:CONSOLE_Y}),convertFlashConfig=(i={})=>({duration:FLASH_DURATION,height:calcSize(FLASH_HEIGHT),image:i.image||FLASH_IMAGE,width:calcSize(FLASH_WIDTH)}),convertFPSConfig=()=>({fill:FPS_FILL,prefix:FPS_PREFIX,x:FPS_X,y:viewportSize.viewportWidth-FPS_Y}),convertFruitInfo=(i={},t)=>({cutImages:i.cutImages||t.cutImages,fixAngle:t.fixAngle,height:calcSize(i.height||t.height),image:i.image||t.image,isReverse:t.isReverse,juiceColor:i.juiceColor||t.juiceColor,radius:calcSize(i.radius||t.radius),width:calcSize(i.width||t.width)}),convertFruitsConfig=(i={},t)=>{const e=i.infos||FRUIT_INFOS;return{dropTime:FRUIT_DROP_TIME[t],dropXScope:FRUIT_DROP_X_SCOPE,shadowPos:FRUIT_SHADOW_POS,shadowImage:i.shadowImage||FRUIT_SHADOW_IMAGE,types:FruitTypes,infos:Object.keys(e).reduce((r,h)=>(r[h]=convertFruitInfo(e[h],FRUIT_INFOS[h]),r),{})}},convertGameOverConfig=(i={})=>{const t=calcSize(i.height||GAME_OVER_HEIGHT),e=calcSize(i.width||GAME_OVER_WIDTH);return{height:t,image:i.image||GAME_OVER_IMAGE,width:e,x:viewportSize.viewportWidth/2-e/2+calcSize(6),y:viewportSize.viewportHeight/2-t/2}},convertHomeLogoConfig=(i={})=>{const t=calcSize(i.startX||HOME_LOGO_ORIG_X),e=calcSize(i.height||HOME_LOGO_HEIGHT);return{duration:HOME_LOGO_DURATION,endX:t,endY:calcSize(i.endY||HOME_LOGO_TARGET_Y),height:e,image:i.image||HOME_LOGO_IMAGE,startX:t,startY:-e,width:calcSize(i.width||HOME_LOGO_WIDTH)}},convertHomeMaskConfig=()=>({duration:HOME_MASK_DURATION,endX:0,endY:0,height:183,image:HOME_MASK_IMAGE,startX:0,startY:-183,width:viewportSize.viewportWidth}),convertHomeTextConfig=(i={},t)=>({animLength:HOME_TEXT_ANIM_LENGTH,text1Anchor:i.text1Anchor||TextAnchor.MIDDLE,text1Ex:viewportSize.viewportWidth/2,text1Fill:i.text1Fill||HOME_TEXT_FILL,text1Size:calcVerticalSize(i.text1Size||HOME_TEXT1_SIZE)+"px",text1Sx:-viewportSize.viewportWidth,text1Value:i.text1Value||HOME_TEXT1_VALUE,text1Weight:i.text1Weight||TextWeight.BOLD,text1Y:i.text1Y?calcVerticalSize(i.text1Y):t.endY+t.height+calcVerticalSize(28),text2Anchor:i.text2Anchor||TextAnchor.MIDDLE,text2Ex:viewportSize.viewportWidth/2,text2Fill:i.text2Fill||HOME_TEXT_FILL,text2Size:calcVerticalSize(i.text2Size||HOME_TEXT2_SIZE)+"px",text2Sx:-viewportSize.viewportWidth,text2Value:i.text2Value||HOME_TEXT2_VALUE,text2Weight:i.text2Weight||TextWeight.BOLD,text2Y:i.text2Y?calcVerticalSize(i.text2Y):t.endY+t.height+calcVerticalSize(148),text3Anchor:i.text3Anchor||TextAnchor.MIDDLE,text3Ex:viewportSize.viewportWidth/2,text3Fill:i.text3Fill||HOME_TEXT_FILL,text3Size:calcVerticalSize(i.text3Size||HOME_TEXT3_SIZE)+"px",text3Sx:-viewportSize.viewportWidth,text3Value:i.text3Value||HOME_TEXT3_VALUE,text3Weight:i.text3Weight||TextWeight.BOLD,text3Y:i.text3Y?calcVerticalSize(i.text3Y):t.endY+t.height+calcVerticalSize(235)}),convertJuiceConfig=(i={})=>({duration:JUICE_DURATION,number:JUICE_NUMBER,radius:JUICE_RADIUS,shape:i.shape||JuiceShapes.DIAMOND,shapes:JuiceShapes}),convertKnifePartConfig=()=>({color:KNIFE_PART_COLOR,life:KNIFE_PART_LIFE,stroke:KNIFE_PART_STROKE}),convertLightsConfig=()=>({appearanceTime:LIGHTS_APPEARANCE_TIME,fill:LIGHTS_FILL,maskAppearanceTime:LIGHTS_MASK_APPEARANCE_TIME,number:LIGHTS_NUMBER}),convertLose=(i,t,e)=>{const r=calcSize(i.width||LOSE_WIDTH),h=viewportSize.viewportWidth-t.imageEx-r-e*r;return{ex:h,h:calcSize(i.height||LOSE_HEIGHT),src:i.emptyImage||LOSE_IMAGE,srcF:i.fullImage||LOSE_F_IMAGE,sx:h+200,w:r,y:t.imageY}},convertLoseConfig=(i={},t)=>{const e=[];for(let r=0;r<LOSE_NUMBER;r++)e.push(convertLose(i,t,r));return{animLength:LOSE_ANIMATION_LENGTH,conf:e}},convertScoreConfig=(i={})=>{const t=calcSize(i.imageEx||SCORE_IMAGE_EX),e=calcSize(i.imageH||SCORE_IMAGE_H),r=calcSize(i.imageW||SCORE_IMAGE_W),h=calcSize(i.imageY||SCORE_IMAGE_Y);return{animLength:SCORE_ANIM_LENGTH,image:i.image||SCORE_IMAGE,imageEx:t,imageH:e,imageSx:SCORE_IMAGE_SX,imageW:r,imageY:calcSize(i.imageY||SCORE_IMAGE_Y),text1Ex:t+r+calcSize(12),text1Fill:i.text1Fill||SCORE_TEXT_FILL,text1Size:calcVerticalSize(i.text1Size||SCORE_TEXT1_SIZE)+"px",text1Sx:SCORE_TEXT1_SX,text1Value:i.text1Value||SCORE_TEXT1_VALUE,text1Weight:i.text1Weight||TextWeight.BOLD,text1Y:h+e-calcSize(14),text2Ex:t,text2Fill:i.text2Fill||SCORE_TEXT_FILL,text2Prefix:i.text2Prefix||SCORE_TEXT2_PREFIX,text2Size:calcVerticalSize(i.text2Size||SCORE_TEXT2_SIZE)+"px",text2Sx:SCORE_TEXT2_SX,text2Value:i.text2Value||SCORE_TEXT2_VALUE,text2Weight:i.text2Weight||TextWeight.BOLD,text2Y:calcSize(i.text2Y||SCORE_TEXT2_Y)}},convertResultButtonNextConfig=(i={},t)=>{const e=calcSize(i.startX||RESULT_BUTTON_ORIG_X),r=t.endY+t.height+calcVerticalSize(i.endY||RESULT_BUTTON_NEXT_TARGET_Y),h=calcSize(i.height||RESULT_BUTTON_HEIGHT);return{animLength:RESULT_BUTTON_ANIMATION_LENGTH,endX:e,endY:r,height:h,image:i.image||RESULT_BUTTON_NEXT_IMAGE,startX:e,startY:viewportSize.viewportHeight,textAnchor:i.textAnchor||TextAnchor.MIDDLE,textEndX:e,textEndY:r-calcSize(8)+h/2,textFill:i.textFill||RESULT_BUTTON_NEXT_TEXT_FILL,textSize:calcSize(i.textSize||RESULT_BUTTON_NEXT_TEXT_SIZE)+"px",textStartX:viewportSize.viewportWidth/2,textStartY:viewportSize.viewportHeight+h,textValue:i.textValue||RESULT_BUTTON_NEXT_TEXT_VALUE,textWeight:i.textWeight||TextWeight.BOLD,width:calcSize(i.width||RESULT_BUTTON_NEXT_WIDTH)}},convertResultButtonReplayConfig=(i={},t)=>{const e=calcSize(i.startX||RESULT_BUTTON_ORIG_X),r=t.endY+t.height,h=calcSize(i.height||RESULT_BUTTON_HEIGHT);return{animLength:RESULT_BUTTON_ANIMATION_LENGTH,endX:e,endY:r,height:h,image:i.image||RESULT_BUTTON_REPLAY_IMAGE,startX:e,startY:viewportSize.viewportHeight,textAnchor:i.textAnchor||TextAnchor.MIDDLE,textEndX:e,textEndY:r-calcSize(8)+h/2,textFill:i.textFill||RESULT_BUTTON_REPLAY_TEXT_FILL,textSize:calcSize(i.textSize||RESULT_BUTTON_REPLAY_TEXT_SIZE)+"px",textStartX:viewportSize.viewportWidth/2,textStartY:viewportSize.viewportHeight+h,textValue:i.textValue||RESULT_BUTTON_REPLAY_TEXT_VALUE,textWeight:i.textWeight||TextWeight.BOLD,width:calcSize(i.width||RESULT_BUTTON_REPLAY_WIDTH)}},convertResultLogoConfig=(i={})=>{const t=calcSize(i.startX||RESULT_LOGO_ORIG_X),e=calcSize(i.height||RESULT_LOGO_HEIGHT);return{duration:RESULT_LOGO_DURATION,endX:t,endY:calcSize(i.endY||RESULT_LOGO_TARGET_Y),height:e,image:i.image||RESULT_LOGO_IMAGE,startX:t,startY:-e,width:calcSize(i.width||RESULT_LOGO_WIDTH)}},convertResultTextConfig=(i={},t)=>({animLength:RESULT_TEXT_ANIM_LENGTH,text1Anchor:i.text1Anchor||TextAnchor.MIDDLE,text1Ey:t.endY+t.height+calcVerticalSize(4),text1Fill:i.text1Fill||RESULT_TEXT1_FILL,text1Size:calcVerticalSize(i.text1Size||RESULT_TEXT1_SIZE)+"px",text1Sy:-200,text1Value:i.text1Value||RESULT_TEXT1_VALUE,text1Weight:i.text1Weight||TextWeight.BOLD,text1X:viewportSize.viewportWidth/2,text2Anchor:i.text2Anchor||TextAnchor.MIDDLE,text2Ey:t.endY+t.height+calcVerticalSize(60),text2Fill:i.text2Fill||RESULT_TEXT2_FILL,text2Size:calcVerticalSize(i.text2Size||RESULT_TEXT2_SIZE)+"px",text2Sy:-200,text2Value:i.text2Value||RESULT_TEXT2_VALUE,text2Weight:i.text2Weight||TextWeight.BOLD,text2X:viewportSize.viewportWidth/2,text3Anchor:i.text3Anchor||TextAnchor.MIDDLE,text3Ey:t.endY+t.height+calcVerticalSize(140),text3Fill:i.text3Fill||RESULT_TEXT3_FILL,text3Size:calcVerticalSize(calcResultFontSize(RESULT_TEXT3_VALUE,115))+"px",text3Sy:-200,text3Value:i.text3Value||RESULT_TEXT3_VALUE,text3Weight:i.text3Weight||TextWeight.BOLD,text3X:viewportSize.viewportWidth/2,text4Anchor:i.text4Anchor||TextAnchor.MIDDLE,text4Ex:viewportSize.viewportWidth/4+calcSize(10),text4Fill:i.text4Fill||RESULT_TEXT4_FILL,text4Size:calcVerticalSize(i.text4Size||RESULT_TEXT4_SIZE)+"px",text4Sx:-viewportSize.viewportWidth,text4Value:i.text4Value||RESULT_TEXT4_VALUE,text4Weight:i.text4Weight||TextWeight.BOLD,text4Y:t.endY+t.height+calcVerticalSize(245),text5Anchor:i.text5Anchor||TextAnchor.MIDDLE,text5Ex:viewportSize.viewportWidth/4+calcSize(10),text5Fill:i.text5Fill||RESULT_TEXT5_FILL,text5Size:calcVerticalSize(i.text5Size||RESULT_TEXT5_SIZE)+"px",text5Sx:-viewportSize.viewportWidth,text5Value:i.text5Value||RESULT_TEXT5_VALUE,text5Weight:i.text5Weight||TextWeight.BOLD,text5Y:t.endY+t.height+calcVerticalSize(295),text6Anchor:i.text6Anchor||TextAnchor.MIDDLE,text6Ex:3*(viewportSize.viewportWidth/4)-calcSize(10),text6Fill:i.text6Fill||RESULT_TEXT6_FILL,text6Size:calcVerticalSize(i.text6Size||RESULT_TEXT6_SIZE)+"px",text6Sx:viewportSize.viewportWidth*2,text6Value:i.text6Value||RESULT_TEXT6_VALUE,text6Weight:i.text6Weight||TextWeight.BOLD,text6Y:t.endY+t.height+calcVerticalSize(245),text7Anchor:i.text7Anchor||TextAnchor.MIDDLE,text7Ex:3*(viewportSize.viewportWidth/4)-calcSize(10),text7Fill:i.text7Fill||RESULT_TEXT7_FILL,text7Size:calcVerticalSize(i.text7Size||RESULT_TEXT7_SIZE)+"px",text7Sx:viewportSize.viewportWidth*2,text7Value:i.text7Value||RESULT_TEXT7_VALUE,text7Weight:i.text7Weight||TextWeight.BOLD,text7Y:t.endY+t.height+calcVerticalSize(295)}),convertSounds=(i={})=>({...SOUNDS,...i}),convertSoundButtonConfig=(i={},t)=>{const e=calcVerticalSize(i.textSize||SOUND_TEXT_SIZE),r=calcSize(i.imageWidth||SOUND_BUTTON_IMAGE_WIDTH),h=viewportSize.viewportWidth-r-calcSize(38);return{animLength:SOUND_BUTTON_ANIMATION_LENGTH,imageGameEndY:t.imageY+t.imageH+calcSize(4),imageHeight:calcSize(i.imageHeight||SOUND_BUTTON_IMAGE_HEIGHT),imageHomeEndY:calcVerticalSize(i.imageHomeEndY||SOUND_BUTTON_IMAGE_HOME_END_Y),imageOff:i.imageOff||SOUND_BUTTON_IMAGE_OFF,imageOn:i.imageOn||SOUND_BUTTON_IMAGE_ON,imageResultEndY:e/2+calcSize(2),imageStartY:-100,imageWidth:r,imageX:viewportSize.viewportWidth-r-calcSize(38),textAnchor:i.textAnchor||TextAnchor.END,textFill:i.textFill||SOUND_BUTTON_TEXT_FILL,textGameEndY:t.text2Y,textHomeEndY:e/2+calcSize(18),textResultEndY:e/2+calcSize(15),textSize:e+"px",textStartY:-100,textValueOff:i.textValueOff||SOUND_BUTTON_TEXT_VALUE_OFF,textValueOn:i.textValueOn||SOUND_BUTTON_TEXT_VALUE_ON,textWeight:i.textWeight||TextWeight.BOLD,textX:h-calcSize(10)}},convertStartButtonConfig=(i={},t)=>{const e=calcSize(i.startX||START_BUTTON_ORIG_X),r=t.endY+t.height+calcVerticalSize(327),h=calcSize(i.height||START_BUTTON_HEIGHT);return{animLength:START_BUTTON_ANIMATION_LENGTH,endX:e,endY:r,height:h,image:i.image||START_BUTTON_IMAGE,startX:e,startY:viewportSize.viewportHeight,textAnchor:i.textAnchor||TextAnchor.MIDDLE,textEndX:e,textEndY:r-calcVerticalSize(8)+h/2,textFill:i.textFill||START_BUTTON_TEXT_FILL,textSize:calcSize(i.textSize||START_BUTTON_TEXT_SIZE)+"px",textStartX:viewportSize.viewportWidth/2,textStartY:viewportSize.viewportHeight+h,textValue:i.textValue||START_BUTTON_TEXT_VALUE,textWeight:i.textWeight||TextWeight.BOLD,width:calcSize(i.width||START_BUTTON_WIDTH)}};class Config{constructor(t,e){this._params=t,this._logger=e,this._onReady=this._params.onReady??a,this._onReset=this._params.onReset??a,this._onSuccess=this._params.onSuccess??a,this._onError=this._params.onError??a,this._rootElement=this.getRoot(this._params.rootElement),this._logger.debug("Setting config start"),this._options=this.convertOptions(this._params),this._logger.debug("Setting config end")}convertOptions(t){const e=t.INTERACTION_MODE||INTERACTION_MODE,r=convertHomeLogoConfig(t.HOME_LOGO_CONFIG),h=convertScoreConfig(t.SCORE_CONFIG),p=convertResultLogoConfig(t.RESULT_LOGO_CONFIG),E=convertResultButtonNextConfig(t.RESULT_BUTTON_NEXT_CONFIG,p),O=convertBrandAnswer1ButtonConfig(t.BRAND_ANSWER1_CONFIG);return{BACKGROUND_CONFIG:convertBackgroundConfig(t.BACKGROUND_CONFIG),BOTTOM_CONFIG:convertBottomConfig(t.BOTTOM_CONFIG),BRAND_ANSWER1_CONFIG:O,BRAND_ANSWER2_CONFIG:convertBrandAnswer2ButtonConfig(t.BRAND_ANSWER2_CONFIG,O),BRAND_INTRO_BUTTON_CONFIG:convertBrandIntroButtonConfig(t.BRAND_INTRO_BUTTON_CONFIG),BRAND_INTRO_CONFIG:convertBrandIntroConfig(t.BRAND_INTRO_CONFIG),BRAND_QUESTION_TEXT1_CONFIG:convertBrandQuestionText1(t.BRAND_QUESTION_TEXT1_CONFIG),BRAND_QUESTION_TEXT2_CONFIG:convertBrandQuestionText2(t.BRAND_QUESTION_TEXT2_CONFIG),CONSOLE_CONFIG:convertConsoleConfig(),FIRST_SAFE_FRUIT_NUMBER:t.FIRST_SAFE_FRUIT_NUMBER&&Number(t.FIRST_SAFE_FRUIT_NUMBER)||FIRST_SAFE_FRUIT_NUMBER,FONT_FAMILY:t.FONT_FAMILY||FONT_FAMILY,FLASH_CONFIG:convertFlashConfig(t.FLASH_CONFIG),FPS_CONFIG:convertFPSConfig(),FRUIT_CONFIG:convertFruitsConfig(t.FRUIT_CONFIG,e),GAME_OVER_CONFIG:convertGameOverConfig(t.GAME_OVER_CONFIG),GAME_STATES:GameStates,HOME_LOGO_CONFIG:r,HOME_MASK_CONFIG:convertHomeMaskConfig(),HOME_TEXT_CONFIG:convertHomeTextConfig(t.HOME_TEXT_CONFIG,r),INTERACTION_MODE:e,INTERACTION_MODES:InteractionModes,IS_TOUCH:e===InteractionModes.TOUCH,IS_DEBUG:new URLSearchParams(window.location.search).has("debug"),JUICE_CONFIG:convertJuiceConfig(t.JUICE_CONFIG),KNIFE_PART_CONFIG:convertKnifePartConfig(),LAYERS:Layers,LIGHTS_CONFIG:convertLightsConfig(),LOSE_CONFIG:convertLoseConfig(t.LOSE_CONFIG,h),MESSAGES:Messages,MODES:Modes,RESULT_BUTTON_NEXT_CONFIG:E,RESULT_BUTTON_REPLAY_CONFIG:convertResultButtonReplayConfig(t.RESULT_BUTTON_REPLAY_CONFIG,E),RESULT_LOGO_CONFIG:p,RESULT_TEXT_CONFIG:convertResultTextConfig(t.RESULT_TEXT_CONFIG,p),SCENES:Scenes,SCENE_STATES:SceneStates,SCORE_CONFIG:h,SCORE_MULTIPLIER:t.SCORE_MULTIPLIER&&Number(t.SCORE_MULTIPLIER)||SCORE_MULTIPLIER,SOUNDS:convertSounds(t.SOUNDS),SOUND_BUTTON_CONFIG:convertSoundButtonConfig(t.START_BUTTON_CONFIG,h),START_BUTTON_CONFIG:convertStartButtonConfig(t.START_BUTTON_CONFIG,r),STATE_KEYS:StateKeys}}getRoot(t){return(!g(t)||t.tagName!=="DIV")&&(this._logger.error("Root element is not an HTMLDivElement"),this.onError("config.rootElement.error")),t}set options(t){this._options=t}get options(){return this._options}get onReady(){return this._onReady}get onReset(){return this._onReset}get onSuccess(){return this._onSuccess}get onError(){return this._onError}get rootElement(){return this._rootElement}}let addingTasks=[],adding=0,tasks=[];class Timeline{constructor(){Ke(this,"_requestAnimationFrame",function(t){return t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||t.oRequestAnimationFrame||function(e){setTimeout(e,1)}}(window)),this.startTime=0,this.count=0}now(){return new Date().getTime()}init(){this.startTime=this.now(),this.count=0,setInterval(()=>{this.count++,this.update(this.now())},1)}createTask(t){const e=this._createTask(t);return addingTasks.unshift(e),adding=1,t.recycle&&this.taskList(t.recycle,e),e}taskList(t,e){return t.clear||(t.clear=function(){for(let r,h=this.length-1;h>=0;h--)r=this[h],r.stop(),this.splice(h,1);return this}),e&&t.unshift(e),t}setTimeout(t,e){return this.createTask({start:e,duration:0,onTimeStart:t})}_setInterval(t,e){const r=setInterval(t,e);return{stop:function(){clearInterval(r)}}}getFPS(){const t=this.now(),e=this.count/(t-this.startTime)*1e3;return this.count>1e3&&(this.count=0,this.startTime=t),e}_createTask(t){const e=t.object||{};return t.start=t.start||0,{start:t.start+this.now(),duration:t.duration===-1?864e5:t.duration,data:t.data?[0].concat(t.data):[0],started:0,object:e,onTimeStart:t.onTimeStart||e.onTimeStart||nul,onTimeUpdate:t.onTimeUpdate||e.onTimeUpdate||nul,onTimeEnd:t.onTimeEnd||e.onTimeEnd||nul,stop:function(){this.stopped=1}}}updateTask(t,e){const r=t.data;r[0]=e,t.onTimeUpdate.apply(t.object,r)}checkStartTask(t){t.started||(t.started=1,t.onTimeStart.apply(t.object,t.data.slice(1)),this.updateTask(t,0))}update(t){let e=tasks.length,r,h,p,E;for(;e--;)if(h=tasks[e],p=h.start,E=h.duration,t>=p){if(h.stopped){tasks.splice(e,1);continue}this.checkStartTask(h),(r=t-p)<E?this.updateTask(h,r):(this.updateTask(h,E),h.onTimeEnd.apply(h.object,h.data.slice(1)),tasks.splice(e,1))}adding&&(tasks.unshift.apply(tasks,addingTasks),addingTasks.length=adding=0)}}const timeline=new Timeline;class Displacement{constructor(t,e,{layer:r,imageSrc:h,width:p,height:E,startX:O,startY:L,endX:w,endY:S,animMap:v,duration:U}){this._config=t,this._layerManager=e,this.anim={},this.anims=[],this.layer=r,this.imageSrc=h,this.width=p,this.height=E,this.startX=O,this.startY=L,this.endX=w,this.endY=S,typeof v=="function"?this.anim.show=this.anim.hide=v:this.anim=v,this.duration=U}createTask(t,e,r,h,p,E,O,L){timeline.createTask({start:t,duration:e,object:this,data:[r,h,p,E,O,L],onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}set(){this.image=this._layerManager.createImage(this.layer,this.imageSrc,this.startX,this.startY,this.width,this.height)}show(t=0){const{MODES:e}=this._config.options;this.createTask(t,this.duration,this.startX,this.startY,this.endX,this.endY,this.anim.show,e.SHOW)}hide(){const{MODES:t}=this._config.options;this.anims.clear(),this.createTask(0,this.duration,this.endX,this.endY,this.startX,this.startY,this.anim.hide,t.HIDE)}onTimeUpdate(t,e,r,h,p,E){this.image.attr({x:E(t,e,h-e,this.duration),y:E(t,r,p-r,this.duration)})}onTimeStart(){}onTimeEnd(t,e,r,h,p){const{MODES:E}=this._config.options;p===E.HIDE&&this.image.hide()}}class DisplacementFactory{constructor(t,e){this._config=t,this._layerManager=e}create(t){return new Displacement(this._config,this._layerManager,t)}}function exponential(){}exponential.co=function(i,t,e,r){return i==r?t+e:e*(-Math.pow(2,-10*i/r)+1)+t};exponential.ci=function(i,t,e,r){return i==0?t:e*Math.pow(2,10*(i/r-1))+t};function quadratic(){}quadratic.ci=function(i,t,e,r){return e*(i/=r)*i+t};quadratic.co=function(i,t,e,r){return-e*(i/=r)*(i-2)+t};quadratic.cio=function(i,t,e,r){return(i/=r/2)<1?e/2*i*i+t:-e/2*(--i*(i-2)-1)+t};function linear(i,t,e,r){return e*i/r+t}function back(){}back.ci=function(i,t,e,r,h){return h=1.70158,e*((i=i/r-1)*i*((h+1)*i+h)+1)+t};back.co=function(i,t,e,r,h){return h=1.70158,e*(i/=r)*i*((h+1)*i-h)+t};const blankArray=[],slice=blankArray.slice,join=blankArray.join,Ucren={isIe:/msie/i.test(navigator.userAgent),isIe6:/msie 6/i.test(navigator.userAgent),isFirefox:/firefox/i.test(navigator.userAgent),isSafari:/version\/[\d.]+\s+safari/i.test(navigator.userAgent),isOpera:/opera/i.test(navigator.userAgent),isChrome:/chrome/i.test(navigator.userAgent),isStrict:document.compatMode==="CSS1Compat",tempDom:document.createElement("div"),apply,appendStyle:function(i){var t;arguments.length>1&&(i=join.call(arguments,"")),document.createStyleSheet?(t=document.createStyleSheet(),t.cssText=i):(t=document.createElement("style"),t.type="text/css",t.appendChild(document.createTextNode(i)),document.getElementsByTagName("head")[0].appendChild(t))},addEvent:function(i,t,e){var r=function(){e.apply(i,arguments)};return i.dom&&(i=i.dom),window.attachEvent?i.attachEvent("on"+t,r):window.addEventListener?i.addEventListener(t,r,!1):i["on"+t]=r,r},delEvent:function(i,t,e){window.detachEvent?i.detachEvent("on"+t,e):window.removeEventListener?i.removeEventListener(t,e,!1):i["on"+t]===e&&(i["on"+t]=null)},Class:function(i,t,e,r){var h,p;return i=i||function(){},t=t||{},h=function(){this.instanceId=Ucren.id(),i.apply(this,arguments)},p=h.prototype,Ucren.registerClassEvent.call(p),Ucren.each(t,function(E,O){p[O]=function(L,w){return typeof L=="function"?function(){var S,v;if(S=slice.call(arguments,0),!(e&&e.apply(this,[w].concat(S))===!1))return this.fireEvent("before"+w,S),v=L.apply(this,S),r&&r.apply(this,[w].concat(S)),this.fireEvent(w,S),v}:L}(E,O)}),p.getOriginMethod=function(E){return t[E]},h},registerClassEvent:function(){this.on=function(i,t){var e=this.instanceId;Ucren.dispatch(e+i,t.bind(this))},this.onbefore=function(i,t){var e=this.instanceId;Ucren.dispatch(e+"before"+i,t.bind(this))},this.un=function(i,t){},this.fireEvent=function(i,t){var e=this.instanceId;Ucren.dispatch(e+i,t)}},createFuze:function(){var i,t,e;return i=[],t=function(r){e?r():i.push(r)},t.fire=function(){for(;i.length;)i.shift()();e=!0},t.extinguish=function(){e=!1},t.wettish=function(){i.length&&i.shift()()},t},dispatch:function(){var i={},t,e;return t=function(r,h,p){var E;(E=i[r])&&Ucren.each(E,function(O){O.apply(p,h)})},e=function(r,h){i[r]||(i[r]=[]),i[r].push(h)},function(r,h,p){typeof h>"u"&&(h=[]),h instanceof Array?t.apply(this,arguments):typeof h=="function"&&e.apply(this,arguments)}}(),each,Element:function(i,t){var e,r;return i&&i.isUcrenElement?t?i.dom:i:(i=typeof i=="string"?document.getElementById(i):i,i?t?i:(r=i.getAttribute("handleId"),typeof r=="string"?Ucren.handle(r-0):(e=new Ucren.BasicElement(i),r=Ucren.handle(e),i.setAttribute("handleId",r+""),e)):null)},Event:function(i){if(i=i||window.event,!i)for(var t=this.caller;t;){if(t.arguments&&t.arguments[0]&&typeof t.arguments[0].altKey=="boolean"){i=t.arguments[0];break}t=t.caller}return i},fixNumber:function(i,t){return typeof i=="number"?i:t},fixString:function(i,t){return typeof i=="string"?i:t},fixConfig:function(i){var t;return t={},typeof i>"u"?t:typeof i=="function"?new i:i},handle:function i(t){var e,r,h;if(e=i,e.cache||(e.cache={}),typeof e.number>"u"&&(e.number=0),r=typeof t,r==="number")return e.cache[t.toString()];if(r==="object"||r==="function")return h=e.number++,e.cache[h.toString()]=t,h},id:function i(){return i.number=++i.number||0,"_"+i.number},loadImage:function(i,t){var e=i.length,r=0,h=function(){r===e&&t&&t()};Ucren.each(i,function(p){var E=document.createElement("img");E.onload=E.onerror=function(){this.onload=this.onerror=null,r++,h()},Ucren.tempDom.appendChild(E),E.src=p})},loadScript:function(src,callback){Ucren.request(src,function(text){eval(text),callback&&callback(text)})},makeElement,nul,randomNumber:function(i){return Math.floor(Math.random()*i)},randomWord:function(){var i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";return function(t,e){var r,h=[];return r=e||i,Ucren.each(t,(function(p){h[p]=r.charAt(this.randomNumber(r.length))}).bind(this)),h.join("")}}(),request:function(i,t){var e=Ucren.request,r=e.xhr;e.xhr||(window.XMLHttpRequest?r=e.xhr=new XMLHttpRequest:r=e.xhr=new ActiveXObject("Microsoft.XMLHTTP")),r.open("GET",i,!0),r.onreadystatechange=function(){r.readyState===4&&r.status===200&&t(r.responseText)},r.send(null)}};Ucren.BasicDrag=Ucren.Class(function(i){i=Ucren.fixConfig(i),this.type=Ucren.fixString(i.type,"normal");var t=this.isTouch="ontouchstart"in window;this.TOUCH_START=t?"touchstart":"mousedown",this.TOUCH_MOVE=t?"touchmove":"mousemove",this.TOUCH_END=t?"touchend":"mouseup"},{bind:function(i,t){i=Ucren.Element(i),t=Ucren.Element(t)||i;var e={};e[this.TOUCH_START]=(function(r){return r=Ucren.Event(r),this.startDrag(),r.cancelBubble=!0,r.stopPropagation&&r.stopPropagation(),r.returnValue=!1}).bind(this),t.addEvents(e),this.target=i},getCoors:function(i){var t=[];if(i.targetTouches&&i.targetTouches.length){var e=i.targetTouches[0];t[0]=e.clientX,t[1]=e.clientY}else t[0]=i.clientX,t[1]=i.clientY;return t},startDrag:function(){var i,t,e;i=this.target,t=i.draging={},this.isDraging=!0,t.x=parseInt(i.style("left"),10)||0,t.y=parseInt(i.style("top"),10)||0,e=Ucren.Event();var r=this.getCoors(e);t.mouseX=r[0],t.mouseY=r[1],this.registerDocumentEvent()},endDrag:function(){this.isDraging=!1,this.unRegisterDocumentEvent()},registerDocumentEvent:function(){var i,t;i=this.target,t=i.draging,t.documentSelectStart=Ucren.addEvent(document,"selectstart",function(e){return e=e||event,e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1}),t.documentMouseMove=Ucren.addEvent(document,this.TOUCH_MOVE,(function(e){var r,h;e=e||event,r=Ucren.isIe&&e.button!==1,h=!Ucren.isIe&&e.button!==0,(r||h)&&!this.isTouch&&this.endDrag();var p=this.getCoors(e);return t.newMouseX=p[0],t.newMouseY=p[1],e.stopPropagation&&e.stopPropagation(),e.returnValue=!1}).bind(this)),t.documentMouseUp=Ucren.addEvent(document,this.TOUCH_END,(function(){this.endDrag()}).bind(this)),clearInterval(t.timer),t.timer=setInterval((function(){var e,r,h,p;t.newMouseX&&(h=t.newMouseX-t.mouseX,p=t.newMouseY-t.mouseY,e=t.x+h,r=t.y+p,this.type==="calc"?this.returnValue(h,p,t.newMouseX,t.newMouseY):i.left(e).top(r))}).bind(this),10)},unRegisterDocumentEvent:function(){var i=this.target.draging;Ucren.delEvent(document,this.TOUCH_MOVE,i.documentMouseMove),Ucren.delEvent(document,this.TOUCH_END,i.documentMouseUp),Ucren.delEvent(document,"selectstart",i.documentSelectStart),clearInterval(i.timer)},returnValue:function(i,t,e,r){}});Ucren.Template=Ucren.Class(function(){this.string=join.call(arguments,"")},{apply:function(i){return this.string.format(i)}});Ucren.BasicElement=Ucren.Class(function(i){this.dom=i,this.countMapping={}},{isUcrenElement:!0,attr:function(i,t){if(typeof t=="string")this.dom.setAttribute(i,t);else return this.dom.getAttribute(i);return this},style:function(){var i=Ucren.isIe?function(t){return this.dom.currentStyle[t]}:function(t){var e;return e=document.defaultView.getComputedStyle(this.dom,null),e.getPropertyValue(t)};return function(t,e){if(typeof t=="object")Ucren.each(t,(function(r,h){this[h]=r}).bind(this.dom.style));else{if(typeof t=="string"&&typeof e>"u")return i.call(this,t);typeof t=="string"&&typeof e<"u"&&(this.dom.style[t]=e)}return this}}(),hasClass:function(i){var t=" "+this.dom.className+" ";return t.indexOf(" "+i+" ")>-1},setClass:function(i){return typeof i=="string"&&(this.dom.className=i.trim()),this},addClass:function(i){var t,e;return t=this.dom,e=" "+t.className+" ",e.indexOf(" "+i+" ")===-1&&(e+=i,e=e.trim(),e=e.replace(/ +/g," "),t.className=e),this},delClass:function(i){var t,e;return t=this.dom,e=" "+t.className+" ",e.indexOf(" "+i+" ")>-1&&(e=e.replace(" "+i+" "," "),e=e.trim(),e=e.replace(/ +/g," "),t.className=e),this},html:function(i){var t=this.dom;if(typeof i=="string")t.innerHTML=i;else if(i instanceof Array)t.innerHTML=i.join("");else return t.innerHTML;return this},left:function(i){var t=this.dom;if(typeof i=="number")t.style.left=i+"px",this.fireEvent("infect",[{left:i}]);else return this.getPos().x;return this},top:function(i){var t=this.dom;if(typeof i=="number")t.style.top=i+"px",this.fireEvent("infect",[{top:i}]);else return this.getPos().y;return this},width:function(i){var t=this.dom;if(typeof i=="number")t.style.width=i+"px",this.fireEvent("infect",[{width:i}]);else if(typeof i=="string")t.style.width=i,this.fireEvent("infect",[{width:i}]);else return this.getSize().width;return this},height:function(i){var t=this.dom;if(typeof i=="number")t.style.height=i+"px",this.fireEvent("infect",[{height:i}]);else if(typeof i=="string")t.style.height=i,this.fireEvent("infect",[{height:i}]);else return this.getSize().height;return this},count:function(i){return this.countMapping[i]=++this.countMapping[i]||1},display:function(i){var t=this.dom;if(typeof i=="boolean")t.style.display=i?"block":"none",this.fireEvent("infect",[{display:i}]);else return this.style("display")!=="none";return this},first:function(){for(var i=this.dom.firstChild;i&&!i.tagName&&i.nextSibling;)i=i.nextSibling;return i},add:function(i){var t;return t=Ucren.Element(i),this.dom.appendChild(t.dom),this},remove:function(i){var t;return i?(t=Ucren.Element(i),t.html(""),this.dom.removeChild(t.dom)):(t=Ucren.Element(this.dom.parentNode),t.remove(this)),this},insert:function(i){var t;return t=this.dom,t.firstChild?t.insertBefore(i,t.firstChild):this.add(i),this},addEvents:function(i){var t,e;return e={},t=this.dom,Ucren.each(i,function(r,h){e[h]=Ucren.addEvent(t,h,r)}),e},removeEvents:function(i){var t;return t=this.dom,Ucren.each(i,function(e,r){Ucren.delEvent(t,r,e)}),this},getPos:function(){var i,t,e,r,h;if(i=this.dom,e={},i.getBoundingClientRect){r=i.getBoundingClientRect(),h=Ucren.isIe?2:0;var p=document,E=Math.max(p.documentElement.scrollTop,p.body.scrollTop),O=Math.max(p.documentElement.scrollLeft,p.body.scrollLeft);return{x:r.left+O-h,y:r.top+E-h}}else{if(e={x:i.offsetLeft,y:i.offsetTop},t=i.offsetParent,t!==i)for(;t;)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;Ucren.isSafari&&this.style("position")==="absolute"&&(e.x-=document.body.offsetLeft,e.y-=document.body.offsetTop)}for(i.parentNode?t=i.parentNode:t=null;t&&t.tagName.toUpperCase()!=="BODY"&&t.tagName.toUpperCase()!=="HTML";)e.x-=t.scrollLeft,e.y-=t.scrollTop,t.parentNode?t=t.parentNode:t=null;return e},getSize:function(){var i=this.dom,t=this.style("display");if(t&&t!=="none")return{width:i.offsetWidth,height:i.offsetHeight};var e=i.style,r={visibility:e.visibility,position:e.position,display:e.display},h={visibility:"hidden",display:"block"};r.position!=="fixed"&&(h.position="absolute"),this.style(h);var p={width:i.offsetWidth,height:i.offsetHeight};return this.style(r),p},observe:function(i,t){return i=Ucren.Element(i),i.on("infect",t.bind(this)),this},usePNGbackground:function(i){var t;return t=this.dom,/\.png$/i.test(i)&&Ucren.isIe6?t.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+i+"',sizingMethod='scale');":t.style.backgroundImage="url("+i+")",this},setAlpha:function(){var i=/alpha\s*\(\s*opacity\s*=\s*([^)]+)\)/;return function(t){var e=this.dom,r=e.style;return Ucren.isIe?(e.currentStyle&&!e.currentStyle.hasLayout&&(r.zoom=1),i.test(r.filter)?(t=t>=99.99?"":"alpha(opacity="+t+")",r.filter=r.filter.replace(i,t)):r.filter+=" alpha(opacity="+t+")"):r.opacity=t/100,this}}(),fadeIn:function(i){typeof this.fadingNumber>"u"&&(this.fadingNumber=0),this.setAlpha(this.fadingNumber);var t=(function(){this.setAlpha(this.fadingNumber),this.fadingNumber===100?(clearInterval(this.fadingInterval),i&&i()):this.fadingNumber+=10}).bind(this);return this.display(!0),clearInterval(this.fadingInterval),this.fadingInterval=setInterval(t,Ucren.isIe?20:30),this},fadeOut:function(i){typeof this.fadingNumber>"u"&&(this.fadingNumber=100),this.setAlpha(this.fadingNumber);var t=(function(){this.setAlpha(this.fadingNumber),this.fadingNumber===0?(clearInterval(this.fadingInterval),this.display(!1),i&&i()):this.fadingNumber-=10}).bind(this);return clearInterval(this.fadingInterval),this.fadingInterval=setInterval(t,Ucren.isIe?20:30),this},useMouseAction:function(i,t){return this.MouseAction||(this.MouseAction=new Ucren.MouseAction({element:this})),this.MouseAction.use(i,t),this}});function postMessage(i,...t){Ucren.dispatch(i,t)}function addEventListener(i,t){Ucren.dispatch(i,t)}const message={postMessage,addEventListener};function unsetObject(i){for(const t in i)i.hasOwnProperty(t)&&typeof i[t]=="function"&&(i[t]=function(){})}function getAngleByRadian(i){return i*180/Math.PI}function pointToRadian(i,t){if(t[0]===i[0])return t[1]>i[1]?Math.PI*.5:Math.PI*1.5;if(t[1]===i[1])return t[0]>i[0]?0:Math.PI;const e=Math.atan((i[1]-t[1])/(i[0]-t[0]));return t[0]>i[0]&&t[1]<i[1]?e+2*Math.PI:t[0]>i[0]&&t[1]>i[1]?e:e+Math.PI}const average=function(i,t){return(i+t)/2>>0};class Juice{constructor(t,e,r,h,p,E){this._config=t,this._layerManager=e,this.originX=r,this.originY=h,this.color=p,this.anim=exponential.co,this.dropAnim=quadratic.co;const{JUICE_CONFIG:O}=this._config.options;this.shape=E||O.shapes.CIRCLE,this.radius=O.radius,this.distance=randomNumber(200)+100,this.dir=randomNumber(360)*Math.PI/180,this.dur=O.duration,this.shape=E}render(){const{LAYERS:t,JUICE_CONFIG:e}=this._config.options,r=this._layerManager.getLayer(t.JUICE);if(this.shape===e.shapes.CIRCLE)this.figure=r.circle(this.originX,this.originY,this.radius).attr({fill:this.color,stroke:"none"});else if(this.shape===e.shapes.SQUARE)this.figure=r.rect(this.originX-this.radius,this.originY-this.radius,this.radius*2,this.radius*2).attr({fill:this.color,stroke:"none"});else if(this.shape===e.shapes.DIAMOND){const h=this.createStarPath(this.originX,this.originY,this.radius,4);this.figure=r.path(h).attr({fill:this.color,stroke:"none"})}else if(this.shape===e.shapes.STAR){const h=this.createStarPath(this.originX,this.originY,this.radius,5);this.figure=r.path(h).attr({fill:this.color,stroke:"none"})}}createStarPath(t,e,r,h){const p=Math.PI/h;let E="";for(let O=0;O<2*h;O++){const L=O*p,w=O%2===0?r:r/2,S=t+w*Math.sin(L),v=e-w*Math.cos(L);E+=O===0?`M ${S} ${v}`:`L ${S} ${v}`}return E+="Z",E}sputter(){timeline.createTask({start:0,duration:this.dur,object:this,onTimeUpdate:this.onTimeUpdate,onTimeEnd:this.onTimeEnd})}onTimeUpdate(t){const{JUICE_CONFIG:e}=this._config.options,r=this.anim(t,0,this.distance,this.dur),h=this.originX+r*Math.cos(this.dir),p=this.originY+r*Math.sin(this.dir)+this.dropAnim(t,0,200,this.dur),E=this.anim(t,1,-1,this.dur);this.shape===e.shapes.CIRCLE?this.figure.attr({cx:h,cy:p}).scale(E,E):this.shape===e.shapes.SQUARE?this.figure.attr({x:h-this.radius*E,y:p-this.radius*E}).scale(E,E):this.shape===e.shapes.DIAMOND?this.figure.attr({path:this.createStarPath(h,p,this.radius*E,4)}).scale(E,E):this.shape===e.shapes.STAR&&this.figure.attr({path:this.createStarPath(h,p,this.radius*E,5)}).scale(E,E)}onTimeEnd(){this.figure.remove(),unsetObject(this)}}class JuiceFactory{constructor(t,e){this._config=t,this._layerManager=e;const{JUICE_CONFIG:r}=this._config.options;this.num=r.number}create(t,e,r){for(let h=0;h<this.num;h++)this.createOne(t,e,r)}createOne(t,e,r){if(!r)return;const{JUICE_CONFIG:h}=this._config.options,p=new Juice(this._config,this._layerManager,t,e,r,h.shape);p.render(),p.sputter()}}class Fruit{constructor(t,e,r,h,p){this._config=t,this._control=e,this._layerManager=r,this._flash=h,this.conf=p,this.zoomAnim=exponential.co,this.linearAnim=linear,this.dropAnim=quadratic.ci,this.fallOffAnim=quadratic.co,this.rotateSpeed=[60,50,40,-40,-50,-60],this.brokend=!1,this.apartAngle=0,this.aparted=!1,this.shotOutStartX=0,this.shotOutStartY=0,this.shotOutEndX=0,this.shotOutEndY=0,this.fallOffToX=0,this.fallTargetX=0,this.fallTargetY=0,this.touchedPosX=0,this.touchedPosY=0,this.brokenPosX=0,this.brokenPosY=0,this.brokenTargetX1=0,this.brokenTargetY1=0,this.brokenTargetX2=0,this.brokenTargetY2=0,this.touchedTargetX=0,this.touchedTargetY=0,this.bImage1RotateAngle=0,this.bImage2RotateAngle=0,this.fallOutOfViewerCalled=0,this.fallOffing=0,this.shotOut=(()=>{const L=[-1,1],{FRUIT_CONFIG:w}=this._config.options;return(S,v)=>(this.shotOutStartX=this.originX,this.shotOutStartY=this.originY,this.shotOutEndX=average(this.originX,v),this.shotOutEndY=Math.min(this.startY-randomNumber(this.startY-100),200),this.fallOffToX=v,timeline.createTask({start:S,duration:w.dropTime,object:this,onTimeUpdate:this.onShotOuting,onTimeStart:this.onShotOutStart,onTimeEnd:this.onShotOutEnd,recycle:this.anims}),this.type!==w.types.BOOM&&this.rotate(0,(randomNumber(180)+90)*L[randomNumber(2)]),this)})(),this.fallOff=(()=>{const L=[-1,1],{FRUIT_CONFIG:w}=this._config.options;let S=0;return(v,U)=>{if(this.aparted||this.brokend)return;const{viewportHeight:F}=viewportSize;this.fallOffing=1;const X=F+calcSize(120);typeof U!="number"&&(U=this.originX+randomNumber(w.dropXScope)*L[S++%2]),this.fallTargetX=U,this.fallTargetY=X,timeline.createTask({start:v,duration:w.dropTime,object:this,onTimeUpdate:this.onFalling,onTimeStart:this.onFallStart,onTimeEnd:this.onFallEnd,recycle:this.anims})}})(),this.clickHandler=L=>{const{MESSAGES:w}=this._config.options,S=L.clientX-this._control.canvasLeft,v=L.clientY-this._control.canvasTop;message.postMessage(w.TOUCH,[S,v])},this._config=t,this._control=e,this._layerManager=r,this._juiceFactory=new JuiceFactory(t,r),this._flash=h;const{FRUIT_CONFIG:E}=this._config.options;this.type=this.conf.type,this.originX=this.conf.originX,this.originY=this.conf.originY;const{radius:O}=E.infos[this.type];this.radius=O,this.startX=this.conf.originX,this.startY=this.conf.originY,this.anims=[]}set(t){const{IS_DEBUG:e,IS_TOUCH:r,LAYERS:h,FRUIT_CONFIG:p}=this._config.options,{radius:E,image:O,width:L,height:w,fixAngle:S}=p.infos[this.type];return this.shadow=this._layerManager.createImage(h.FRUIT,p.shadowImage,this.startX-E,this.startY-E+p.shadowPos,106,77),this.image=this._layerManager.createImage(h.FRUIT,O,this.startX-E,this.startY-E,L,w),r&&this.addClickHandler(),this.type===p.types.BOOM&&this.image.rotate(S),t&&(this.image.hide(),this.shadow.hide()),e&&this.showDebugCatchArea(),this}addClickHandler(){this.image.node.addEventListener("pointerdown",this.clickHandler)}removeClickHandler(){this.image.node.removeEventListener("pointerdown",this.clickHandler)}showDebugCatchArea(){const{originX:t,originY:e,radius:r}=this;this.debugArea=this.image.paper.circle(t,e,r).attr({stroke:"mediumblue","stroke-width":2,"stroke-dasharray":"- ",opacity:.5}),this.debugArea.insertBefore(this.image)}pos(t,e){const{IS_DEBUG:r,MESSAGES:h,FRUIT_CONFIG:p}=this._config.options,{viewportHeight:E}=viewportSize,O=this.radius;this.originX=t,this.originY=e,this.image.attr({x:t-=O,y:e-=O}),this.shadow.attr({x:t,y:e+p.shadowPos}),r&&this.debugArea.attr({cx:t+O,cy:e+O}),this.fallOffing&&!this.fallOutOfViewerCalled&&e>E+this.radius&&(this.fallOutOfViewerCalled=1,message.postMessage(h.FRUIT_FALL_OUT_OF_VIEWER,this))}show(t){const{MODES:e}=this._config.options;timeline.createTask({start:t,duration:500,data:[1e-5,1,e.SHOW],object:this,onTimeUpdate:this.onScaling,onTimeStart:this.onShowStart,recycle:this.anims})}hide(t){const{MODES:e,FRUIT_CONFIG:r}=this._config.options;this.type===r.types.BOOM&&(this.anims.clear&&this.anims.clear(),timeline.createTask({start:t,duration:500,data:[1,1e-5,e.HIDE],object:this,onTimeUpdate:this.onScaling,onTimeEnd:this.onHideEnd,recycle:this.anims}))}rotate(t,e){this.rotateSpeed=e||Array.isArray(this.rotateSpeed)?this.rotateSpeed[randomNumber(this.rotateSpeed.length)]:this.rotateSpeed,timeline.createTask({start:t,duration:-1,object:this,onTimeUpdate:this.onRotating,recycle:this.anims})}broken(t){if(this.brokend)return;this.brokend=!0;const{IS_TOUCH:e,FRUIT_CONFIG:r}=this._config.options,h=FruitFactory.fruitCache.indexOf(this);h>-1&&FruitFactory.fruitCache.splice(h,1),this.type!==r.types.BOOM?(this._flash.showAt(this.originX,this.originY,t),this._juiceFactory.create(this.originX,this.originY,r.infos[this.type].juiceColor),e?this.touched():this.apart(t)):this.hide()}pause(){this.brokend||this.anims.clear&&this.anims.clear()}touched(){const{MODES:t,FRUIT_CONFIG:e}=this._config.options;this.anims.clear&&this.anims.clear(),this.shadow.hide(),timeline.createTask({start:0,duration:e.dropTime,data:[1,1e-5,t.HIDE,1500],object:this,onTimeUpdate:this.onScaling,onTimeStart:this.onTouchedDropStart,onTimeEnd:this.onTouchedDropEnd,recycle:this.anims}),this.debugArea&&this.debugArea.remove()}apart(t){const{LAYERS:e,FRUIT_CONFIG:r}=this._config.options;this.anims.clear&&this.anims.clear(),this.image.hide(),this.shadow.hide(),this.aparted=!0;const h=r.infos[this.type],{cutImages:p,width:E,height:O,radius:L,fixAngle:w}=h,S=this._layerManager.createImage.saturate(this._layerManager,this.startX-L,this.startY-L,E,O);t=(t%180+360+w)%360,this.bImage1=S(e.FRUIT,p[0]),this.bImage2=S(e.FRUIT,p[1]),[this.bImage1,this.bImage2].invoke("rotate",t),this.apartAngle=t,timeline.createTask({start:0,duration:r.dropTime,object:this,onTimeUpdate:this.onBrokenDropUpdate,onTimeStart:this.onBrokenDropStart,onTimeEnd:this.onBrokenDropEnd,recycle:this.anims}),this.debugArea&&this.debugArea.remove()}remove(){const{IS_TOUCH:t,MESSAGES:e}=this._config.options;t&&this.removeClickHandler(),this.anims.clear&&this.anims.clear(),this.image&&(this.image.remove(),this.shadow.remove(),this.debugArea&&this.debugArea.remove()),this.bImage1&&(this.bImage1.remove(),this.bImage2.remove());const r=FruitFactory.fruitCache.indexOf(this);r>-1&&FruitFactory.fruitCache.splice(r,1);for(const h in this)typeof this[h]=="function"?this[h]=function(p){return function(){throw new Error("method "+p+" has been removed")}}(h):delete this[h];message.postMessage(e.FRUIT_REMOVE,this)}onShowStart(){this.image.show(),this.shadow.show()}onScaling(t,e,r,h,p=500){this.image.scale(h=this.zoomAnim(t,e,r-e,p),h),this.shadow.scale(h,h)}onHideEnd(){this.remove()}onRotating(t){const e=Array.isArray(this.rotateSpeed)?this.rotateSpeed[randomNumber(this.rotateSpeed.length)]:this.rotateSpeed;this.image.rotate(e*t/1e3%360,!0)}onTouchedDropStart(){const{viewportHeight:t,viewportWidth:e}=viewportSize;this.touchedTargetX=randomNumber(e)-175,this.touchedTargetY=t,this.touchedPosX=this.originX,this.touchedPosY=this.originY;for(let r=FruitFactory.fruitCache.length-1;r>=0;r--)FruitFactory.fruitCache[r]===this&&FruitFactory.fruitCache.splice(r,1)}onTouchedDropEnd(){this.remove()}onBrokenDropUpdate(t){const{FRUIT_CONFIG:e}=this._config.options,r=this.radius;this.bImage1.attr({x:this.linearAnim(t,this.brokenPosX-r,this.brokenTargetX1,e.dropTime),y:this.dropAnim(t,this.brokenPosY-r,this.brokenTargetY1-this.brokenPosY+r,e.dropTime)}).rotate(this.linearAnim(t,this.apartAngle,this.bImage1RotateAngle,e.dropTime),!0),this.bImage2.attr({x:this.linearAnim(t,this.brokenPosX-r,this.brokenTargetX2,e.dropTime),y:this.dropAnim(t,this.brokenPosY-r,this.brokenTargetY2-this.brokenPosY+r,e.dropTime)}).rotate(this.linearAnim(t,this.apartAngle,this.bImage2RotateAngle,e.dropTime),!0)}onBrokenDropStart(){const{FRUIT_CONFIG:t}=this._config.options,{viewportHeight:e}=viewportSize;this.brokenTargetX1=-(randomNumber(t.dropXScope)+75),this.brokenTargetX2=randomNumber(t.dropXScope+75),this.brokenTargetY1=e,this.brokenTargetY2=e,this.brokenPosX=this.originX,this.brokenPosY=this.originY,this.bImage1RotateAngle=-randomNumber(150)-50,this.bImage2RotateAngle=randomNumber(150)+50;for(let r=FruitFactory.fruitCache.length-1;r>=0;r--)FruitFactory.fruitCache[r]===this&&FruitFactory.fruitCache.splice(r,1)}onBrokenDropEnd(){this.remove()}onShotOuting(t){const{FRUIT_CONFIG:e}=this._config.options;this.pos(this.linearAnim(t,this.shotOutStartX,this.shotOutEndX-this.shotOutStartX,e.dropTime),this.fallOffAnim(t,this.shotOutStartY,this.shotOutEndY-this.shotOutStartY,e.dropTime))}onShotOutStart(){}onShotOutEnd(){this.fallOff(0,this.fallOffToX)}onFalling(t){const{FRUIT_CONFIG:e}=this._config.options;this.pos(this.linearAnim(t,this.brokenPosX,this.fallTargetX-this.brokenPosX,e.dropTime),this.dropAnim(t,this.brokenPosY,this.fallTargetY-this.brokenPosY,e.dropTime))}onFallStart(){this.brokenPosX=this.originX,this.brokenPosY=this.originY}onFallEnd(){const{MESSAGES:t}=this._config.options;message.postMessage(t.FRUIT_FALL_OFF,this),this.remove()}}const Ct=class me{constructor(t,e,r,h){this._config=t,this._control=e,this._layerManager=r,this._flash=h,this._safeNumber=0,this.safeNumber=this._config.options.FIRST_SAFE_FRUIT_NUMBER}get safeNumber(){return this._safeNumber}set safeNumber(t){this._safeNumber=Math.max(t,0)}create(t,e){const r=this.getType(),h=new Fruit(this._config,this._control,this._layerManager,this._flash,{type:r,originX:t,originY:e}).set();return me.fruitCache.unshift(h),h}getType(){const{FRUIT_CONFIG:{types:t}}=this._config.options,e=[t.FIRST,t.SECOND,t.THIRD,t.FOURTH,t.FIFTH],r=randomNumber(8)===4&&!this.safeNumber;return this.safeNumber=this.safeNumber-1,r?t.BOOM:e[randomNumber(e.length)]}getFruitInView(){return me.fruitCache}};Ct.fruitCache=[];let FruitFactory=Ct;function init$1(){const i={defaults:{autoplay:!1,duration:5e3,formats:[],loop:!1,placeholder:"--",preload:"metadata",volume:80},types:{mp3:"audio/mpeg",ogg:"audio/ogg",wav:"audio/wav",aac:"audio/aac",m4a:"audio/x-m4a"},sounds:[],el:document.createElement("audio"),sound:function(t,e){e=e||{};let r=0,h=[],p={},E=i.isSupported();this.load=function(){return E?(this.sound.load(),this):this},this.play=function(){return E?(this.sound.play().catch(console.warn),this):this},this.togglePlay=function(){return E?(this.sound.paused?this.sound.play().catch(console.warn):this.sound.pause(),this):this},this.pause=function(){return E?(this.sound.pause(),this):this},this.isPaused=function(){return E?this.sound.paused:null},this.stop=function(){return E?(this.setTime(this.getDuration()),this.sound.pause(),this):this},this.isEnded=function(){return E?this.sound.ended:null},this.loop=function(){return E?(this.sound.loop="loop",this.bind("ended.buzzloop",function(){this.currentTime=0,this.play()}),this):this},this.unloop=function(){return E?(this.sound.removeAttribute("loop"),this.unbind("ended.buzzloop"),this):this},this.mute=function(){return E?(this.sound.muted=!0,this):this},this.unmute=function(){return E?(this.sound.muted=!1,this):this},this.toggleMute=function(){return E?(this.sound.muted=!this.sound.muted,this):this},this.isMuted=function(){return E?this.sound.muted:null},this.setVolume=function(S){return E?(S<0&&(S=0),S>100&&(S=100),this.volume=S,this.sound.volume=S/100,this):this},this.getVolume=function(){return E?this.volume:this},this.increaseVolume=function(S){return this.setVolume(this.volume+(S||1))},this.decreaseVolume=function(S){return this.setVolume(this.volume-(S||1))},this.setTime=function(S){return E?(this.whenReady(function(){this.sound.currentTime=S}),this):this},this.getTime=function(){if(!E)return null;const S=Math.round(this.sound.currentTime*100)/100;return isNaN(S)?i.defaults.placeholder:S},this.setPercent=function(S){return E?this.setTime(i.fromPercent(S,this.sound.duration)):this},this.getPercent=function(){if(!E)return null;const S=Math.round(i.toPercent(this.sound.currentTime,this.sound.duration));return isNaN(S)?i.defaults.placeholder:S},this.setSpeed=function(S){if(!E)return this;this.sound.playbackRate=S},this.getSpeed=function(){return E?this.sound.playbackRate:null},this.getDuration=function(){if(!E)return null;const S=Math.round(this.sound.duration*100)/100;return isNaN(S)?i.defaults.placeholder:S},this.getPlayed=function(){return E?O(this.sound.played):null},this.getBuffered=function(){return E?O(this.sound.buffered):null},this.getSeekable=function(){return E?O(this.sound.seekable):null},this.getErrorCode=function(){return E&&this.sound.error?this.sound.error.code:0},this.getErrorMessage=function(){if(!E)return null;switch(this.getErrorCode()){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return null}},this.getStateCode=function(){return E?this.sound.readyState:null},this.getStateMessage=function(){if(!E)return null;switch(this.getStateCode()){case 0:return"HAVE_NOTHING";case 1:return"HAVE_METADATA";case 2:return"HAVE_CURRENT_DATA";case 3:return"HAVE_FUTURE_DATA";case 4:return"HAVE_ENOUGH_DATA";default:return null}},this.getNetworkStateCode=function(){return E?this.sound.networkState:null},this.getNetworkStateMessage=function(){if(!E)return null;switch(this.getNetworkStateCode()){case 0:return"NETWORK_EMPTY";case 1:return"NETWORK_IDLE";case 2:return"NETWORK_LOADING";case 3:return"NETWORK_NO_SOURCE";default:return null}},this.set=function(S,v){return E?(this.sound[S]=v,this):this},this.get=function(S){return E?S?this.sound[S]:this.sound:null},this.bind=function(S,v){if(!E)return this;S=S.split(" ");const U=this,F=function(X){v.call(U,X)};for(let X=0;X<S.length;X++){let M=S[X],W=M;M=W.split(".")[0],h.push({idx:W,func:F}),this.sound.addEventListener(M,F,!0)}return this},this.unbind=function(S){if(!E)return this;S=S.split(" ");for(let v=0;v<S.length;v++){const U=S[v],F=U.split(".")[0];for(let X=0;X<h.length;X++){const M=h[X].idx.split(".");(h[X].idx===U||M[1]&&M[1]===U.replace(".",""))&&(this.sound.removeEventListener(F,h[X].func,!0),h.splice(X,1))}}return this},this.bindOnce=function(S,v){if(!E)return this;const U=this;p[r++]=!1,this.bind(r+S,function(){p[r]||(p[r]=!0,v.call(U)),U.unbind(r+S)})},this.trigger=function(S){if(!E)return this;S=S.split(" ");for(let v=0;v<S.length;v++){const U=S[v];for(let F=0;F<h.length;F++){const X=h[F].idx.split(".");if(h[F].idx===U||X[0]&&X[0]===U.replace(".","")){const M=document.createEvent("HTMLEvents");M.initEvent(X[0],!1,!0),this.sound.dispatchEvent(M)}}}return this},this.fadeTo=function(S,v,U){if(!E)return this;v instanceof Function?(U=v,v=i.defaults.duration):v=v||i.defaults.duration;const F=this.volume,X=v/Math.abs(F-S),M=this;this.play();function W(){setTimeout(function(){F<S&&M.volume<S?(M.setVolume(M.volume+=1),W()):F>S&&M.volume>S?(M.setVolume(M.volume-=1),W()):U instanceof Function&&U.apply(M)},X)}return this.whenReady(function(){W()}),this},this.fadeIn=function(S,v){return E?this.setVolume(0).fadeTo(100,S,v):this},this.fadeOut=function(S,v){return E?this.fadeTo(0,S,v):this},this.fadeWith=function(S,v){return E?(this.fadeOut(v,function(){this.stop()}),S.play().fadeIn(v),this):this},this.whenReady=function(S){if(!E)return null;const v=this;this.sound.readyState===0?this.bind("canplay.buzzwhenready",function(){S.call(v)}):S.call(v)};function O(S){const v=[],U=S.length-1;for(let F=0;F<=U;F++)v.push({start:S.start(U),end:S.end(U)});return v}function L(S){return S.split(".").pop()}function w(S,v){const U=document.createElement("source");U.src=v,i.types[L(v)]&&(U.type=i.types[L(v)]),S.appendChild(U)}if(E&&t){for(const S in i.defaults)i.defaults.hasOwnProperty(S)&&(e[S]=e[S]||i.defaults[S]);if(this.sound=document.createElement("audio"),t instanceof Array)for(const S in t)t.hasOwnProperty(S)&&w(this.sound,t[S]);else if(e.formats.length)for(const S in e.formats)e.formats.hasOwnProperty(S)&&w(this.sound,t+"."+e.formats[S]);else w(this.sound,t);e.loop&&this.loop(),e.autoplay&&(this.sound.autoplay="autoplay"),e.preload===!0?this.sound.preload="auto":e.preload===!1?this.sound.preload="none":this.sound.preload=e.preload,this.setVolume(e.volume),i.sounds.push(this)}},group:function(t){t=r(t,arguments),this.getSounds=function(){return t},this.add=function(h){h=r(h,arguments);for(let p=0;p<h.length;p++)t.push(h[p])},this.remove=function(h){h=r(h,arguments);for(let p=0;p<h.length;p++)for(let E=0;E<t.length;E++)if(t[E]==h[p]){delete t[E];break}},this.load=function(){return e("load"),this},this.play=function(){return e("play"),this},this.togglePlay=function(){return e("togglePlay"),this},this.pause=function(h){return e("pause",h),this},this.stop=function(){return e("stop"),this},this.mute=function(){return e("mute"),this},this.unmute=function(){return e("unmute"),this},this.toggleMute=function(){return e("toggleMute"),this},this.setVolume=function(h){return e("setVolume",h),this},this.increaseVolume=function(h){return e("increaseVolume",h),this},this.decreaseVolume=function(h){return e("decreaseVolume",h),this},this.loop=function(){return e("loop"),this},this.unloop=function(){return e("unloop"),this},this.setTime=function(h){return e("setTime",h),this},this.setduration=function(h){return e("setduration",h),this},this.set=function(h,p){return e("set",h,p),this},this.bind=function(h,p){return e("bind",h,p),this},this.unbind=function(h){return e("unbind",h),this},this.bindOnce=function(h,p){return e("bindOnce",h,p),this},this.trigger=function(h){return e("trigger",h),this},this.fade=function(h,p,E,O){return e("fade",h,p,E,O),this},this.fadeIn=function(h,p){return e("fadeIn",h,p),this},this.fadeOut=function(h,p){return e("fadeOut",h,p),this};function e(){const h=r(null,arguments),p=h.shift();for(let E=0;E<t.length;E++)t[E][p].apply(t[E],h)}function r(h,p){return h instanceof Array?h:Array.prototype.slice.call(p)}},all:function(){return new i.group(i.sounds)},isSupported:function(){return!!i.el.canPlayType},isOGGSupported:function(){return!!i.el.canPlayType&&i.el.canPlayType('audio/ogg; codecs="vorbis"')},isWAVSupported:function(){return!!i.el.canPlayType&&i.el.canPlayType('audio/wav; codecs="1"')},isMP3Supported:function(){return!!i.el.canPlayType&&i.el.canPlayType("audio/mpeg;")},isAACSupported:function(){return!!i.el.canPlayType&&(i.el.canPlayType("audio/x-m4a;")||i.el.canPlayType("audio/aac;"))},toTimer:function(t,e){let r,h,p;return r=Math.floor(t/3600),r=isNaN(r)?"--":r>=10?r:"0"+r,h=Math.floor(e?t/60%60:t/60),h=isNaN(h)?"--":h>=10?h:"0"+h,p=Math.floor(t%60),p=isNaN(p)?"--":p>=10?p:"0"+p,e?r+":"+h+":"+p:h+":"+p},fromTimer:function(t){const e=t.toString().split(":");return e&&e.length===3&&(t=parseInt(e[0],10)*3600+parseInt(e[1],10)*60+parseInt(e[2],10)),e&&e.length===2&&(t=parseInt(e[0],10)*60+parseInt(e[1],10)),t},toPercent:function(t,e,r){const h=Math.pow(10,r||0);return Math.round(t*100/e*h)/h},fromPercent:function(t,e,r){const h=Math.pow(10,r||0);return Math.round(e/100*t*h)/h}};return i}const buzz=init$1();class Sound{constructor(t,e){this._src=t,this._soundButton=e,this.sound=new buzz.sound(this._src,{formats:["ogg","mp3"],preload:!0,autoload:!0,loop:!1})}play(){this.sound.setPercent(0),this._soundButton.isOn&&this.sound.play(),this._soundButton.isOn&&this.sound.fadeIn(500)}stop(){this._soundButton.isOn?this.sound.fadeOut(1e3,this.sound.pause.bind(this.sound)):this.sound.stop()}}class SoundFactory{constructor(t){this._soundButton=t}create(t){return new Sound(t,this._soundButton)}}class LayerManager{constructor(t){this._config=t,this.num=2,this.layers={};const{LAYERS:e}=this._config.options;this.zIndexes={[e.PRELOAD]:this.zi(),[e.DEFAULT]:this.zi(),[e.FLASH]:this.zi(),[e.JUICE]:this.zi(),[e.KNIFE]:this.zi(),[e.LIGHT]:this.zi(),[e.FRUIT]:this.zi(),[e.MASK]:this.zi(),[e.START_SCREEN]:this.zi(),[e.RESULT_SCREEN]:this.zi(),[e.BRAND_INTRO]:this.zi(),[e.BRAND_QUESTION]:this.zi()}}createText(t,e,r,h,p="#fff",E="14px",O="normal",L="start"){const w=this.getLayer(t),{FONT_FAMILY:S}=this._config.options;return w.text(r,h,e).attr({"font-family":S,fill:p,"font-size":E,"font-weight":O,"text-anchor":L})}getLayer(t){const{viewportHeight:e,viewportWidth:r}=viewportSize,{rootElement:h}=this._config,{LAYERS:p}=this._config.options;t=t||p.DEFAULT;let E=this.layers[t],O;return E||(O=makeElement("div",{class:"layer","data-name":t,style:"z-index: "+(this.zIndexes[t]||0)+";"}),Ucren.Element(h).add(O),E=this.layers[t]=Raphael(O,r,e),E)}createImage(t,e,r,h,p,E,O="none"){return this.getLayer(t).image(e,r,h,p,E,O)}hideLayer(t){const e=this.getLayer(t);e&&e.canvas&&e.canvas.parentNode&&(e.canvas.parentNode.style.display="none")}showLayer(t){const e=this.getLayer(t);e&&e.canvas&&e.canvas.parentNode&&(e.canvas.parentNode.style.display="block")}zi(){return this.num=++this.num||2}}class Background{constructor(t,e){this._config=t,this._layerManager=e,this.time=null,this.getWobble=()=>{const r=randomNumber(12)-6,h=randomNumber(12)-6;this.image.attr({x:r,y:h})},this.stop=()=>{this.time&&this.time.stop(),this.image.attr({x:0,y:0})}}set(){const{BACKGROUND_CONFIG:t,LAYERS:e}=this._config.options;this.image=this._layerManager.createImage(e.DEFAULT,t.image,t.x,t.y,t.width,t.height,t.preserveAspectRatio)}wobble(){this.time=timeline._setInterval(this.getWobble,50)}}class Flash{constructor(t,e,r){this._config=t,this._layerManager=e,this._soundFactory=r,this.xDiff=0,this.yDiff=0,this.switchOn=!0,this.anim=quadratic.cio,this.anims=[];const{SOUNDS:h}=this._config.options;this.snd=this._soundFactory.create(h[SoundNames.SPLATTER])}set(){if(!this.switchOn)return!1;const{LAYERS:t,FLASH_CONFIG:e}=this._config.options;this.image=this._layerManager.createImage(t.FLASH,e.image,0,0,e.width,e.height).hide()}showAt(t,e,r){const{FLASH_CONFIG:h}=this._config.options;if(!this.switchOn)return!1;this.image&&this.image.rotate(r,!0).scale(1e-5,1e-5).attr({x:t+this.xDiff,y:e+this.yDiff}).show(),this.anims.clear&&this.anims.clear(),this.snd&&this.snd.play(),timeline.createTask({start:0,duration:h.duration,data:[1e-5,1],object:this,onTimeUpdate:this.onTimeUpdate,recycle:this.anims}),timeline.createTask({start:h.duration,duration:h.duration,data:[1,1e-5],object:this,onTimeUpdate:this.onTimeUpdate,recycle:this.anims})}onTimeUpdate(t,e,r,h){if(!this.switchOn)return!1;const{FLASH_CONFIG:p}=this._config.options;this.image.scale(h=this.anim(t,e,r-e,p.duration),h)}}class KnifePart{constructor(t,e,r,h){this._config=t,this._layerManager=e,this._knifes=r,this.conf=h,this.sx=this.conf.sx,this.sy=this.conf.sy,this.ex=this.conf.ex,this.ey=this.conf.ey}set(){const{KNIFE_PART_CONFIG:t,LAYERS:e}=this._config.options,r=this._layerManager.getLayer(e.KNIFE);let h,p,E,O,L,w,S,v;return h=this.sx,p=this.sy,E=this.ex,O=this.ey,L=h-E,w=p-O,S=Math.abs(L),v=Math.abs(w),S>v?(h+=L<0?-1:1,p+=w<0?-(v/S):v/S):(h+=L<0?-(S/v):S/v,p+=w<0?-1:1),this.line=r.path("M"+h+","+p+"L"+E+","+O).attr({stroke:t.color,"stroke-width":t.stroke+"px"}),timeline.createTask({start:0,duration:t.life,object:this,onTimeUpdate:this.update,onTimeEnd:this.end,recycle:this._knifes.anims}),this}update(t){const{KNIFE_PART_CONFIG:e}=this._config.options;this.line.attr("stroke-width",e.stroke*(1-t/e.life)+"px")}end(){this.line.remove();const t=this._knifes.indexOf(this);t&&this._knifes.splice(t,1)}}class Knifes{constructor(t,e){this._config=t,this._layerManager=e,this._knifeParts=[],this.lastX=null,this.lastY=null,this.switchState=!0,this._anims=[]}get anims(){return this._anims}newKnife(){this.lastX=null,this.lastY=null}through(t,e){if(!this.switchState)return;let r=null;return this.lastX!==null&&(this.lastX!==t||this.lastY!==e)&&(this.push(new KnifePart(this._config,this._layerManager,this,{sx:this.lastX,sy:this.lastY,ex:t,ey:e}).set()),r=[this.lastX,this.lastY,t,e]),this.lastX=t,this.lastY=e,r}pause(){this.anims.clear&&this.anims.clear(),this.switchOff()}switchOff(){this.switchState=!1}switchOn(){this.switchState=!0,this.endAll()}endAll(){for(let t=this._knifeParts.length-1;t>=0;t--)this._knifeParts[t].end()}push(t){this._knifeParts.push(t)}indexOf(t){return this._knifeParts.indexOf(t)}splice(t,e){this._knifeParts.splice(t,e)}}const VIBRATION_PATTERNS={DEFAULT:[100],SOUND_BUTTON:[30],FRUIT:[30],GAME_OVER:[10,0,10,0,100,0,600],BOOM:[10,0,10,0,100,0,600,0,10,0,10,0,100,0,400]};class Vibration{vibrate(t=VIBRATION_PATTERNS.DEFAULT){navigator.vibrate&&navigator.vibrate(t)}soundButton(){this.vibrate(VIBRATION_PATTERNS.SOUND_BUTTON)}fruit(){this.vibrate(VIBRATION_PATTERNS.FRUIT)}gameOver(){this.vibrate(VIBRATION_PATTERNS.GAME_OVER)}boom(){this.vibrate(VIBRATION_PATTERNS.BOOM)}}const vibration=new Vibration;class Lose{constructor(t,e){this._config=t,this._layerManager=e,this.anim=exponential.co,this.back=back.co,this.info=[],this.number=0,this.anims=[],this.animLength=this._config.options.LOSE_CONFIG.animLength}set(){const{LAYERS:t,LOSE_CONFIG:e}=this._config.options;this.o1=this._layerManager.createImage(t.DEFAULT,e.conf[0].src,e.conf[0].sx,e.conf[0].y,e.conf[0].w,e.conf[0].h).hide(),this.o2=this._layerManager.createImage(t.DEFAULT,e.conf[1].src,e.conf[1].sx,e.conf[1].y,e.conf[1].w,e.conf[1].h).hide(),this.o3=this._layerManager.createImage(t.DEFAULT,e.conf[2].src,e.conf[2].sx,e.conf[2].y,e.conf[2].w,e.conf[2].h).hide(),this.info=[{image:this.o1,config:e.conf[0]},{image:this.o2,config:e.conf[1]},{image:this.o3,config:e.conf[2]}]}show(t){const{LOSE_CONFIG:e,MODES:r}=this._config.options;timeline.createTask({start:t,duration:this.animLength,data:[r.SHOW,e.conf[0].sx,e.conf[0].ex,e.conf[1].sx,e.conf[1].ex,e.conf[2].sx,e.conf[2].ex],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}hide(t){const{LOSE_CONFIG:e,MODES:r}=this._config.options;timeline.createTask({start:t,duration:this.animLength,data:[r.HIDE,e.conf[0].ex,e.conf[0].sx,e.conf[1].ex,e.conf[1].sx,e.conf[2].ex,e.conf[2].sx],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}showLoseAt(){const{MESSAGES:t,SCENES:e}=this._config.options,{image:r,config:h}=this.info[this.number]||{},p=!!r&&r.attr("src")!==h.srcF;p&&r.attr("src",h.srcF).scale(1e-5,1e-5),p&&this.scaleImage(r),p&&vibration.vibrate(),this.number++,this.number===3&&(vibration.gameOver(),this.number=0,timeline.setTimeout(()=>{message.postMessage(t.GAME_OVER),message.postMessage(t.SCENE_SWITCH_SCENE,e.GAME_OVER)},1e3))}scaleImage(t){t.myOnScaling=t.myOnScaling||((e,r)=>{t.scale(r=this.back(e,1e-5,1-1e-5,500),r)}),t.myOnScaleEnd=t.myOnScaleEnd||function(){t.scale(1,1)},timeline.createTask({start:0,duration:500,object:t,onTimeUpdate:t.myOnScaling,onTimeEnd:t.myOnScaleEnd,recycle:this.anims})}onTimeUpdate(t,e,r,h,p,E,O,L){this.o1.attr("x",this.anim(t,r,h-r,this.animLength)),this.o2.attr("x",this.anim(t,p,E-p,this.animLength)),this.o3.attr("x",this.anim(t,O,L-O,this.animLength))}onTimeStart(t){const{MODES:e}=this._config.options;t===e.SHOW&&([this.o1,this.o2,this.o3].invoke(t),this.resurrect())}onTimeEnd(t){const{MODES:e}=this._config.options;t===e.HIDE&&([this.o1,this.o2,this.o3].invoke(t),this.die())}resurrect(){this.info.forEach(({image:t,config:e})=>{t.attr("src",e.src)})}die(){this.info.forEach(({image:t,config:e})=>{t.attr("src",e.srcF)})}}class Score{constructor(t,e){this._config=t,this._layerManager=e,this.setTimeout=timeline.setTimeout.bind(timeline),this.anim=exponential.co,this.anims=[]}set(){const{LAYERS:t,SCORE_CONFIG:e}=this._config.options;this.image=this._layerManager.createImage(t.DEFAULT,e.image,e.imageSx,e.imageY,e.imageW,e.imageH).hide(),this.text1=this._layerManager.createText(t.DEFAULT,e.text1Value,e.text1Sx,e.text1Y,e.text1Fill,e.text1Size,e.text1Weight).hide(),this.text2=this._layerManager.createText(t.DEFAULT,e.text2Prefix+e.text2Value,e.text2Sx,e.text2Y,e.text2Fill,e.text2Size,e.text2Weight).hide()}show(t){const{MODES:e,SCORE_CONFIG:r}=this._config.options;timeline.createTask({start:t,duration:r.animLength,data:[e.SHOW,r.imageSx,r.imageEx,r.text1Sx,r.text1Ex,r.text2Sx,r.text2Ex],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTime,onTimeEnd:this.onTime,recycle:this.anims})}hide(t){const{MODES:e,SCORE_CONFIG:r}=this._config.options;timeline.createTask({start:t,duration:r.animLength,data:[e.HIDE,r.imageEx,r.imageSx,r.text1Ex,r.text1Sx,r.text2Ex,r.text2Sx],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTime,onTimeEnd:this.onTime,recycle:this.anims})}number(t){this.text1.attr("text",t||0),this.image.scale(1.2,1.2),this.setTimeout(()=>{this.image.scale(1,1)},60)}onTimeUpdate(t,e,r,h,p,E,O,L){const{SCORE_CONFIG:w}=this._config.options;this.image.attr("x",this.anim(t,r,h-r,w.animLength)),this.text1.attr("x",this.anim(t,p,E-p,w.animLength)),this.text2.attr("x",this.anim(t,O,L-O,w.animLength))}onTime(t){[this.image,this.text1,this.text2].invoke(t)}}class SoundButton{constructor(t,e){this._config=t,this._layerManager=e,this.anims=[],this.anim=exponential.co,this.isOn=!1}set(){const{LAYERS:t,SOUND_BUTTON_CONFIG:e,MESSAGES:r}=this._config.options;this.startSoundButton=this._layerManager.createImage(t.START_SCREEN,this.isOn?e.imageOn:e.imageOff,e.imageX,e.imageStartY,e.imageWidth,e.imageHeight).hide(),this.startText=this._layerManager.createText(t.START_SCREEN,this.isOn?e.textValueOff:e.textValueOn,e.textX,e.textStartY,e.textFill,e.textSize,e.textWeight,e.textAnchor),this.startGroup=this._layerManager.getLayer(t.START_SCREEN).set(),this.startGroup.push(this.startSoundButton,this.startText),this.startGroup.click(()=>{this.toggle(),message.postMessage(r.TOGGLE_SOUND,null),vibration.soundButton()}),this.gameSoundButton=this._layerManager.createImage(t.FRUIT,this.isOn?e.imageOn:e.imageOff,e.imageX,e.imageStartY,e.imageWidth,e.imageHeight).hide(),this.gameText=this._layerManager.createText(t.FRUIT,this.isOn?e.textValueOff:e.textValueOn,e.textX,e.textStartY,e.textFill,e.textSize,e.textWeight,e.textAnchor),this.gameGroup=this._layerManager.getLayer(t.FRUIT).set(),this.gameGroup.push(this.gameSoundButton,this.gameText),this.gameGroup.click(()=>{this.toggle(),message.postMessage(r.TOGGLE_SOUND,null),vibration.soundButton()}),this.resultSoundButton=this._layerManager.createImage(t.RESULT_SCREEN,this.isOn?e.imageOn:e.imageOff,e.imageX,e.imageStartY,e.imageWidth,e.imageHeight).hide(),this.resultText=this._layerManager.createText(t.RESULT_SCREEN,this.isOn?e.textValueOff:e.textValueOn,e.textX,e.textStartY,e.textFill,e.textSize,e.textWeight,e.textAnchor),this.resultGroup=this._layerManager.getLayer(t.START_SCREEN).set(),this.resultGroup.push(this.resultSoundButton,this.resultText),this.resultGroup.click(()=>{this.toggle(),message.postMessage(r.TOGGLE_SOUND,null),vibration.soundButton()})}show(t){const{SOUND_BUTTON_CONFIG:e,MODES:r}=this._config.options;timeline.createTask({start:t,duration:e.animLength,data:[r.SHOW,e.imageStartY,e.imageHomeEndY,e.textStartY,e.textHomeEndY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}hide(t){const{SOUND_BUTTON_CONFIG:e,MODES:r}=this._config.options;timeline.createTask({start:t,duration:e.animLength,data:[r.SHOW,e.imageHomeEndY,e.imageStartY,e.textHomeEndY,e.textStartY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}showHomeSoundButton(t){const{SOUND_BUTTON_CONFIG:e,MODES:r}=this._config.options;timeline.createTask({start:t,duration:e.animLength,data:[r.SHOW,e.imageStartY,e.imageHomeEndY,e.textStartY,e.textHomeEndY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}showResultSoundButton(t){const{SOUND_BUTTON_CONFIG:e,MODES:r}=this._config.options;timeline.createTask({start:t,duration:e.animLength,data:[r.SHOW,e.imageStartY,e.imageResultEndY,e.textStartY,e.textResultEndY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}showGameSoundButton(t){const{SOUND_BUTTON_CONFIG:e,MODES:r}=this._config.options;timeline.createTask({start:t,duration:e.animLength,data:[r.SHOW,e.imageStartY,e.imageGameEndY,e.textStartY,e.textGameEndY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}hideHomeSoundButton(t){const{SOUND_BUTTON_CONFIG:e,MODES:r}=this._config.options;timeline.createTask({start:t,duration:e.animLength,data:[r.HIDE,e.imageHomeEndY,e.imageStartY,e.textHomeEndY,e.textStartY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}hideResultSoundButton(t){const{SOUND_BUTTON_CONFIG:e,MODES:r}=this._config.options;timeline.createTask({start:t,duration:e.animLength,data:[r.HIDE,e.imageResultEndY,e.imageStartY,e.textResultEndY,e.textStartY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}hideGameSoundButton(t){const{SOUND_BUTTON_CONFIG:e,MODES:r}=this._config.options;timeline.createTask({start:t,duration:e.animLength,data:[r.HIDE,e.imageGameEndY,e.imageStartY,e.textGameEndY,e.textStartY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}onTimeUpdate(t,e,r,h,p,E){const{HOME_TEXT_CONFIG:O}=this._config.options;this.startSoundButton.attr("y",this.anim(t,r,h-r,O.animLength)),this.startText.attr("y",this.anim(t,p,E-p,O.animLength)),this.gameSoundButton.attr("y",this.anim(t,r,h-r,O.animLength)),this.gameText.attr("y",this.anim(t,p,E-p,O.animLength)),this.resultSoundButton.attr("y",this.anim(t,r,h-r,O.animLength)),this.resultText.attr("y",this.anim(t,p,E-p,O.animLength))}onTimeStart(t){const{MODES:e}=this._config.options;t===e.SHOW&&[this.startSoundButton,this.startText,this.gameSoundButton,this.gameText,this.resultSoundButton,this.resultText].invoke(t)}onTimeEnd(t){const{MODES:e}=this._config.options;t===e.HIDE&&[this.startSoundButton,this.startText,this.gameSoundButton,this.gameText,this.resultSoundButton,this.resultText].invoke(t)}toggle(){this.isOn?this.off():this.on()}on(){const{SOUND_BUTTON_CONFIG:t}=this._config.options;this.startText.attr("text",t.textValueOff),this.startSoundButton.attr("src",t.imageOn),this.gameText.attr("text",t.textValueOff),this.gameSoundButton.attr("src",t.imageOn),this.resultText.attr("text",t.textValueOff),this.resultSoundButton.attr("src",t.imageOn),this.isOn=!0}off(){const{SOUND_BUTTON_CONFIG:t}=this._config.options;this.startText.attr("text",t.textValueOn),this.startSoundButton.attr("src",t.imageOff),this.gameText.attr("text",t.textValueOn),this.gameSoundButton.attr("src",t.imageOff),this.resultText.attr("text",t.textValueOn),this.resultSoundButton.attr("src",t.imageOff),this.isOn=!1}}class PreloadFactory{constructor(t,e){this._config=t,this._displacementFactory=e,this.create=r=>{const{LAYERS:h}=this._config.options;this._displacementFactory.create({layer:h.PRELOAD,imageSrc:r,width:0,height:0,startX:0,startY:0,endX:0,endY:0,animMap:{},duration:0}).set()},this.URLs.forEach(this.create)}get URLs(){const{FRUIT_CONFIG:t,LOSE_CONFIG:e}=this._config.options;return[Object.values(t.infos).map(({image:r,cutImages:[h,p]})=>[r,h,p]).flat(),t.shadowImage,e.conf.map(({src:r})=>r)].flat().filter(Boolean)}}const stack={},cache={};class State{constructor(t){this.key=t}is(t){return stack[this.key]===t}isnot(t){return stack[this.key]!==t}ison(){return this.is(!0)}isoff(){return this.isnot(!0)}isunset(){return this.is(void 0)}set(t){stack[this.key]=t}get(){return stack[this.key]}on(){return this.set(!0),{keep:t=>{timeline.setTimeout(()=>this.set(!1),t)}}}off(){return this.set(!1),{keep:t=>{timeline.setTimeout(()=>this.set(!0),t)}}}}const state=i=>cache[i]?cache[i]:cache[i]=new State(i);class Collide{constructor(t){this._fruitFactory=t}checkSlice(t){const e=[];let r=0;return this._fruitFactory.getFruitInView().forEach(h=>{this.isLineIntersectingEllipse(t.slice(0,2),t.slice(2,4),[h.originX,h.originY],h.radius)&&(e[r++]=h)}),e}checkTouch(t){const e=[];let r=0;return this._fruitFactory.getFruitInView().forEach(h=>{this.isPointInsideEllipse(t,[h.originX,h.originY],h.radius)&&(e[r++]=h)}),e}isPointInsideEllipse(t,e,r){const h=t[0]-e[0],p=t[1]-e[1];return h*h+p*p<=r*r}isLineIntersectingEllipse(t,e,r,h,p=1){const E=this.calculateLineEllipseIntersections(t,e,r,h,p);return E&&(E[0]||E[1])}calculateLineEllipseIntersections(t,e,r,h,p=1){if(h<=0)return;const E=h,O=h*p,L=this.square(O)*this.square(t[0]-e[0])+this.square(E)*this.square(t[1]-e[1]);if(L<=0)return;const w=2*this.square(O)*(e[0]-t[0])*(t[0]-r[0])+2*this.square(E)*(e[1]-t[1])*(t[1]-r[1]),S=this.square(O)*this.square(t[0]-r[0])+this.square(E)*this.square(t[1]-r[1])-this.square(E)*this.square(O),v=this.solveQuadraticEquation(L,w,S);if(!v)return;const U=[[t[0]+v[0]*(e[0]-t[0]),t[1]+v[0]*(e[1]-t[1])],[t[0]+v[1]*(e[0]-t[0]),t[1]+v[1]*(e[1]-t[1])]];return this.isPointOnSegment(U[0],t,e)||(U[0]=null),this.isPointOnSegment(U[1],t,e)||(U[1]=null),U}isPointOnSegment(t,e,r){return t?this.getSign(t[0]-e[0])*this.getSign(t[0]-r[0])<=0&&this.getSign(t[1]-e[1])*this.getSign(t[1]-r[1])<=0:!1}square(t){return Math.pow(t,2)}getSign(t){return t<0?-1:t>0?1:0}solveQuadraticEquation(t,e,r){if(t===0)return;const h=e*e-4*t*r;if(h===0){const p=-e/(2*t);return[p,p]}else if(h>0){const p=Math.sqrt(h);return[(-e+p)/(2*t),(-e-p)/(2*t)]}}}class Control{constructor(t,e){this._config=t,this._knifes=e,this.canvasTop=0,this.canvasLeft=0,this.fix=()=>{const{viewportWidth:r,viewportHeight:h}=viewportSize;this.canvasLeft=(document.documentElement.clientWidth-r)/2,this.canvasTop=(document.documentElement.clientHeight-h)/2},this.dragHandler=(r,h,p,E,O)=>{const{MESSAGES:L,INTERACTION_MODE:w,INTERACTION_MODES:S}=this._config.options,v=p-this.canvasLeft,U=E-this.canvasTop;if(w===S.SLICE){const F=this._knifes.through(v,U);F&&message.postMessage(L.SLICE,F)}else w===S.TOUCH&&message.postMessage(L.TOUCH,[v,U])},this.startDragHandler=()=>{this._knifes.newKnife()}}init(){this.fixCanvasPos(),this.installDragger()}fixCanvasPos(){this.fix(),Ucren.addEvent(window,"resize",this.fix)}installDragger(){const t=new Ucren.BasicDrag({type:"calc"});t.on("returnValue",this.dragHandler),t.on("startDrag",this.startDragHandler),t.bind(document.documentElement)}}class Light{constructor(t,e){this._config=t,this._layerManager=e,this.lights=[],this.indexes=[],this.overWhiteLight=()=>{const{LAYERS:p,LIGHTS_CONFIG:E,MESSAGES:O,SCENES:L}=this._config.options,w=this._layerManager.getLayer(p.MASK),{viewportHeight:S,viewportWidth:v}=viewportSize;message.postMessage(O.OVER_WHITE_LIGHT_SHOW),this.removeLights();const U=E.maskAppearanceTime,F=w.rect(0,0,v,S).attr({fill:E.fill,stroke:"none"}),X={onTimeUpdate:function(M){F.attr("opacity",1-M/U)},onTimeEnd:()=>{F.remove(),message.postMessage(O.GAME_OVER),message.postMessage(O.SCENE_SWITCH_SCENE,L.GAME_OVER),this._layerManager.hideLayer(p.LIGHT),this._layerManager.hideLayer(p.MASK)}};this._layerManager.showLayer(p.MASK),timeline.createTask({start:0,duration:U,object:X,onTimeUpdate:X.onTimeUpdate,onTimeEnd:X.onTimeEnd})};const{LAYERS:r,LIGHTS_CONFIG:h}=this._config.options;for(let p=0;p<h.number;p++)this.indexes[p]=p;this._layerManager.hideLayer(r.LIGHT),this._layerManager.hideLayer(r.MASK)}start(t,e){const{LIGHTS_CONFIG:r}=this._config.options,h=t.originX,p=t.originY,E=this.indexes.random();let O=0;const L=w=>{this.build(h,p,E[w])};for(let w=0;w<r.number;w++)timeline.setTimeout(()=>L(w),O+=r.appearanceTime);timeline.setTimeout(()=>{this.overWhiteLight(),e&&e()},O)}removeLights(){const t=this.lights.length;for(let e=0;e<t;e++)this.lights[e].remove();this.lights.length=0}build(t,e,r){const{LAYERS:h,LIGHTS_CONFIG:p}=this._config.options,E=this._layerManager.getLayer(h.LIGHT),{viewportWidth:O}=viewportSize;let L=r*36+randomNumber(10),w=L+5;L=Math.PI*L/180,w=Math.PI*w/180;const S=t+2*O*Math.cos(L),v=e+2*O*Math.sin(L),U=t+2*O*Math.cos(w),F=e+2*O*Math.sin(w),X=E.path(["M",t,e,"L",S,v,"L",U,F,"Z"]).attr({stroke:"none",fill:p.fill});this._layerManager.showLayer(h.LIGHT),this.lights.push(X)}}class Game{constructor(t,e,r,h,p,E,O,L){this._config=t,this._fruitFactory=e,this._layerManager=r,this._knifes=h,this._soundFactory=p,this._score=E,this._lose=O,this._background=L,this.scoreNumber=0,this.volleyNum=2,this.volleyMultipleNumber=5,this.fruits=[],this.gameInterval=null,this.barbette=()=>{if(this.fruits.length>=this.volleyNum)return;const{viewportHeight:U,viewportWidth:F}=viewportSize,X=randomNumber(F),M=randomNumber(F),W=U,H=this._fruitFactory.create(X,W).shotOut(0,M);this.fruits.push(H),this.snd.play(),this.barbette()},this._light=new Light(this._config,this._layerManager);const{FRUIT_CONFIG:w,MESSAGES:S,SOUNDS:v}=this._config.options;this.snd=this._soundFactory.create(v[SoundNames.THROW]),this.boomSnd=this._soundFactory.create(v[SoundNames.BOOM]),message.addEventListener(S.FRUIT_REMOVE,U=>{const F=this.fruits.indexOf(U);F>-1&&this.fruits.splice(F,1)}),message.addEventListener(S.FRUIT_FALL_OUT_OF_VIEWER,U=>{U.type!==w.types.BOOM&&this._lose.showLoseAt()}),message.addEventListener(S.GAME_OVER,()=>{this.gameOver(),this._knifes.switchOn()}),message.addEventListener(S.OVER_WHITE_LIGHT_SHOW,()=>{this._knifes.endAll();for(let U=this.fruits.length-1;U>=0;U--)this.fruits[U].remove();this._background.stop()})}start(){const{STATE_KEYS:t,GAME_STATES:e,FIRST_SAFE_FRUIT_NUMBER:r}=this._config.options;this._lose.number=0,this._fruitFactory.safeNumber=r,this.scoreNumber=0,this.volleyNum=2,timeline.setTimeout(()=>{state(t.GAME_STATE).set(e.PLAYING),this.gameInterval=timeline._setInterval(this.barbette,1e3)},500)}gameOver(){const{STATE_KEYS:t,GAME_STATES:e}=this._config.options;state(t.GAME_STATE).set(e.OVER),this.gameInterval&&this.gameInterval.stop(),this.fruits.length=0}applyScore(t){t>this.volleyNum*this.volleyMultipleNumber&&this.volleyNum++,this.volleyMultipleNumber+=50}sliceAt(t,e){const{FRUIT_CONFIG:r,STATE_KEYS:h,GAME_STATES:p}=this._config.options;state(h.GAME_STATE).isnot(p.PLAYING)||(t.type===r.types.BOOM?this.onHitBoom(t):this.onHitFruit(t,e))}catchFruit(t){const{FRUIT_CONFIG:e,STATE_KEYS:r,GAME_STATES:h}=this._config.options;state(r.GAME_STATE).isnot(h.PLAYING)||(t.type===e.types.BOOM?this.onHitBoom(t):this.onHitFruit(t))}onHitFruit(t,e=0){const r=this.fruits.indexOf(t),{SCORE_MULTIPLIER:h}=this._config.options;t.broken(e),vibration.fruit(),r&&this.fruits.splice(r,1),this.scoreNumber+=h||0,this._score.number(this.scoreNumber),this.applyScore(this.scoreNumber)}onHitBoom(t){this._knifes.switchOn(),this._lose.die(),this.pauseAllFruit(),this.boomSnd.play(),vibration.boom(),this._light.start(t,this._background.stop)}pauseAllFruit(){this.gameInterval&&this.gameInterval.stop(),this._knifes.pause(),this.fruits.invoke("pause")}}class HomeScene{constructor(t,e){this._config=t,this._layerManager=e,this.anims=[],this.anim=exponential.co}set(){const{LAYERS:t,HOME_LOGO_CONFIG:e,HOME_MASK_CONFIG:r,HOME_TEXT_CONFIG:h,START_BUTTON_CONFIG:p,MESSAGES:E}=this._config.options;e.image&&(this.logo=this._layerManager.createImage(t.START_SCREEN,e.image,e.startX,e.startY,e.width,e.height).hide()),r.image&&(this.mask=this._layerManager.createImage(t.START_SCREEN,r.image,r.startX,r.startY,r.width,r.height).hide()),h.text1Value&&(this.text1=this._layerManager.createText(t.START_SCREEN,h.text1Value,h.text1Sx,h.text1Y,h.text1Fill,h.text1Size,h.text1Weight,h.text1Anchor).hide()),h.text2Value&&(this.text2=this._layerManager.createText(t.START_SCREEN,h.text2Value,h.text2Sx,h.text2Y,h.text2Fill,h.text2Size,h.text2Weight,h.text2Anchor).hide()),h.text3Value&&(this.text3=this._layerManager.createText(t.START_SCREEN,h.text3Value,h.text3Sx,h.text3Y,h.text3Fill,h.text3Size,h.text3Weight,h.text3Anchor).hide()),this.button=this._layerManager.createImage(t.START_SCREEN,p.image,p.startX,p.startY,p.width,p.height).hide(),this.buttonText=this._layerManager.createText(t.START_SCREEN,p.textValue,p.textStartX,p.textStartY,p.textFill,p.textSize,p.textWeight,p.textAnchor),this._group=this._layerManager.getLayer(t.START_SCREEN).set(),this._group.push(this.button,this.buttonText),this._group.click(()=>{message.postMessage(E.START_GAME),vibration.vibrate()}),this._layerManager.hideLayer(t.START_SCREEN)}show(t){const{MODES:e,HOME_LOGO_CONFIG:r,HOME_TEXT_CONFIG:h,START_BUTTON_CONFIG:p}=this._config.options;timeline.createTask({start:t,duration:r.duration,data:[e.SHOW,r.startY,r.endY,h.text1Sx,h.text1Ex,h.text2Sx,h.text2Ex,h.text3Sx,h.text3Ex,p.startY,p.endY,p.textStartY,p.textEndY],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}hide(t){const{MODES:e,HOME_LOGO_CONFIG:r,HOME_TEXT_CONFIG:h,START_BUTTON_CONFIG:p}=this._config.options;timeline.createTask({start:t,duration:r.duration,data:[e.SHOW,r.endY,r.startY,h.text1Ex,h.text1Sx,h.text2Ex,h.text2Sx,h.text3Ex,h.text3Sx,p.endY,p.startY,p.textEndY,p.textStartY],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}onTimeUpdate(t,e,r,h,p,E,O,L,w,S,v,U,F,X){const{HOME_LOGO_CONFIG:M,HOME_TEXT_CONFIG:W}=this._config.options;this.logo&&this.logo.attr("y",this.anim(t,r,h-r,M.duration)),this.text1&&this.text1.attr("x",this.anim(t,p,E-p,W.animLength)),this.text2&&this.text2.attr("x",this.anim(t,O,L-O,W.animLength)),this.text3&&this.text3.attr("x",this.anim(t,w,S-w,W.animLength)),this.button.attr("y",this.anim(t,v,U-v,W.animLength)),this.buttonText.attr("y",this.anim(t,F,X-F,W.animLength))}onTimeStart(t){const{MODES:e}=this._config.options,r=[this.button,this.buttonText];this.logo&&r.push(this.logo),this.text1&&r.push(this.text1),this.text2&&r.push(this.text2),this.text3&&r.push(this.text3),t===e.SHOW&&r.invoke(t)}onTimeEnd(t){const{MODES:e}=this._config.options,r=[this.button,this.buttonText];this.logo&&r.push(this.logo),this.text1&&r.push(this.text1),this.text2&&r.push(this.text2),this.text3&&r.push(this.text3),t===e.HIDE&&r.invoke(t)}}class GameOverScene{constructor(t,e){this._config=t,this._layerManager=e,this.anims=[]}set(){const{LAYERS:t,GAME_OVER_CONFIG:e}=this._config.options;this.image=this._layerManager.createImage(t.DEFAULT,e.image,e.x,e.y,e.width,e.height).hide().scale(1e-5,1e-5)}show(t){const{MODES:e}=this._config.options;timeline.createTask({start:t,duration:500,data:[1e-5,1,e.SHOW],object:this,onTimeUpdate:this.onZooming,onTimeStart:this.onZoomStart,onTimeEnd:this.onZoomEnd,recycle:this.anims})}hide(t){const{MODES:e}=this._config.options;timeline.createTask({start:t,duration:500,data:[1,1e-5,e.HIDE],object:this,onTimeUpdate:this.onZooming,onTimeStart:this.onZoomStart,onTimeEnd:this.onZoomEnd,recycle:this.anims})}onZoomStart(t,e,r){const{MODES:h}=this._config.options;r===h.SHOW&&this.image.show()}onZooming(t,e,r,h){this.image.scale(h=exponential.co(t,e,r-e,500),h)}onZoomEnd(t,e,r){const{MODES:h,STATE_KEYS:p}=this._config.options;r===h.SHOW?state(p.CLICK_ENABLE).on():r===h.HIDE&&this.image.hide()}}class ResultScene{constructor(t,e,r){this._config=t,this._layerManager=e,this._game=r,this.anims=[],this.anim=exponential.co}set(){const{LAYERS:t,RESULT_LOGO_CONFIG:e,RESULT_TEXT_CONFIG:r,RESULT_BUTTON_NEXT_CONFIG:h,MESSAGES:p,SCENES:E,RESULT_BUTTON_REPLAY_CONFIG:O}=this._config.options;e.image&&(this.logo=this._layerManager.createImage(t.RESULT_SCREEN,e.image,e.startX,e.startY,e.width,e.height).hide()),r.text1Value&&(this.text1=this._layerManager.createText(t.RESULT_SCREEN,r.text1Value,r.text1X,r.text1Sy,r.text1Fill,r.text1Size,r.text1Weight,r.text1Anchor).hide()),r.text2Value&&(this.text2=this._layerManager.createText(t.RESULT_SCREEN,r.text2Value,r.text2X,r.text2Sy,r.text2Fill,r.text2Size,r.text2Weight,r.text2Anchor).hide()),this.text3=this._layerManager.createText(t.RESULT_SCREEN,this._game.scoreNumber.toString(),r.text3X,r.text3Sy,r.text3Fill,r.text3Size,r.text3Weight,r.text3Anchor).attr("stroke","white").attr("stroke-width",3).hide(),r.text4Value&&(this.text4=this._layerManager.createText(t.RESULT_SCREEN,r.text4Value,r.text4Sx,r.text4Y,r.text4Fill,r.text4Size,r.text4Weight,r.text4Anchor).hide()),r.text5Value&&(this.text5=this._layerManager.createText(t.RESULT_SCREEN,r.text5Value,r.text5Sx,r.text5Y,r.text5Fill,r.text5Size,r.text5Weight,r.text5Anchor).attr("stroke","white").attr("stroke-width",2).hide()),r.text6Value&&(this.text6=this._layerManager.createText(t.RESULT_SCREEN,r.text6Value,r.text6Sx,r.text6Y,r.text6Fill,r.text6Size,r.text6Weight,r.text6Anchor).hide()),r.text7Value&&(this.text7=this._layerManager.createText(t.RESULT_SCREEN,r.text7Value,r.text7Sx,r.text7Y,r.text7Fill,r.text7Size,r.text7Weight,r.text7Anchor).attr("stroke","white").attr("stroke-width",2).hide()),this.nextButton=this._layerManager.createImage(t.RESULT_SCREEN,h.image,h.startX,h.startY,h.width,h.height).hide(),this.nextButtonText=this._layerManager.createText(t.RESULT_SCREEN,h.textValue,h.textStartX,h.textStartY,h.textFill,h.textSize,h.textWeight,h.textAnchor),this.replayButton=this._layerManager.createImage(t.RESULT_SCREEN,O.image,O.startX,O.startY,O.width,O.height).hide(),this.replayButtonText=this._layerManager.createText(t.RESULT_SCREEN,O.textValue,O.textStartX,O.textStartY,O.textFill,O.textSize,O.textWeight,O.textAnchor),this._group1=this._layerManager.getLayer(t.RESULT_SCREEN).set(),this._group1.push(this.nextButton,this.nextButtonText),this._group1.click(()=>{vibration.vibrate(),message.postMessage(p.SCENE_SWITCH_SCENE,E.BRAND_INTRO)}),this._group2=this._layerManager.getLayer(t.RESULT_SCREEN).set(),this._group2.push(this.replayButton,this.replayButtonText),this._group2.click(()=>{message.postMessage(p.START_GAME),vibration.vibrate()}),this._layerManager.hideLayer(t.RESULT_SCREEN)}show(t){const{MODES:e,RESULT_LOGO_CONFIG:r,RESULT_TEXT_CONFIG:h,RESULT_BUTTON_NEXT_CONFIG:p,RESULT_BUTTON_REPLAY_CONFIG:E}=this._config.options;timeline.createTask({start:t,duration:r.duration,data:[e.SHOW,r.startY,r.endY,h.text1Sy,h.text1Ey,h.text2Sy,h.text2Ey,h.text3Sy,h.text3Ey,h.text4Sx,h.text4Ex,h.text5Sx,h.text5Ex,h.text6Sx,h.text6Ex,h.text7Sx,h.text7Ex,p.startY,p.endY,p.textStartY,p.textEndY,E.startY,E.endY,E.textStartY,E.textEndY],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}hide(t){const{MODES:e,RESULT_LOGO_CONFIG:r,RESULT_TEXT_CONFIG:h,RESULT_BUTTON_NEXT_CONFIG:p,RESULT_BUTTON_REPLAY_CONFIG:E}=this._config.options;timeline.createTask({start:t,duration:r.duration,data:[e.SHOW,r.endY,r.startY,h.text1Ey,h.text1Sy,h.text2Ey,h.text2Sy,h.text3Ey,h.text3Sy,h.text4Ex,h.text4Sx,h.text5Ex,h.text5Sx,h.text6Ex,h.text6Sx,h.text7Ex,h.text7Sx,p.endY,p.startY,p.textEndY,p.textStartY,E.endY,E.startY,E.textEndY,E.textStartY],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}onTimeUpdate(t,e,r,h,p,E,O,L,w,S,v,U,F,X,M,W,H,Z,Bt,Dt,tt,b,Et,P,it,gt){const{RESULT_LOGO_CONFIG:et,RESULT_TEXT_CONFIG:z}=this._config.options;this.logo&&this.logo.attr("y",this.anim(t,r,h-r,et.duration)),this.text1&&this.text1.attr("y",this.anim(t,p,E-p,z.animLength)),this.text2&&this.text2.attr("y",this.anim(t,O,L-O,z.animLength)),this.text3&&this.text3.attr("y",this.anim(t,w,S-w,z.animLength)),this.text4&&this.text4.attr("x",this.anim(t,v,U-v,z.animLength)),this.text5&&this.text5.attr("x",this.anim(t,F,X-F,z.animLength)),this.text6&&this.text6.attr("x",this.anim(t,M,W-M,z.animLength)),this.text7&&this.text7.attr("x",this.anim(t,H,Z-H,z.animLength)),this.nextButton.attr("y",this.anim(t,Bt,Dt-Bt,z.animLength)),this.nextButtonText.attr("y",this.anim(t,tt,b-tt,z.animLength)),this.replayButton.attr("y",this.anim(t,Et,P-Et,z.animLength)),this.replayButtonText.attr("y",this.anim(t,it,gt-it,z.animLength))}onTimeStart(t){const{MODES:e}=this._config.options,r=[this.nextButton,this.nextButtonText,this.replayButton,this.replayButtonText];this.logo&&r.push(this.logo),this.text1&&r.push(this.text1),this.text2&&r.push(this.text2),this.text3&&r.push(this.text3),this.text4&&r.push(this.text4),this.text5&&r.push(this.text5),this.text6&&r.push(this.text6),this.text7&&r.push(this.text7),t===e.SHOW&&r.invoke(t)}onTimeEnd(t){const{MODES:e}=this._config.options,r=[this.nextButton,this.nextButtonText,this.replayButton,this.replayButtonText];this.logo&&r.push(this.logo),this.text1&&r.push(this.text1),this.text2&&r.push(this.text2),this.text3&&r.push(this.text3),this.text4&&r.push(this.text4),this.text5&&r.push(this.text5),this.text6&&r.push(this.text6),this.text7&&r.push(this.text7),t===e.HIDE&&r.invoke(t)}}class BrandIntroScene{constructor(t,e){this._config=t,this._layerManager=e,this.setTimeout=timeline.setTimeout.bind(timeline),this.anim=exponential.co,this.anims=[],this._group1=[]}set(){const{LAYERS:t,BRAND_INTRO_CONFIG:e,BRAND_INTRO_BUTTON_CONFIG:r,SCENES:h,MESSAGES:p}=this._config.options;e.textValue&&(this.text=this._layerManager.createText(t.BRAND_INTRO,e.textValue,e.textX,e.textStartY,e.textFill,e.textSize,e.textWeight,e.textAnchor).hide()),r.image&&(this.answerButton=this._layerManager.createImage(t.BRAND_INTRO,r.image,r.buttonX,r.buttonStartY,r.width,r.height).hide()),r.textValue&&(this.answerText=this._layerManager.createText(t.BRAND_INTRO,r.textValue,r.textX,r.textStartY,r.textFill,r.textSize,r.textWeight,r.textAnchor).hide()),this._group1=this._layerManager.getLayer(t.BRAND_INTRO).set(),this.answerText&&this._group1.push(this.answerText),this.answerButton&&this._group1.push(this.answerButton),this._group1.click(()=>{vibration.vibrate(),message.postMessage(p.SCENE_SWITCH_SCENE,h.BRAND_QUESTION)}),this._layerManager.hideLayer(t.BRAND_INTRO)}show(t){const{BRAND_INTRO_CONFIG:e,BRAND_INTRO_BUTTON_CONFIG:r,MODES:h}=this._config.options;timeline.createTask({start:t,duration:e.animLength,data:[h.SHOW,e.textStartY,e.textEndY,r.textStartY,r.textEndY,r.buttonStartY,r.buttonEndY],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}hide(t){const{BRAND_INTRO_CONFIG:e,BRAND_INTRO_BUTTON_CONFIG:r,MODES:h}=this._config.options;timeline.createTask({start:t,duration:e.animLength,data:[h.HIDE,e.textEndY,e.textStartY,r.textEndY,r.textStartY,r.buttonEndY,r.buttonStartY],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}onTimeUpdate(t,e,r,h,p,E,O,L){const{BRAND_INTRO_CONFIG:w,BRAND_ANSWER1_CONFIG:S}=this._config.options;this.text&&this.text.attr("y",this.anim(t,r,h-r,w.animLength)),this.answerText&&this.answerText.attr("y",this.anim(t,p,E-p,S.animLength)),this.answerButton&&this.answerButton.attr("y",this.anim(t,O,L-O,S.animLength))}onTimeStart(t){const{MODES:e}=this._config.options,r=[];this.text&&r.push(this.text),this.answerText&&r.push(this.answerText),this.answerButton&&r.push(this.answerButton),t===e.SHOW&&r.invoke(t)}onTimeEnd(t){const{MODES:e}=this._config.options,r=[];this.text&&r.push(this.text),this.answerText&&r.push(this.answerText),this.answerButton&&r.push(this.answerButton),t===e.HIDE&&r.invoke(t)}}class BrandQuestionScene{constructor(t,e){this._config=t,this._layerManager=e,this.setTimeout=timeline.setTimeout.bind(timeline),this.anim=exponential.co,this.anims=[],this._group1=[],this._group2=[]}set(){const{LAYERS:t,BRAND_QUESTION_TEXT1_CONFIG:e,BRAND_QUESTION_TEXT2_CONFIG:r,BRAND_ANSWER1_CONFIG:h,BRAND_ANSWER2_CONFIG:p,SCENES:E,MESSAGES:O}=this._config.options;e.textValue&&(this.text1=this._layerManager.createText(t.BRAND_QUESTION,e.textValue,e.textStartX,e.textY,e.textFill,e.textSize,e.textWeight,e.textAnchor).hide()),r.textValue&&(this.text2=this._layerManager.createText(t.BRAND_QUESTION,r.textValue,r.textStartX,r.textY,r.textFill,r.textSize,r.textWeight,r.textAnchor).hide()),h.image&&(this.answer1=this._layerManager.createImage(t.BRAND_QUESTION,h.image,h.buttonX,h.buttonStartY,h.width,h.height).hide()),h.textValue&&(this.text3=this._layerManager.createText(t.BRAND_QUESTION,h.textValue,h.textX,h.textStartY,h.textFill,h.textSize,h.textWeight,h.textAnchor).hide()),p.image&&(this.answer2=this._layerManager.createImage(t.BRAND_QUESTION,p.image,p.buttonX,p.buttonStartY,p.width,p.height).hide()),p.textValue&&(this.text4=this._layerManager.createText(t.BRAND_QUESTION,p.textValue,p.textX,p.textStartY,p.textFill,p.textSize,p.textWeight,p.textAnchor).hide()),this._group1=this._layerManager.getLayer(t.BRAND_QUESTION).set(),this.answer1&&this._group1.push(this.answer1),this.text3&&this._group1.push(this.text3),this._group2=this._layerManager.getLayer(t.BRAND_QUESTION).set(),this.answer2&&this._group2.push(this.answer2),this.text4&&this._group2.push(this.text4),this._group1.click(()=>{vibration.vibrate(),message.postMessage(O.SCENE_SWITCH_SCENE,E.HOME_MENU)}),this._group2.click(()=>{vibration.vibrate(),message.postMessage(O.SCENE_SWITCH_SCENE,E.HOME_MENU)}),this._layerManager.hideLayer(t.BRAND_QUESTION)}show(t){const{BRAND_QUESTION_TEXT1_CONFIG:e,BRAND_QUESTION_TEXT2_CONFIG:r,MODES:h,BRAND_ANSWER1_CONFIG:p,BRAND_ANSWER2_CONFIG:E}=this._config.options;timeline.createTask({start:t,duration:e.animLength,data:[h.SHOW,e.textStartX,e.textEndX,r.textStartX,r.textEndX,p.textStartY,p.textEndY,p.buttonStartY,p.buttonEndY,E.textStartY,E.textEndY,E.buttonStartY,E.buttonEndY],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}hide(t){const{BRAND_QUESTION_TEXT1_CONFIG:e,BRAND_QUESTION_TEXT2_CONFIG:r,MODES:h,BRAND_ANSWER1_CONFIG:p,BRAND_ANSWER2_CONFIG:E}=this._config.options;timeline.createTask({start:t,duration:e.animLength,data:[h.HIDE,e.textEndX,e.textStartX,r.textEndX,r.textStartX,p.textEndY,p.textStartY,p.buttonEndY,p.buttonStartY,E.textEndY,E.textStartY,E.buttonEndY,E.buttonStartY],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}onTimeUpdate(t,e,r,h,p,E,O,L,w,S,v,U,F,X){const{BRAND_QUESTION_TEXT1_CONFIG:M,BRAND_QUESTION_TEXT2_CONFIG:W,BRAND_ANSWER1_CONFIG:H,BRAND_ANSWER2_CONFIG:Z}=this._config.options;this.text1&&this.text1.attr("x",this.anim(t,r,h-r,M.animLength)),this.text2&&this.text2.attr("x",this.anim(t,p,E-p,W.animLength)),this.text3&&this.text3.attr("y",this.anim(t,O,L-O,H.animLength)),this.text4&&this.text4.attr("y",this.anim(t,v,U-v,Z.animLength)),this.answer1&&this.answer1.attr("y",this.anim(t,w,S-w,H.animLength)),this.answer2&&this.answer2.attr("y",this.anim(t,F,X-F,Z.animLength))}onTimeStart(t){const{MODES:e}=this._config.options,r=[];this.text1&&r.push(this.text1),this.text2&&r.push(this.text2),this.text3&&r.push(this.text3),this.text4&&r.push(this.text4),this.answer1&&r.push(this.answer1),this.answer2&&r.push(this.answer2),t===e.SHOW&&r.invoke(t)}onTimeEnd(t){const{MODES:e}=this._config.options,r=[];this.text1&&r.push(this.text1),this.text2&&r.push(this.text2),this.text3&&r.push(this.text3),this.text4&&r.push(this.text4),this.answer1&&r.push(this.answer1),this.answer2&&r.push(this.answer2),t===e.HIDE&&r.invoke(t)}}class FPS{constructor(t,e){this._config=t,this._layerManager=e,this.update=()=>{const{IS_DEBUG:r,FPS_CONFIG:h}=this._config.options;r&&this.text.attr("text",h.prefix+(timeline.getFPS()>>0))}}set(){const{IS_DEBUG:t,LAYERS:e,FPS_CONFIG:r}=this._config.options;t&&(this.text=this._layerManager.createText(e.DEFAULT,r.prefix+"0",r.x,r.y).attr("fill",r.fill))}}class ScenesManager{constructor(t,e,r,h,p,E,O,L,w,S){this._config=t,this._game=e,this._layerManager=r,this._soundButton=h,this._soundFactory=p,this._flash=E,this._score=O,this._lose=L,this._background=w,this._displacementFactory=S,this.setTimeout=timeline.setTimeout.bind(timeline),this.setInterval=timeline._setInterval.bind(timeline);const{LAYERS:v,BOTTOM_CONFIG:U}=this._config.options;this._bottom=this._displacementFactory.create({layer:v.DEFAULT,imageSrc:U.image,width:U.width,height:U.height,startX:U.startX,startY:U.startY,endX:U.endX,endY:U.endY,animMap:exponential.co,duration:U.duration}),this._startScene=new HomeScene(t,r),this._gameOverScene=new GameOverScene(t,r),this._resultScene=new ResultScene(t,r,e),this._brandIntroScene=new BrandIntroScene(t,r),this._brandQuestionScene=new BrandQuestionScene(t,r),this._fps=new FPS(t,r);const{SOUNDS:F,MESSAGES:X}=this._config.options;this.menuSnd=this._soundFactory.create(F[SoundNames.MENU]),this.gameStartSnd=this._soundFactory.create(F[SoundNames.START]),message.addEventListener(X.SCENE_SWITCH_SCENE,M=>{this.switchScene(M)}),message.addEventListener(X.TOGGLE_SOUND,()=>{this.toggleSound()})}init(){[this._background,this._startScene,this._score,this._lose,this._gameOverScene,this._flash,this._bottom,this._resultScene,this._soundButton,this._brandQuestionScene,this._brandIntroScene,this._fps].invoke("set"),this.setInterval(this._fps.update,500)}switchScene(t){const{SCENE_STATES:e,STATE_KEYS:r,SCENES:h}=this._config.options,p=()=>O.set(e.READY),E=state(r.SCENE_NAME),O=state(r.SCENE_STATE);if(E.is(t))return;const L=()=>{switch(E.set(t),O.set(e.ENTERING),t){case h.HOME_MENU:this.showMenu(p);break;case h.GAME_BODY:this.showGame(p);break;case h.GAME_OVER:this.showGameOver(p);break;case h.GAME_RESULT:this.showResult(p);break;case h.BRAND_INTRO:this.showBrandIntro(p);break;case h.BRAND_QUESTION:this.showBrandQuestion(p);break}};O.set(e.EXITING),E.isunset()?L():E.is(h.HOME_MENU)?this.hideMenu(L):E.is(h.GAME_BODY)?this.hideGame(L):E.is(h.GAME_OVER)?this.hideGameOver(L):E.is(h.GAME_RESULT)?this.hideResult(L):E.is(h.BRAND_INTRO)?this.hideBrandIntro(L):E.is(h.BRAND_QUESTION)&&this.hideBrandQuestion(L)}toggleSound(){const{SCENES:t,STATE_KEYS:e}=this._config.options,r=state(e.SCENE_NAME),h=this._soundButton.isOn?"play":"stop";r.is(t.HOME_MENU)?this.menuSnd[h]():r.is(t.GAME_BODY)?this.gameStartSnd[h]():r.is(t.GAME_RESULT)&&this.menuSnd[h]()}showMenu(t){const{MODES:e,LAYERS:r}=this._config.options;this._layerManager.showLayer(r.START_SCREEN),[[this._startScene,0],[this._bottom,1e3]].invoke(e.SHOW),this.menuSnd.play(),this._soundButton.showHomeSoundButton(1200),this.setTimeout(t,2500)}hideMenu(t){const{MODES:e,LAYERS:r}=this._config.options;[this._startScene].invoke(e.HIDE),this._soundButton.hideHomeSoundButton(),this.menuSnd.stop(),this.setTimeout(()=>{t(),this._layerManager.hideLayer(r.START_SCREEN)},1200)}showGame(t){const{LAYERS:e}=this._config.options;this._layerManager.showLayer(e.FRUIT),this._score.show(),this._lose.show(),this._game.start(),this.gameStartSnd.play(),this._soundButton.showGameSoundButton(),this.setTimeout(t,700)}hideGame(t){const{LAYERS:e}=this._config.options;this._score.hide(),this._lose.hide(),this._soundButton.hideGameSoundButton(),this.gameStartSnd.stop(),this.setTimeout(()=>{t(),this._layerManager.hideLayer(e.FRUIT)},700)}showGameOver(t){const{SCENES:e,MODES:r}=this._config.options;[[this._gameOverScene,0]].invoke(r.SHOW),this.setTimeout(()=>{t(),this.switchScene(e.GAME_RESULT)},2e3)}hideGameOver(t){const{MODES:e}=this._config.options;[this._gameOverScene].invoke(e.HIDE),this.setTimeout(t,1e3)}showResult(t){const{LAYERS:e,MODES:r}=this._config.options;this._layerManager.showLayer(e.RESULT_SCREEN),[[this._resultScene,0]].invoke(r.SHOW),this.menuSnd.play(),this._soundButton.showResultSoundButton(),this.setTimeout(t)}hideResult(t){const{LAYERS:e,MODES:r}=this._config.options;[this._resultScene].invoke(r.HIDE),this._soundButton.hideResultSoundButton(),this.menuSnd.stop(),this.setTimeout(()=>{t(),this._layerManager.hideLayer(e.RESULT_SCREEN)},1e3)}showBrandIntro(t){const{LAYERS:e,MODES:r}=this._config.options;this._layerManager.showLayer(e.BRAND_INTRO),[[this._brandIntroScene,0]].invoke(r.SHOW),this._soundButton.showResultSoundButton(),this.setTimeout(t)}hideBrandIntro(t){const{LAYERS:e,MODES:r}=this._config.options;[this._brandIntroScene].invoke(r.HIDE),this._soundButton.hideResultSoundButton(),this.setTimeout(()=>{t(),this._layerManager.hideLayer(e.BRAND_INTRO)},1e3)}showBrandQuestion(t){const{LAYERS:e,MODES:r}=this._config.options;this._layerManager.showLayer(e.BRAND_QUESTION),[[this._brandQuestionScene,0]].invoke(r.SHOW),this._soundButton.showResultSoundButton(),this.setTimeout(t)}hideBrandQuestion(t){const{LAYERS:e,MODES:r}=this._config.options;[this._brandQuestionScene].invoke(r.HIDE),this._soundButton.hideResultSoundButton(),this.setTimeout(()=>{t(),this._layerManager.hideLayer(e.BRAND_QUESTION)},1e3)}}class Main{constructor(t){var e,r;this._config=t,this.setTimeout=timeline.setTimeout.bind(timeline),(r=(e=window.Telegram)==null?void 0:e.WebApp)!=null&&r.disableVerticalScroll&&window.Telegram.WebApp.disableVerticalScroll(!0);const{MESSAGES:h,SCENES:p,STATE_KEYS:E,SCENE_STATES:O}=this._config.options;this._layerManager=new LayerManager(this._config),this._displacementFactory=new DisplacementFactory(this._config,this._layerManager),this._knifes=new Knifes(this._config,this._layerManager),this._control=new Control(this._config,this._knifes),this._soundButton=new SoundButton(this._config,this._layerManager),this._soundFactory=new SoundFactory(this._soundButton),this._flash=new Flash(this._config,this._layerManager,this._soundFactory),this._fruitFactory=new FruitFactory(this._config,this._control,this._layerManager,this._flash),this._collide=new Collide(this._fruitFactory),this._score=new Score(this._config,this._layerManager),this._lose=new Lose(this._config,this._layerManager),this._background=new Background(this._config,this._layerManager),this._game=new Game(this._config,this._fruitFactory,this._layerManager,this._knifes,this._soundFactory,this._score,this._lose,this._background),this._scenesManager=new ScenesManager(this._config,this._game,this._layerManager,this._soundButton,this._soundFactory,this._flash,this._score,this._lose,this._background,this._displacementFactory),document.addEventListener("touchstart",L=>{L.preventDefault()},{passive:!1}),document.addEventListener("touchmove",L=>{L.preventDefault()},{passive:!1}),message.addEventListener(h.SLICE,L=>{const w=this._collide.checkSlice(L);if(w.length){const S=getAngleByRadian(pointToRadian(L.slice(0,2),L.slice(2,4)));w.forEach(v=>message.postMessage(h.SLICE_AT,v,S))}}),message.addEventListener(h.TOUCH,L=>{const w=this._collide.checkTouch(L);w.length&&w.forEach(S=>message.postMessage(h.TOUCH_AT,S))}),message.addEventListener(h.SLICE_AT,(L,w)=>{state(E.SCENE_STATE).isnot(O.READY)||state(E.SCENE_NAME).is(p.GAME_BODY)&&this._game.sliceAt(L,w)}),message.addEventListener(h.TOUCH_AT,L=>{state(E.SCENE_STATE).isnot(O.READY)||state(E.SCENE_NAME).is(p.GAME_BODY)&&this._game.catchFruit(L)}),message.addEventListener(h.START_GAME,()=>{this._scenesManager.switchScene(p.GAME_BODY)}),new PreloadFactory(this._config,this._displacementFactory)}start(){const{SCENES:t}=this._config.options;[timeline,this._scenesManager,this._control].invoke("init"),this.setTimeout(this._scenesManager.switchScene.saturate(this._scenesManager,t.HOME_MENU),3e3)}}function init(i,t=console){adjustView(i.rootElement);const e=new Config(i,t);new Main(e).start()}const getConfig=()=>({rootElement:document.getElementById("ninja_game")});init(getConfig());
//# sourceMappingURL=fruitNinja-BrYXSxRm.js.map
