import"./modulepreload-polyfill-B5Qt9EMX.js";var Ui=Object.defineProperty,gi=(n,t,r)=>t in n?Ui(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,N=(n,t,r)=>(gi(n,typeof t!="symbol"?t+"":t,r),r);const randomNumber=n=>Math.floor(Math.random()*n),nul=()=>!1,each=(n,t)=>{if(Array.isArray(n))n=[...n],n.forEach(t);else if(typeof n=="object"){const r={};for(const h in n)if(!r[h]&&t(n[h],h)===!1)break}else if(typeof n=="number")for(let r=0;r<n&&t(r,r)!==!1;r++);else if(typeof n=="string")for(let r=0,h=n.length;r<h&&t(n.charAt(r),r)!==!1;r++);},apply=(n,t,r)=>(t||(t={}),r?each(n,(h,c)=>{c in r||(t[c]=h)}):each(n,(h,c)=>t[c]=h),t),makeElement=(n,t)=>{const r=document.createElement(n),h=c=>{typeof c=="string"?r.style.cssText=c:apply(c,r.style)};for(const c in t)c==="class"?r.className=t[c]:c==="for"?r.htmlFor=t[c]:c==="style"?h(t[c]):r.setAttribute(c,t[c]);return r};function addPonyfills(){String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/,"")},String.prototype.htmlEncode=String.prototype.htmlEncode||function(){const n=document.createElement("div");return function(){let t;return n.appendChild(document.createTextNode(this)),t=n.innerHTML,n.innerHTML="",t}}(),String.prototype.byteLength=String.prototype.byteLength||function(){return this.replace(/[^\x00-\xff]/g,"  ").length},String.prototype.subByte=String.prototype.subByte||function(n,t){let r=this;return r.byteLength()<=n?r:(t=t||"",n-=t.byteLength(),r=r.slice(0,n).replace(/([^\x00-\xff])/g,"$1 ").slice(0,n).replace(/[^\x00-\xff]$/,"").replace(/([^\x00-\xff]) /g,"$1")+t)},Function.prototype.defer=Function.prototype.defer||function(n,t){const r=this;return setTimeout(function(){r.apply(n,arguments)},t)},Function.prototype.bind=Function.prototype.bind||function(n){const t=this;return function(){return t.apply(n,arguments)}},Function.prototype.saturate=Function.prototype.saturate||function(n){const t=this,r=[].slice.call(arguments,1);return function(){return t.apply(n,[].slice.call(arguments,0).concat(r))}},Array.prototype.indexOf=Array.prototype.indexOf||function(n,t){const r=this.length;for(t||(t=0),t<0&&(t=r+t);t<r;t++)if(this[t]===n)return t;return-1},Array.prototype.every=Array.prototype.every||function(n,t){for(var r=0,h=this.length;r<h;r++)if(!n.call(t,this[r],r,this))return!1;return!0},Array.prototype.filter=Array.prototype.filter||function(n,t){let r=[],h;for(var c=0,S=this.length;c<S;c++)h=this[c],n.call(t,h,c,this)&&r.push(h);return r},Array.prototype.forEach=Array.prototype.forEach||function(n,t){for(var r=0,h=this.length;r<h;r++)n.call(t,this[r],r,this)},Array.prototype.map=Array.prototype.map||function(n,t){const r=[];for(var h=0,c=this.length;h<c;h++)r[h]=n.call(t,this[h],h,this);return r},Array.prototype.some=Array.prototype.some||function(n,t){for(var r=0,h=this.length;r<h;r++)if(n.call(t,this[r],r,this))return!0;return!1},Array.prototype.invoke=Array.prototype.invoke||function(n){const t=[].slice.call(arguments,1);return this.forEach(function(r){r instanceof Array?r[0][n].apply(r[0],r.slice(1)):r[n].apply(r,t)}),this},Array.prototype.random=Array.prototype.random||function(){let n=this.slice(0),t=[],r=n.length;for(;r--;)t.push(n.splice(randomNumber(r+1),1)[0]);return t}}addPonyfills();(function(){function n(){if(n.is(arguments[0],_t)){for(var i=arguments[0],e=oe[C](n,i.splice(0,3+n.is(i[0],et))),s=e.set(),a=0,o=i[x];a<o;a++){var _=i[a]||{};r[S](_.type)&&s[$](e[_.type]().attr(_))}return s}return oe[C](n,arguments)}n.version="1.5.2";var t=/[, ]+/,r={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},h=/\{(\d+)\}/g,c="prototype",S="hasOwnProperty",O=document,L=window,B={was:Object[c][S].call(L,"Raphael"),is:L.Raphael},H=function(){this.customAttributes={}},p,U="appendChild",C="apply",M="concat",Z="createTouch"in O,y="",j=" ",w=String,q="split",Se="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend"[q](j),Jt={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},tt="join",x="length",At=w[c].toLowerCase,W=Math,at=W.max,St=W.min,J=W.abs,K=W.pow,ht=W.PI,et="number",gt="string",_t="array",Ot="toString",mt="fill",Ke=Object[c][Ot],$="push",Oe=/^url\(['"]?([^\)]+?)['"]?\)$/i,qe=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,Je={NaN:1,Infinity:1,"-Infinity":1},ti=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,it=W.round,ct="setAttribute",Y=parseFloat,pt=parseInt,te=" progid:DXImageTransform.Microsoft",Mt=w[c].toUpperCase,Yt={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},ee={along:"along",blur:et,"clip-rect":"csv",cx:et,cy:et,fill:"colour","fill-opacity":et,"font-size":et,height:et,opacity:et,path:"path",r:et,rotation:"csv",rx:et,ry:et,scale:"csv",stroke:"colour","stroke-opacity":et,"stroke-width":et,translation:"csv",width:et,x:et,y:et},nt="replace",ei=/^(from|to|\d+%?)$/,ie=/\s*,\s*/,ni={hs:1,rg:1},si=/,?([achlmqrstvxz]),?/gi,ri=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,ai=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,de=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,oi=function(i,e){return i.key-e.key};if(n.type=L.SVGAngle||O.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",n.type=="VML"){var ne=O.createElement("div"),wt;if(ne.innerHTML='<v:shape adj="1"/>',wt=ne.firstChild,wt.style.behavior="url(#default#VML)",!(wt&&typeof wt.adj=="object"))return n.type=null;ne=null}n.svg=!(n.vml=n.type=="VML"),H[c]=n[c],p=H[c],n._id=0,n._oid=0,n.fn={},n.is=function(i,e){return e=At.call(e),e=="finite"?!Je[S](+i):e=="null"&&i===null||e==typeof i||e=="object"&&i===Object(i)||e=="array"&&Array.isArray&&Array.isArray(i)||Ke.call(i).slice(8,-1).toLowerCase()==e},n.angle=function(i,e,s,a,o,_){{if(o==null){var E=i-s,T=e-a;return!E&&!T?0:((E<0)*180+W.atan(-T/-E)*180/ht+360)%360}return n.angle(i,e,o,_)-n.angle(s,a,o,_)}},n.rad=function(i){return i%360*ht/180},n.deg=function(i){return i*180/ht%360},n.snapTo=function(i,e,s){if(s=n.is(s,"finite")?s:10,n.is(i,_t)){for(var a=i.length;a--;)if(J(i[a]-e)<=s)return i[a]}else{i=+i;var o=e%i;if(o<s)return e-o;if(o>i-s)return e-o+i}return e};function kt(){for(var i=[],e=0;e<32;e++)i[e]=(~~(W.random()*16))[Ot](16);return i[12]=4,i[16]=(i[16]&3|8)[Ot](16),"r-"+i[tt]("")}n.setWindow=function(i){L=i,O=L.document};var Wt=function(i){if(n.vml){var e=/^\s+|\s+$/g,s;try{var a=new ActiveXObject("htmlfile");a.write("<body>"),a.close(),s=a.body}catch{s=createPopup().document.body}var o=s.createTextRange();Wt=dt(function(E){try{s.style.color=w(E)[nt](e,y);var T=o.queryCommandValue("ForeColor");return T=(T&255)<<16|T&65280|(T&16711680)>>>16,"#"+("000000"+T[Ot](16)).slice(-6)}catch{return"none"}})}else{var _=O.createElement("i");_.title="Raphaël Colour Picker",_.style.display="none",O.body[U](_),Wt=dt(function(E){return _.style.color=E,O.defaultView.getComputedStyle(_,y).getPropertyValue("color")})}return Wt(i)},Re=function(){return"hsb("+[this.h,this.s,this.b]+")"},Ti=function(){return"hsl("+[this.h,this.s,this.l]+")"},hi=function(){return this.hex};n.hsb2rgb=function(i,e,s,a){return n.is(i,"object")&&"h"in i&&"s"in i&&"b"in i&&(s=i.b,e=i.s,i=i.h,a=i.o),n.hsl2rgb(i,e,s/2,a)},n.hsl2rgb=function(i,e,s,a){n.is(i,"object")&&"h"in i&&"s"in i&&"l"in i&&(s=i.l,e=i.s,i=i.h),(i>1||e>1||s>1)&&(i/=360,e/=100,s/=100);var o={},_=["r","g","b"],E,T,l;if(e){s<.5?E=s*(1+e):E=s+e-s*e,T=2*s-E;for(var u=0;u<3;u++)l=i+1/3*-(u-1),l<0&&l++,l>1&&l--,l*6<1?o[_[u]]=T+(E-T)*6*l:l*2<1?o[_[u]]=E:l*3<2?o[_[u]]=T+(E-T)*(2/3-l)*6:o[_[u]]=T}else o={r:s,g:s,b:s};return o.r*=255,o.g*=255,o.b*=255,o.hex="#"+(16777216|o.b|o.g<<8|o.r<<16).toString(16).slice(1),n.is(a,"finite")&&(o.opacity=a),o.toString=hi,o},n.rgb2hsb=function(i,e,s){if(e==null&&n.is(i,"object")&&"r"in i&&"g"in i&&"b"in i&&(s=i.b,e=i.g,i=i.r),e==null&&n.is(i,gt)){var a=n.getRGB(i);i=a.r,e=a.g,s=a.b}(i>1||e>1||s>1)&&(i/=255,e/=255,s/=255);var o=at(i,e,s),_=St(i,e,s),E,T,l=o;{if(_==o)return{h:0,s:0,b:o,toString:Re};var u=o-_;T=u/o,i==o?E=(e-s)/u:e==o?E=2+(s-i)/u:E=4+(i-e)/u,E/=6,E<0&&E++,E>1&&E--}return{h:E,s:T,b:l,toString:Re}},n.rgb2hsl=function(i,e,s){if(e==null&&n.is(i,"object")&&"r"in i&&"g"in i&&"b"in i&&(s=i.b,e=i.g,i=i.r),e==null&&n.is(i,gt)){var a=n.getRGB(i);i=a.r,e=a.g,s=a.b}(i>1||e>1||s>1)&&(i/=255,e/=255,s/=255);var o=at(i,e,s),_=St(i,e,s),E,T,l=(o+_)/2,u;if(_==o)u={h:0,s:0,l};else{var d=o-_;T=l<.5?d/(o+_):d/(2-o-_),i==o?E=(e-s)/d:e==o?E=2+(s-i)/d:E=4+(i-e)/d,E/=6,E<0&&E++,E>1&&E--,u={h:E,s:T,l}}return u.toString=Ti,u},n._path2string=function(){return this.join(",")[nt](si,"$1")};function dt(i,e,s){function a(){var o=Array[c].slice.call(arguments,0),_=o[tt]("►"),E=a.cache=a.cache||{},T=a.count=a.count||[];return E[S](_)||(T[x]>=1e3&&delete E[T.shift()],T[$](_),E[_]=i[C](e,o)),s?s(E[_]):E[_]}return a}n.getRGB=dt(function(i){if(!i||(i=w(i)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1};if(i=="none")return{r:-1,g:-1,b:-1,hex:"none"};!(ni[S](i.toLowerCase().substring(0,2))||i.charAt()=="#")&&(i=Wt(i));var e,s,a,o,_,E,T=i.match(qe);return T?(T[2]&&(a=pt(T[2].substring(5),16),s=pt(T[2].substring(3,5),16),e=pt(T[2].substring(1,3),16)),T[3]&&(a=pt((_=T[3].charAt(3))+_,16),s=pt((_=T[3].charAt(2))+_,16),e=pt((_=T[3].charAt(1))+_,16)),T[4]&&(E=T[4][q](ie),e=Y(E[0]),E[0].slice(-1)=="%"&&(e*=2.55),s=Y(E[1]),E[1].slice(-1)=="%"&&(s*=2.55),a=Y(E[2]),E[2].slice(-1)=="%"&&(a*=2.55),T[1].toLowerCase().slice(0,4)=="rgba"&&(o=Y(E[3])),E[3]&&E[3].slice(-1)=="%"&&(o/=100)),T[5]?(E=T[5][q](ie),e=Y(E[0]),E[0].slice(-1)=="%"&&(e*=2.55),s=Y(E[1]),E[1].slice(-1)=="%"&&(s*=2.55),a=Y(E[2]),E[2].slice(-1)=="%"&&(a*=2.55),(E[0].slice(-3)=="deg"||E[0].slice(-1)=="°")&&(e/=360),T[1].toLowerCase().slice(0,4)=="hsba"&&(o=Y(E[3])),E[3]&&E[3].slice(-1)=="%"&&(o/=100),n.hsb2rgb(e,s,a,o)):T[6]?(E=T[6][q](ie),e=Y(E[0]),E[0].slice(-1)=="%"&&(e*=2.55),s=Y(E[1]),E[1].slice(-1)=="%"&&(s*=2.55),a=Y(E[2]),E[2].slice(-1)=="%"&&(a*=2.55),(E[0].slice(-3)=="deg"||E[0].slice(-1)=="°")&&(e/=360),T[1].toLowerCase().slice(0,4)=="hsla"&&(o=Y(E[3])),E[3]&&E[3].slice(-1)=="%"&&(o/=100),n.hsl2rgb(e,s,a,o)):(T={r:e,g:s,b:a},T.hex="#"+(16777216|a|s<<8|e<<16).toString(16).slice(1),n.is(o,"finite")&&(T.opacity=o),T)):{r:-1,g:-1,b:-1,hex:"none",error:1}},n),n.getColor=function(i){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:i||.75},s=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),s.hex},n.getColor.reset=function(){delete this.start},n.parsePathString=dt(function(i){if(!i)return null;var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},s=[];return n.is(i,_t)&&n.is(i[0],_t)&&(s=Vt(i)),s[x]||w(i)[nt](ri,function(a,o,_){var E=[],T=At.call(o);for(_[nt](ai,function(l,u){u&&E[$](+u)}),T=="m"&&E[x]>2&&(s[$]([o][M](E.splice(0,2))),T="l",o=o=="m"?"l":"L");E[x]>=e[T]&&(s[$]([o][M](E.splice(0,e[T]))),!!e[T]););}),s[Ot]=n._path2string,s}),n.findDotsAtSegment=function(i,e,s,a,o,_,E,T,l){var u=1-l,d=K(u,3)*i+K(u,2)*3*l*s+u*3*l*l*o+K(l,3)*E,A=K(u,3)*e+K(u,2)*3*l*a+u*3*l*l*_+K(l,3)*T,I=i+2*l*(s-i)+l*l*(o-2*s+i),g=e+2*l*(a-e)+l*l*(_-2*a+e),f=s+2*l*(o-s)+l*l*(E-2*o+s),m=a+2*l*(_-a)+l*l*(T-2*_+a),R=(1-l)*i+l*s,F=(1-l)*e+l*a,G=(1-l)*o+l*E,D=(1-l)*_+l*T,X=90-W.atan((I-f)/(g-m))*180/ht;return(I>f||g<m)&&(X+=180),{x:d,y:A,m:{x:I,y:g},n:{x:f,y:m},start:{x:R,y:F},end:{x:G,y:D},alpha:X}};var Pt=dt(function(i){if(!i)return{x:0,y:0,width:0,height:0};i=$t(i);for(var e=0,s=0,a=[],o=[],_,E=0,T=i[x];E<T;E++)if(_=i[E],_[0]=="M")e=_[1],s=_[2],a[$](e),o[$](s);else{var l=_i(e,s,_[1],_[2],_[3],_[4],_[5],_[6]);a=a[M](l.min.x,l.max.x),o=o[M](l.min.y,l.max.y),e=_[5],s=_[6]}var u=St[C](0,a),d=St[C](0,o);return{x:u,y:d,width:at[C](0,a)-u,height:at[C](0,o)-d}}),Vt=function(i){var e=[];(!n.is(i,_t)||!n.is(i&&i[0],_t))&&(i=n.parsePathString(i));for(var s=0,a=i[x];s<a;s++){e[s]=[];for(var o=0,_=i[s][x];o<_;o++)e[s][o]=i[s][o]}return e[Ot]=n._path2string,e},se=dt(function(i){(!n.is(i,_t)||!n.is(i&&i[0],_t))&&(i=n.parsePathString(i));var e=[],s=0,a=0,o=0,_=0,E=0;i[0][0]=="M"&&(s=i[0][1],a=i[0][2],o=s,_=a,E++,e[$](["M",s,a]));for(var T=E,l=i[x];T<l;T++){var u=e[T]=[],d=i[T];if(d[0]!=At.call(d[0]))switch(u[0]=At.call(d[0]),u[0]){case"a":u[1]=d[1],u[2]=d[2],u[3]=d[3],u[4]=d[4],u[5]=d[5],u[6]=+(d[6]-s).toFixed(3),u[7]=+(d[7]-a).toFixed(3);break;case"v":u[1]=+(d[1]-a).toFixed(3);break;case"m":o=d[1],_=d[2];default:for(var A=1,I=d[x];A<I;A++)u[A]=+(d[A]-(A%2?s:a)).toFixed(3)}else{u=e[T]=[],d[0]=="m"&&(o=d[1]+s,_=d[2]+a);for(var g=0,f=d[x];g<f;g++)e[T][g]=d[g]}var m=e[T][x];switch(e[T][0]){case"z":s=o,a=_;break;case"h":s+=+e[T][m-1];break;case"v":a+=+e[T][m-1];break;default:s+=+e[T][m-2],a+=+e[T][m-1]}}return e[Ot]=n._path2string,e},0,Vt),Bt=dt(function(i){(!n.is(i,_t)||!n.is(i&&i[0],_t))&&(i=n.parsePathString(i));var e=[],s=0,a=0,o=0,_=0,E=0;i[0][0]=="M"&&(s=+i[0][1],a=+i[0][2],o=s,_=a,E++,e[0]=["M",s,a]);for(var T=E,l=i[x];T<l;T++){var u=e[T]=[],d=i[T];if(d[0]!=Mt.call(d[0]))switch(u[0]=Mt.call(d[0]),u[0]){case"A":u[1]=d[1],u[2]=d[2],u[3]=d[3],u[4]=d[4],u[5]=d[5],u[6]=+(d[6]+s),u[7]=+(d[7]+a);break;case"V":u[1]=+d[1]+a;break;case"H":u[1]=+d[1]+s;break;case"M":o=+d[1]+s,_=+d[2]+a;default:for(var A=1,I=d[x];A<I;A++)u[A]=+d[A]+(A%2?s:a)}else for(var g=0,f=d[x];g<f;g++)e[T][g]=d[g];switch(u[0]){case"Z":s=o,a=_;break;case"H":s=u[1];break;case"V":a=u[1];break;case"M":o=e[T][e[T][x]-2],_=e[T][e[T][x]-1];default:s=e[T][e[T][x]-2],a=e[T][e[T][x]-1]}}return e[Ot]=n._path2string,e},null,Vt),zt=function(i,e,s,a){return[i,e,s,a,s,a]},me=function(i,e,s,a,o,_){var E=.3333333333333333,T=2/3;return[E*i+T*s,E*e+T*a,E*o+T*s,E*_+T*a,o,_]},pe=function(i,e,s,a,o,_,E,T,l,u){var d=ht*120/180,A=ht/180*(+o||0),I=[],g,f=dt(function(Qe,Ze,qt){var Ai=Qe*W.cos(qt)-Ze*W.sin(qt),xi=Qe*W.sin(qt)+Ze*W.cos(qt);return{x:Ai,y:xi}});if(u)Q=u[0],b=u[1],V=u[2],z=u[3];else{g=f(i,e,-A),i=g.x,e=g.y,g=f(T,l,-A),T=g.x,l=g.y;var m=(i-T)/2,R=(e-l)/2,F=m*m/(s*s)+R*R/(a*a);F>1&&(F=W.sqrt(F),s=F*s,a=F*a);var G=s*s,D=a*a,X=(_==E?-1:1)*W.sqrt(J((G*D-G*R*R-D*m*m)/(G*R*R+D*m*m))),V=X*s*R/a+(i+T)/2,z=X*-a*m/s+(e+l)/2,Q=W.asin(((e-z)/a).toFixed(9)),b=W.asin(((l-z)/a).toFixed(9));Q=i<V?ht-Q:Q,b=T<V?ht-b:b,Q<0&&(Q=ht*2+Q),b<0&&(b=ht*2+b),E&&Q>b&&(Q=Q-ht*2),!E&&b>Q&&(b=b-ht*2)}var ot=b-Q;if(J(ot)>d){var st=b,Rt=T,ft=l;b=Q+d*(E&&b>Q?1:-1),T=V+s*W.cos(b),l=z+a*W.sin(b),I=pe(T,l,s,a,o,0,E,Rt,ft,[b,st,V,z])}ot=b-Q;var Ut=W.cos(Q),Tt=W.sin(Q),Ct=W.cos(b),lt=W.sin(b),xt=W.tan(ot/4),Gt=4/3*s*xt,Pe=4/3*a*xt,Ve=[i,e],vt=[i+Gt*Tt,e-Pe*Ut],ze=[T+Gt*lt,l-Pe*Ct],je=[T,l];vt[0]=2*Ve[0]-vt[0],vt[1]=2*Ve[1]-vt[1];{if(u)return[vt,ze,je][M](I);I=[vt,ze,je][M](I)[tt]()[q](",");for(var $e=[],Lt=0,Ii=I[x];Lt<Ii;Lt++)$e[Lt]=Lt%2?f(I[Lt-1],I[Lt],A).y:f(I[Lt],I[Lt+1],A).x;return $e}},jt=function(i,e,s,a,o,_,E,T,l){var u=1-l;return{x:K(u,3)*i+K(u,2)*3*l*s+u*3*l*l*o+K(l,3)*E,y:K(u,3)*e+K(u,2)*3*l*a+u*3*l*l*_+K(l,3)*T}},_i=dt(function(i,e,s,a,o,_,E,T){var l=o-2*s+i-(E-2*o+s),u=2*(s-i)-2*(o-s),d=i-s,A=(-u+W.sqrt(u*u-4*l*d))/2/l,I=(-u-W.sqrt(u*u-4*l*d))/2/l,g=[e,T],f=[i,E],m;return J(A)>"1e12"&&(A=.5),J(I)>"1e12"&&(I=.5),A>0&&A<1&&(m=jt(i,e,s,a,o,_,E,T,A),f[$](m.x),g[$](m.y)),I>0&&I<1&&(m=jt(i,e,s,a,o,_,E,T,I),f[$](m.x),g[$](m.y)),l=_-2*a+e-(T-2*_+a),u=2*(a-e)-2*(_-a),d=e-a,A=(-u+W.sqrt(u*u-4*l*d))/2/l,I=(-u-W.sqrt(u*u-4*l*d))/2/l,J(A)>"1e12"&&(A=.5),J(I)>"1e12"&&(I=.5),A>0&&A<1&&(m=jt(i,e,s,a,o,_,E,T,A),f[$](m.x),g[$](m.y)),I>0&&I<1&&(m=jt(i,e,s,a,o,_,E,T,I),f[$](m.x),g[$](m.y)),{min:{x:St[C](0,f),y:St[C](0,g)},max:{x:at[C](0,f),y:at[C](0,g)}}}),$t=dt(function(i,e){for(var s=Bt(i),a=e&&Bt(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},_={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},E=function(m,R){var F,G;if(!m)return["C",R.x,R.y,R.x,R.y,R.x,R.y];switch(!(m[0]in{T:1,Q:1})&&(R.qx=R.qy=null),m[0]){case"M":R.X=m[1],R.Y=m[2];break;case"A":m=["C"][M](pe[C](0,[R.x,R.y][M](m.slice(1))));break;case"S":F=R.x+(R.x-(R.bx||R.x)),G=R.y+(R.y-(R.by||R.y)),m=["C",F,G][M](m.slice(1));break;case"T":R.qx=R.x+(R.x-(R.qx||R.x)),R.qy=R.y+(R.y-(R.qy||R.y)),m=["C"][M](me(R.x,R.y,R.qx,R.qy,m[1],m[2]));break;case"Q":R.qx=m[1],R.qy=m[2],m=["C"][M](me(R.x,R.y,m[1],m[2],m[3],m[4]));break;case"L":m=["C"][M](zt(R.x,R.y,m[1],m[2]));break;case"H":m=["C"][M](zt(R.x,R.y,m[1],R.y));break;case"V":m=["C"][M](zt(R.x,R.y,R.x,m[1]));break;case"Z":m=["C"][M](zt(R.x,R.y,R.X,R.Y));break}return m},T=function(m,R){if(m[R][x]>7){m[R].shift();for(var F=m[R];F[x];)m.splice(R++,0,["C"][M](F.splice(0,6)));m.splice(R,1),d=at(s[x],a&&a[x]||0)}},l=function(m,R,F,G,D){m&&R&&m[D][0]=="M"&&R[D][0]!="M"&&(R.splice(D,0,["M",G.x,G.y]),F.bx=0,F.by=0,F.x=m[D][1],F.y=m[D][2],d=at(s[x],a&&a[x]||0))},u=0,d=at(s[x],a&&a[x]||0);u<d;u++){s[u]=E(s[u],o),T(s,u),a&&(a[u]=E(a[u],_)),a&&T(a,u),l(s,a,o,_,u),l(a,s,_,o,u);var A=s[u],I=a&&a[u],g=A[x],f=a&&I[x];o.x=A[g-2],o.y=A[g-1],o.bx=Y(A[g-4])||o.x,o.by=Y(A[g-3])||o.y,_.bx=a&&(Y(I[f-4])||_.x),_.by=a&&(Y(I[f-3])||_.y),_.x=a&&I[f-2],_.y=a&&I[f-1]}return a?[s,a]:s},null,Vt),fe=dt(function(i){for(var e=[],s=0,a=i[x];s<a;s++){var o={},_=i[s].match(/^([^:]*):?([\d\.]*)/);if(o.color=n.getRGB(_[1]),o.color.error)return null;o.color=o.color.hex,_[2]&&(o.offset=_[2]+"%"),e[$](o)}for(s=1,a=e[x]-1;s<a;s++)if(!e[s].offset){for(var E=Y(e[s-1].offset||0),T=0,l=s+1;l<a;l++)if(e[l].offset){T=e[l].offset;break}T||(T=100,l=a),T=Y(T);for(var u=(T-E)/(l-s+1);s<l;s++)E+=u,e[s].offset=E+"%"}return e}),Ie=function(i,e,s,a){var o;if(n.is(i,gt)||n.is(i,"object")){if(o=n.is(i,gt)?O.getElementById(i):i,o.tagName)return e==null?{container:o,width:o.style.pixelWidth||o.offsetWidth,height:o.style.pixelHeight||o.offsetHeight}:{container:o,width:e,height:s}}else return{container:1,x:i,y:e,width:s,height:a}},re=function(i,e){var s=this;for(var a in e)if(e[S](a)&&!(a in i))switch(typeof e[a]){case"function":(function(o){i[a]=i===s?o:function(){return o[C](s,arguments)}})(e[a]);break;case"object":i[a]=i[a]||{},re.call(this,i[a],e[a]);break;default:i[a]=e[a];break}},yt=function(i,e){i==e.top&&(e.top=i.prev),i==e.bottom&&(e.bottom=i.next),i.next&&(i.next.prev=i.prev),i.prev&&(i.prev.next=i.next)},Ae=function(i,e){e.top!==i&&(yt(i,e),i.next=null,i.prev=e.top,e.top.next=i,e.top=i)},ge=function(i,e){e.bottom!==i&&(yt(i,e),i.next=e.bottom,i.prev=null,e.bottom.prev=i,e.bottom=i)},Ue=function(i,e,s){yt(i,s),e==s.top&&(s.top=i),e.next&&(e.next.prev=i),i.next=e.next,i.prev=e,e.next=i},xe=function(i,e,s){yt(i,s),e==s.bottom&&(s.bottom=i),e.prev&&(e.prev.next=i),i.prev=e.prev,e.prev=i,i.next=e},Le=function(i){return function(){throw new Error("Raphaël: you are calling to method “"+i+"” of removed object")}};if(n.pathToRelative=se,n.svg){p.svgns="http://www.w3.org/2000/svg",p.xlink="http://www.w3.org/1999/xlink",it=function(i){return+i+(~~i===i)*.5};var v=function(i,e){if(e)for(var s in e)e[S](s)&&i[ct](s,w(e[s]));else return i=O.createElementNS(p.svgns,i),i.style.webkitTapHighlightColor="rgba(0,0,0,0)",i};n[Ot]=function(){return`Your browser supports SVG.
You are running Raphaël `+this.version};var Ge=function(i,e){var s=v("path");e.canvas&&e.canvas[U](s);var a=new P(s,e);return a.type="path",It(a,{fill:"none",stroke:"#000",path:i}),a},Xt=function(i,e,s){var a="linear",o=.5,_=.5,E=i.style;if(e=w(e)[nt](de,function(R,F,G){if(a="radial",F&&G){o=Y(F),_=Y(G);var D=(_>.5)*2-1;K(o-.5,2)+K(_-.5,2)>.25&&(_=W.sqrt(.25-K(o-.5,2))*D+.5)&&_!=.5&&(_=_.toFixed(5)-1e-5*D)}return y}),e=e[q](/\s*\-\s*/),a=="linear"){var T=e.shift();if(T=-Y(T),isNaN(T))return null;var l=[0,0,W.cos(T*ht/180),W.sin(T*ht/180)],u=1/(at(J(l[2]),J(l[3]))||1);l[2]*=u,l[3]*=u,l[2]<0&&(l[0]=-l[2],l[2]=0),l[3]<0&&(l[1]=-l[3],l[3]=0)}var d=fe(e);if(!d)return null;var A=i.getAttribute(mt);A=A.match(/^url\(#(.*)\)$/),A&&s.defs.removeChild(O.getElementById(A[1]));var I=v(a+"Gradient");I.id=kt(),v(I,a=="radial"?{fx:o,fy:_}:{x1:l[0],y1:l[1],x2:l[2],y2:l[3]}),s.defs[U](I);for(var g=0,f=d[x];g<f;g++){var m=v("stop");v(m,{offset:d[g].offset?d[g].offset:g?"100%":"0%","stop-color":d[g].color||"#fff"}),I[U](m)}return v(i,{fill:"url(#"+I.id+")",opacity:1,"fill-opacity":1}),E.fill=y,E.opacity=1,E.fillOpacity=1,1},ae=function(i){var e=i.getBBox();v(i.pattern,{patternTransform:n.format("translate({0},{1})",e.x,e.y)})},It=function(i,e){var s={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},a=i.node,o=i.attrs,_=i.rotate(),E=function(b,ot){if(ot=s[At.call(ot)],ot){for(var st=b.attrs["stroke-width"]||"1",Rt={round:st,square:st,butt:0}[b.attrs["stroke-linecap"]||e["stroke-linecap"]]||0,ft=[],Ut=ot[x];Ut--;)ft[Ut]=ot[Ut]*st+(Ut%2?1:-1)*Rt;v(a,{"stroke-dasharray":ft[tt](",")})}};e[S]("rotation")&&(_=e.rotation);var T=w(_)[q](t);T.length-1?(T[1]=+T[1],T[2]=+T[2]):T=null,Y(_)&&i.rotate(0,!0);for(var l in e)if(e[S](l)){if(!Yt[S](l))continue;var u=e[l];switch(o[l]=u,l){case"blur":i.blur(u);break;case"rotation":i.rotate(u,!0);break;case"href":case"title":case"target":var d=a.parentNode;if(At.call(d.tagName)!="a"){var A=v("a");d.insertBefore(A,a),A[U](a),d=A}l=="target"&&u=="blank"?d.setAttributeNS(i.paper.xlink,"show","new"):d.setAttributeNS(i.paper.xlink,l,u);break;case"cursor":a.style.cursor=u;break;case"clip-rect":var I=w(u)[q](t);if(I[x]==4){i.clip&&i.clip.parentNode.parentNode.removeChild(i.clip.parentNode);var g=v("clipPath"),f=v("rect");g.id=kt(),v(f,{x:I[0],y:I[1],width:I[2],height:I[3]}),g[U](f),i.paper.defs[U](g),v(a,{"clip-path":"url(#"+g.id+")"}),i.clip=f}if(!u){var m=O.getElementById(a.getAttribute("clip-path")[nt](/(^url\(#|\)$)/g,y));m&&m.parentNode.removeChild(m),v(a,{"clip-path":y}),delete i.clip}break;case"path":i.type=="path"&&v(a,{d:u?o.path=Bt(u):"M0,0"});break;case"width":if(a[ct](l,u),o.fx)l="x",u=o.x;else break;case"x":o.fx&&(u=-o.x-(o.width||0));case"rx":if(l=="rx"&&i.type=="rect")break;case"cx":T&&(l=="x"||l=="cx")&&(T[1]+=u-o[l]),a[ct](l,u),i.pattern&&ae(i);break;case"height":if(a[ct](l,u),o.fy)l="y",u=o.y;else break;case"y":o.fy&&(u=-o.y-(o.height||0));case"ry":if(l=="ry"&&i.type=="rect")break;case"cy":T&&(l=="y"||l=="cy")&&(T[2]+=u-o[l]),a[ct](l,u),i.pattern&&ae(i);break;case"r":i.type=="rect"?v(a,{rx:u,ry:u}):a[ct](l,u);break;case"src":i.type=="image"&&a.setAttributeNS(i.paper.xlink,"href",u);break;case"stroke-width":a.style.strokeWidth=u,a[ct](l,u),o["stroke-dasharray"]&&E(i,o["stroke-dasharray"]);break;case"stroke-dasharray":E(i,u);break;case"translation":var R=w(u)[q](t);R[0]=+R[0]||0,R[1]=+R[1]||0,T&&(T[1]+=R[0],T[2]+=R[1]),Kt.call(i,R[0],R[1]);break;case"scale":R=w(u)[q](t),i.scale(+R[0]||1,+R[1]||+R[0]||1,isNaN(Y(R[2]))?null:+R[2],isNaN(Y(R[3]))?null:+R[3]);break;case mt:var F=w(u).match(Oe);if(F){g=v("pattern");var G=v("image");g.id=kt(),v(g,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),v(G,{x:0,y:0}),G.setAttributeNS(i.paper.xlink,"href",F[1]),g[U](G);var D=O.createElement("img");D.style.cssText="position:absolute;left:-9999em;top-9999em",D.onload=function(){v(g,{width:this.offsetWidth,height:this.offsetHeight}),v(G,{width:this.offsetWidth,height:this.offsetHeight}),O.body.removeChild(this),i.paper.safari()},O.body[U](D),D.src=F[1],i.paper.defs[U](g),a.style.fill="url(#"+g.id+")",v(a,{fill:"url(#"+g.id+")"}),i.pattern=g,i.pattern&&ae(i);break}var X=n.getRGB(u);if(X.error)if(({circle:1,ellipse:1}[S](i.type)||w(u).charAt()!="r")&&Xt(a,u,i.paper)){o.gradient=u,o.fill="none";break}else delete e.gradient,delete o.gradient,!n.is(o.opacity,"undefined")&&n.is(e.opacity,"undefined")&&v(a,{opacity:o.opacity}),!n.is(o["fill-opacity"],"undefined")&&n.is(e["fill-opacity"],"undefined")&&v(a,{"fill-opacity":o["fill-opacity"]});X[S]("opacity")&&v(a,{"fill-opacity":X.opacity>1?X.opacity/100:X.opacity});case"stroke":X=n.getRGB(u),a[ct](l,X.hex),l=="stroke"&&X[S]("opacity")&&v(a,{"stroke-opacity":X.opacity>1?X.opacity/100:X.opacity});break;case"gradient":({circle:1,ellipse:1}[S](i.type)||w(u).charAt()!="r")&&Xt(a,u,i.paper);break;case"opacity":o.gradient&&!o[S]("stroke-opacity")&&v(a,{"stroke-opacity":u>1?u/100:u});case"fill-opacity":if(o.gradient){var V=O.getElementById(a.getAttribute(mt)[nt](/^url\(#|\)$/g,y));if(V){var z=V.getElementsByTagName("stop");z[z[x]-1][ct]("stop-opacity",u)}break}default:l=="font-size"&&(u=pt(u,10)+"px");var Q=l[nt](/(\-.)/g,function(b){return Mt.call(b.substring(1))});a.style[Q]=u,a[ct](l,u);break}}Ei(i,e),T?i.rotate(T.join(j)):Y(_)&&i.rotate(_,!0)},ye=1.2,Ei=function(i,e){if(!(i.type!="text"||!(e[S]("text")||e[S]("font")||e[S]("font-size")||e[S]("x")||e[S]("y")))){var s=i.attrs,a=i.node,o=a.firstChild?pt(O.defaultView.getComputedStyle(a.firstChild,y).getPropertyValue("font-size"),10):10;if(e[S]("text")){for(s.text=e.text;a.firstChild;)a.removeChild(a.firstChild);for(var _=w(e.text)[q](`
`),E=0,T=_[x];E<T;E++)if(_[E]){var l=v("tspan");E&&v(l,{dy:o*ye,x:s.x}),l[U](O.createTextNode(_[E])),a[U](l)}}else for(_=a.getElementsByTagName("tspan"),E=0,T=_[x];E<T;E++)E&&v(_[E],{dy:o*ye,x:s.x});v(a,{y:s.y});var u=i.getBBox(),d=s.y-(u.y+u.height/2);d&&n.is(d,"finite")&&v(a,{y:s.y+d})}},P=function(i,e){this[0]=i,this.id=n._oid++,this.node=i,i.raphael=this,this.paper=e,this.attrs=this.attrs||{},this.transformations=[],this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},k=P[c];P[c].rotate=function(i,e,s){if(this.removed)return this;if(i==null)return this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][tt](j):this._.rt.deg;var a=this.getBBox();return i=w(i)[q](t),i[x]-1&&(e=Y(i[1]),s=Y(i[2])),i=Y(i[0]),e!=null&&e!==!1?this._.rt.deg=i:this._.rt.deg+=i,s==null&&(e=null),this._.rt.cx=e,this._.rt.cy=s,e=e??a.x+a.width/2,s=s??a.y+a.height/2,this._.rt.deg?(this.transformations[0]=n.format("rotate({0} {1} {2})",this._.rt.deg,e,s),this.clip&&v(this.clip,{transform:n.format("rotate({0} {1} {2})",-this._.rt.deg,e,s)})):(this.transformations[0]=y,this.clip&&v(this.clip,{transform:y})),v(this.node,{transform:this.transformations[tt](j)}),this},P[c].hide=function(){return!this.removed&&(this.node.style.display="none"),this},P[c].show=function(){return!this.removed&&(this.node.style.display=""),this},P[c].remove=function(){if(!this.removed){yt(this,this.paper),this.node.parentNode.removeChild(this.node);for(var i in this)delete this[i];this.removed=!0}},P[c].getBBox=function(){if(this.removed)return this;if(this.type=="path")return Pt(this.attrs.path);if(this.node.style.display=="none"){this.show();var i=!0}var e={};try{e=this.node.getBBox()}catch{}finally{e=e||{}}if(this.type=="text"){e={x:e.x,y:1/0,width:0,height:0};for(var s=0,a=this.node.getNumberOfChars();s<a;s++){var o=this.node.getExtentOfChar(s);o.y<e.y&&(e.y=o.y),o.y+o.height-e.y>e.height&&(e.height=o.y+o.height-e.y),o.x+o.width-e.x>e.width&&(e.width=o.x+o.width-e.x)}}return i&&this.hide(),e},P[c].attr=function(i,e){if(this.removed)return this;if(i==null){var s={};for(var a in this.attrs)this.attrs[S](a)&&(s[a]=this.attrs[a]);return this._.rt.deg&&(s.rotation=this.rotate()),(this._.sx!=1||this._.sy!=1)&&(s.scale=this.scale()),s.gradient&&s.fill=="none"&&(s.fill=s.gradient)&&delete s.gradient,s}if(e==null&&n.is(i,gt))return i=="translation"?Kt.call(this):i=="rotation"?this.rotate():i=="scale"?this.scale():i==mt&&this.attrs.fill=="none"&&this.attrs.gradient?this.attrs.gradient:this.attrs[i];if(e==null&&n.is(i,_t)){for(var o={},_=0,E=i.length;_<E;_++)o[i[_]]=this.attr(i[_]);return o}if(e!=null){var T={};T[i]=e}else i!=null&&n.is(i,"object")&&(T=i);for(var l in this.paper.customAttributes)if(this.paper.customAttributes[S](l)&&T[S](l)&&n.is(this.paper.customAttributes[l],"function")){var u=this.paper.customAttributes[l].apply(this,[][M](T[l]));this.attrs[l]=T[l];for(var d in u)u[S](d)&&(T[d]=u[d])}return It(this,T),this},P[c].toFront=function(){if(this.removed)return this;this.node.parentNode[U](this.node);var i=this.paper;return i.top!=this&&Ae(this,i),this},P[c].toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),ge(this,this.paper),this.paper),this)},P[c].insertAfter=function(i){if(this.removed)return this;var e=i.node||i[i.length-1].node;return e.nextSibling?e.parentNode.insertBefore(this.node,e.nextSibling):e.parentNode[U](this.node),Ue(this,i,this.paper),this},P[c].insertBefore=function(i){if(this.removed)return this;var e=i.node||i[0].node;return e.parentNode.insertBefore(this.node,e),xe(this,i,this.paper),this},P[c].blur=function(i){var e=this;if(+i!=0){var s=v("filter"),a=v("feGaussianBlur");e.attrs.blur=i,s.id=kt(),v(a,{stdDeviation:+i||1.5}),s.appendChild(a),e.paper.defs.appendChild(s),e._blur=s,v(e.node,{filter:"url(#"+s.id+")"})}else e._blur&&(e._blur.parentNode.removeChild(e._blur),delete e._blur,delete e.attrs.blur),e.node.removeAttribute("filter")};var Fe=function(i,e,s,a){var o=v("circle");i.canvas&&i.canvas[U](o);var _=new P(o,i);return _.attrs={cx:e,cy:s,r:a,fill:"none",stroke:"#000"},_.type="circle",v(o,_.attrs),_},Ce=function(i,e,s,a,o,_){var E=v("rect");i.canvas&&i.canvas[U](E);var T=new P(E,i);return T.attrs={x:e,y:s,width:a,height:o,r:_||0,rx:_||0,ry:_||0,fill:"none",stroke:"#000"},T.type="rect",v(E,T.attrs),T},ve=function(i,e,s,a,o){var _=v("ellipse");i.canvas&&i.canvas[U](_);var E=new P(_,i);return E.attrs={cx:e,cy:s,rx:a,ry:o,fill:"none",stroke:"#000"},E.type="ellipse",v(_,E.attrs),E},Be=function(i,e,s,a,o,_,E="none"){var T=v("image");v(T,{x:s,y:a,width:o,height:_,preserveAspectRatio:E}),T.setAttributeNS(i.xlink,"href",e),i.canvas&&i.canvas[U](T);var l=new P(T,i);return l.attrs={x:s,y:a,width:o,height:_,src:e},l.type="image",l},Xe=function(i,e,s,a){var o=v("text");v(o,{x:e,y:s,"text-anchor":"middle"}),i.canvas&&i.canvas[U](o);var _=new P(o,i);return _.attrs={x:e,y:s,"text-anchor":"middle",text:a,font:Yt.font,stroke:"none",fill:"#000"},_.type="text",It(_,_.attrs),_},be=function(i,e){return this.width=i||this.width,this.height=e||this.height,this.canvas[ct]("width",this.width),this.canvas[ct]("height",this.height),this},oe=function(){var i=Ie[C](0,arguments),e=i&&i.container,s=i.x,a=i.y,o=i.width,_=i.height;if(!e)throw new Error("SVG container not found.");var E=v("svg");return s=s||0,a=a||0,o=o||512,_=_||342,v(E,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:o,height:_}),e==1?(E.style.cssText="position:absolute;left:"+s+"px;top:"+a+"px",O.body[U](E)):e.firstChild?e.insertBefore(E,e.firstChild):e[U](E),e=new H,e.width=o,e.height=_,e.canvas=E,re.call(e,e,n.fn),e.clear(),e};p.clear=function(){for(var i=this.canvas;i.firstChild;)i.removeChild(i.firstChild);this.bottom=this.top=null,(this.desc=v("desc"))[U](O.createTextNode("Created with Raphaël")),i[U](this.desc),i[U](this.defs=v("defs"))},p.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var i in this)this[i]=Le(i)}}if(n.vml){let i=function(e,s,a,o,_){return _?n.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",e+_,s,a-_*2,_,-_,o-_*2,_*2-a,_*2-o):n.format("M{0},{1}l{2},0,0,{3},{4},0z",e,s,a,o,-a)};var De={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},ci=/([clmz]),?([^clmz]*)/gi,li=/ progid:\S+Blur\([^\)]+\)/g,ui=/-?[^,\s-]+/g,bt=1e3+j+1e3,Ft=10,Dt={path:1,rect:1},Ni=function(e){var s=/[ahqstv]/ig,a=Bt;if(w(e).match(s)&&(a=$t),s=/[clmz]/g,a==Bt&&!w(e).match(s)){var o=w(e)[nt](ci,function(I,g,f){var m=[],R=At.call(g)=="m",F=De[g];return f[nt](ui,function(G){R&&m[x]==2&&(F+=m+De[g=="m"?"l":"L"],m=[]),m[$](it(G*Ft))}),F+m});return o}var _=a(e),E,T;o=[];for(var l=0,u=_[x];l<u;l++){E=_[l],T=At.call(_[l][0]),T=="z"&&(T="x");for(var d=1,A=E[x];d<A;d++)T+=it(E[d]*Ft)+(d!=A-1?",":y);o[$](T)}return o[tt](j)};n[Ot]=function(){return`Your browser doesn’t support SVG. Falling down to VML.
You are running Raphaël `+this.version},Ge=function(e,s){var a=rt("group");a.style.cssText="position:absolute;left:0;top:0;width:"+s.width+"px;height:"+s.height+"px",a.coordsize=s.coordsize,a.coordorigin=s.coordorigin;var o=rt("shape"),_=o.style;_.width=s.width+"px",_.height=s.height+"px",o.coordsize=bt,o.coordorigin=s.coordorigin,a[U](o);var E=new P(o,a,s),T={fill:"none",stroke:"#000"};return e&&(T.path=e),E.type="path",E.path=[],E.Path=y,It(E,T),s.canvas[U](a),E},It=function(e,s){e.attrs=e.attrs||{};var a=e.node,o=e.attrs,_=a.style,E,T=(s.x!=o.x||s.y!=o.y||s.width!=o.width||s.height!=o.height||s.r!=o.r)&&e.type=="rect",l=e;for(var u in s)s[S](u)&&(o[u]=s[u]);if(T&&(o.path=i(o.x,o.y,o.width,o.height,o.r),e.X=o.x,e.Y=o.y,e.W=o.width,e.H=o.height),s.href&&(a.href=s.href),s.title&&(a.title=s.title),s.target&&(a.target=s.target),s.cursor&&(_.cursor=s.cursor),"blur"in s&&e.blur(s.blur),(s.path&&e.type=="path"||T)&&(a.path=Ni(o.path)),s.rotation!=null&&e.rotate(s.rotation,!0),s.translation&&(E=w(s.translation)[q](t),Kt.call(e,E[0],E[1]),e._.rt.cx!=null&&(e._.rt.cx+=+E[0],e._.rt.cy+=+E[1],e.setBox(e.attrs,E[0],E[1]))),s.scale&&(E=w(s.scale)[q](t),e.scale(+E[0]||1,+E[1]||+E[0]||1,+E[2]||null,+E[3]||null)),"clip-rect"in s){var d=w(s["clip-rect"])[q](t);if(d[x]==4){d[2]=+d[2]+ +d[0],d[3]=+d[3]+ +d[1];var A=a.clipRect||O.createElement("div"),I=A.style,g=a.parentNode;I.clip=n.format("rect({1}px {2}px {3}px {0}px)",d),a.clipRect||(I.position="absolute",I.top=0,I.left=0,I.width=e.paper.width+"px",I.height=e.paper.height+"px",g.parentNode.insertBefore(A,g),A[U](g),a.clipRect=A)}s["clip-rect"]||a.clipRect&&(a.clipRect.style.clip=y)}if(e.type=="image"&&s.src&&(a.src=s.src),e.type=="image"&&s.opacity&&(a.filterOpacity=te+".Alpha(opacity="+s.opacity*100+")",_.filter=(a.filterMatrix||y)+(a.filterOpacity||y)),s.font&&(_.font=s.font),s["font-family"]&&(_.fontFamily='"'+s["font-family"][q](",")[0][nt](/^['"]+|['"]+$/g,y)+'"'),s["font-size"]&&(_.fontSize=s["font-size"]),s["font-weight"]&&(_.fontWeight=s["font-weight"]),s["font-style"]&&(_.fontStyle=s["font-style"]),s.opacity!=null||s["stroke-width"]!=null||s.fill!=null||s.stroke!=null||s["stroke-width"]!=null||s["stroke-opacity"]!=null||s["fill-opacity"]!=null||s["stroke-dasharray"]!=null||s["stroke-miterlimit"]!=null||s["stroke-linejoin"]!=null||s["stroke-linecap"]!=null){a=e.shape||a;var f=a.getElementsByTagName(mt)&&a.getElementsByTagName(mt)[0],m=!1;if(!f&&(m=f=rt(mt)),"fill-opacity"in s||"opacity"in s){var R=((+o["fill-opacity"]+1||2)-1)*((+o.opacity+1||2)-1)*((+n.getRGB(s.fill).o+1||2)-1);R=St(at(R,0),1),f.opacity=R}if(s.fill&&(f.on=!0),(f.on==null||s.fill=="none")&&(f.on=!1),f.on&&s.fill){var F=s.fill.match(Oe);F?(f.src=F[1],f.type="tile"):(f.color=n.getRGB(s.fill).hex,f.src=y,f.type="solid",n.getRGB(s.fill).error&&(l.type in{circle:1,ellipse:1}||w(s.fill).charAt()!="r")&&Xt(l,s.fill)&&(o.fill="none",o.gradient=s.fill))}m&&a[U](f);var G=a.getElementsByTagName("stroke")&&a.getElementsByTagName("stroke")[0],D=!1;!G&&(D=G=rt("stroke")),(s.stroke&&s.stroke!="none"||s["stroke-width"]||s["stroke-opacity"]!=null||s["stroke-dasharray"]||s["stroke-miterlimit"]||s["stroke-linejoin"]||s["stroke-linecap"])&&(G.on=!0),(s.stroke=="none"||G.on==null||s.stroke==0||s["stroke-width"]==0)&&(G.on=!1);var X=n.getRGB(s.stroke);G.on&&s.stroke&&(G.color=X.hex),R=((+o["stroke-opacity"]+1||2)-1)*((+o.opacity+1||2)-1)*((+X.o+1||2)-1);var V=(Y(s["stroke-width"])||1)*.75;if(R=St(at(R,0),1),s["stroke-width"]==null&&(V=o["stroke-width"]),s["stroke-width"]&&(G.weight=V),V&&V<1&&(R*=V)&&(G.weight=1),G.opacity=R,s["stroke-linejoin"]&&(G.joinstyle=s["stroke-linejoin"]||"miter"),G.miterlimit=s["stroke-miterlimit"]||8,s["stroke-linecap"]&&(G.endcap=s["stroke-linecap"]=="butt"?"flat":s["stroke-linecap"]=="square"?"square":"round"),s["stroke-dasharray"]){var z={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};G.dashstyle=z[S](s["stroke-dasharray"])?z[s["stroke-dasharray"]]:y}D&&a[U](G)}if(l.type=="text")switch(_=l.paper.span.style,o.font&&(_.font=o.font),o["font-family"]&&(_.fontFamily=o["font-family"]),o["font-size"]&&(_.fontSize=o["font-size"]),o["font-weight"]&&(_.fontWeight=o["font-weight"]),o["font-style"]&&(_.fontStyle=o["font-style"]),l.node.string&&(l.paper.span.innerHTML=w(l.node.string)[nt](/</g,"&#60;")[nt](/&/g,"&#38;")[nt](/\n/g,"<br>")),l.W=o.w=l.paper.span.offsetWidth,l.H=o.h=l.paper.span.offsetHeight,l.X=o.x,l.Y=o.y+it(l.H/2),o["text-anchor"]){case"start":l.node.style["v-text-align"]="left",l.bbx=it(l.W/2);break;case"end":l.node.style["v-text-align"]="right",l.bbx=-it(l.W/2);break;default:l.node.style["v-text-align"]="center";break}},Xt=function(e,s){e.attrs=e.attrs||{},e.attrs;var a,o="linear",_=".5 .5";if(e.attrs.gradient=s,s=w(s)[nt](de,function(A,I,g){return o="radial",I&&g&&(I=Y(I),g=Y(g),K(I-.5,2)+K(g-.5,2)>.25&&(g=W.sqrt(.25-K(I-.5,2))*((g>.5)*2-1)+.5),_=I+j+g),y}),s=s[q](/\s*\-\s*/),o=="linear"){var E=s.shift();if(E=-Y(E),isNaN(E))return null}var T=fe(s);if(!T)return null;if(e=e.shape||e.node,a=e.getElementsByTagName(mt)[0]||rt(mt),!a.parentNode&&e.appendChild(a),T[x]){a.on=!0,a.method="none",a.color=T[0].color,a.color2=T[T[x]-1].color;for(var l=[],u=0,d=T[x];u<d;u++)T[u].offset&&l[$](T[u].offset+j+T[u].color);a.colors&&(a.colors.value=l[x]?l[tt]():"0% "+a.color),o=="radial"?(a.type="gradientradial",a.focus="100%",a.focussize=_,a.focusposition=_):(a.type="gradient",a.angle=(270-E)%360)}return 1},P=function(e,s,a){this[0]=e,this.id=n._oid++,this.node=e,e.raphael=this,this.X=0,this.Y=0,this.attrs={},this.Group=s,this.paper=a,this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1},!a.bottom&&(a.bottom=this),this.prev=a.top,a.top&&(a.top.next=this),a.top=this,this.next=null},k=P[c],k.rotate=function(e,s,a){return this.removed?this:e==null?this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][tt](j):this._.rt.deg:(e=w(e)[q](t),e[x]-1&&(s=Y(e[1]),a=Y(e[2])),e=Y(e[0]),s!=null?this._.rt.deg=e:this._.rt.deg+=e,a==null&&(s=null),this._.rt.cx=s,this._.rt.cy=a,this.setBox(this.attrs,s,a),this.Group.style.rotation=this._.rt.deg,this)},k.setBox=function(e,s,a){if(this.removed)return this;var o=this.Group.style,_=this.shape&&this.shape.style||this.node.style;e=e||{};for(var E in e)e[S](E)&&(this.attrs[E]=e[E]);s=s||this._.rt.cx,a=a||this._.rt.cy;var T=this.attrs,l,u,d,A;switch(this.type){case"circle":l=T.cx-T.r,u=T.cy-T.r,d=A=T.r*2;break;case"ellipse":l=T.cx-T.rx,u=T.cy-T.ry,d=T.rx*2,A=T.ry*2;break;case"image":l=+T.x,u=+T.y,d=T.width||0,A=T.height||0;break;case"text":this.textpath.v=["m",it(T.x),", ",it(T.y-2),"l",it(T.x)+1,", ",it(T.y-2)][tt](y),l=T.x-it(this.W/2),u=T.y-this.H/2,d=this.W,A=this.H;break;case"rect":case"path":if(this.attrs.path){var I=Pt(this.attrs.path);l=I.x,u=I.y,d=I.width,A=I.height}else l=0,u=0,d=this.paper.width,A=this.paper.height;break;default:l=0,u=0,d=this.paper.width,A=this.paper.height;break}s=s??l+d/2,a=a??u+A/2;var g=s-this.paper.width/2,f=a-this.paper.height/2,m;o.left!=(m=g+"px")&&(o.left=m),o.top!=(m=f+"px")&&(o.top=m),this.X=Dt[S](this.type)?-g:l,this.Y=Dt[S](this.type)?-f:u,this.W=d,this.H=A,Dt[S](this.type)?(_.left!=(m=-g*Ft+"px")&&(_.left=m),_.top!=(m=-f*Ft+"px")&&(_.top=m)):this.type=="text"?(_.left!=(m=-g+"px")&&(_.left=m),_.top!=(m=-f+"px")&&(_.top=m)):(o.width!=(m=this.paper.width+"px")&&(o.width=m),o.height!=(m=this.paper.height+"px")&&(o.height=m),_.left!=(m=l-g+"px")&&(_.left=m),_.top!=(m=u-f+"px")&&(_.top=m),_.width!=(m=d+"px")&&(_.width=m),_.height!=(m=A+"px")&&(_.height=m))},k.hide=function(){return!this.removed&&(this.Group.style.display="none"),this},k.show=function(){return!this.removed&&(this.Group.style.display="block"),this},k.getBBox=function(){return this.removed?this:Dt[S](this.type)?Pt(this.attrs.path):{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}},k.remove=function(){if(!this.removed){yt(this,this.paper),this.node.parentNode.removeChild(this.node),this.Group.parentNode.removeChild(this.Group),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var e in this)delete this[e];this.removed=!0}},k.attr=function(e,s){if(this.removed)return this;if(e==null){var a={};for(var o in this.attrs)this.attrs[S](o)&&(a[o]=this.attrs[o]);return this._.rt.deg&&(a.rotation=this.rotate()),(this._.sx!=1||this._.sy!=1)&&(a.scale=this.scale()),a.gradient&&a.fill=="none"&&(a.fill=a.gradient)&&delete a.gradient,a}if(s==null&&n.is(e,"string"))return e=="translation"?Kt.call(this):e=="rotation"?this.rotate():e=="scale"?this.scale():e==mt&&this.attrs.fill=="none"&&this.attrs.gradient?this.attrs.gradient:this.attrs[e];if(this.attrs&&s==null&&n.is(e,_t)){var _,E={};for(o=0,_=e[x];o<_;o++)E[e[o]]=this.attr(e[o]);return E}var T;if(s!=null&&(T={},T[e]=s),s==null&&n.is(e,"object")&&(T=e),T){for(var l in this.paper.customAttributes)if(this.paper.customAttributes[S](l)&&T[S](l)&&n.is(this.paper.customAttributes[l],"function")){var u=this.paper.customAttributes[l].apply(this,[][M](T[l]));this.attrs[l]=T[l];for(var d in u)u[S](d)&&(T[d]=u[d])}T.text&&this.type=="text"&&(this.node.string=T.text),It(this,T),T.gradient&&({circle:1,ellipse:1}[S](this.type)||w(T.gradient).charAt()!="r")&&Xt(this,T.gradient),(!Dt[S](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this},k.toFront=function(){return!this.removed&&this.Group.parentNode[U](this.Group),this.paper.top!=this&&Ae(this,this.paper),this},k.toBack=function(){return this.removed?this:(this.Group.parentNode.firstChild!=this.Group&&(this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild),ge(this,this.paper)),this)},k.insertAfter=function(e){return this.removed?this:(e.constructor==Et&&(e=e[e.length-1]),e.Group.nextSibling?e.Group.parentNode.insertBefore(this.Group,e.Group.nextSibling):e.Group.parentNode[U](this.Group),Ue(this,e,this.paper),this)},k.insertBefore=function(e){return this.removed?this:(e.constructor==Et&&(e=e[0]),e.Group.parentNode.insertBefore(this.Group,e.Group),xe(this,e,this.paper),this)},k.blur=function(e){var s=this.node.runtimeStyle,a=s.filter;a=a.replace(li,y),+e!=0?(this.attrs.blur=e,s.filter=a+j+te+".Blur(pixelradius="+(+e||1.5)+")",s.margin=n.format("-{0}px 0 0 -{0}px",it(+e||1.5))):(s.filter=a,s.margin=0,delete this.attrs.blur)},Fe=function(e,s,a,o){var _=rt("group"),E=rt("oval");E.style,_.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",_.coordsize=bt,_.coordorigin=e.coordorigin,_[U](E);var T=new P(E,_,e);return T.type="circle",It(T,{stroke:"#000",fill:"none"}),T.attrs.cx=s,T.attrs.cy=a,T.attrs.r=o,T.setBox({x:s-o,y:a-o,width:o*2,height:o*2}),e.canvas[U](_),T},Ce=function(e,s,a,o,_,E){var T=i(s,a,o,_,E),l=e.path(T),u=l.attrs;return l.X=u.x=s,l.Y=u.y=a,l.W=u.width=o,l.H=u.height=_,u.r=E,u.path=T,l.type="rect",l},ve=function(e,s,a,o,_){var E=rt("group"),T=rt("oval");T.style,E.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",E.coordsize=bt,E.coordorigin=e.coordorigin,E[U](T);var l=new P(T,E,e);return l.type="ellipse",It(l,{stroke:"#000"}),l.attrs.cx=s,l.attrs.cy=a,l.attrs.rx=o,l.attrs.ry=_,l.setBox({x:s-o,y:a-_,width:o*2,height:_*2}),e.canvas[U](E),l},Be=function(e,s,a,o,_,E){var T=rt("group"),l=rt("image");T.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",T.coordsize=bt,T.coordorigin=e.coordorigin,l.src=s,T[U](l);var u=new P(l,T,e);return u.type="image",u.attrs.src=s,u.attrs.x=a,u.attrs.y=o,u.attrs.w=_,u.attrs.h=E,u.setBox({x:a,y:o,width:_,height:E}),e.canvas[U](T),u},Xe=function(e,s,a,o){var _=rt("group"),E=rt("shape"),T=E.style,l=rt("path");l.style;var u=rt("textpath");_.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",_.coordsize=bt,_.coordorigin=e.coordorigin,l.v=n.format("m{0},{1}l{2},{1}",it(s*10),it(a*10),it(s*10)+1),l.textpathok=!0,T.width=e.width,T.height=e.height,u.string=w(o),u.on=!0,E[U](u),E[U](l),_[U](E);var d=new P(u,_,e);return d.shape=E,d.textpath=l,d.type="text",d.attrs.text=o,d.attrs.x=s,d.attrs.y=a,d.attrs.w=1,d.attrs.h=1,It(d,{font:Yt.font,stroke:"none",fill:"#000"}),d.setBox(),e.canvas[U](_),d},be=function(e,s){var a=this.canvas.style;return e==+e&&(e+="px"),s==+s&&(s+="px"),a.width=e,a.height=s,a.clip="rect(0 "+e+" "+s+" 0)",this};var rt;O.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!O.namespaces.rvml&&O.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),rt=function(e){return O.createElement("<rvml:"+e+' class="rvml">')}}catch{rt=function(e){return O.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}oe=function(){var e=Ie[C](0,arguments),s=e.container,a=e.height,o=e.width,_=e.x,E=e.y;if(!s)throw new Error("VML container not found.");var T=new H,l=T.canvas=O.createElement("div"),u=l.style;return _=_||0,E=E||0,o=o||512,a=a||342,o==+o&&(o+="px"),a==+a&&(a+="px"),T.width=1e3,T.height=1e3,T.coordsize=Ft*1e3+j+Ft*1e3,T.coordorigin="0 0",T.span=O.createElement("span"),T.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",l[U](T.span),u.cssText=n.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",o,a),s==1?(O.body[U](l),u.left=_+"px",u.top=E+"px",u.position="absolute"):s.firstChild?s.insertBefore(l,s.firstChild):s[U](l),re.call(T,T,n.fn),T},p.clear=function(){this.canvas.innerHTML=y,this.span=O.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas[U](this.span),this.bottom=this.top=null},p.remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]=Le(e);return!0}}var Me=navigator.userAgent.match(/Version\\x2f(.*?)\s/);navigator.vendor=="Apple Computer, Inc."&&(Me&&Me[1]<4||navigator.platform.slice(0,2)=="iP")?p.safari=function(){var i=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});L.setTimeout(function(){i.remove()})}:p.safari=function(){};for(var Si=function(){this.returnValue=!1},Oi=function(){return this.originalEvent.preventDefault()},di=function(){this.cancelBubble=!0},Ri=function(){return this.originalEvent.stopPropagation()},mi=function(){{if(O.addEventListener)return function(i,e,s,a){var o=Z&&Jt[e]?Jt[e]:e,_=function(E){if(Z&&Jt[S](e)){for(var T=0,l=E.targetTouches&&E.targetTouches.length;T<l;T++)if(E.targetTouches[T].target==i){var u=E;E=E.targetTouches[T],E.originalEvent=u,E.preventDefault=Oi,E.stopPropagation=Ri;break}}return s.call(a,E)};return i.addEventListener(o,_,!1),function(){return i.removeEventListener(o,_,!1),!0}};if(O.attachEvent)return function(i,e,s,a){var o=function(E){return E=E||L.event,E.preventDefault=E.preventDefault||Si,E.stopPropagation=E.stopPropagation||di,s.call(a,E)};i.attachEvent("on"+e,o);var _=function(){return i.detachEvent("on"+e,o),!0};return _}}}(),ut=[],Te=function(i){for(var e=i.clientX,s=i.clientY,a=O.documentElement.scrollTop||O.body.scrollTop,o=O.documentElement.scrollLeft||O.body.scrollLeft,_,E=ut.length;E--;){if(_=ut[E],Z){for(var T=i.touches.length,l;T--;)if(l=i.touches[T],l.identifier==_.el._drag.id){e=l.clientX,s=l.clientY,(i.originalEvent?i.originalEvent:i).preventDefault();break}}else i.preventDefault();e+=o,s+=a,_.move&&_.move.call(_.move_scope||_.el,e-_.el._drag.x,s-_.el._drag.y,e,s,i)}},he=function(i){n.unmousemove(Te).unmouseup(he);for(var e=ut.length,s;e--;)s=ut[e],s.el._drag={},s.end&&s.end.call(s.end_scope||s.start_scope||s.move_scope||s.el,i);ut=[]},He=Se[x];He--;)(function(i){n[i]=P[c][i]=function(e,s){return n.is(e,"function")&&(this.events=this.events||[],this.events.push({name:i,f:e,unbind:mi(this.shape||this.node||O,i,e,s||this)})),this},n["un"+i]=P[c]["un"+i]=function(e){for(var s=this.events,a=s[x];a--;)if(s[a].name==i&&s[a].f==e)return s[a].unbind(),s.splice(a,1),!s.length&&delete this.events,this;return this}})(Se[He]);k.hover=function(i,e,s,a){return this.mouseover(i,s).mouseout(e,a||s)},k.unhover=function(i,e){return this.unmouseover(i).unmouseout(e)},k.drag=function(i,e,s,a,o,_){return this._drag={},this.mousedown(function(E){(E.originalEvent||E).preventDefault();var T=O.documentElement.scrollTop||O.body.scrollTop,l=O.documentElement.scrollLeft||O.body.scrollLeft;this._drag.x=E.clientX+l,this._drag.y=E.clientY+T,this._drag.id=E.identifier,e&&e.call(o||a||this,E.clientX+l,E.clientY+T,E),!ut.length&&n.mousemove(Te).mouseup(he),ut.push({el:this,move:i,end:s,move_scope:a,start_scope:o,end_scope:_})}),this},k.undrag=function(i,e,s){for(var a=ut.length;a--;)ut[a].el==this&&ut[a].move==i&&ut[a].end==s&&ut.splice(a++,1);!ut.length&&n.unmousemove(Te).unmouseup(he)},p.circle=function(i,e,s){return Fe(this,i||0,e||0,s||0)},p.rect=function(i,e,s,a,o){return Ce(this,i||0,e||0,s||0,a||0,o||0)},p.ellipse=function(i,e,s,a){return ve(this,i||0,e||0,s||0,a||0)},p.path=function(i){return i&&!n.is(i,gt)&&!n.is(i[0],_t)&&(i+=y),Ge(n.format[C](n,arguments),this)},p.image=function(i,e,s,a,o,_){return Be(this,i||"about:blank",e||0,s||0,a||0,o||0,_)},p.text=function(i,e,s){return Xe(this,i||0,e||0,w(s))},p.set=function(i){return arguments[x]>1&&(i=Array[c].splice.call(arguments,0,arguments[x])),new Et(i)},p.setSize=be,p.top=p.bottom=null,p.raphael=n;function Ye(){return this.x+j+this.y}k.resetScale=function(){if(this.removed)return this;this._.sx=1,this._.sy=1,this.attrs.scale="1 1"},k.scale=function(i,e,s,a){if(this.removed)return this;if(i==null&&e==null)return{x:this._.sx,y:this._.sy,toString:Ye};e=e||i,!+e&&(e=i);var o,_,E=this.attrs;if(i!=0){var T=this.getBBox(),l=T.x+T.width/2,u=T.y+T.height/2,d=J(i/this._.sx),A=J(e/this._.sy);s=+s||s==0?s:l,a=+a||a==0?a:u;var I=this._.sx>0,g=this._.sy>0,f=~~(i/J(i)),m=~~(e/J(e)),R=d*f,F=A*m,G=this.node.style,D=s+J(l-s)*R*(l>s==I?1:-1),X=a+J(u-a)*F*(u>a==g?1:-1),V=i*f>e*m?A:d;switch(this.type){case"rect":case"image":var z=E.width*d,Q=E.height*A;this.attr({height:Q,r:E.r*V,width:z,x:D-z/2,y:X-Q/2});break;case"circle":case"ellipse":this.attr({rx:E.rx*d,ry:E.ry*A,r:E.r*V,cx:D,cy:X});break;case"text":this.attr({x:D,y:X});break;case"path":for(var b=se(E.path),ot=!0,st=I?R:d,Rt=g?F:A,ft=0,Ut=b[x];ft<Ut;ft++){var Tt=b[ft],Ct=Mt.call(Tt[0]);{if(Ct=="M"&&ot)continue;ot=!1}if(Ct=="A")Tt[b[ft][x]-2]*=st,Tt[b[ft][x]-1]*=Rt,Tt[1]*=d,Tt[2]*=A,Tt[5]=+(f+m?!!+Tt[5]:!+Tt[5]);else if(Ct=="H")for(var lt=1,xt=Tt[x];lt<xt;lt++)Tt[lt]*=st;else if(Ct=="V")for(lt=1,xt=Tt[x];lt<xt;lt++)Tt[lt]*=Rt;else for(lt=1,xt=Tt[x];lt<xt;lt++)Tt[lt]*=lt%2?st:Rt}var Gt=Pt(b);o=D-Gt.x-Gt.width/2,_=X-Gt.y-Gt.height/2,b[0][1]+=o,b[0][2]+=_,this.attr({path:b});break}this.type in{text:1,image:1}&&(f!=1||m!=1)?this.transformations?(this.transformations[2]="scale("[M](f,",",m,")"),this.node[ct]("transform",this.transformations[tt](j)),o=f==-1?-E.x-(z||0):E.x,_=m==-1?-E.y-(Q||0):E.y,this.attr({x:o,y:_}),E.fx=f-1,E.fy=m-1):(this.node.filterMatrix=te+".Matrix(M11="[M](f,", M12=0, M21=0, M22=",m,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')"),G.filter=(this.node.filterMatrix||y)+(this.node.filterOpacity||y)):this.transformations?(this.transformations[2]=y,this.node[ct]("transform",this.transformations[tt](j)),E.fx=0,E.fy=0):(this.node.filterMatrix=y,G.filter=(this.node.filterMatrix||y)+(this.node.filterOpacity||y)),E.scale=[i,e,s,a][tt](j),this._.sx=i,this._.sy=e}return this},k.clone=function(){if(this.removed)return null;var i=this.attr();return delete i.scale,delete i.translation,this.paper[this.type]().attr(i)};var _e={},Qt=function(i,e,s,a,o,_,E,T,l){var u=0,d=100,A=[i,e,s,a,o,_,E,T].join(),I=_e[A],g,f;if(!I&&(_e[A]=I={data:[]}),I.timer&&clearTimeout(I.timer),I.timer=setTimeout(function(){delete _e[A]},2e3),l!=null){var m=Qt(i,e,s,a,o,_,E,T);d=~~m*10}for(var R=0;R<d+1;R++){if(I.data[l]>R?f=I.data[R*d]:(f=n.findDotsAtSegment(i,e,s,a,o,_,E,T,R/d),I.data[R]=f),R&&(u+=K(K(g.x-f.x,2)+K(g.y-f.y,2),.5)),l!=null&&u>=l)return f;g=f}if(l==null)return u},Ee=function(i,e){return function(s,a,o){s=$t(s);for(var _,E,T,l,u="",d={},A,I=0,g=0,f=s.length;g<f;g++){if(T=s[g],T[0]=="M")_=+T[1],E=+T[2];else{if(l=Qt(_,E,T[1],T[2],T[3],T[4],T[5],T[6]),I+l>a){if(e&&!d.start){if(A=Qt(_,E,T[1],T[2],T[3],T[4],T[5],T[6],a-I),u+=["C",A.start.x,A.start.y,A.m.x,A.m.y,A.x,A.y],o)return u;d.start=u,u=["M",A.x,A.y+"C",A.n.x,A.n.y,A.end.x,A.end.y,T[5],T[6]][tt](),I+=l,_=+T[5],E=+T[6];continue}if(!i&&!e)return A=Qt(_,E,T[1],T[2],T[3],T[4],T[5],T[6],a-I),{x:A.x,y:A.y,alpha:A.alpha}}I+=l,_=+T[5],E=+T[6]}u+=T}return d.end=u,A=i?I:e?d:n.findDotsAtSegment(_,E,T[1],T[2],T[3],T[4],T[5],T[6],1),A.alpha&&(A={x:A.x,y:A.y,alpha:A.alpha}),A}},we=Ee(1),Zt=Ee(),ce=Ee(0,1);k.getTotalLength=function(){if(this.type=="path")return this.node.getTotalLength?this.node.getTotalLength():we(this.attrs.path)},k.getPointAtLength=function(i){if(this.type=="path")return Zt(this.attrs.path,i)},k.getSubpath=function(i,e){if(this.type=="path"){if(J(this.getTotalLength()-e)<"1e-6")return ce(this.attrs.path,i).end;var s=ce(this.attrs.path,e,1);return i?ce(s,i).end:s}},n.easing_formulas={linear:function(i){return i},"<":function(i){return K(i,3)},">":function(i){return K(i-1,3)+1},"<>":function(i){return i=i*2,i<1?K(i,3)/2:(i-=2,(K(i,3)+2)/2)},backIn:function(i){var e=1.70158;return i*i*((e+1)*i-e)},backOut:function(i){i=i-1;var e=1.70158;return i*i*((e+1)*i+e)+1},elastic:function(i){if(i==0||i==1)return i;var e=.3,s=e/4;return K(2,-10*i)*W.sin((i-s)*(2*ht)/e)+1},bounce:function(i){var e=7.5625,s=2.75,a;return i<1/s?a=e*i*i:i<2/s?(i-=1.5/s,a=e*i*i+.75):i<2.5/s?(i-=2.25/s,a=e*i*i+.9375):(i-=2.625/s,a=e*i*i+.984375),a}};var Nt=[],ke=function(){for(var i=+new Date,e=0;e<Nt[x];e++){var s=Nt[e];if(!(s.stop||s.el.removed)){var a=i-s.start,o=s.ms,_=s.easing,E=s.from,T=s.diff,l=s.to,u=s.t,d=s.el,A={},I;if(a<o){var g=_(a/o);for(var f in E)if(E[S](f)){switch(ee[f]){case"along":I=g*o*T[f],l.back&&(I=l.len-I);var m=Zt(l[f],I);d.translate(T.sx-T.x||0,T.sy-T.y||0),T.x=m.x,T.y=m.y,d.translate(m.x-T.sx,m.y-T.sy),l.rot&&d.rotate(T.r+m.alpha,m.x,m.y);break;case et:I=+E[f]+g*o*T[f];break;case"colour":I="rgb("+[le(it(E[f].r+g*o*T[f].r)),le(it(E[f].g+g*o*T[f].g)),le(it(E[f].b+g*o*T[f].b))][tt](",")+")";break;case"path":I=[];for(var R=0,F=E[f][x];R<F;R++){I[R]=[E[f][R][0]];for(var G=1,D=E[f][R][x];G<D;G++)I[R][G]=+E[f][R][G]+g*o*T[f][R][G];I[R]=I[R][tt](j)}I=I[tt](j);break;case"csv":switch(f){case"translation":var X=g*o*T[f][0]-u.x,V=g*o*T[f][1]-u.y;u.x+=X,u.y+=V,I=X+j+V;break;case"rotation":I=+E[f][0]+g*o*T[f][0],E[f][1]&&(I+=","+E[f][1]+","+E[f][2]);break;case"scale":I=[+E[f][0]+g*o*T[f][0],+E[f][1]+g*o*T[f][1],2 in l[f]?l[f][2]:y,3 in l[f]?l[f][3]:y][tt](j);break;case"clip-rect":for(I=[],R=4;R--;)I[R]=+E[f][R]+g*o*T[f][R];break}break;default:var z=[].concat(E[f]);for(I=[],R=d.paper.customAttributes[f].length;R--;)I[R]=+z[R]+g*o*T[f][R];break}A[f]=I}d.attr(A),d._run&&d._run.call(d)}else l.along&&(m=Zt(l.along,l.len*!l.back),d.translate(T.sx-(T.x||0)+m.x-T.sx,T.sy-(T.y||0)+m.y-T.sy),l.rot&&d.rotate(T.r+m.alpha,m.x,m.y)),(u.x||u.y)&&d.translate(-u.x,-u.y),l.scale&&(l.scale+=y),d.attr(l),Nt.splice(e--,1)}}n.svg&&d&&d.paper&&d.paper.safari(),Nt[x]&&setTimeout(ke)},pi=function(i,e,s,a,o){var _=s-a;e.timeouts.push(setTimeout(function(){n.is(o,"function")&&o.call(e),e.animate(i,_,i.easing)},a))},le=function(i){return at(St(i,255),0)},Kt=function(i,e){if(i==null)return{x:this._.tx,y:this._.ty,toString:Ye};switch(this._.tx+=+i,this._.ty+=+e,this.type){case"circle":case"ellipse":this.attr({cx:+i+this.attrs.cx,cy:+e+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+i+this.attrs.x,y:+e+this.attrs.y});break;case"path":var s=se(this.attrs.path);s[0][1]+=+i,s[0][2]+=+e,this.attr({path:s});break}return this};k.animateWith=function(i,e,s,a,o){for(var _=0,E=Nt.length;_<E;_++)Nt[_].el.id==i.id&&(e.start=Nt[_].start);return this.animate(e,s,a,o)},k.animateAlong=We(),k.animateAlongBack=We(1);function We(i){return function(e,s,a,o){var _={back:i};return n.is(a,"function")?o=a:_.rot=a,e&&e.constructor==P&&(e=e.attrs.path),e&&(_.along=e),this.animate(_,s,o)}}function fi(i,e,s,a,o,_){var E=3*e,T=3*(a-e)-E,l=1-E-T,u=3*s,d=3*(o-s)-u,A=1-u-d;function I(m){return((l*m+T)*m+E)*m}function g(m,R){var F=f(m,R);return((A*F+d)*F+u)*F}function f(m,R){var F,G,D,X,V,z;for(D=m,z=0;z<8;z++){if(X=I(D)-m,J(X)<R)return D;if(V=(3*l*D+2*T)*D+E,J(V)<1e-6)break;D=D-X/V}if(F=0,G=1,D=m,D<F)return F;if(D>G)return G;for(;F<G;){if(X=I(D),J(X-m)<R)return D;m>X?F=D:G=D,D=(G-F)/2+F}return D}return g(i,1/(200*_))}k.onAnimation=function(i){return this._run=i||0,this},k.animate=function(i,e,s,a){var o=this;if(o.timeouts=o.timeouts||[],(n.is(s,"function")||!s)&&(a=s||null),o.removed)return a&&a.call(o),o;var _={},E={},T=!1,l={};for(var u in i)if(i[S](u)&&(ee[S](u)||o.paper.customAttributes[S](u)))switch(T=!0,_[u]=o.attr(u),_[u]==null&&(_[u]=Yt[u]),E[u]=i[u],ee[u]){case"along":var d=we(i[u]),A=Zt(i[u],d*!!i.back),I=o.getBBox();l[u]=d/e,l.tx=I.x,l.ty=I.y,l.sx=A.x,l.sy=A.y,E.rot=i.rot,E.back=i.back,E.len=d,i.rot&&(l.r=Y(o.rotate())||0);break;case et:l[u]=(E[u]-_[u])/e;break;case"colour":_[u]=n.getRGB(_[u]);var g=n.getRGB(E[u]);l[u]={r:(g.r-_[u].r)/e,g:(g.g-_[u].g)/e,b:(g.b-_[u].b)/e};break;case"path":var f=$t(_[u],E[u]);_[u]=f[0];var m=f[1];l[u]=[];for(var R=0,F=_[u][x];R<F;R++){l[u][R]=[0];for(var G=1,D=_[u][R][x];G<D;G++)l[u][R][G]=(m[R][G]-_[u][R][G])/e}break;case"csv":var X=w(i[u])[q](t),V=w(_[u])[q](t);switch(u){case"translation":_[u]=[0,0],l[u]=[X[0]/e,X[1]/e];break;case"rotation":_[u]=V[1]==X[1]&&V[2]==X[2]?V:[0,X[1],X[2]],l[u]=[(X[0]-_[u][0])/e,0,0];break;case"scale":i[u]=X,_[u]=w(_[u])[q](t),l[u]=[(X[0]-_[u][0])/e,(X[1]-_[u][1])/e,0,0];break;case"clip-rect":for(_[u]=w(_[u])[q](t),l[u]=[],R=4;R--;)l[u][R]=(X[R]-_[u][R])/e;break}E[u]=X;break;default:for(X=[].concat(i[u]),V=[].concat(_[u]),l[u]=[],R=o.paper.customAttributes[u][x];R--;)l[u][R]=((X[R]||0)-(V[R]||0))/e;break}if(T){var z=n.easing_formulas[s];if(!z)if(z=w(s).match(ti),z&&z[x]==5){var Q=z;z=function(Rt){return fi(Rt,+Q[1],+Q[2],+Q[3],+Q[4],e)}}else z=function(Rt){return Rt};Nt.push({start:i.start||+new Date,ms:e,easing:z,from:_,diff:l,to:E,el:o,t:{x:0,y:0}}),n.is(a,"function")&&(o._ac=setTimeout(function(){a.call(o)},e)),Nt[x]==1&&setTimeout(ke)}else{var b=[],ot;for(var st in i)i[S](st)&&ei.test(st)&&(u={value:i[st]},st=="from"&&(st=0),st=="to"&&(st=100),u.key=pt(st,10),b.push(u));for(b.sort(oi),b[0].key&&b.unshift({key:0,value:o.attrs}),R=0,F=b[x];R<F;R++)pi(b[R].value,o,e/100*b[R].key,e/100*(b[R-1]&&b[R-1].key||0),b[R-1]&&b[R-1].value.callback);ot=b[b[x]-1].value.callback,ot&&o.timeouts.push(setTimeout(function(){ot.call(o)},e))}return this},k.stop=function(){for(var i=0;i<Nt.length;i++)Nt[i].el.id==this.id&&Nt.splice(i--,1);for(i=0,ii=this.timeouts&&this.timeouts.length;i<ii;i++)clearTimeout(this.timeouts[i]);return this.timeouts=[],clearTimeout(this._ac),delete this._ac,this},k.translate=function(i,e){return this.attr({translation:i+" "+e})},k[Ot]=function(){return"Raphaël’s object"},n.ae=Nt;var Et=function(i){if(this.items=[],this[x]=0,this.type="set",i)for(var e=0,s=i[x];e<s;e++)i[e]&&(i[e].constructor==P||i[e].constructor==Et)&&(this[this.items[x]]=this.items[this.items[x]]=i[e],this[x]++)};Et[c][$]=function(){for(var i,e,s=0,a=arguments[x];s<a;s++)i=arguments[s],i&&(i.constructor==P||i.constructor==Et)&&(e=this.items[x],this[e]=this.items[e]=i,this[x]++);return this},Et[c].pop=function(){return delete this[this[x]--],this.items.pop()};for(var ue in k)k[S](ue)&&(Et[c][ue]=function(i){return function(){for(var e=0,s=this.items[x];e<s;e++)this.items[e][i][C](this.items[e],arguments);return this}}(ue));Et[c].attr=function(i,e){if(i&&n.is(i,_t)&&n.is(i[0],"object"))for(var s=0,a=i[x];s<a;s++)this.items[s].attr(i[s]);else for(var o=0,_=this.items[x];o<_;o++)this.items[o].attr(i,e);return this},Et[c].animate=function(i,e,s,a){(n.is(s,"function")||!s)&&(a=s||null);var o=this.items[x],_=o,E,T=this,l;for(a&&(l=function(){!--o&&a.call(T)}),s=n.is(s,gt)?s:l,E=this.items[--_].animate(i,e,s,l);_--;)this.items[_]&&!this.items[_].removed&&this.items[_].animateWith(E,i,e,s,l);return this},Et[c].insertAfter=function(i){for(var e=this.items[x];e--;)this.items[e].insertAfter(i);return this},Et[c].getBBox=function(){for(var i=[],e=[],s=[],a=[],o=this.items[x];o--;){var _=this.items[o].getBBox();i[$](_.x),e[$](_.y),s[$](_.x+_.width),a[$](_.y+_.height)}return i=St[C](0,i),e=St[C](0,e),{x:i,y:e,width:at[C](0,s)-i,height:at[C](0,a)-e}},Et[c].clone=function(i){i=new Et;for(var e=0,s=this.items[x];e<s;e++)i[$](this.items[e].clone());return i},n.registerFont=function(i){if(!i.face)return i;this.fonts=this.fonts||{};var e={w:i.w,face:{},glyphs:{}},s=i.face["font-family"];for(var a in i.face)i.face[S](a)&&(e.face[a]=i.face[a]);if(this.fonts[s]?this.fonts[s][$](e):this.fonts[s]=[e],!i.svg){e.face["units-per-em"]=pt(i.face["units-per-em"],10);for(var o in i.glyphs)if(i.glyphs[S](o)){var _=i.glyphs[o];if(e.glyphs[o]={w:_.w,k:{},d:_.d&&"M"+_.d[nt](/[mlcxtrv]/g,function(T){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[T]||"M"})+"z"},_.k)for(var E in _.k)_[S](E)&&(e.glyphs[o].k[E]=_.k[E])}}return i},p.getFont=function(i,e,s,a){if(a=a||"normal",s=s||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400,!!n.fonts){var o=n.fonts[i];if(!o){var _=new RegExp("(^|\\s)"+i[nt](/[^\w\d\s+!~.:_-]/g,y)+"(\\s|$)","i");for(var E in n.fonts)if(n.fonts[S](E)&&_.test(E)){o=n.fonts[E];break}}var T;if(o)for(var l=0,u=o[x];l<u&&(T=o[l],!(T.face["font-weight"]==e&&(T.face["font-style"]==s||!T.face["font-style"])&&T.face["font-stretch"]==a));l++);return T}},p.print=function(i,e,s,a,o,_,E){_=_||"middle",E=at(St(E||0,1),-1);var T=this.set(),l=w(s)[q](y),u=0,d;if(n.is(a,s)&&(a=this.getFont(a)),a){d=(o||16)/a.face["units-per-em"];for(var A=a.face.bbox.split(t),I=+A[0],g=+A[1]+(_=="baseline"?A[3]-A[1]+ +a.face.descent:(A[3]-A[1])/2),f=0,m=l[x];f<m;f++){var R=f&&a.glyphs[l[f-1]]||{},F=a.glyphs[l[f]];u+=f?(R.w||a.w)+(R.k&&R.k[l[f]]||0)+a.w*E:0,F&&F.d&&T[$](this.path(F.d).attr({fill:"#000",stroke:"none",translation:[u,0]}))}T.scale(d,d,I,g).translate(i-I,e-g)}return T},n.format=function(i,e){var s=n.is(e,_t)?[0][M](e):arguments;return i&&n.is(i,gt)&&s[x]-1&&(i=i[nt](h,function(a,o){return s[++o]==null?y:s[o]})),i||y},n.ninja=function(){return B.was?L.Raphael=B.is:window.Raphael=void 0,n},n.el=k,n.st=Et[c],B.was?L.Raphael=n:window.Raphael=n})();const MAX_VIEWPORT_HEIGHT=932,MAX_VIEWPORT_WIDTH=640,adjustView=n=>{const t=window.innerHeight,r=window.innerWidth,h=MAX_VIEWPORT_WIDTH<r,c=MAX_VIEWPORT_HEIGHT<t,S=h?MAX_VIEWPORT_WIDTH+"px":"100%",O=c?MAX_VIEWPORT_HEIGHT+"px":"100%",L=h||c,B=L?"absolute":"static",H=L?"translate(-50%, -50%)":"none";return n.style.position=B,n.style.width=S,n.style.height=O,n.transform=H,n.getBoundingClientRect()},viewport=adjustView(document.querySelector("#extra")),HORIZONTAL_BASE=393,VERTICAL_BASE=852,BASE_RESULT_CHARS_NUMBER=6,{width:width$1,height:height$1}=viewport,calcSize=n=>{const t=width$1/HORIZONTAL_BASE;return n*t},calcVerticalSize=n=>{const t=height$1/VERTICAL_BASE;return n*t},calcResultFontSize=(n,t)=>{const r=calcSize(t),h=n.length,c=h>BASE_RESULT_CHARS_NUMBER?h:BASE_RESULT_CHARS_NUMBER;return r*BASE_RESULT_CHARS_NUMBER/c},{width:viewportWidth$4,height:viewportHeight$4}=viewport,DEBUG_MODE=new URLSearchParams(window.location.search).has("debug"),INTERACTION_MODES={TOUCH:"touch",SLICE:"slice"},INTERACTION_MODE=new URLSearchParams(window.location.search).has("touch")?INTERACTION_MODES.TOUCH:INTERACTION_MODES.SLICE,IS_TOUCH=INTERACTION_MODE===INTERACTION_MODES.TOUCH,SCORE_MULTIPLIER=50,FIRST_SAFE_FRUIT_NUMBER=10,FONT_FAMILY="lm",MODES={SHOW:"show",HIDE:"hide"},STATE_KEYS={CLICK_ENABLE:"click-enable",GAME_STATE:"game-state",SCENE_NAME:"scene-name",SCENE_STATE:"scene-state"},SCENE_STATES={READY:"ready",ENTERING:"entering",EXITING:"exiting"},GAME_STATES={PLAYING:"playing",OVER:"over"},SCENES={HOME_MENU:"home-menu",GAME_BODY:"game-body",GAME_OVER:"game-over",GAME_RESULT:"game-result",BRAND_INTRO:"brand-intro",BRAND_QUESTION:"brand-question"},LAYERS={PRELOAD:"preload",DEFAULT:"default",FRUIT:"fruit",JUICE:"juice",MASK:"mask",LIGHT:"light",FLASH:"flash",KNIFE:"knife",START_SCREEN:"start-screen",RESULT_SCREEN:"result-screen",BRAND_INTRO:"brand-intro",BRAND_QUESTION:"brand-question"},FRUIT_DROP_TIME=IS_TOUCH?2e3:1200,FRUIT_DROP_X_SCOPE=200,FRUIT_SHADOW_POS=50,FRUIT_TYPES={BOOM:"boom",PEACH:"peach",SANDIA:"sandia",APPLE:"apple",BANANA:"banana",BASAHA:"basaha"},FRUIT_JUICE_COLORS={[FRUIT_TYPES.BOOM]:null,[FRUIT_TYPES.PEACH]:"#e6c731",[FRUIT_TYPES.SANDIA]:"#c00",[FRUIT_TYPES.APPLE]:"#c8e925",[FRUIT_TYPES.BANANA]:"#e6c731",[FRUIT_TYPES.BASAHA]:"#c00"},FRUIT_IMAGES={[FRUIT_TYPES.BOOM]:"https://pmi-static.alvs.tech/ninja/default/images/fruit/boom.webp",[FRUIT_TYPES.PEACH]:"https://pmi-static.alvs.tech/ninja/default/images/fruit/mango.webp",[FRUIT_TYPES.SANDIA]:"https://pmi-static.alvs.tech/ninja/default/images/fruit/watermelon.webp",[FRUIT_TYPES.APPLE]:"https://pmi-static.alvs.tech/ninja/default/images/fruit/apple.webp",[FRUIT_TYPES.BANANA]:"https://pmi-static.alvs.tech/ninja/default/images/fruit/melon.webp",[FRUIT_TYPES.BASAHA]:"https://pmi-static.alvs.tech/ninja/default/images/fruit/raspberry.webp"},FRUIT_CUT_IMAGES={[FRUIT_TYPES.BOOM]:[],[FRUIT_TYPES.PEACH]:["https://pmi-static.alvs.tech/ninja/default/images/fruit/mango-1.webp","https://pmi-static.alvs.tech/ninja/default/images/fruit/mango-2.webp"],[FRUIT_TYPES.SANDIA]:["https://pmi-static.alvs.tech/ninja/default/images/fruit/watermelon-1.webp","https://pmi-static.alvs.tech/ninja/default/images/fruit/watermelon-2.webp"],[FRUIT_TYPES.APPLE]:["https://pmi-static.alvs.tech/ninja/default/images/fruit/apple-1.webp","https://pmi-static.alvs.tech/ninja/default/images/fruit/apple-2.webp"],[FRUIT_TYPES.BANANA]:["https://pmi-static.alvs.tech/ninja/default/images/fruit/melon-1.webp","https://pmi-static.alvs.tech/ninja/default/images/fruit/melon-2.webp"],[FRUIT_TYPES.BASAHA]:["https://pmi-static.alvs.tech/ninja/default/images/fruit/raspberry-1.webp","https://pmi-static.alvs.tech/ninja/default/images/fruit/raspberry-2.webp"]},FRUIT_SIZES={[FRUIT_TYPES.BOOM]:[calcSize(100),calcSize(100),calcSize(50)],[FRUIT_TYPES.PEACH]:[calcSize(100),calcSize(100),calcSize(50)],[FRUIT_TYPES.SANDIA]:[calcSize(100),calcSize(100),calcSize(50)],[FRUIT_TYPES.APPLE]:[calcSize(100),calcSize(100),calcSize(50)],[FRUIT_TYPES.BANANA]:[calcSize(100),calcSize(100),calcSize(50)],[FRUIT_TYPES.BASAHA]:[calcSize(100),calcSize(100),calcSize(50)]},FRUIT_FIX_ANGLE={[FRUIT_TYPES.BOOM]:-21,[FRUIT_TYPES.PEACH]:-50,[FRUIT_TYPES.SANDIA]:-100,[FRUIT_TYPES.APPLE]:-54,[FRUIT_TYPES.BANANA]:90,[FRUIT_TYPES.BASAHA]:-135},FRUIT_IS_REVERSE={[FRUIT_TYPES.BOOM]:0,[FRUIT_TYPES.PEACH]:0,[FRUIT_TYPES.SANDIA]:0,[FRUIT_TYPES.APPLE]:0,[FRUIT_TYPES.BANANA]:0,[FRUIT_TYPES.BASAHA]:0},FRUIT_INFOS={[FRUIT_TYPES.BOOM]:[FRUIT_IMAGES[FRUIT_TYPES.BOOM],...FRUIT_SIZES[FRUIT_TYPES.BOOM],FRUIT_FIX_ANGLE[FRUIT_TYPES.BOOM],FRUIT_IS_REVERSE[FRUIT_TYPES.BOOM],FRUIT_JUICE_COLORS[FRUIT_TYPES.BOOM]],[FRUIT_TYPES.PEACH]:[FRUIT_IMAGES[FRUIT_TYPES.PEACH],...FRUIT_SIZES[FRUIT_TYPES.PEACH],FRUIT_FIX_ANGLE[FRUIT_TYPES.PEACH],FRUIT_IS_REVERSE[FRUIT_TYPES.PEACH],FRUIT_JUICE_COLORS[FRUIT_TYPES.PEACH]],[FRUIT_TYPES.SANDIA]:[FRUIT_IMAGES[FRUIT_TYPES.SANDIA],...FRUIT_SIZES[FRUIT_TYPES.SANDIA],FRUIT_FIX_ANGLE[FRUIT_TYPES.SANDIA],FRUIT_IS_REVERSE[FRUIT_TYPES.SANDIA],FRUIT_JUICE_COLORS[FRUIT_TYPES.SANDIA]],[FRUIT_TYPES.APPLE]:[FRUIT_IMAGES[FRUIT_TYPES.APPLE],...FRUIT_SIZES[FRUIT_TYPES.APPLE],FRUIT_FIX_ANGLE[FRUIT_TYPES.APPLE],FRUIT_IS_REVERSE[FRUIT_TYPES.APPLE],FRUIT_JUICE_COLORS[FRUIT_TYPES.APPLE]],[FRUIT_TYPES.BANANA]:[FRUIT_IMAGES[FRUIT_TYPES.BANANA],...FRUIT_SIZES[FRUIT_TYPES.BANANA],FRUIT_FIX_ANGLE[FRUIT_TYPES.BANANA],FRUIT_IS_REVERSE[FRUIT_TYPES.BANANA],FRUIT_JUICE_COLORS[FRUIT_TYPES.BANANA]],[FRUIT_TYPES.BASAHA]:[FRUIT_IMAGES[FRUIT_TYPES.BASAHA],...FRUIT_SIZES[FRUIT_TYPES.BASAHA],FRUIT_FIX_ANGLE[FRUIT_TYPES.BASAHA],FRUIT_IS_REVERSE[FRUIT_TYPES.BASAHA],FRUIT_JUICE_COLORS[FRUIT_TYPES.BASAHA]]},FRUIT_SHADOW_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/shadow.webp",FRUIT_CONFIG={dropTime:FRUIT_DROP_TIME,dropXScope:FRUIT_DROP_X_SCOPE,shadowPos:FRUIT_SHADOW_POS,shadowImage:FRUIT_SHADOW_IMAGE,types:FRUIT_TYPES,infos:FRUIT_INFOS,cutImages:FRUIT_CUT_IMAGES,fruitSizes:FRUIT_SIZES},JUICE_DURATION=1500,JUICE_RADIUS=15,JUICE_NUMBER=10,JUICE_SHAPES={CIRCLE:"circle",SQUARE:"square",DIAMOND:"diamond",STAR:"star"},JUICE_CONFIG={duration:JUICE_DURATION,radius:JUICE_RADIUS,number:JUICE_NUMBER,shape:JUICE_SHAPES.DIAMOND,shapes:JUICE_SHAPES},BACKGROUND_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/background.webp",BACKGROUND_X=0,BACKGROUND_Y=0,BACKGROUND_WIDTH=viewportWidth$4||MAX_VIEWPORT_WIDTH,BACKGROUND_HEIGHT=viewportHeight$4||MAX_VIEWPORT_HEIGHT,BACKGROUND_CONFIG={image:BACKGROUND_IMAGE,x:BACKGROUND_X,y:BACKGROUND_Y,width:BACKGROUND_WIDTH,height:BACKGROUND_HEIGHT,preserveAspectRatio:"xMidYMid slice"},CONSOLE_X=16,CONSOLE_Y=0,CONSOLE_CONFIG={x:CONSOLE_X,y:CONSOLE_Y},MESSAGES={CLICK:"click",SLICE:"slice",TOUCH:"touch",FRUIT_FALL_OFF:"fruit.fallOff",FRUIT_FALL_OUT_OF_VIEWER:"fruit.fallOutOfViewer",FRUIT_REMOVE:"fruit.remove",HOME_MENU:"home-menu",SCENE_SWITCH_SCENE:"scene.switchScene",GAME_OVER:"game.over",OVER_WHITE_LIGHT_SHOW:"overWhiteLight.show",SLICE_AT:"slice.at",TOUCH_AT:"touch.at",START_GAME:"start.game",VIBRATE:"vibrate",TOGGLE_SOUND:"toggle.sound"},FLASH_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/flash.webp",FLASH_DURATION=100,FLASH_WIDTH=calcSize(358),FLASH_HEIGHT=calcSize(20),FLASH_CONFIG={image:FLASH_IMAGE,duration:FLASH_DURATION,width:FLASH_WIDTH,height:FLASH_HEIGHT},FPS_PREFIX="FPS: ",FPS_FILL="#fff",FPS_X=4,FPS_Y=viewportHeight$4-10,FPS_CONFIG={prefix:FPS_PREFIX,fill:FPS_FILL,x:FPS_X,y:FPS_Y},GAME_OVER_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/game-over.webp",GAME_OVER_HEIGHT=calcSize(145),GAME_OVER_WIDTH=calcSize(250),GAME_OVER_X=viewportWidth$4/2-GAME_OVER_WIDTH/2+calcSize(6),GAME_OVER_Y=viewportHeight$4/2-GAME_OVER_HEIGHT/2,GAME_OVER_CONFIG={image:GAME_OVER_IMAGE,x:GAME_OVER_X,y:GAME_OVER_Y,width:GAME_OVER_WIDTH,height:GAME_OVER_HEIGHT},HOME_MASK_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/blank.png",HOME_MASK_WIDTH=viewportWidth$4,HOME_MASK_HEIGHT=183,HOME_MASK_ORIG_X=0,HOME_MASK_ORIG_Y=-183,HOME_MASK_TARGET_X=0,HOME_MASK_TARGET_Y=0,HOME_MASK_DURATION=1e3,HOME_MASK_CONFIG={image:HOME_MASK_IMAGE,width:HOME_MASK_WIDTH,height:HOME_MASK_HEIGHT,startX:HOME_MASK_ORIG_X,startY:HOME_MASK_ORIG_Y,endX:HOME_MASK_TARGET_X,endY:HOME_MASK_TARGET_Y,duration:HOME_MASK_DURATION},KNIFE_PART_COLOR="#cbd3db",KNIFE_PART_STROKE=10,KNIFE_PART_LIFE=200,KNIFE_PART_CONFIG={color:KNIFE_PART_COLOR,stroke:KNIFE_PART_STROKE,life:KNIFE_PART_LIFE},LIGHTS_NUMBER=10,LIGHTS_FILL="#fff",LIGHTS_APPEARANCE_TIME=120,LIGHTS_MASK_APPEARANCE_TIME=1e3,LIGHTS_CONFIG={number:LIGHTS_NUMBER,fill:LIGHTS_FILL,appearanceTime:LIGHTS_APPEARANCE_TIME,maskAppearanceTime:LIGHTS_MASK_APPEARANCE_TIME},HOME_LOGO_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/logo.webp",HOME_LOGO_WIDTH=calcSize(335),HOME_LOGO_HEIGHT=calcSize(200),HOME_LOGO_ORIG_X=calcSize(38),HOME_LOGO_ORIG_Y=-HOME_LOGO_HEIGHT,HOME_LOGO_TARGET_X=HOME_LOGO_ORIG_X,HOME_LOGO_TARGET_Y=calcSize(41),HOME_LOGO_DURATION=1e3,HOME_LOGO_CONFIG={image:HOME_LOGO_IMAGE,width:HOME_LOGO_WIDTH,height:HOME_LOGO_HEIGHT,startX:HOME_LOGO_ORIG_X,startY:HOME_LOGO_ORIG_Y,endX:HOME_LOGO_TARGET_X,endY:HOME_LOGO_TARGET_Y,duration:HOME_LOGO_DURATION},RESULT_LOGO_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/logo.webp",RESULT_LOGO_WIDTH=calcSize(244),RESULT_LOGO_HEIGHT=calcSize(147),RESULT_LOGO_ORIG_X=calcSize(81),RESULT_LOGO_ORIG_Y=-RESULT_LOGO_HEIGHT,RESULT_LOGO_TARGET_X=RESULT_LOGO_ORIG_X,RESULT_LOGO_TARGET_Y=calcSize(24),RESULT_LOGO_DURATION=1e3,RESULT_LOGO_CONFIG={image:RESULT_LOGO_IMAGE,width:RESULT_LOGO_WIDTH,height:RESULT_LOGO_HEIGHT,startX:RESULT_LOGO_ORIG_X,startY:RESULT_LOGO_ORIG_Y,endX:RESULT_LOGO_TARGET_X,endY:RESULT_LOGO_TARGET_Y,duration:RESULT_LOGO_DURATION},SCORE_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/score.webp",SCORE_IMAGE_SX=-94,SCORE_IMAGE_EX=calcSize(23),SCORE_IMAGE_Y=calcSize(8),SCORE_IMAGE_W=calcSize(40),SCORE_IMAGE_H=calcSize(40),SCORE_TEXT1_SX=-59,SCORE_TEXT1_EX=SCORE_IMAGE_EX+SCORE_IMAGE_W+calcSize(12),SCORE_TEXT1_Y=SCORE_IMAGE_Y+SCORE_IMAGE_H-calcSize(14),SCORE_TEXT1_FILL="#fff",SCORE_TEXT1_SIZE=calcVerticalSize(45)+"px",SCORE_TEXT1_VALUE="0",SCORE_TEXT2_SX=-93,SCORE_TEXT2_EX=SCORE_IMAGE_EX,SCORE_TEXT2_Y=calcSize(65),SCORE_TEXT2_FILL="#fff",SCORE_TEXT2_PREFIX="Рекорд: ",SCORE_TEXT2_VALUE=999,SCORE_TEXT2_WEIGHT="bold",SCORE_TEXT2_SIZE=calcVerticalSize(16)+"px",SCORE_ANIM_LENGTH=500,SCORE_CONFIG={image:SCORE_IMAGE,imageSx:SCORE_IMAGE_SX,imageEx:SCORE_IMAGE_EX,imageY:SCORE_IMAGE_Y,imageW:SCORE_IMAGE_W,imageH:SCORE_IMAGE_H,text1Sx:SCORE_TEXT1_SX,text1Ex:SCORE_TEXT1_EX,text1Y:SCORE_TEXT1_Y,text1Fill:SCORE_TEXT1_FILL,text1Size:SCORE_TEXT1_SIZE,text1Weight:"bold",text1Value:SCORE_TEXT1_VALUE,text2Sx:SCORE_TEXT2_SX,text2Ex:SCORE_TEXT2_EX,text2Y:SCORE_TEXT2_Y,text2Fill:SCORE_TEXT2_FILL,text2Prefix:SCORE_TEXT2_PREFIX,text2Value:SCORE_TEXT2_VALUE,text2Size:SCORE_TEXT2_SIZE,text2Weight:SCORE_TEXT2_WEIGHT,animLength:SCORE_ANIM_LENGTH},LOSE_WIDTH=calcSize(45.2),LOSE_HEIGHT=calcSize(37.6),LOSE_LEFT=viewportWidth$4-SCORE_IMAGE_EX-LOSE_WIDTH,LOSE_CONF=[{src:"https://pmi-static.alvs.tech/ninja/default/images/x.webp",srcF:"https://pmi-static.alvs.tech/ninja/default/images/xf.webp",sx:LOSE_LEFT+200,ex:LOSE_LEFT,y:SCORE_IMAGE_Y,w:LOSE_WIDTH,h:LOSE_HEIGHT},{src:"https://pmi-static.alvs.tech/ninja/default/images/x.webp",srcF:"https://pmi-static.alvs.tech/ninja/default/images/xf.webp",sx:LOSE_LEFT-LOSE_WIDTH+200,ex:LOSE_LEFT-LOSE_WIDTH,y:SCORE_IMAGE_Y,w:LOSE_WIDTH,h:LOSE_HEIGHT},{src:"https://pmi-static.alvs.tech/ninja/default/images/x.webp",srcF:"https://pmi-static.alvs.tech/ninja/default/images/xf.webp",sx:LOSE_LEFT-LOSE_WIDTH-LOSE_WIDTH+200,ex:LOSE_LEFT-LOSE_WIDTH-LOSE_WIDTH,y:SCORE_IMAGE_Y,w:LOSE_WIDTH,h:LOSE_HEIGHT}],LOSE_ANIMATION_LENGTH=500,LOSE_CONFIG={conf:LOSE_CONF,animLength:LOSE_ANIMATION_LENGTH},HOME_TEXT1_VALUE=`Тропическое путешествие
в самом разгаре!`,HOME_TEXT1_SX=-viewportWidth$4,HOME_TEXT1_EX=viewportWidth$4/2,HOME_TEXT1_Y=HOME_LOGO_TARGET_Y+HOME_LOGO_HEIGHT+calcVerticalSize(28),HOME_TEXT1_FILL="#fff",HOME_TEXT1_SIZE=calcVerticalSize(22)+"px",HOME_TEXT1_WEIGHT="bold",HOME_TEXT1_ANCHOR="middle",HOME_TEXT2_VALUE=`Разрежь как можно больше
экзотических фруктов!`,HOME_TEXT2_SX=-viewportWidth$4,HOME_TEXT2_EX=viewportWidth$4/2,HOME_TEXT2_Y=HOME_LOGO_TARGET_Y+HOME_LOGO_HEIGHT+calcVerticalSize(148),HOME_TEXT2_FILL="#fff",HOME_TEXT2_SIZE=calcVerticalSize(22)+"px",HOME_TEXT2_WEIGHT="bold",HOME_TEXT2_ANCHOR="middle",HOME_TEXT3_VALUE=`Осторожно:
избегай игрушечную
снежинку!`,HOME_TEXT3_SX=-viewportWidth$4,HOME_TEXT3_EX=viewportWidth$4/2,HOME_TEXT3_Y=HOME_LOGO_TARGET_Y+HOME_LOGO_HEIGHT+calcVerticalSize(235),HOME_TEXT3_FILL="#fff",HOME_TEXT3_SIZE=calcVerticalSize(22)+"px",HOME_TEXT3_WEIGHT="bold",HOME_TEXT3_ANCHOR="middle",HOME_TEXT_ANIM_LENGTH=500,HOME_TEXT_CONFIG={text1Value:HOME_TEXT1_VALUE,text1Sx:HOME_TEXT1_SX,text1Ex:HOME_TEXT1_EX,text1Y:HOME_TEXT1_Y,text1Fill:HOME_TEXT1_FILL,text1Size:HOME_TEXT1_SIZE,text1Weight:HOME_TEXT1_WEIGHT,text1Anchor:HOME_TEXT1_ANCHOR,text2Value:HOME_TEXT2_VALUE,text2Sx:HOME_TEXT2_SX,text2Ex:HOME_TEXT2_EX,text2Y:HOME_TEXT2_Y,text2Fill:HOME_TEXT2_FILL,text2Size:HOME_TEXT2_SIZE,text2Weight:HOME_TEXT2_WEIGHT,text2Anchor:HOME_TEXT2_ANCHOR,text3Value:HOME_TEXT3_VALUE,text3Sx:HOME_TEXT3_SX,text3Ex:HOME_TEXT3_EX,text3Y:HOME_TEXT3_Y,text3Fill:HOME_TEXT3_FILL,text3Size:HOME_TEXT3_SIZE,text3Weight:HOME_TEXT3_WEIGHT,text3Anchor:HOME_TEXT3_ANCHOR,animLength:HOME_TEXT_ANIM_LENGTH},RESULT_TEXT1_VALUE="Сезон Sunny Beach!",RESULT_TEXT1_X=viewportWidth$4/2,RESULT_TEXT1_SY=-200,RESULT_TEXT1_EY=RESULT_LOGO_TARGET_Y+RESULT_LOGO_HEIGHT+calcVerticalSize(4),RESULT_TEXT1_FILL="#fff",RESULT_TEXT1_SIZE=calcVerticalSize(17.8)+"px",RESULT_TEXT1_WEIGHT="bold",RESULT_TEXT1_ANCHOR="middle",RESULT_TEXT2_VALUE="Твой счёт:",RESULT_TEXT2_X=viewportWidth$4/2,RESULT_TEXT2_SY=-200,RESULT_TEXT2_EY=RESULT_LOGO_TARGET_Y+RESULT_LOGO_HEIGHT+calcVerticalSize(60),RESULT_TEXT2_FILL="#fff",RESULT_TEXT2_SIZE=calcVerticalSize(30)+"px",RESULT_TEXT2_WEIGHT="bold",RESULT_TEXT2_ANCHOR="middle",RESULT_TEXT3_VALUE="5432",RESULT_TEXT3_X=viewportWidth$4/2,RESULT_TEXT3_SY=-200,RESULT_TEXT3_EY=RESULT_LOGO_TARGET_Y+RESULT_LOGO_HEIGHT+calcVerticalSize(140),RESULT_TEXT3_FILL="270-#FFFFFF-#BCDBF8",RESULT_TEXT3_SIZE=calcVerticalSize(calcResultFontSize(RESULT_TEXT3_VALUE,115))+"px",RESULT_TEXT3_WEIGHT="bold",RESULT_TEXT3_ANCHOR="middle",RESULT_TEXT4_VALUE=`Твой
рекорд`,RESULT_TEXT4_SX=-viewportWidth$4,RESULT_TEXT4_EX=viewportWidth$4/4+calcSize(10),RESULT_TEXT4_Y=RESULT_LOGO_TARGET_Y+RESULT_LOGO_HEIGHT+calcVerticalSize(245),RESULT_TEXT4_FILL="#fff",RESULT_TEXT4_SIZE=calcVerticalSize(18)+"px",RESULT_TEXT4_WEIGHT="bold",RESULT_TEXT4_ANCHOR="middle",RESULT_TEXT5_VALUE="5,432",RESULT_TEXT5_SX=-viewportWidth$4,RESULT_TEXT5_EX=viewportWidth$4/4+calcSize(10),RESULT_TEXT5_Y=RESULT_LOGO_TARGET_Y+RESULT_LOGO_HEIGHT+calcVerticalSize(295),RESULT_TEXT5_FILL="270-#FFFFFF-#BCDBF8",RESULT_TEXT5_SIZE=calcVerticalSize(44)+"px",RESULT_TEXT5_WEIGHT="bold",RESULT_TEXT5_ANCHOR="middle",RESULT_TEXT6_VALUE=`Общий
рекорд`,RESULT_TEXT6_SX=2*viewportWidth$4,RESULT_TEXT6_EX=3*(viewportWidth$4/4)-calcSize(10),RESULT_TEXT6_Y=RESULT_LOGO_TARGET_Y+RESULT_LOGO_HEIGHT+calcVerticalSize(245),RESULT_TEXT6_FILL="#fff",RESULT_TEXT6_SIZE=calcVerticalSize(18)+"px",RESULT_TEXT6_WEIGHT="bold",RESULT_TEXT6_ANCHOR="middle",RESULT_TEXT7_VALUE="10,000",RESULT_TEXT7_SX=2*viewportWidth$4,RESULT_TEXT7_EX=3*(viewportWidth$4/4)-calcSize(10),RESULT_TEXT7_Y=RESULT_LOGO_TARGET_Y+RESULT_LOGO_HEIGHT+calcVerticalSize(295),RESULT_TEXT7_FILL="270-#FFFFFF-#BCDBF8",RESULT_TEXT7_SIZE=calcVerticalSize(44)+"px",RESULT_TEXT7_WEIGHT="bold",RESULT_TEXT7_ANCHOR="middle",RESULT_TEXT_ANIM_LENGTH=500,RESULT_TEXT_CONFIG={text1Value:RESULT_TEXT1_VALUE,text1X:RESULT_TEXT1_X,text1Sy:RESULT_TEXT1_SY,text1Ey:RESULT_TEXT1_EY,text1Fill:RESULT_TEXT1_FILL,text1Size:RESULT_TEXT1_SIZE,text1Weight:RESULT_TEXT1_WEIGHT,text1Anchor:RESULT_TEXT1_ANCHOR,text2Value:RESULT_TEXT2_VALUE,text2X:RESULT_TEXT2_X,text2Sy:RESULT_TEXT2_SY,text2Ey:RESULT_TEXT2_EY,text2Fill:RESULT_TEXT2_FILL,text2Size:RESULT_TEXT2_SIZE,text2Weight:RESULT_TEXT2_WEIGHT,text2Anchor:RESULT_TEXT2_ANCHOR,text3Value:RESULT_TEXT3_VALUE,text3X:RESULT_TEXT3_X,text3Sy:RESULT_TEXT3_SY,text3Ey:RESULT_TEXT3_EY,text3Fill:RESULT_TEXT3_FILL,text3Size:RESULT_TEXT3_SIZE,text3Weight:RESULT_TEXT3_WEIGHT,text3Anchor:RESULT_TEXT3_ANCHOR,text4Value:RESULT_TEXT4_VALUE,text4Sx:RESULT_TEXT4_SX,text4Ex:RESULT_TEXT4_EX,text4Y:RESULT_TEXT4_Y,text4Fill:RESULT_TEXT4_FILL,text4Size:RESULT_TEXT4_SIZE,text4Weight:RESULT_TEXT4_WEIGHT,text4Anchor:RESULT_TEXT4_ANCHOR,text5Value:RESULT_TEXT5_VALUE,text5Sx:RESULT_TEXT5_SX,text5Ex:RESULT_TEXT5_EX,text5Y:RESULT_TEXT5_Y,text5Fill:RESULT_TEXT5_FILL,text5Size:RESULT_TEXT5_SIZE,text5Weight:RESULT_TEXT5_WEIGHT,text5Anchor:RESULT_TEXT5_ANCHOR,text6Value:RESULT_TEXT6_VALUE,text6Sx:RESULT_TEXT6_SX,text6Ex:RESULT_TEXT6_EX,text6Y:RESULT_TEXT6_Y,text6Fill:RESULT_TEXT6_FILL,text6Size:RESULT_TEXT6_SIZE,text6Weight:RESULT_TEXT6_WEIGHT,text6Anchor:RESULT_TEXT6_ANCHOR,text7Value:RESULT_TEXT7_VALUE,text7Sx:RESULT_TEXT7_SX,text7Ex:RESULT_TEXT7_EX,text7Y:RESULT_TEXT7_Y,text7Fill:RESULT_TEXT7_FILL,text7Size:RESULT_TEXT7_SIZE,text7Weight:RESULT_TEXT7_WEIGHT,text7Anchor:RESULT_TEXT7_ANCHOR,animLength:RESULT_TEXT_ANIM_LENGTH},BOTTOM_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/bottom.webp",BOTTOM_WIDTH=viewportWidth$4,BOTTOM_HEIGHT=calcSize(139),BOTTOM_ORIG_X=0,BOTTOM_ORIG_Y=viewportHeight$4,BOTTOM_TARGET_X=0,BOTTOM_TARGET_Y=viewportHeight$4-BOTTOM_HEIGHT,BOTTOM_DURATION=1e3,BOTTOM_CONFIG={image:BOTTOM_IMAGE,width:BOTTOM_WIDTH,height:BOTTOM_HEIGHT,startX:BOTTOM_ORIG_X,startY:BOTTOM_ORIG_Y,endX:BOTTOM_TARGET_X,endY:BOTTOM_TARGET_Y,duration:BOTTOM_DURATION},START_BUTTON_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/green-button.webp",START_BUTTON_ORIG_X=calcSize(42),START_BUTTON_TARGET_X=START_BUTTON_ORIG_X,START_BUTTON_ORIG_Y=viewportHeight$4,START_BUTTON_TARGET_Y=HOME_LOGO_TARGET_X+HOME_LOGO_HEIGHT+calcVerticalSize(330),START_BUTTON_WIDTH=calcSize(325),START_BUTTON_HEIGHT=calcSize(90),START_BUTTON_ANIMATION_LENGTH=500,START_BUTTON_TEXT_VALUE="Начать",START_BUTTON_TEXT_FILL="#fff",START_BUTTON_TEXT_SIZE=calcSize(30)+"px",START_BUTTON_TEXT_START_X=viewportWidth$4/2,START_BUTTON_TEXT_START_Y=viewportHeight$4+START_BUTTON_HEIGHT,START_BUTTON_TEXT_END_X=START_BUTTON_TEXT_START_X,START_BUTTON_TEXT_END_Y=START_BUTTON_TARGET_Y-calcVerticalSize(8)+START_BUTTON_HEIGHT/2,START_BUTTON_TEXT_ANCHOR="middle",START_BUTTON_TEXT_WEIGHT="bold",START_BUTTON_CONFIG={image:START_BUTTON_IMAGE,startX:START_BUTTON_ORIG_X,startY:START_BUTTON_ORIG_Y,endX:START_BUTTON_TARGET_X,endY:START_BUTTON_TARGET_Y,width:START_BUTTON_WIDTH,height:START_BUTTON_HEIGHT,textValue:START_BUTTON_TEXT_VALUE,textStartX:START_BUTTON_TEXT_START_X,textStartY:START_BUTTON_TEXT_START_Y,textEndX:START_BUTTON_TEXT_END_X,textEndY:START_BUTTON_TEXT_END_Y,textFill:START_BUTTON_TEXT_FILL,textSize:START_BUTTON_TEXT_SIZE,textAnchor:START_BUTTON_TEXT_ANCHOR,textWeight:START_BUTTON_TEXT_WEIGHT,animLength:START_BUTTON_ANIMATION_LENGTH},RESULT_BUTTON_NEXT_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/green-button.webp",RESULT_BUTTON_NEXT_ORIG_X=calcSize(42),RESULT_BUTTON_NEXT_TARGET_X=RESULT_BUTTON_NEXT_ORIG_X,RESULT_BUTTON_NEXT_ORIG_Y=viewportHeight$4,RESULT_BUTTON_NEXT_TARGET_Y=RESULT_LOGO_TARGET_Y+RESULT_LOGO_HEIGHT+calcVerticalSize(360),RESULT_BUTTON_NEXT_WIDTH=calcSize(325),RESULT_BUTTON_NEXT_HEIGHT=calcSize(90),RESULT_BUTTON_NEXT_ANIMATION_LENGTH=500,RESULT_BUTTON_NEXT_TEXT_VALUE="Далее",RESULT_BUTTON_NEXT_TEXT_FILL="#fff",RESULT_BUTTON_NEXT_TEXT_SIZE=calcSize(30)+"px",RESULT_BUTTON_NEXT_TEXT_START_X=viewportWidth$4/2,RESULT_BUTTON_NEXT_TEXT_START_Y=viewportHeight$4+RESULT_BUTTON_NEXT_HEIGHT,RESULT_BUTTON_NEXT_TEXT_END_X=RESULT_BUTTON_NEXT_TEXT_START_X,RESULT_BUTTON_NEXT_TEXT_END_Y=RESULT_BUTTON_NEXT_TARGET_Y-calcSize(8)+RESULT_BUTTON_NEXT_HEIGHT/2,RESULT_BUTTON_NEXT_TEXT_ANCHOR="middle",RESULT_BUTTON_NEXT_TEXT_WEIGHT="bold",RESULT_BUTTON_NEXT_CONFIG={image:RESULT_BUTTON_NEXT_IMAGE,startX:RESULT_BUTTON_NEXT_ORIG_X,startY:RESULT_BUTTON_NEXT_ORIG_Y,endX:RESULT_BUTTON_NEXT_TARGET_X,endY:RESULT_BUTTON_NEXT_TARGET_Y,width:RESULT_BUTTON_NEXT_WIDTH,height:RESULT_BUTTON_NEXT_HEIGHT,textValue:RESULT_BUTTON_NEXT_TEXT_VALUE,textStartX:RESULT_BUTTON_NEXT_TEXT_START_X,textStartY:RESULT_BUTTON_NEXT_TEXT_START_Y,textEndX:RESULT_BUTTON_NEXT_TEXT_END_X,textEndY:RESULT_BUTTON_NEXT_TEXT_END_Y,textFill:RESULT_BUTTON_NEXT_TEXT_FILL,textSize:RESULT_BUTTON_NEXT_TEXT_SIZE,textAnchor:RESULT_BUTTON_NEXT_TEXT_ANCHOR,textWeight:RESULT_BUTTON_NEXT_TEXT_WEIGHT,animLength:RESULT_BUTTON_NEXT_ANIMATION_LENGTH},RESULT_BUTTON_REPLAY_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/green-button.webp",RESULT_BUTTON_REPLAY_ORIG_X=calcSize(42),RESULT_BUTTON_REPLAY_TARGET_X=RESULT_BUTTON_NEXT_ORIG_X,RESULT_BUTTON_REPLAY_ORIG_Y=viewportHeight$4,RESULT_BUTTON_REPLAY_TARGET_Y=RESULT_BUTTON_NEXT_TARGET_Y+RESULT_BUTTON_NEXT_HEIGHT,RESULT_BUTTON_REPLAY_WIDTH=calcSize(325),RESULT_BUTTON_REPLAY_HEIGHT=calcSize(90),RESULT_BUTTON_REPLAY_ANIMATION_LENGTH=500,RESULT_BUTTON_REPLAY_TEXT_VALUE="Начать заново",RESULT_BUTTON_REPLAY_TEXT_FILL="#fff",RESULT_BUTTON_REPLAY_TEXT_SIZE=calcSize(30)+"px",RESULT_BUTTON_REPLAY_TEXT_START_X=viewportWidth$4/2,RESULT_BUTTON_REPLAY_TEXT_START_Y=viewportHeight$4+RESULT_BUTTON_REPLAY_HEIGHT,RESULT_BUTTON_REPLAY_TEXT_END_X=RESULT_BUTTON_REPLAY_TEXT_START_X,RESULT_BUTTON_REPLAY_TEXT_END_Y=RESULT_BUTTON_REPLAY_TARGET_Y-calcSize(8)+RESULT_BUTTON_REPLAY_HEIGHT/2,RESULT_BUTTON_REPLAY_TEXT_ANCHOR="middle",RESULT_BUTTON_REPLAY_TEXT_WEIGHT="bold",RESULT_BUTTON_REPLAY_CONFIG={image:RESULT_BUTTON_REPLAY_IMAGE,startX:RESULT_BUTTON_REPLAY_ORIG_X,startY:RESULT_BUTTON_REPLAY_ORIG_Y,endX:RESULT_BUTTON_REPLAY_TARGET_X,endY:RESULT_BUTTON_REPLAY_TARGET_Y,width:RESULT_BUTTON_REPLAY_WIDTH,height:RESULT_BUTTON_REPLAY_HEIGHT,textValue:RESULT_BUTTON_REPLAY_TEXT_VALUE,textStartX:RESULT_BUTTON_REPLAY_TEXT_START_X,textStartY:RESULT_BUTTON_REPLAY_TEXT_START_Y,textEndX:RESULT_BUTTON_REPLAY_TEXT_END_X,textEndY:RESULT_BUTTON_REPLAY_TEXT_END_Y,textFill:RESULT_BUTTON_REPLAY_TEXT_FILL,textSize:RESULT_BUTTON_REPLAY_TEXT_SIZE,textAnchor:RESULT_BUTTON_REPLAY_TEXT_ANCHOR,textWeight:RESULT_BUTTON_REPLAY_TEXT_WEIGHT,animLength:RESULT_BUTTON_REPLAY_ANIMATION_LENGTH},SOUND_TEXT_SIZE=calcVerticalSize(16),SOUND_BUTTON_TEXT_VALUE_ON="Вкл. звук",SOUND_BUTTON_TEXT_VALUE_OFF="Откл. звук",SOUND_BUTTON_TEXT_FILL="#fff",SOUND_BUTTON_TEXT_SIZE=SOUND_TEXT_SIZE+"px",SOUND_BUTTON_TEXT_WEIGHT="bold",SOUND_BUTTON_TEXT_ANCHOR="end",SOUND_BUTTON_IMAGE_ON="https://pmi-static.alvs.tech/ninja/default/images/sound-on.svg",SOUND_BUTTON_IMAGE_OFF="https://pmi-static.alvs.tech/ninja/default/images/sound-off.svg",SOUND_BUTTON_IMAGE_WIDTH=calcSize(26),SOUND_BUTTON_IMAGE_HEIGHT=calcSize(26),SOUND_BUTTON_IMAGE_X=viewportWidth$4-SOUND_BUTTON_IMAGE_WIDTH-calcSize(38),SOUND_BUTTON_TEXT_X=SOUND_BUTTON_IMAGE_X-calcSize(10),SOUND_BUTTON_IMAGE_START_Y=-100,SOUND_BUTTON_IMAGE_HOME_END_Y=calcVerticalSize(13),SOUND_BUTTON_IMAGE_GAME_END_Y=SCORE_IMAGE_Y+SCORE_IMAGE_H+calcSize(4),SOUND_BUTTON_IMAGE_RESULT_END_Y=SOUND_TEXT_SIZE/2+calcSize(2),SOUND_BUTTON_TEXT_START_Y=-100,SOUND_BUTTON_TEXT_HOME_END_Y=SOUND_TEXT_SIZE/2+calcSize(18),SOUND_BUTTON_TEXT_GAME_END_Y=SCORE_TEXT2_Y,SOUND_BUTTON_TEXT_RESULT_END_Y=SOUND_TEXT_SIZE/2+calcSize(15),SOUND_BUTTON_ANIMATION_LENGTH=500,SOUND_BUTTON_CONFIG={textValueOn:SOUND_BUTTON_TEXT_VALUE_ON,textValueOff:SOUND_BUTTON_TEXT_VALUE_OFF,textFill:SOUND_BUTTON_TEXT_FILL,textSize:SOUND_BUTTON_TEXT_SIZE,textWeight:SOUND_BUTTON_TEXT_WEIGHT,textAnchor:SOUND_BUTTON_TEXT_ANCHOR,imageOn:SOUND_BUTTON_IMAGE_ON,imageOff:SOUND_BUTTON_IMAGE_OFF,imageWidth:SOUND_BUTTON_IMAGE_WIDTH,imageHeight:SOUND_BUTTON_IMAGE_HEIGHT,imageX:SOUND_BUTTON_IMAGE_X,textX:SOUND_BUTTON_TEXT_X,imageStartY:SOUND_BUTTON_IMAGE_START_Y,imageHomeEndY:SOUND_BUTTON_IMAGE_HOME_END_Y,imageGameEndY:SOUND_BUTTON_IMAGE_GAME_END_Y,imageResultEndY:SOUND_BUTTON_IMAGE_RESULT_END_Y,textStartY:SOUND_BUTTON_TEXT_START_Y,textHomeEndY:SOUND_BUTTON_TEXT_HOME_END_Y,textGameEndY:SOUND_BUTTON_TEXT_GAME_END_Y,textResultEndY:SOUND_BUTTON_TEXT_RESULT_END_Y,animLength:SOUND_BUTTON_ANIMATION_LENGTH},BRAND_INTRO_FILL="#fff",BRAND_INTRO_ANIMATION_LENGTH=500,BRAND_INTRO_TEXT_VALUE=`Ответь на вопрос
Программы, чтобы
получить приз`,BRAND_INTRO_TEXT_SIZE=calcVerticalSize(26)+"px",BRAND_INTRO_TEXT_WEIGHT="bold",BRAND_INTRO_TEXT_ANCHOR="middle",BRAND_INTRO_TEXT_X=viewportWidth$4/2,BRAND_INTRO_TEXT_START_Y=-400,BRAND_INTRO_TEXT_END_Y=calcVerticalSize(250),BRAND_INTRO_CONFIG={textValue:BRAND_INTRO_TEXT_VALUE,textFill:BRAND_INTRO_FILL,textSize:BRAND_INTRO_TEXT_SIZE,textWeight:BRAND_INTRO_TEXT_WEIGHT,textAnchor:BRAND_INTRO_TEXT_ANCHOR,textX:BRAND_INTRO_TEXT_X,textStartY:BRAND_INTRO_TEXT_START_Y,textEndY:BRAND_INTRO_TEXT_END_Y,animLength:BRAND_INTRO_ANIMATION_LENGTH},BRAND_INTRO_BUTTON_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/green-button.webp",BRAND_INTRO_BUTTON_WIDTH=calcSize(325),BRAND_INTRO_BUTTON_HEIGHT=calcSize(90),BRAND_INTRO_BUTTON_X=calcSize(42),BRAND_INTRO_BUTTON_START_Y=viewportHeight$4,BRAND_INTRO_BUTTON_END_Y=calcVerticalSize(531),BRAND_INTRO_BUTTON_TEXT_VALUE="Ответить",BRAND_INTRO_BUTTON_TEXT_SIZE=calcVerticalSize(30)+"px",BRAND_INTRO_BUTTON_TEXT_WEIGHT="bold",BRAND_INTRO_BUTTON_TEXT_ANCHOR="middle",BRAND_INTRO_BUTTON_TEXT_X=viewportWidth$4/2,BRAND_INTRO_BUTTON_TEXT_START_Y=viewportHeight$4+BRAND_INTRO_BUTTON_HEIGHT,BRAND_INTRO_BUTTON_TEXT_END_Y=BRAND_INTRO_BUTTON_END_Y-calcVerticalSize(6)+BRAND_INTRO_BUTTON_HEIGHT/2,BRAND_INTRO_BUTTON_CONFIG={image:BRAND_INTRO_BUTTON_IMAGE,width:BRAND_INTRO_BUTTON_WIDTH,height:BRAND_INTRO_BUTTON_HEIGHT,buttonX:BRAND_INTRO_BUTTON_X,buttonStartY:BRAND_INTRO_BUTTON_START_Y,buttonEndY:BRAND_INTRO_BUTTON_END_Y,textValue:BRAND_INTRO_BUTTON_TEXT_VALUE,textFill:BRAND_INTRO_FILL,textSize:BRAND_INTRO_BUTTON_TEXT_SIZE,textWeight:BRAND_INTRO_BUTTON_TEXT_WEIGHT,textAnchor:BRAND_INTRO_BUTTON_TEXT_ANCHOR,textX:BRAND_INTRO_BUTTON_TEXT_X,textStartY:BRAND_INTRO_BUTTON_TEXT_START_Y,textEndY:BRAND_INTRO_BUTTON_TEXT_END_Y,animLength:BRAND_INTRO_ANIMATION_LENGTH},BRAND_QUESTION_FILL="#fff",BRAND_QUESTION_ANIMATION_LENGTH=500,BRAND_QUESTION_TEXT1_VALUE="",BRAND_QUESTION_TEXT1_SIZE=calcVerticalSize(26)+"px",BRAND_QUESTION_TEXT1_WEIGHT="bold",BRAND_QUESTION_TEXT1_ANCHOR="middle",BRAND_QUESTION_TEXT1_START_X=-viewportWidth$4,BRAND_QUESTION_TEXT1_END_X=viewportWidth$4/2,BRAND_QUESTION_TEXT1_Y=calcVerticalSize(150),BRAND_QUESTION_TEXT1_CONFIG={textValue:BRAND_QUESTION_TEXT1_VALUE,textFill:BRAND_QUESTION_FILL,textSize:BRAND_QUESTION_TEXT1_SIZE,textWeight:BRAND_QUESTION_TEXT1_WEIGHT,textAnchor:BRAND_QUESTION_TEXT1_ANCHOR,textStartX:BRAND_QUESTION_TEXT1_START_X,textEndX:BRAND_QUESTION_TEXT1_END_X,textY:BRAND_QUESTION_TEXT1_Y,animLength:BRAND_QUESTION_ANIMATION_LENGTH},BRAND_QUESTION_TEXT2_VALUE=`Знаешь ли ты,
что табак для бренда
L&M собирается
с 4-х континентов?`,BRAND_QUESTION_TEXT2_SIZE=calcVerticalSize(26)+"px",BRAND_QUESTION_TEXT2_WEIGHT="bold",BRAND_QUESTION_TEXT2_ANCHOR="middle",BRAND_QUESTION_TEXT2_START_X=viewportWidth$4*2,BRAND_QUESTION_TEXT2_END_X=viewportWidth$4/2,BRAND_QUESTION_TEXT2_Y=calcVerticalSize(260),BRAND_QUESTION_TEXT2_CONFIG={textValue:BRAND_QUESTION_TEXT2_VALUE,textFill:BRAND_QUESTION_FILL,textSize:BRAND_QUESTION_TEXT2_SIZE,textWeight:BRAND_QUESTION_TEXT2_WEIGHT,textAnchor:BRAND_QUESTION_TEXT2_ANCHOR,textStartX:BRAND_QUESTION_TEXT2_START_X,textEndX:BRAND_QUESTION_TEXT2_END_X,textY:BRAND_QUESTION_TEXT2_Y,animLength:BRAND_QUESTION_ANIMATION_LENGTH},BRAND_ANSWER_BUTTON1_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/green-button.webp",BRAND_ANSWER_BUTTON1_WIDTH=calcSize(325),BRAND_ANSWER_BUTTON1_HEIGHT=calcSize(90),BRAND_ANSWER_BUTTON1_X=calcSize(42),BRAND_ANSWER_BUTTON1_START_Y=viewportHeight$4,BRAND_ANSWER_BUTTON1_END_Y=calcVerticalSize(531),BRAND_ANSWER_TEXT1_VALUE="Нет",BRAND_ANSWER_TEXT1_SIZE=calcVerticalSize(30)+"px",BRAND_ANSWER_TEXT1_WEIGHT="bold",BRAND_ANSWER_TEXT1_ANCHOR="middle",BRAND_ANSWER_TEXT1_X=viewportWidth$4/2,BRAND_ANSWER_TEXT1_START_Y=viewportHeight$4+BRAND_ANSWER_BUTTON1_HEIGHT,BRAND_ANSWER_TEXT1_END_Y=BRAND_ANSWER_BUTTON1_END_Y-calcVerticalSize(6)+BRAND_ANSWER_BUTTON1_HEIGHT/2,BRAND_ANSWER1_CONFIG={image:BRAND_ANSWER_BUTTON1_IMAGE,width:BRAND_ANSWER_BUTTON1_WIDTH,height:BRAND_ANSWER_BUTTON1_HEIGHT,buttonX:BRAND_ANSWER_BUTTON1_X,buttonStartY:BRAND_ANSWER_BUTTON1_START_Y,buttonEndY:BRAND_ANSWER_BUTTON1_END_Y,textValue:BRAND_ANSWER_TEXT1_VALUE,textFill:BRAND_QUESTION_FILL,textSize:BRAND_ANSWER_TEXT1_SIZE,textWeight:BRAND_ANSWER_TEXT1_WEIGHT,textAnchor:BRAND_ANSWER_TEXT1_ANCHOR,textX:BRAND_ANSWER_TEXT1_X,textStartY:BRAND_ANSWER_TEXT1_START_Y,textEndY:BRAND_ANSWER_TEXT1_END_Y,animLength:BRAND_QUESTION_ANIMATION_LENGTH},BRAND_ANSWER_BUTTON2_IMAGE="https://pmi-static.alvs.tech/ninja/default/images/green-button.webp",BRAND_ANSWER_BUTTON2_WIDTH=calcSize(325),BRAND_ANSWER_BUTTON2_HEIGHT=calcSize(90),BRAND_ANSWER_BUTTON2_X=calcSize(42),BRAND_ANSWER_BUTTON2_START_Y=viewportHeight$4,BRAND_ANSWER_BUTTON2_END_Y=BRAND_ANSWER_BUTTON1_END_Y+BRAND_ANSWER_BUTTON1_HEIGHT,BRAND_ANSWER_TEXT2_VALUE="Да",BRAND_ANSWER_TEXT2_SIZE=calcVerticalSize(30)+"px",BRAND_ANSWER_TEXT2_WEIGHT="bold",BRAND_ANSWER_TEXT2_ANCHOR="middle",BRAND_ANSWER_TEXT2_X=viewportWidth$4/2,BRAND_ANSWER_TEXT2_START_Y=viewportHeight$4+BRAND_ANSWER_BUTTON2_HEIGHT,BRAND_ANSWER_TEXT2_END_Y=BRAND_ANSWER_BUTTON2_END_Y-calcVerticalSize(6)+BRAND_ANSWER_BUTTON2_HEIGHT/2,BRAND_ANSWER2_CONFIG={image:BRAND_ANSWER_BUTTON2_IMAGE,width:BRAND_ANSWER_BUTTON2_WIDTH,height:BRAND_ANSWER_BUTTON2_HEIGHT,buttonX:BRAND_ANSWER_BUTTON2_X,buttonStartY:BRAND_ANSWER_BUTTON2_START_Y,buttonEndY:BRAND_ANSWER_BUTTON2_END_Y,textValue:BRAND_ANSWER_TEXT2_VALUE,textFill:BRAND_QUESTION_FILL,textSize:BRAND_ANSWER_TEXT2_SIZE,textWeight:BRAND_ANSWER_TEXT2_WEIGHT,textAnchor:BRAND_ANSWER_TEXT2_ANCHOR,textX:BRAND_ANSWER_TEXT2_X,textStartY:BRAND_ANSWER_TEXT2_START_Y,textEndY:BRAND_ANSWER_TEXT2_END_Y,animLength:BRAND_QUESTION_ANIMATION_LENGTH},SOUNDS={BOOM:"https://pmi-static.alvs.tech/ninja/default/sound/boom",MENU:"https://pmi-static.alvs.tech/ninja/default/sound/menu",OVER:"",SPLATTER:"https://pmi-static.alvs.tech/ninja/default/sound/splatter",START:"https://pmi-static.alvs.tech/ninja/default/sound/start",THROW:"https://pmi-static.alvs.tech/ninja/default/sound/throw"},blankArray=[],slice=blankArray.slice,join=blankArray.join,Ucren={isIe:/msie/i.test(navigator.userAgent),isIe6:/msie 6/i.test(navigator.userAgent),isFirefox:/firefox/i.test(navigator.userAgent),isSafari:/version\/[\d.]+\s+safari/i.test(navigator.userAgent),isOpera:/opera/i.test(navigator.userAgent),isChrome:/chrome/i.test(navigator.userAgent),isStrict:document.compatMode==="CSS1Compat",tempDom:document.createElement("div"),apply,appendStyle:function(n){var t;arguments.length>1&&(n=join.call(arguments,"")),document.createStyleSheet?(t=document.createStyleSheet(),t.cssText=n):(t=document.createElement("style"),t.type="text/css",t.appendChild(document.createTextNode(n)),document.getElementsByTagName("head")[0].appendChild(t))},addEvent:function(n,t,r){var h=function(){r.apply(n,arguments)};return n.dom&&(n=n.dom),window.attachEvent?n.attachEvent("on"+t,h):window.addEventListener?n.addEventListener(t,h,!1):n["on"+t]=h,h},delEvent:function(n,t,r){window.detachEvent?n.detachEvent("on"+t,r):window.removeEventListener?n.removeEventListener(t,r,!1):n["on"+t]===r&&(n["on"+t]=null)},Class:function(n,t,r,h){var c,S;return n=n||function(){},t=t||{},c=function(){this.instanceId=Ucren.id(),n.apply(this,arguments)},S=c.prototype,Ucren.registerClassEvent.call(S),Ucren.each(t,function(O,L){S[L]=function(B,H){return typeof B=="function"?function(){var p,U;if(p=slice.call(arguments,0),!(r&&r.apply(this,[H].concat(p))===!1))return this.fireEvent("before"+H,p),U=B.apply(this,p),h&&h.apply(this,[H].concat(p)),this.fireEvent(H,p),U}:B}(O,L)}),S.getOriginMethod=function(O){return t[O]},c},registerClassEvent:function(){this.on=function(n,t){var r=this.instanceId;Ucren.dispatch(r+n,t.bind(this))},this.onbefore=function(n,t){var r=this.instanceId;Ucren.dispatch(r+"before"+n,t.bind(this))},this.un=function(n,t){},this.fireEvent=function(n,t){var r=this.instanceId;Ucren.dispatch(r+n,t)}},createFuze:function(){var n,t,r;return n=[],t=function(h){r?h():n.push(h)},t.fire=function(){for(;n.length;)n.shift()();r=!0},t.extinguish=function(){r=!1},t.wettish=function(){n.length&&n.shift()()},t},dispatch:function(){var n={},t,r;return t=function(h,c,S){var O;(O=n[h])&&Ucren.each(O,function(L){L.apply(S,c)})},r=function(h,c){n[h]||(n[h]=[]),n[h].push(c)},function(h,c,S){typeof c>"u"&&(c=[]),c instanceof Array?t.apply(this,arguments):typeof c=="function"&&r.apply(this,arguments)}}(),each,Element:function(n,t){var r,h;return n&&n.isUcrenElement?t?n.dom:n:(n=typeof n=="string"?document.getElementById(n):n,n?t?n:(h=n.getAttribute("handleId"),typeof h=="string"?Ucren.handle(h-0):(r=new Ucren.BasicElement(n),h=Ucren.handle(r),n.setAttribute("handleId",h+""),r)):null)},Event:function(n){if(n=n||window.event,!n)for(var t=this.caller;t;){if(t.arguments&&t.arguments[0]&&typeof t.arguments[0].altKey=="boolean"){n=t.arguments[0];break}t=t.caller}return n},fixNumber:function(n,t){return typeof n=="number"?n:t},fixString:function(n,t){return typeof n=="string"?n:t},fixConfig:function(n){var t;return t={},typeof n>"u"?t:typeof n=="function"?new n:n},handle:function n(t){var r,h,c;if(r=n,r.cache||(r.cache={}),typeof r.number>"u"&&(r.number=0),h=typeof t,h==="number")return r.cache[t.toString()];if(h==="object"||h==="function")return c=r.number++,r.cache[c.toString()]=t,c},id:function n(){return n.number=++n.number||0,"_"+n.number},loadImage:function(n,t){var r=n.length,h=0,c=function(){h===r&&t&&t()};Ucren.each(n,function(S){var O=document.createElement("img");O.onload=O.onerror=function(){this.onload=this.onerror=null,h++,c()},Ucren.tempDom.appendChild(O),O.src=S})},loadScript:function(src,callback){Ucren.request(src,function(text){eval(text),callback&&callback(text)})},makeElement,nul,randomNumber:function(n){return Math.floor(Math.random()*n)},randomWord:function(){var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";return function(t,r){var h,c=[];return h=r||n,Ucren.each(t,(function(S){c[S]=h.charAt(this.randomNumber(h.length))}).bind(this)),c.join("")}}(),request:function(n,t){var r=Ucren.request,h=r.xhr;r.xhr||(window.XMLHttpRequest?h=r.xhr=new XMLHttpRequest:h=r.xhr=new ActiveXObject("Microsoft.XMLHTTP")),h.open("GET",n,!0),h.onreadystatechange=function(){h.readyState===4&&h.status===200&&t(h.responseText)},h.send(null)}};Ucren.BasicDrag=Ucren.Class(function(n){n=Ucren.fixConfig(n),this.type=Ucren.fixString(n.type,"normal");var t=this.isTouch="ontouchstart"in window;this.TOUCH_START=t?"touchstart":"mousedown",this.TOUCH_MOVE=t?"touchmove":"mousemove",this.TOUCH_END=t?"touchend":"mouseup"},{bind:function(n,t){n=Ucren.Element(n),t=Ucren.Element(t)||n;var r={};r[this.TOUCH_START]=(function(h){return h=Ucren.Event(h),this.startDrag(),h.cancelBubble=!0,h.stopPropagation&&h.stopPropagation(),h.returnValue=!1}).bind(this),t.addEvents(r),this.target=n},getCoors:function(n){var t=[];if(n.targetTouches&&n.targetTouches.length){var r=n.targetTouches[0];t[0]=r.clientX,t[1]=r.clientY}else t[0]=n.clientX,t[1]=n.clientY;return t},startDrag:function(){var n,t,r;n=this.target,t=n.draging={},this.isDraging=!0,t.x=parseInt(n.style("left"),10)||0,t.y=parseInt(n.style("top"),10)||0,r=Ucren.Event();var h=this.getCoors(r);t.mouseX=h[0],t.mouseY=h[1],this.registerDocumentEvent()},endDrag:function(){this.isDraging=!1,this.unRegisterDocumentEvent()},registerDocumentEvent:function(){var n,t;n=this.target,t=n.draging,t.documentSelectStart=Ucren.addEvent(document,"selectstart",function(r){return r=r||event,r.stopPropagation&&r.stopPropagation(),r.cancelBubble=!0,r.returnValue=!1}),t.documentMouseMove=Ucren.addEvent(document,this.TOUCH_MOVE,(function(r){var h,c;r=r||event,h=Ucren.isIe&&r.button!==1,c=!Ucren.isIe&&r.button!==0,(h||c)&&!this.isTouch&&this.endDrag();var S=this.getCoors(r);return t.newMouseX=S[0],t.newMouseY=S[1],r.stopPropagation&&r.stopPropagation(),r.returnValue=!1}).bind(this)),t.documentMouseUp=Ucren.addEvent(document,this.TOUCH_END,(function(){this.endDrag()}).bind(this)),clearInterval(t.timer),t.timer=setInterval((function(){var r,h,c,S;t.newMouseX&&(c=t.newMouseX-t.mouseX,S=t.newMouseY-t.mouseY,r=t.x+c,h=t.y+S,this.type==="calc"?this.returnValue(c,S,t.newMouseX,t.newMouseY):n.left(r).top(h))}).bind(this),10)},unRegisterDocumentEvent:function(){var n=this.target.draging;Ucren.delEvent(document,this.TOUCH_MOVE,n.documentMouseMove),Ucren.delEvent(document,this.TOUCH_END,n.documentMouseUp),Ucren.delEvent(document,"selectstart",n.documentSelectStart),clearInterval(n.timer)},returnValue:function(n,t,r,h){}});Ucren.Template=Ucren.Class(function(){this.string=join.call(arguments,"")},{apply:function(n){return this.string.format(n)}});Ucren.BasicElement=Ucren.Class(function(n){this.dom=n,this.countMapping={}},{isUcrenElement:!0,attr:function(n,t){if(typeof t=="string")this.dom.setAttribute(n,t);else return this.dom.getAttribute(n);return this},style:function(){var n=Ucren.isIe?function(t){return this.dom.currentStyle[t]}:function(t){var r;return r=document.defaultView.getComputedStyle(this.dom,null),r.getPropertyValue(t)};return function(t,r){if(typeof t=="object")Ucren.each(t,(function(h,c){this[c]=h}).bind(this.dom.style));else{if(typeof t=="string"&&typeof r>"u")return n.call(this,t);typeof t=="string"&&typeof r<"u"&&(this.dom.style[t]=r)}return this}}(),hasClass:function(n){var t=" "+this.dom.className+" ";return t.indexOf(" "+n+" ")>-1},setClass:function(n){return typeof n=="string"&&(this.dom.className=n.trim()),this},addClass:function(n){var t,r;return t=this.dom,r=" "+t.className+" ",r.indexOf(" "+n+" ")===-1&&(r+=n,r=r.trim(),r=r.replace(/ +/g," "),t.className=r),this},delClass:function(n){var t,r;return t=this.dom,r=" "+t.className+" ",r.indexOf(" "+n+" ")>-1&&(r=r.replace(" "+n+" "," "),r=r.trim(),r=r.replace(/ +/g," "),t.className=r),this},html:function(n){var t=this.dom;if(typeof n=="string")t.innerHTML=n;else if(n instanceof Array)t.innerHTML=n.join("");else return t.innerHTML;return this},left:function(n){var t=this.dom;if(typeof n=="number")t.style.left=n+"px",this.fireEvent("infect",[{left:n}]);else return this.getPos().x;return this},top:function(n){var t=this.dom;if(typeof n=="number")t.style.top=n+"px",this.fireEvent("infect",[{top:n}]);else return this.getPos().y;return this},width:function(n){var t=this.dom;if(typeof n=="number")t.style.width=n+"px",this.fireEvent("infect",[{width:n}]);else if(typeof n=="string")t.style.width=n,this.fireEvent("infect",[{width:n}]);else return this.getSize().width;return this},height:function(n){var t=this.dom;if(typeof n=="number")t.style.height=n+"px",this.fireEvent("infect",[{height:n}]);else if(typeof n=="string")t.style.height=n,this.fireEvent("infect",[{height:n}]);else return this.getSize().height;return this},count:function(n){return this.countMapping[n]=++this.countMapping[n]||1},display:function(n){var t=this.dom;if(typeof n=="boolean")t.style.display=n?"block":"none",this.fireEvent("infect",[{display:n}]);else return this.style("display")!=="none";return this},first:function(){for(var n=this.dom.firstChild;n&&!n.tagName&&n.nextSibling;)n=n.nextSibling;return n},add:function(n){var t;return t=Ucren.Element(n),this.dom.appendChild(t.dom),this},remove:function(n){var t;return n?(t=Ucren.Element(n),t.html(""),this.dom.removeChild(t.dom)):(t=Ucren.Element(this.dom.parentNode),t.remove(this)),this},insert:function(n){var t;return t=this.dom,t.firstChild?t.insertBefore(n,t.firstChild):this.add(n),this},addEvents:function(n){var t,r;return r={},t=this.dom,Ucren.each(n,function(h,c){r[c]=Ucren.addEvent(t,c,h)}),r},removeEvents:function(n){var t;return t=this.dom,Ucren.each(n,function(r,h){Ucren.delEvent(t,h,r)}),this},getPos:function(){var n,t,r,h,c;if(n=this.dom,r={},n.getBoundingClientRect){h=n.getBoundingClientRect(),c=Ucren.isIe?2:0;var S=document,O=Math.max(S.documentElement.scrollTop,S.body.scrollTop),L=Math.max(S.documentElement.scrollLeft,S.body.scrollLeft);return{x:h.left+L-c,y:h.top+O-c}}else{if(r={x:n.offsetLeft,y:n.offsetTop},t=n.offsetParent,t!==n)for(;t;)r.x+=t.offsetLeft,r.y+=t.offsetTop,t=t.offsetParent;Ucren.isSafari&&this.style("position")==="absolute"&&(r.x-=document.body.offsetLeft,r.y-=document.body.offsetTop)}for(n.parentNode?t=n.parentNode:t=null;t&&t.tagName.toUpperCase()!=="BODY"&&t.tagName.toUpperCase()!=="HTML";)r.x-=t.scrollLeft,r.y-=t.scrollTop,t.parentNode?t=t.parentNode:t=null;return r},getSize:function(){var n=this.dom,t=this.style("display");if(t&&t!=="none")return{width:n.offsetWidth,height:n.offsetHeight};var r=n.style,h={visibility:r.visibility,position:r.position,display:r.display},c={visibility:"hidden",display:"block"};h.position!=="fixed"&&(c.position="absolute"),this.style(c);var S={width:n.offsetWidth,height:n.offsetHeight};return this.style(h),S},observe:function(n,t){return n=Ucren.Element(n),n.on("infect",t.bind(this)),this},usePNGbackground:function(n){var t;return t=this.dom,/\.png$/i.test(n)&&Ucren.isIe6?t.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+n+"',sizingMethod='scale');":t.style.backgroundImage="url("+n+")",this},setAlpha:function(){var n=/alpha\s*\(\s*opacity\s*=\s*([^)]+)\)/;return function(t){var r=this.dom,h=r.style;return Ucren.isIe?(r.currentStyle&&!r.currentStyle.hasLayout&&(h.zoom=1),n.test(h.filter)?(t=t>=99.99?"":"alpha(opacity="+t+")",h.filter=h.filter.replace(n,t)):h.filter+=" alpha(opacity="+t+")"):h.opacity=t/100,this}}(),fadeIn:function(n){typeof this.fadingNumber>"u"&&(this.fadingNumber=0),this.setAlpha(this.fadingNumber);var t=(function(){this.setAlpha(this.fadingNumber),this.fadingNumber===100?(clearInterval(this.fadingInterval),n&&n()):this.fadingNumber+=10}).bind(this);return this.display(!0),clearInterval(this.fadingInterval),this.fadingInterval=setInterval(t,Ucren.isIe?20:30),this},fadeOut:function(n){typeof this.fadingNumber>"u"&&(this.fadingNumber=100),this.setAlpha(this.fadingNumber);var t=(function(){this.setAlpha(this.fadingNumber),this.fadingNumber===0?(clearInterval(this.fadingInterval),this.display(!1),n&&n()):this.fadingNumber-=10}).bind(this);return clearInterval(this.fadingInterval),this.fadingInterval=setInterval(t,Ucren.isIe?20:30),this},useMouseAction:function(n,t){return this.MouseAction||(this.MouseAction=new Ucren.MouseAction({element:this})),this.MouseAction.use(n,t),this}});const layers={},zIndexes={[LAYERS.PRELOAD]:zi(),[LAYERS.DEFAULT]:zi(),[LAYERS.FLASH]:zi(),[LAYERS.JUICE]:zi(),[LAYERS.KNIFE]:zi(),[LAYERS.FRUIT]:zi(),[LAYERS.LIGHT]:zi(),[LAYERS.FRUIT]:zi(),[LAYERS.MASK]:zi(),[LAYERS.START_SCREEN]:zi(),[LAYERS.RESULT_SCREEN]:zi(),[LAYERS.BRAND_INTRO]:zi(),[LAYERS.BRAND_QUESTION]:zi()},{width,height}=viewport;function createImage(n,t,r,h,c,S,O="none"){return n=this.getLayer(n),n.image(t,r,h,c,S,O)}function createText(n,t,r,h,c,S,O="normal",L="start"){return n=this.getLayer(n),n.text(r,h,t).attr({fill:c||"#fff","font-family":FONT_FAMILY,"font-size":S||"14px","font-weight":O,"text-anchor":L})}function getLayer(n){n=n||LAYERS.DEFAULT;let t=layers[n],r;return t||(r=makeElement("div",{class:"layer","data-name":n,style:"z-index: "+(zIndexes[n]||0)+";"}),Ucren.Element("extra").add(r),t=layers[n]=Raphael(r,width,height),t)}function hideLayer(n){const t=getLayer(n);t&&t.canvas&&t.canvas.parentNode&&(t.canvas.parentNode.style.display="none")}function showLayer(n){const t=getLayer(n);t&&t.canvas&&t.canvas.parentNode&&(t.canvas.parentNode.style.display="block")}function zi(){return zi.num=++zi.num||2}const layer={createImage,createText,getLayer,hideLayer,showLayer};let addingTasks=[],adding=0,tasks=[];class Timeline{constructor(){N(this,"_requestAnimationFrame",function(t){return t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||t.oRequestAnimationFrame||function(r){setTimeout(r,1)}}(window)),this.startTime=0,this.count=0}now(){return new Date().getTime()}init(){this.startTime=this.now(),this.count=0,setInterval(()=>{this.count++,this.update(this.now())},1)}createTask(t){const r=this._createTask(t);return addingTasks.unshift(r),adding=1,t.recycle&&this.taskList(t.recycle,r),r}taskList(t,r){return t.clear||(t.clear=function(){for(let h,c=this.length-1;c>=0;c--)h=this[c],h.stop(),this.splice(c,1);return this}),r&&t.unshift(r),t}setTimeout(t,r){return this.createTask({start:r,duration:0,onTimeStart:t})}_setInterval(t,r){const h=setInterval(t,r);return{stop:function(){clearInterval(h)}}}getFPS(){const t=this.now(),r=this.count/(t-this.startTime)*1e3;return this.count>1e3&&(this.count=0,this.startTime=t),r}_createTask(t){const r=t.object||{};return t.start=t.start||0,{start:t.start+this.now(),duration:t.duration===-1?864e5:t.duration,data:t.data?[0].concat(t.data):[0],started:0,object:r,onTimeStart:t.onTimeStart||r.onTimeStart||nul,onTimeUpdate:t.onTimeUpdate||r.onTimeUpdate||nul,onTimeEnd:t.onTimeEnd||r.onTimeEnd||nul,stop:function(){this.stopped=1}}}updateTask(t,r){const h=t.data;h[0]=r,t.onTimeUpdate.apply(t.object,h)}checkStartTask(t){t.started||(t.started=1,t.onTimeStart.apply(t.object,t.data.slice(1)),this.updateTask(t,0))}update(t){let r=tasks.length,h,c,S,O;for(;r--;)if(c=tasks[r],S=c.start,O=c.duration,t>=S){if(c.stopped){tasks.splice(r,1);continue}this.checkStartTask(c),(h=t-S)<O?this.updateTask(c,h):(this.updateTask(c,O),c.onTimeEnd.apply(c.object,c.data.slice(1)),tasks.splice(r,1))}adding&&(tasks.unshift.apply(tasks,addingTasks),addingTasks.length=adding=0)}}const timeline=new Timeline;class Displacement{constructor({layer:t,imageSrc:r,width:h,height:c,startX:S,startY:O,endX:L,endY:B,animMap:H,duration:p}){N(this,"image"),N(this,"anim",{}),N(this,"anims",[]),this.layer=t,this.imageSrc=r,this.width=h,this.height=c,this.startX=S,this.startY=O,this.endX=L,this.endY=B,typeof H=="function"?this.anim.show=this.anim.hide=H:this.anim=H,this.duration=p}createTask(t,r,h,c,S,O,L,B){timeline.createTask({start:t,duration:r,object:this,data:[h,c,S,O,L,B],onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}set(){this.image=layer.createImage(this.layer,this.imageSrc,this.startX,this.startY,this.width,this.height)}show(t){this.createTask(t,this.duration,this.startX,this.startY,this.endX,this.endY,this.anim.show,MODES.SHOW)}hide(){this.anims.clear(),this.createTask(0,this.duration,this.endX,this.endY,this.startX,this.startY,this.anim.hide,MODES.HIDE)}onTimeUpdate(t,r,h,c,S,O){this.image.attr({x:O(t,r,c-r,this.duration),y:O(t,h,S-h,this.duration)})}onTimeStart(){}onTimeEnd(t,r,h,c,S){S===MODES.HIDE&&this.image.hide()}}class DisplacementFactory{create(t){return new Displacement(t)}}const displacementFactory=new DisplacementFactory;class Preload{constructor(t){displacementFactory.create({layer:LAYERS.PRELOAD,imageSrc:t}).set()}}class PreloadFactory{create(t){return new Preload(t)}}const preloadFactory=new PreloadFactory;function getURLs(){return[Object.values(FRUIT_CONFIG.infos).map(([n])=>n),Object.values(FRUIT_CONFIG.cutImages).flat(),FRUIT_CONFIG.shadowImage,LOSE_CONFIG.conf.map(({src:n})=>n)].flat()}function preload(){getURLs().forEach(preloadFactory.create)}function unsetObject(n){for(const t in n)n.hasOwnProperty(t)&&typeof n[t]=="function"&&(n[t]=function(){})}function getAngleByRadian(n){return n*180/Math.PI}function pointToRadian(n,t){if(t[0]===n[0])return t[1]>n[1]?Math.PI*.5:Math.PI*1.5;if(t[1]===n[1])return t[0]>n[0]?0:Math.PI;const r=Math.atan((n[1]-t[1])/(n[0]-t[0]));return t[0]>n[0]&&t[1]<n[1]?r+2*Math.PI:t[0]>n[0]&&t[1]>n[1]?r:r+Math.PI}const tools={unsetObject,getAngleByRadian,pointToRadian};function postMessage(n,t){const r=[].slice.call(arguments,0),h=r.length-1;t=r[h],r.slice(0,h),Ucren.dispatch(t,r)}function addEventListener(n,t){Ucren.dispatch(n,t)}const message={postMessage,addEventListener},stack={},cache={};class State{constructor(t){this.key=t}is(t){return stack[this.key]===t}isnot(t){return stack[this.key]!==t}ison(){return this.is(!0)}isoff(){return this.isnot(!0)}isunset(){return this.is(void 0)}set(t){stack[this.key]=t}get(){return stack[this.key]}on(){return this.set(!0),{keep:t=>{timeline.setTimeout(()=>this.set(!1),t)}}}off(){return this.set(!1),{keep:t=>{timeline.setTimeout(()=>this.set(!0),t)}}}}const state=n=>cache[n]?cache[n]:cache[n]=new State(n);class Knifes{constructor(){N(this,"_knifes",[]),N(this,"lastX",null),N(this,"lastY",null),N(this,"switchState",!0),N(this,"_anims",[])}get anims(){return this._anims}newKnife(){this.lastX=null,this.lastY=null}through(t,r){if(!this.switchState)return;let h=null;return this.lastX!==null&&(this.lastX!==t||this.lastY!==r)&&(new KnifePart({sx:this.lastX,sy:this.lastY,ex:t,ey:r}).set(),h=[this.lastX,this.lastY,t,r]),this.lastX=t,this.lastY=r,h}pause(){this.anims.clear&&this.anims.clear(),this.switchOff()}switchOff(){this.switchState=!1}switchOn(){this.switchState=!0,this.endAll()}endAll(){for(let t=this._knifes.length-1;t>=0;t--)this._knifes[t].end()}push(t){this._knifes.push(t)}indexOf(t){return this._knifes.indexOf(t)}splice(t,r){this._knifes.splice(t,r)}}const knifes=new Knifes;class KnifePart{constructor(t){N(this,"color",KNIFE_PART_CONFIG.color),N(this,"stroke",KNIFE_PART_CONFIG.stroke),N(this,"life",KNIFE_PART_CONFIG.life),this.sx=t.sx,this.sy=t.sy,this.ex=t.ex,this.ey=t.ey,knifes.push(this)}set(){const t=layer.getLayer(LAYERS.KNIFE);let r,h,c,S,O,L,B,H;return r=this.sx,h=this.sy,c=this.ex,S=this.ey,O=r-c,L=h-S,B=Math.abs(O),H=Math.abs(L),B>H?(r+=O<0?-1:1,h+=L<0?-(H/B):H/B):(r+=O<0?-(B/H):B/H,h+=L<0?-1:1),this.line=t.path("M"+r+","+h+"L"+c+","+S).attr({stroke:this.color,"stroke-width":this.stroke+"px"}),timeline.createTask({start:0,duration:this.life,object:this,onTimeUpdate:this.update,onTimeEnd:this.end,recycle:knifes.anims}),this}update(t){this.line.attr("stroke-width",this.stroke*(1-t/this.life)+"px")}end(){this.line.remove();const t=knifes.indexOf(this);t&&knifes.splice(t,1)}}const{width:viewportWidth$3,height:viewportHeight$3}=viewport;class Control{constructor(){N(this,"canvasTop",0),N(this,"canvasLeft",0),N(this,"fix",()=>{this.canvasLeft=(document.documentElement.clientWidth-viewportWidth$3)/2,this.canvasTop=(document.documentElement.clientHeight-viewportHeight$3)/2}),N(this,"dragHandler",(t,r,h,c,S)=>{const O=h-this.canvasLeft,L=c-this.canvasTop;if(INTERACTION_MODE===INTERACTION_MODES.SLICE){const B=knifes.through(O,L);B&&message.postMessage(B,MESSAGES.SLICE)}else INTERACTION_MODE===INTERACTION_MODES.TOUCH&&message.postMessage([O,L],MESSAGES.TOUCH)}),N(this,"startDragHandler",()=>{knifes.newKnife()})}init(){this.fixCanvasPos(),this.installDragger()}fixCanvasPos(){this.fix(),Ucren.addEvent(window,"resize",this.fix)}installDragger(){const t=new Ucren.BasicDrag({type:"calc"});t.on("returnValue",this.dragHandler),t.on("startDrag",this.startDragHandler),t.bind(document.documentElement)}}const control=new Control;function exponential(){}exponential.co=function n(t,r,h,c){return t==c?r+h:h*(-Math.pow(2,-10*t/c)+1)+r};exponential.ci=function n(t,r,h,c){return t==0?r:h*Math.pow(2,10*(t/c-1))+r};function quadratic(){}quadratic.ci=function n(t,r,h,c){return h*(t/=c)*t+r};quadratic.co=function n(t,r,h,c){return-h*(t/=c)*(t-2)+r};quadratic.cio=function n(t,r,h,c){return(t/=c/2)<1?h/2*t*t+r:-h/2*(--t*(t-2)-1)+r};function linear(n,t,r,h){return r*n/h+t}function back(){}back.ci=function n(t,r,h,c,S){return S=1.70158,h*((t=t/c-1)*t*((S+1)*t+S)+1)+r};back.co=function n(t,r,h,c,S){return S=1.70158,h*(t/=c)*t*((S+1)*t-S)+r};function init(){const n={defaults:{autoplay:!1,duration:5e3,formats:[],loop:!1,placeholder:"--",preload:"metadata",volume:80},types:{mp3:"audio/mpeg",ogg:"audio/ogg",wav:"audio/wav",aac:"audio/aac",m4a:"audio/x-m4a"},sounds:[],el:document.createElement("audio"),sound:function(t,r){r=r||{};let h=0,c=[],S={},O=n.isSupported();this.load=function(){return O?(this.sound.load(),this):this},this.play=function(){return O?(this.sound.play().catch(console.warn),this):this},this.togglePlay=function(){return O?(this.sound.paused?this.sound.play().catch(console.warn):this.sound.pause(),this):this},this.pause=function(){return O?(this.sound.pause(),this):this},this.isPaused=function(){return O?this.sound.paused:null},this.stop=function(){return O?(this.setTime(this.getDuration()),this.sound.pause(),this):this},this.isEnded=function(){return O?this.sound.ended:null},this.loop=function(){return O?(this.sound.loop="loop",this.bind("ended.buzzloop",function(){this.currentTime=0,this.play()}),this):this},this.unloop=function(){return O?(this.sound.removeAttribute("loop"),this.unbind("ended.buzzloop"),this):this},this.mute=function(){return O?(this.sound.muted=!0,this):this},this.unmute=function(){return O?(this.sound.muted=!1,this):this},this.toggleMute=function(){return O?(this.sound.muted=!this.sound.muted,this):this},this.isMuted=function(){return O?this.sound.muted:null},this.setVolume=function(p){return O?(p<0&&(p=0),p>100&&(p=100),this.volume=p,this.sound.volume=p/100,this):this},this.getVolume=function(){return O?this.volume:this},this.increaseVolume=function(p){return this.setVolume(this.volume+(p||1))},this.decreaseVolume=function(p){return this.setVolume(this.volume-(p||1))},this.setTime=function(p){return O?(this.whenReady(function(){this.sound.currentTime=p}),this):this},this.getTime=function(){if(!O)return null;const p=Math.round(this.sound.currentTime*100)/100;return isNaN(p)?n.defaults.placeholder:p},this.setPercent=function(p){return O?this.setTime(n.fromPercent(p,this.sound.duration)):this},this.getPercent=function(){if(!O)return null;const p=Math.round(n.toPercent(this.sound.currentTime,this.sound.duration));return isNaN(p)?n.defaults.placeholder:p},this.setSpeed=function(p){if(!O)return this;this.sound.playbackRate=p},this.getSpeed=function(){return O?this.sound.playbackRate:null},this.getDuration=function(){if(!O)return null;const p=Math.round(this.sound.duration*100)/100;return isNaN(p)?n.defaults.placeholder:p},this.getPlayed=function(){return O?L(this.sound.played):null},this.getBuffered=function(){return O?L(this.sound.buffered):null},this.getSeekable=function(){return O?L(this.sound.seekable):null},this.getErrorCode=function(){return O&&this.sound.error?this.sound.error.code:0},this.getErrorMessage=function(){if(!O)return null;switch(this.getErrorCode()){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return null}},this.getStateCode=function(){return O?this.sound.readyState:null},this.getStateMessage=function(){if(!O)return null;switch(this.getStateCode()){case 0:return"HAVE_NOTHING";case 1:return"HAVE_METADATA";case 2:return"HAVE_CURRENT_DATA";case 3:return"HAVE_FUTURE_DATA";case 4:return"HAVE_ENOUGH_DATA";default:return null}},this.getNetworkStateCode=function(){return O?this.sound.networkState:null},this.getNetworkStateMessage=function(){if(!O)return null;switch(this.getNetworkStateCode()){case 0:return"NETWORK_EMPTY";case 1:return"NETWORK_IDLE";case 2:return"NETWORK_LOADING";case 3:return"NETWORK_NO_SOURCE";default:return null}},this.set=function(p,U){return O?(this.sound[p]=U,this):this},this.get=function(p){return O?p?this.sound[p]:this.sound:null},this.bind=function(p,U){if(!O)return this;p=p.split(" ");const C=this,M=function(Z){U.call(C,Z)};for(let Z=0;Z<p.length;Z++){let y=p[Z],j=y;y=j.split(".")[0],c.push({idx:j,func:M}),this.sound.addEventListener(y,M,!0)}return this},this.unbind=function(p){if(!O)return this;p=p.split(" ");for(let U=0;U<p.length;U++){const C=p[U],M=C.split(".")[0];for(let Z=0;Z<c.length;Z++){const y=c[Z].idx.split(".");(c[Z].idx===C||y[1]&&y[1]===C.replace(".",""))&&(this.sound.removeEventListener(M,c[Z].func,!0),c.splice(Z,1))}}return this},this.bindOnce=function(p,U){if(!O)return this;const C=this;S[h++]=!1,this.bind(h+p,function(){S[h]||(S[h]=!0,U.call(C)),C.unbind(h+p)})},this.trigger=function(p){if(!O)return this;p=p.split(" ");for(let U=0;U<p.length;U++){const C=p[U];for(let M=0;M<c.length;M++){const Z=c[M].idx.split(".");if(c[M].idx===C||Z[0]&&Z[0]===C.replace(".","")){const y=document.createEvent("HTMLEvents");y.initEvent(Z[0],!1,!0),this.sound.dispatchEvent(y)}}}return this},this.fadeTo=function(p,U,C){if(!O)return this;U instanceof Function?(C=U,U=n.defaults.duration):U=U||n.defaults.duration;const M=this.volume,Z=U/Math.abs(M-p),y=this;this.play();function j(){setTimeout(function(){M<p&&y.volume<p?(y.setVolume(y.volume+=1),j()):M>p&&y.volume>p?(y.setVolume(y.volume-=1),j()):C instanceof Function&&C.apply(y)},Z)}return this.whenReady(function(){j()}),this},this.fadeIn=function(p,U){return O?this.setVolume(0).fadeTo(100,p,U):this},this.fadeOut=function(p,U){return O?this.fadeTo(0,p,U):this},this.fadeWith=function(p,U){return O?(this.fadeOut(U,function(){this.stop()}),p.play().fadeIn(U),this):this},this.whenReady=function(p){if(!O)return null;const U=this;this.sound.readyState===0?this.bind("canplay.buzzwhenready",function(){p.call(U)}):p.call(U)};function L(p){const U=[],C=p.length-1;for(let M=0;M<=C;M++)U.push({start:p.start(C),end:p.end(C)});return U}function B(p){return p.split(".").pop()}function H(p,U){const C=document.createElement("source");C.src=U,n.types[B(U)]&&(C.type=n.types[B(U)]),p.appendChild(C)}if(O&&t){for(const p in n.defaults)n.defaults.hasOwnProperty(p)&&(r[p]=r[p]||n.defaults[p]);if(this.sound=document.createElement("audio"),t instanceof Array)for(const p in t)t.hasOwnProperty(p)&&H(this.sound,t[p]);else if(r.formats.length)for(const p in r.formats)r.formats.hasOwnProperty(p)&&H(this.sound,t+"."+r.formats[p]);else H(this.sound,t);r.loop&&this.loop(),r.autoplay&&(this.sound.autoplay="autoplay"),r.preload===!0?this.sound.preload="auto":r.preload===!1?this.sound.preload="none":this.sound.preload=r.preload,this.setVolume(r.volume),n.sounds.push(this)}},group:function(t){t=h(t,arguments),this.getSounds=function(){return t},this.add=function(c){c=h(c,arguments);for(let S=0;S<c.length;S++)t.push(c[S])},this.remove=function(c){c=h(c,arguments);for(let S=0;S<c.length;S++)for(let O=0;O<t.length;O++)if(t[O]==c[S]){delete t[O];break}},this.load=function(){return r("load"),this},this.play=function(){return r("play"),this},this.togglePlay=function(){return r("togglePlay"),this},this.pause=function(c){return r("pause",c),this},this.stop=function(){return r("stop"),this},this.mute=function(){return r("mute"),this},this.unmute=function(){return r("unmute"),this},this.toggleMute=function(){return r("toggleMute"),this},this.setVolume=function(c){return r("setVolume",c),this},this.increaseVolume=function(c){return r("increaseVolume",c),this},this.decreaseVolume=function(c){return r("decreaseVolume",c),this},this.loop=function(){return r("loop"),this},this.unloop=function(){return r("unloop"),this},this.setTime=function(c){return r("setTime",c),this},this.setduration=function(c){return r("setduration",c),this},this.set=function(c,S){return r("set",c,S),this},this.bind=function(c,S){return r("bind",c,S),this},this.unbind=function(c){return r("unbind",c),this},this.bindOnce=function(c,S){return r("bindOnce",c,S),this},this.trigger=function(c){return r("trigger",c),this},this.fade=function(c,S,O,L){return r("fade",c,S,O,L),this},this.fadeIn=function(c,S){return r("fadeIn",c,S),this},this.fadeOut=function(c,S){return r("fadeOut",c,S),this};function r(){const c=h(null,arguments),S=c.shift();for(let O=0;O<t.length;O++)t[O][S].apply(t[O],c)}function h(c,S){return c instanceof Array?c:Array.prototype.slice.call(S)}},all:function(){return new n.group(n.sounds)},isSupported:function(){return!!n.el.canPlayType},isOGGSupported:function(){return!!n.el.canPlayType&&n.el.canPlayType('audio/ogg; codecs="vorbis"')},isWAVSupported:function(){return!!n.el.canPlayType&&n.el.canPlayType('audio/wav; codecs="1"')},isMP3Supported:function(){return!!n.el.canPlayType&&n.el.canPlayType("audio/mpeg;")},isAACSupported:function(){return!!n.el.canPlayType&&(n.el.canPlayType("audio/x-m4a;")||n.el.canPlayType("audio/aac;"))},toTimer:function(t,r){let h,c,S;return h=Math.floor(t/3600),h=isNaN(h)?"--":h>=10?h:"0"+h,c=Math.floor(r?t/60%60:t/60),c=isNaN(c)?"--":c>=10?c:"0"+c,S=Math.floor(t%60),S=isNaN(S)?"--":S>=10?S:"0"+S,r?h+":"+c+":"+S:c+":"+S},fromTimer:function(t){const r=t.toString().split(":");return r&&r.length===3&&(t=parseInt(r[0],10)*3600+parseInt(r[1],10)*60+parseInt(r[2],10)),r&&r.length===2&&(t=parseInt(r[0],10)*60+parseInt(r[1],10)),t},toPercent:function(t,r,h){const c=Math.pow(10,h||0);return Math.round(t*100/r*c)/c},fromPercent:function(t,r,h){const c=Math.pow(10,h||0);return Math.round(r/100*t*c)/c}};return n}const buzz=init(),VIBRATION_PATTERNS={DEFAULT:[100],SOUND_BUTTON:[30],FRUIT:[30],GAME_OVER:[10,0,10,0,100,0,600],BOOM:[10,0,10,0,100,0,600,0,10,0,10,0,100,0,400]};class Vibration{vibrate(t=VIBRATION_PATTERNS.DEFAULT){navigator.vibrate&&navigator.vibrate(t)}soundButton(){this.vibrate(VIBRATION_PATTERNS.SOUND_BUTTON)}fruit(){this.vibrate(VIBRATION_PATTERNS.FRUIT)}gameOver(){this.vibrate(VIBRATION_PATTERNS.GAME_OVER)}boom(){this.vibrate(VIBRATION_PATTERNS.BOOM)}}const vibration=new Vibration;class SoundButton{constructor(){N(this,"startText"),N(this,"gameText"),N(this,"resultText"),N(this,"startSoundButton"),N(this,"gameSoundButton"),N(this,"resultSoundButton"),N(this,"startGroup"),N(this,"gameGroup"),N(this,"resultGroup"),N(this,"anims",[]),N(this,"anim",exponential.co),N(this,"isOn",!1)}set(){this.startSoundButton=layer.createImage(LAYERS.START_SCREEN,this.isOn?SOUND_BUTTON_CONFIG.imageOn:SOUND_BUTTON_CONFIG.imageOff,SOUND_BUTTON_CONFIG.imageX,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.imageWidth,SOUND_BUTTON_CONFIG.imageHeight).hide(),this.startText=layer.createText(LAYERS.START_SCREEN,this.isOn?SOUND_BUTTON_CONFIG.textValueOff:SOUND_BUTTON_CONFIG.textValueOn,SOUND_BUTTON_CONFIG.textX,SOUND_BUTTON_CONFIG.textStartY,SOUND_BUTTON_CONFIG.textFill,SOUND_BUTTON_CONFIG.textSize,SOUND_BUTTON_CONFIG.textWeight,SOUND_BUTTON_CONFIG.textAnchor),this.startGroup=layer.getLayer(LAYERS.START_SCREEN).set(),this.startGroup.push(this.startSoundButton,this.startText),this.startGroup.click(()=>{this.toggle(),message.postMessage(null,MESSAGES.TOGGLE_SOUND),vibration.soundButton()}),this.gameSoundButton=layer.createImage(LAYERS.FRUIT,this.isOn?SOUND_BUTTON_CONFIG.imageOn:SOUND_BUTTON_CONFIG.imageOff,SOUND_BUTTON_CONFIG.imageX,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.imageWidth,SOUND_BUTTON_CONFIG.imageHeight).hide(),this.gameText=layer.createText(LAYERS.FRUIT,this.isOn?SOUND_BUTTON_CONFIG.textValueOff:SOUND_BUTTON_CONFIG.textValueOn,SOUND_BUTTON_CONFIG.textX,SOUND_BUTTON_CONFIG.textStartY,SOUND_BUTTON_CONFIG.textFill,SOUND_BUTTON_CONFIG.textSize,SOUND_BUTTON_CONFIG.textWeight,SOUND_BUTTON_CONFIG.textAnchor),this.gameGroup=layer.getLayer(LAYERS.FRUIT).set(),this.gameGroup.push(this.gameSoundButton,this.gameText),this.gameGroup.click(()=>{this.toggle(),message.postMessage(null,MESSAGES.TOGGLE_SOUND),vibration.soundButton()}),this.resultSoundButton=layer.createImage(LAYERS.RESULT_SCREEN,this.isOn?SOUND_BUTTON_CONFIG.imageOn:SOUND_BUTTON_CONFIG.imageOff,SOUND_BUTTON_CONFIG.imageX,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.imageWidth,SOUND_BUTTON_CONFIG.imageHeight).hide(),this.resultText=layer.createText(LAYERS.RESULT_SCREEN,this.isOn?SOUND_BUTTON_CONFIG.textValueOff:SOUND_BUTTON_CONFIG.textValueOn,SOUND_BUTTON_CONFIG.textX,SOUND_BUTTON_CONFIG.textStartY,SOUND_BUTTON_CONFIG.textFill,SOUND_BUTTON_CONFIG.textSize,SOUND_BUTTON_CONFIG.textWeight,SOUND_BUTTON_CONFIG.textAnchor),this.resultGroup=layer.getLayer(LAYERS.START_SCREEN).set(),this.resultGroup.push(this.resultSoundButton,this.resultText),this.resultGroup.click(()=>{this.toggle(),message.postMessage(null,MESSAGES.TOGGLE_SOUND),vibration.soundButton()})}show(t){timeline.createTask({start:t,duration:SOUND_BUTTON_CONFIG.animLength,data:[MODES.SHOW,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.imageHomeEndY,SOUND_BUTTON_CONFIG.textStartY,SOUND_BUTTON_CONFIG.textHomeEndY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:SOUND_BUTTON_CONFIG.animLength,data:[MODES.SHOW,SOUND_BUTTON_CONFIG.imageHomeEndY,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.textHomeEndY,SOUND_BUTTON_CONFIG.textStartY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}showHomeSoundButton(t){timeline.createTask({start:t,duration:SOUND_BUTTON_CONFIG.animLength,data:[MODES.SHOW,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.imageHomeEndY,SOUND_BUTTON_CONFIG.textStartY,SOUND_BUTTON_CONFIG.textHomeEndY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}showResultSoundButton(t){timeline.createTask({start:t,duration:SOUND_BUTTON_CONFIG.animLength,data:[MODES.SHOW,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.imageResultEndY,SOUND_BUTTON_CONFIG.textStartY,SOUND_BUTTON_CONFIG.textResultEndY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}showGameSoundButton(t){timeline.createTask({start:t,duration:SOUND_BUTTON_CONFIG.animLength,data:[MODES.SHOW,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.imageGameEndY,SOUND_BUTTON_CONFIG.textStartY,SOUND_BUTTON_CONFIG.textGameEndY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}hideHomeSoundButton(t){timeline.createTask({start:t,duration:SOUND_BUTTON_CONFIG.animLength,data:[MODES.HIDE,SOUND_BUTTON_CONFIG.imageHomeEndY,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.textHomeEndY,SOUND_BUTTON_CONFIG.textStartY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}hideResultSoundButton(t){timeline.createTask({start:t,duration:SOUND_BUTTON_CONFIG.animLength,data:[MODES.HIDE,SOUND_BUTTON_CONFIG.imageResultEndY,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.textResultEndY,SOUND_BUTTON_CONFIG.textStartY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}hideGameSoundButton(t){timeline.createTask({start:t,duration:SOUND_BUTTON_CONFIG.animLength,data:[MODES.HIDE,SOUND_BUTTON_CONFIG.imageGameEndY,SOUND_BUTTON_CONFIG.imageStartY,SOUND_BUTTON_CONFIG.textGameEndY,SOUND_BUTTON_CONFIG.textStartY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}onTimeUpdate(t,r,h,c,S,O){this.startSoundButton.attr("y",this.anim(t,h,c-h,HOME_TEXT_CONFIG.animLength)),this.startText.attr("y",this.anim(t,S,O-S,HOME_TEXT_CONFIG.animLength)),this.gameSoundButton.attr("y",this.anim(t,h,c-h,HOME_TEXT_CONFIG.animLength)),this.gameText.attr("y",this.anim(t,S,O-S,HOME_TEXT_CONFIG.animLength)),this.resultSoundButton.attr("y",this.anim(t,h,c-h,HOME_TEXT_CONFIG.animLength)),this.resultText.attr("y",this.anim(t,S,O-S,HOME_TEXT_CONFIG.animLength))}onTimeStart(t){t===MODES.SHOW&&[this.startSoundButton,this.startText,this.gameSoundButton,this.gameText,this.resultSoundButton,this.resultText].invoke(t)}onTimeEnd(t){t===MODES.HIDE&&[this.startSoundButton,this.startText,this.gameSoundButton,this.gameText,this.resultSoundButton,this.resultText].invoke(t)}toggle(){this.isOn?this.off():this.on()}on(){this.startText.attr("text",SOUND_BUTTON_CONFIG.textValueOff),this.startSoundButton.attr("src",SOUND_BUTTON_CONFIG.imageOn),this.gameText.attr("text",SOUND_BUTTON_CONFIG.textValueOff),this.gameSoundButton.attr("src",SOUND_BUTTON_CONFIG.imageOn),this.resultText.attr("text",SOUND_BUTTON_CONFIG.textValueOff),this.resultSoundButton.attr("src",SOUND_BUTTON_CONFIG.imageOn),this.isOn=!0}off(){this.startText.attr("text",SOUND_BUTTON_CONFIG.textValueOn),this.startSoundButton.attr("src",SOUND_BUTTON_CONFIG.imageOff),this.gameText.attr("text",SOUND_BUTTON_CONFIG.textValueOn),this.gameSoundButton.attr("src",SOUND_BUTTON_CONFIG.imageOff),this.resultText.attr("text",SOUND_BUTTON_CONFIG.textValueOn),this.resultSoundButton.attr("src",SOUND_BUTTON_CONFIG.imageOff),this.isOn=!1}}const soundButton=new SoundButton;class Sound{constructor(t){this.sound=new buzz.sound(t,{formats:["ogg","mp3"],preload:!0,autoload:!0,loop:!1})}play(){this.sound.setPercent(0),this.sound.setVolume(100),soundButton.isOn&&this.sound.play()}stop(){soundButton.isOn?this.sound.fadeOut(1e3,function(){this.pause()}):this.sound.stop()}}class SoundFactory{create(t){return new Sound(t)}}const soundFactory=new SoundFactory;class Flash{constructor(){N(this,"image"),N(this,"snd"),N(this,"xDiff",0),N(this,"yDiff",0),N(this,"switchOn",!0),N(this,"anim",quadratic.cio),N(this,"anims",[]),N(this,"dur",FLASH_CONFIG.duration)}set(){if(!this.switchOn)return!1;this.image=layer.createImage(LAYERS.FLASH,FLASH_CONFIG.image,0,0,FLASH_CONFIG.width,FLASH_CONFIG.height).hide(),this.snd=soundFactory.create(SOUNDS.SPLATTER)}showAt(t,r,h){if(!this.switchOn)return!1;this.image&&this.image.rotate(h,!0).scale(1e-5,1e-5).attr({x:t+this.xDiff,y:r+this.yDiff}).show(),this.anims.clear&&this.anims.clear(),this.snd&&this.snd.play(),timeline.createTask({start:0,duration:this.dur,data:[1e-5,1],object:this,onTimeUpdate:this.onTimeUpdate,recycle:this.anims}),timeline.createTask({start:this.dur,duration:this.dur,data:[1,1e-5],object:this,onTimeUpdate:this.onTimeUpdate,recycle:this.anims})}onTimeUpdate(t,r,h,c){if(!this.switchOn)return!1;this.image.scale(c=this.anim(t,r,h-r,this.dur),c)}}const flash=new Flash;class Juice{constructor(t,r,h,c=JUICE_CONFIG.shapes.CIRCLE){N(this,"dur",JUICE_CONFIG.duration),N(this,"anim",exponential.co),N(this,"dropAnim",quadratic.co),N(this,"shape"),N(this,"figure"),this.originX=t,this.originY=r,this.color=h,this.radius=JUICE_CONFIG.radius,this.distance=randomNumber(200)+100,this.dir=randomNumber(360)*Math.PI/180,this.shape=c}render(){const t=layer.getLayer(LAYERS.JUICE);if(this.shape===JUICE_CONFIG.shapes.CIRCLE)this.figure=t.circle(this.originX,this.originY,this.radius).attr({fill:this.color,stroke:"none"});else if(this.shape===JUICE_CONFIG.shapes.SQUARE)this.figure=t.rect(this.originX-this.radius,this.originY-this.radius,this.radius*2,this.radius*2).attr({fill:this.color,stroke:"none"});else if(this.shape===JUICE_CONFIG.shapes.DIAMOND){const r=this.createStarPath(this.originX,this.originY,this.radius,4);this.figure=t.path(r).attr({fill:this.color,stroke:"none"})}else if(this.shape===JUICE_CONFIG.shapes.STAR){const r=this.createStarPath(this.originX,this.originY,this.radius,5);this.figure=t.path(r).attr({fill:this.color,stroke:"none"})}}createStarPath(t,r,h,c){const S=Math.PI/c;let O="";for(let L=0;L<2*c;L++){const B=L*S,H=L%2===0?h:h/2,p=t+H*Math.sin(B),U=r-H*Math.cos(B);O+=L===0?`M ${p} ${U}`:`L ${p} ${U}`}return O+="Z",O}sputter(){timeline.createTask({start:0,duration:this.dur,object:this,onTimeUpdate:this.onTimeUpdate,onTimeEnd:this.onTimeEnd})}onTimeUpdate(t){const r=this.anim(t,0,this.distance,this.dur),h=this.originX+r*Math.cos(this.dir),c=this.originY+r*Math.sin(this.dir)+this.dropAnim(t,0,200,this.dur),S=this.anim(t,1,-1,this.dur);this.shape===JUICE_CONFIG.shapes.CIRCLE?this.figure.attr({cx:h,cy:c}).scale(S,S):this.shape===JUICE_CONFIG.shapes.SQUARE?this.figure.attr({x:h-this.radius*S,y:c-this.radius*S}).scale(S,S):this.shape===JUICE_CONFIG.shapes.DIAMOND?this.figure.attr({path:this.createStarPath(h,c,this.radius*S,4)}).scale(S,S):this.shape===JUICE_CONFIG.shapes.STAR&&this.figure.attr({path:this.createStarPath(h,c,this.radius*S,5)}).scale(S,S)}onTimeEnd(){this.figure.remove(),tools.unsetObject(this)}}class JuiceFactory{constructor(){N(this,"num",JUICE_CONFIG.number),N(this,"createOne",function(t,r,h){if(!h)return;const c=new Juice(t,r,h,JUICE_CONFIG.shape);c.render(),c.sputter()})}create(t,r,h){for(let c=0;c<this.num;c++)this.createOne(t,r,h)}}const juiceFactory=new JuiceFactory,{height:viewportHeight$2,width:viewportWidth$2}=viewport,average=function(n,t){return(n+t)/2>>0};class Fruit{constructor(t){N(this,"image"),N(this,"shadow"),N(this,"zoomAnim",exponential.co),N(this,"linearAnim",linear),N(this,"dropAnim",quadratic.ci),N(this,"fallOffAnim",quadratic.co),N(this,"rotateSpeed",[60,50,40,-40,-50,-60]),N(this,"brokend",!1),N(this,"apartAngle",0),N(this,"aparted",!1),N(this,"shotOutStartX"),N(this,"shotOutStartY"),N(this,"shotOutEndX"),N(this,"shotOutEndY"),N(this,"fallOffToX"),N(this,"fallTargetX"),N(this,"fallTargetY"),N(this,"touchedPosX"),N(this,"touchedPosY"),N(this,"brokenPosX"),N(this,"brokenPosY"),N(this,"brokenTargetX1"),N(this,"brokenTargetY1"),N(this,"brokenTargetX2"),N(this,"brokenTargetY2"),N(this,"touchedTargetX"),N(this,"touchedTargetY"),N(this,"bImage1RotateAngle"),N(this,"bImage2RotateAngle"),N(this,"fallOutOfViewerCalled",!1),N(this,"fallOffing",!1),N(this,"type"),N(this,"clickHandler",h=>{const c=h.clientX-control.canvasLeft,S=h.clientY-control.canvasTop;message.postMessage([c,S],MESSAGES.TOUCH)}),N(this,"shotOut",(()=>{const h=[-1,1];return(c,S)=>(this.shotOutStartX=this.originX,this.shotOutStartY=this.originY,this.shotOutEndX=average(this.originX,S),this.shotOutEndY=Math.min(this.startY-randomNumber(this.startY-100),200),this.fallOffToX=S,timeline.createTask({start:c,duration:FRUIT_CONFIG.dropTime,object:this,onTimeUpdate:this.onShotOuting,onTimeStart:this.onShotOutStart,onTimeEnd:this.onShotOutEnd,recycle:this.anims}),this.type!==FRUIT_CONFIG.types.BOOM&&this.rotate(0,(randomNumber(180)+90)*h[randomNumber(2)]),this)})()),N(this,"fallOff",(()=>{const h=[-1,1];let c=0;return(S,O)=>{if(this.aparted||this.brokend)return;this.fallOffing=1;const L=viewportHeight$2+calcSize(120);typeof O!="number"&&(O=this.originX+randomNumber(FRUIT_CONFIG.dropXScope)*h[c++%2]),this.fallTargetX=O,this.fallTargetY=L,timeline.createTask({start:S,duration:FRUIT_CONFIG.dropTime,object:this,onTimeUpdate:this.onFalling,onTimeStart:this.onFallStart,onTimeEnd:this.onFallEnd,recycle:this.anims})}})());const r=FRUIT_CONFIG.infos[t.type][3];this.type=t.type,this.originX=t.originX,this.originY=t.originY,this.radius=r,this.startX=t.originX,this.startY=t.originY,this.anims=[]}set(t){const r=FRUIT_CONFIG.infos[this.type],h=this.radius;return this.shadow=layer.createImage(LAYERS.FRUIT,FRUIT_CONFIG.shadowImage,this.startX-h,this.startY-h+FRUIT_CONFIG.shadowPos,106,77),this.image=layer.createImage(LAYERS.FRUIT,r[0],this.startX-h,this.startY-h,r[1],r[2]),IS_TOUCH&&this.addClickHandler(),this.type===FRUIT_CONFIG.types.BOOM&&this.image.rotate(r[4]),t&&(this.image.hide(),this.shadow.hide()),DEBUG_MODE&&this.showDebugCatchArea(),this}addClickHandler(){this.image.node.addEventListener("pointerdown",this.clickHandler)}removeClickHandler(){this.image.node.removeEventListener("pointerdown",this.clickHandler)}showDebugCatchArea(){const{originX:t,originY:r,radius:h}=this;this.debugArea=this.image.paper.circle(t,r,h).attr({stroke:"mediumblue","stroke-width":2,"stroke-dasharray":"- ",opacity:.5}),this.debugArea.insertBefore(this.image)}pos(t,r){const h=this.radius;this.originX=t,this.originY=r,this.image.attr({x:t-=h,y:r-=h}),this.shadow.attr({x:t,y:r+FRUIT_CONFIG.shadowPos}),DEBUG_MODE&&this.debugArea.attr({cx:t+h,cy:r+h}),this.fallOffing&&!this.fallOutOfViewerCalled&&r>viewportHeight$2+this.radius&&(this.fallOutOfViewerCalled=1,message.postMessage(this,MESSAGES.FRUIT_FALL_OUT_OF_VIEWER))}show(t){timeline.createTask({start:t,duration:500,data:[1e-5,1,MODES.SHOW],object:this,onTimeUpdate:this.onScaling,onTimeStart:this.onShowStart,recycle:this.anims})}hide(t){this.type===FRUIT_CONFIG.types.BOOM&&(this.anims.clear(),timeline.createTask({start:t,duration:500,data:[1,1e-5,MODES.HIDE],object:this,onTimeUpdate:this.onScaling,onTimeEnd:this.onHideEnd,recycle:this.anims}))}rotate(t,r){this.rotateSpeed=r||this.rotateSpeed[randomNumber(6)],timeline.createTask({start:t,duration:-1,object:this,onTimeUpdate:this.onRotating,recycle:this.anims})}broken(t){if(this.brokend)return;this.brokend=!0;const r=FruitFactory.fruitCache.indexOf(this);r>-1&&FruitFactory.fruitCache.splice(r,1),this.type!==FRUIT_CONFIG.types.BOOM?(flash.showAt(this.originX,this.originY,t),juiceFactory.create(this.originX,this.originY,FRUIT_CONFIG.infos[this.type][6]),IS_TOUCH?this.touched():this.apart(t)):this.hide()}pause(){this.brokend||this.anims.clear()}touched(){this.anims.clear(),this.shadow.hide(),timeline.createTask({start:0,duration:FRUIT_CONFIG.dropTime,data:[1,1e-5,MODES.HIDE,1500],object:this,onTimeUpdate:this.onScaling,onTimeStart:this.onTouchedDropStart,onTimeEnd:this.onTouchedDropEnd,recycle:this.anims}),this.debugArea&&this.debugArea.remove()}apart(t){this.anims.clear(),this.image.hide(),this.shadow.hide(),this.aparted=!0;const r=FRUIT_CONFIG.infos[this.type],h=FRUIT_CONFIG.cutImages[this.type],c=this.radius,S=layer.createImage.saturate(layer,this.startX-c,this.startY-c,r[1],r[2]);t=(t%180+360+r[4])%360,this.bImage1=S(LAYERS.FRUIT,h[0]),this.bImage2=S(LAYERS.FRUIT,h[1]),[this.bImage1,this.bImage2].invoke("rotate",t),this.apartAngle=t,timeline.createTask({start:0,duration:FRUIT_CONFIG.dropTime,object:this,onTimeUpdate:this.onBrokenDropUpdate,onTimeStart:this.onBrokenDropStart,onTimeEnd:this.onBrokenDropEnd,recycle:this.anims}),this.debugArea&&this.debugArea.remove()}remove(){IS_TOUCH&&this.removeClickHandler(),this.anims.clear(),this.image&&(this.image.remove(),this.shadow.remove(),this.debugArea&&this.debugArea.remove()),this.bImage1&&(this.bImage1.remove(),this.bImage2.remove());const t=FruitFactory.fruitCache.indexOf(this);t>-1&&FruitFactory.fruitCache.splice(t,1);for(const r in this)typeof this[r]=="function"?this[r]=function(h){return function(){throw new Error("method "+h+" has been removed")}}(r):delete this[r];message.postMessage(this,MESSAGES.FRUIT_REMOVE)}onShowStart(){this.image.show(),this.shadow.show()}onScaling(t,r,h,c,S=500){this.image.scale(c=this.zoomAnim(t,r,h-r,S),c),this.shadow.scale(c,c)}onHideEnd(){this.remove()}onRotating(t){this.image.rotate(this.rotateSpeed*t/1e3%360,!0)}onTouchedDropStart(){this.touchedTargetX=randomNumber(viewportWidth$2)-175,this.touchedTargetY=viewportHeight$2,this.touchedPosX=this.originX,this.touchedPosY=this.originY;for(let t=FruitFactory.fruitCache.length-1;t>=0;t--)FruitFactory.fruitCache[t]===this&&FruitFactory.fruitCache.splice(t,1)}onTouchedDropEnd(){this.remove()}onBrokenDropUpdate(t){const r=this.radius;this.bImage1.attr({x:this.linearAnim(t,this.brokenPosX-r,this.brokenTargetX1,FRUIT_CONFIG.dropTime),y:this.dropAnim(t,this.brokenPosY-r,this.brokenTargetY1-this.brokenPosY+r,FRUIT_CONFIG.dropTime)}).rotate(this.linearAnim(t,this.apartAngle,this.bImage1RotateAngle,FRUIT_CONFIG.dropTime),!0),this.bImage2.attr({x:this.linearAnim(t,this.brokenPosX-r,this.brokenTargetX2,FRUIT_CONFIG.dropTime),y:this.dropAnim(t,this.brokenPosY-r,this.brokenTargetY2-this.brokenPosY+r,FRUIT_CONFIG.dropTime)}).rotate(this.linearAnim(t,this.apartAngle,this.bImage2RotateAngle,FRUIT_CONFIG.dropTime),!0)}onBrokenDropStart(){this.brokenTargetX1=-(randomNumber(FRUIT_CONFIG.dropXScope)+75),this.brokenTargetX2=randomNumber(FRUIT_CONFIG.dropXScope+75),this.brokenTargetY1=viewportHeight$2,this.brokenTargetY2=viewportHeight$2,this.brokenPosX=this.originX,this.brokenPosY=this.originY,this.bImage1RotateAngle=-randomNumber(150)-50,this.bImage2RotateAngle=randomNumber(150)+50;for(let t=FruitFactory.fruitCache.length-1;t>=0;t--)FruitFactory.fruitCache[t]===this&&FruitFactory.fruitCache.splice(t,1)}onBrokenDropEnd(){this.remove()}onShotOuting(t){this.pos(this.linearAnim(t,this.shotOutStartX,this.shotOutEndX-this.shotOutStartX,FRUIT_CONFIG.dropTime),this.fallOffAnim(t,this.shotOutStartY,this.shotOutEndY-this.shotOutStartY,FRUIT_CONFIG.dropTime))}onShotOutStart(){}onShotOutEnd(){this.fallOff(0,this.fallOffToX)}onFalling(t){this.pos(this.linearAnim(t,this.brokenPosX,this.fallTargetX-this.brokenPosX,FRUIT_CONFIG.dropTime),this.dropAnim(t,this.brokenPosY,this.fallTargetY-this.brokenPosY,FRUIT_CONFIG.dropTime))}onFallStart(){this.brokenPosX=this.originX,this.brokenPosY=this.originY}onFallEnd(){message.postMessage(this,MESSAGES.FRUIT_FALL_OFF),this.remove()}}const Ht=class Ne{constructor(){N(this,"_safeNumber",FIRST_SAFE_FRUIT_NUMBER),N(this,"types",[FRUIT_CONFIG.types.PEACH,FRUIT_CONFIG.types.SANDIA,FRUIT_CONFIG.types.APPLE,FRUIT_CONFIG.types.BANANA,FRUIT_CONFIG.types.BASAHA])}create(t,r){const h=new Fruit({type:this.getType(),originX:t,originY:r}).set();return Ne.fruitCache.unshift(h),h}getType(){const t=randomNumber(8)===4&&!this.safeNumber;return this.safeNumber=this.safeNumber-1,t?FRUIT_CONFIG.types.BOOM:this.types[randomNumber(5)]}getFruitInView(){return Ne.fruitCache}get safeNumber(){return this._safeNumber}set safeNumber(t){this._safeNumber=Math.max(t,0)}};N(Ht,"fruitCache",[]);let FruitFactory=Ht;const fruitFactory=new FruitFactory;class Collide{checkSlice(t){const r=[];let h=0;return fruitFactory.getFruitInView().forEach(c=>{this.isLineIntersectingEllipse(t.slice(0,2),t.slice(2,4),[c.originX,c.originY],c.radius)&&(r[h++]=c)}),r}checkTouch(t){const r=[];let h=0;return fruitFactory.getFruitInView().forEach(c=>{this.isPointInsideEllipse(t,[c.originX,c.originY],c.radius)&&(r[h++]=c)}),r}isPointInsideEllipse(t,r,h){const c=t[0]-r[0],S=t[1]-r[1];return c*c+S*S<=h*h}isLineIntersectingEllipse(t,r,h,c,S=1){const O=this.calculateLineEllipseIntersections(t,r,h,c,S);return O&&(O[0]||O[1])}calculateLineEllipseIntersections(t,r,h,c,S=1){if(c<=0)return;const O=c,L=c*S,B=this.square(L)*this.square(t[0]-r[0])+this.square(O)*this.square(t[1]-r[1]);if(B<=0)return;const H=2*this.square(L)*(r[0]-t[0])*(t[0]-h[0])+2*this.square(O)*(r[1]-t[1])*(t[1]-h[1]),p=this.square(L)*this.square(t[0]-h[0])+this.square(O)*this.square(t[1]-h[1])-this.square(O)*this.square(L),U=this.solveQuadraticEquation(B,H,p);if(!U)return;const C=[[t[0]+U[0]*(r[0]-t[0]),t[1]+U[0]*(r[1]-t[1])],[t[0]+U[1]*(r[0]-t[0]),t[1]+U[1]*(r[1]-t[1])]];return this.isPointOnSegment(C[0],t,r)||(C[0]=null),this.isPointOnSegment(C[1],t,r)||(C[1]=null),C}isPointOnSegment(t,r,h){return t?this.getSign(t[0]-r[0])*this.getSign(t[0]-h[0])<=0&&this.getSign(t[1]-r[1])*this.getSign(t[1]-h[1])<=0:!1}square(t){return Math.pow(t,2)}getSign(t){return t<0?-1:t>0?1:0}solveQuadraticEquation(t,r,h){if(t===0)return;const c=r*r-4*t*h;if(c===0){const S=-r/(2*t);return[S,S]}else if(c>0){const S=Math.sqrt(c);return[(-r+S)/(2*t),(-r-S)/(2*t)]}}}const collide=new Collide,{width:viewportWidth$1,height:viewportHeight$1}=viewport;class Light{constructor(){N(this,"maskLayer",layer.getLayer(LAYERS.MASK)),N(this,"lightLayer",layer.getLayer(LAYERS.LIGHT)),N(this,"lights",[]),N(this,"indexes",[]),N(this,"lightsNum",LIGHTS_CONFIG.number),N(this,"overWhiteLight",()=>{message.postMessage(MESSAGES.OVER_WHITE_LIGHT_SHOW),this.removeLights();const t=LIGHTS_CONFIG.maskAppearanceTime,r=this.maskLayer.rect(0,0,viewportWidth$1,viewportHeight$1).attr({fill:LIGHTS_CONFIG.fill,stroke:"none"}),h={onTimeUpdate:function(c){r.attr("opacity",1-c/t)},onTimeEnd:function(){r.remove(),message.postMessage(MESSAGES.GAME_OVER),message.postMessage(SCENES.GAME_OVER,MESSAGES.SCENE_SWITCH_SCENE),layer.hideLayer(LAYERS.LIGHT),layer.hideLayer(LAYERS.MASK)}};layer.showLayer(LAYERS.MASK),timeline.createTask({start:0,duration:t,object:h,onTimeUpdate:h.onTimeUpdate,onTimeEnd:h.onTimeEnd})});for(let t=0;t<this.lightsNum;t++)this.indexes[t]=t;layer.hideLayer(LAYERS.LIGHT),layer.hideLayer(LAYERS.MASK)}start(t,r){const h=t.originX,c=t.originY,S=this.indexes.random();let O=0;const L=B=>{this.build(h,c,S[B])};for(let B=0;B<this.lightsNum;B++)timeline.setTimeout(()=>L(B),O+=LIGHTS_CONFIG.appearanceTime);timeline.setTimeout(()=>{this.overWhiteLight(),r&&r()},O)}removeLights(){const t=this.lights.length;for(let r=0;r<t;r++)this.lights[r].remove();this.lights.length=0}build(t,r,h){let c=h*36+randomNumber(10),S=c+5;c=Math.PI*c/180,S=Math.PI*S/180;const O=t+2*viewportWidth$1*Math.cos(c),L=r+2*viewportWidth$1*Math.sin(c),B=t+2*viewportWidth$1*Math.cos(S),H=r+2*viewportWidth$1*Math.sin(S),p=this.lightLayer.path(["M",t,r,"L",O,L,"L",B,H,"Z"]).attr({stroke:"none",fill:LIGHTS_CONFIG.fill});layer.showLayer(LAYERS.LIGHT),this.lights.push(p)}}const light=new Light;class Score{constructor(){N(this,"setTimeout",timeline.setTimeout.bind(timeline)),N(this,"anim",exponential.co),N(this,"anims",[]),N(this,"image"),N(this,"text1"),N(this,"text2")}set(){this.image=layer.createImage(LAYERS.DEFAULT,SCORE_CONFIG.image,SCORE_CONFIG.imageSx,SCORE_CONFIG.imageY,SCORE_CONFIG.imageW,SCORE_CONFIG.imageH).hide(),this.text1=layer.createText(LAYERS.DEFAULT,SCORE_CONFIG.text1Value,SCORE_CONFIG.text1Sx,SCORE_CONFIG.text1Y,SCORE_CONFIG.text1Fill,SCORE_CONFIG.text1Size,SCORE_CONFIG.text1Weight).hide(),this.text2=layer.createText(LAYERS.DEFAULT,SCORE_CONFIG.text2Prefix+SCORE_CONFIG.text2Value,SCORE_CONFIG.text2Sx,SCORE_CONFIG.text2Y,SCORE_CONFIG.text2Fill,SCORE_CONFIG.text2Size,SCORE_CONFIG.text2Weight).hide()}show(t){timeline.createTask({start:t,duration:SCORE_CONFIG.animLength,data:[MODES.SHOW,SCORE_CONFIG.imageSx,SCORE_CONFIG.imageEx,SCORE_CONFIG.text1Sx,SCORE_CONFIG.text1Ex,SCORE_CONFIG.text2Sx,SCORE_CONFIG.text2Ex],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:SCORE_CONFIG.animLength,data:[MODES.HIDE,SCORE_CONFIG.imageEx,SCORE_CONFIG.imageSx,SCORE_CONFIG.text1Ex,SCORE_CONFIG.text1Sx,SCORE_CONFIG.text2Ex,SCORE_CONFIG.text2Sx],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}number(t){this.text1.attr("text",t||0),this.image.scale(1.2,1.2),this.setTimeout(()=>{this.image.scale(1,1)},60)}onTimeUpdate(t,r,h,c,S,O,L,B){this.image.attr("x",this.anim(t,h,c-h,SCORE_CONFIG.animLength)),this.text1.attr("x",this.anim(t,S,O-S,SCORE_CONFIG.animLength)),this.text2.attr("x",this.anim(t,L,B-L,SCORE_CONFIG.animLength))}onTimeStart(t){t===MODES.SHOW&&[this.image,this.text1,this.text2].invoke(t)}onTimeEnd(t){t===MODES.HIDE&&([this.image,this.text1,this.text2].invoke(t),this.text1.attr("text",0))}}const score=new Score;class Background{constructor(){N(this,"image"),N(this,"time"),N(this,"getWobble",()=>{const t=randomNumber(12)-6,r=randomNumber(12)-6;this.image.attr({x:t,y:r})}),N(this,"stop",()=>{this.time.stop(),this.image.attr({x:0,y:0})})}set(){this.image=layer.createImage(LAYERS.DEFAULT,BACKGROUND_CONFIG.image,BACKGROUND_CONFIG.x,BACKGROUND_CONFIG.y,BACKGROUND_CONFIG.width,BACKGROUND_CONFIG.height,BACKGROUND_CONFIG.preserveAspectRatio)}wobble(){this.time=timeline._setInterval(this.getWobble,50)}}const background=new Background;class Lose{constructor(){N(this,"anim",exponential.co),N(this,"back",back.co),N(this,"o1"),N(this,"o2"),N(this,"o3"),N(this,"info",[]),N(this,"animLength",LOSE_CONFIG.animLength),N(this,"number",0),N(this,"anims",[])}set(){this.o1=layer.createImage(LAYERS.DEFAULT,LOSE_CONFIG.conf[0].src,LOSE_CONFIG.conf[0].sx,LOSE_CONFIG.conf[0].y,LOSE_CONFIG.conf[0].w,LOSE_CONFIG.conf[0].h).hide(),this.o2=layer.createImage(LAYERS.DEFAULT,LOSE_CONFIG.conf[1].src,LOSE_CONFIG.conf[1].sx,LOSE_CONFIG.conf[1].y,LOSE_CONFIG.conf[1].w,LOSE_CONFIG.conf[1].h).hide(),this.o3=layer.createImage(LAYERS.DEFAULT,LOSE_CONFIG.conf[2].src,LOSE_CONFIG.conf[2].sx,LOSE_CONFIG.conf[2].y,LOSE_CONFIG.conf[2].w,LOSE_CONFIG.conf[2].h).hide(),this.info=[{image:this.o1,config:LOSE_CONFIG.conf[0]},{image:this.o2,config:LOSE_CONFIG.conf[1]},{image:this.o3,config:LOSE_CONFIG.conf[2]}]}show(t){timeline.createTask({start:t,duration:this.animLength,data:[MODES.SHOW,LOSE_CONFIG.conf[0].sx,LOSE_CONFIG.conf[0].ex,LOSE_CONFIG.conf[1].sx,LOSE_CONFIG.conf[1].ex,LOSE_CONFIG.conf[2].sx,LOSE_CONFIG.conf[2].ex],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:this.animLength,data:[MODES.HIDE,LOSE_CONFIG.conf[0].ex,LOSE_CONFIG.conf[0].sx,LOSE_CONFIG.conf[1].ex,LOSE_CONFIG.conf[1].sx,LOSE_CONFIG.conf[2].ex,LOSE_CONFIG.conf[2].sx],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}showLoseAt(){const{image:t,config:r}=this.info[this.number]||{},h=!!t&&t.attr("src")!==r.srcF;h&&t.attr("src",r.srcF).scale(1e-5,1e-5),h&&this.scaleImage(t),h&&vibration.vibrate(),this.number++,this.number===3&&(vibration.gameOver(),this.number=0,timeline.setTimeout(()=>{message.postMessage(MESSAGES.GAME_OVER),message.postMessage(SCENES.GAME_OVER,MESSAGES.SCENE_SWITCH_SCENE)},1e3))}scaleImage(t){t.myOnScaling=t.myOnScaling||((r,h)=>{t.scale(h=this.back(r,1e-5,1-1e-5,500),h)}),t.myOnScaleEnd=t.myOnScaleEnd||function(){t.scale(1,1)},timeline.createTask({start:0,duration:500,object:t,onTimeUpdate:t.myOnScaling,onTimeEnd:t.myOnScaleEnd,recycle:this.anims})}onTimeUpdate(t,r,h,c,S,O,L,B){this.o1.attr("x",this.anim(t,h,c-h,this.animLength)),this.o2.attr("x",this.anim(t,S,O-S,this.animLength)),this.o3.attr("x",this.anim(t,L,B-L,this.animLength))}onTimeStart(t){t===MODES.SHOW&&([this.o1,this.o2,this.o3].invoke(t),this.resurrect())}onTimeEnd(t){t===MODES.HIDE&&([this.o1,this.o2,this.o3].invoke(t),this.die())}resurrect(){this.info.forEach(({image:t,config:r})=>{t.attr("src",r.src)})}die(){this.info.forEach(({image:t,config:r})=>{t.attr("src",r.srcF)})}}const lose=new Lose;class GameOver{constructor(){N(this,"image"),N(this,"anims",[])}set(){this.image=layer.createImage(LAYERS.DEFAULT,GAME_OVER_CONFIG.image,GAME_OVER_CONFIG.x,GAME_OVER_CONFIG.y,GAME_OVER_CONFIG.width,GAME_OVER_CONFIG.height).hide().scale(1e-5,1e-5)}show(t){timeline.createTask({start:t,duration:500,data:[1e-5,1,MODES.SHOW],object:this,onTimeUpdate:this.onZooming,onTimeStart:this.onZoomStart,onTimeEnd:this.onZoomEnd,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:500,data:[1,1e-5,MODES.HIDE],object:this,onTimeUpdate:this.onZooming,onTimeStart:this.onZoomStart,onTimeEnd:this.onZoomEnd,recycle:this.anims})}onZoomStart(t,r,h){h===MODES.SHOW&&this.image.show()}onZooming(t,r,h,c){this.image.scale(c=exponential.co(t,r,h-r,500),c)}onZoomEnd(t,r,h){h===MODES.SHOW?state(STATE_KEYS.CLICK_ENABLE).on():h===MODES.HIDE&&this.image.hide()}}const gameOver=new GameOver,{width:viewportWidth,height:viewportHeight}=viewport;class Game{constructor(){N(this,"scoreNumber",0),N(this,"volleyNum",2),N(this,"volleyMultipleNumber",5),N(this,"fruits",[]),N(this,"gameInterval"),N(this,"snd"),N(this,"boomSnd"),N(this,"barbette",()=>{if(this.fruits.length>=this.volleyNum)return;const t=randomNumber(viewportWidth),r=randomNumber(viewportWidth),h=viewportHeight,c=fruitFactory.create(t,h).shotOut(0,r);this.fruits.push(c),this.snd.play(),this.barbette()}),message.addEventListener(MESSAGES.FRUIT_REMOVE,t=>{const r=this.fruits.indexOf(t);r>-1&&this.fruits.splice(r,1)}),message.addEventListener(MESSAGES.FRUIT_FALL_OUT_OF_VIEWER,t=>{t.type!==FRUIT_CONFIG.types.BOOM&&lose.showLoseAt()}),message.addEventListener(MESSAGES.GAME_OVER,()=>{this.gameOver(),knifes.switchOn()}),message.addEventListener(MESSAGES.OVER_WHITE_LIGHT_SHOW,()=>{knifes.endAll();for(let t=this.fruits.length-1;t>=0;t--)this.fruits[t].remove();background.stop()}),message.addEventListener(MESSAGES.CLICK,()=>{state(STATE_KEYS.CLICK_ENABLE).off(),gameOver.hide(),message.postMessage(MESSAGES.HOME_MENU,MESSAGES.SCENE_SWITCH_SCENE)})}start(){lose.number=0,this.scoreNumber=0,this.volleyNum=2,this.snd=soundFactory.create(SOUNDS.THROW),this.boomSnd=soundFactory.create(SOUNDS.BOOM),timeline.setTimeout(()=>{state(STATE_KEYS.GAME_STATE).set(GAME_STATES.PLAYING),this.gameInterval=timeline._setInterval(this.barbette,1e3)},500)}gameOver(){state(STATE_KEYS.GAME_STATE).set(GAME_STATES.OVER),this.gameInterval.stop(),this.fruits.length=0}applyScore(t){t>this.volleyNum*this.volleyMultipleNumber&&this.volleyNum++,this.volleyMultipleNumber+=50}sliceAt(t,r){const h=this.fruits.indexOf(t);state(STATE_KEYS.GAME_STATE).isnot(GAME_STATES.PLAYING)||(t.type!==FRUIT_CONFIG.types.BOOM?(t.broken(r),vibration.fruit(),h&&this.fruits.splice(h,1),this.scoreNumber+=SCORE_MULTIPLIER,score.number(this.scoreNumber),this.applyScore(this.scoreNumber)):(lose.die(),this.pauseAllFruit(),this.boomSnd.play(),background.wobble(),vibration.boom(),light.start(t,background.stop)))}catchFruit(t){const r=this.fruits.indexOf(t);state(STATE_KEYS.GAME_STATE).isnot(GAME_STATES.PLAYING)||(t.type!==FRUIT_CONFIG.types.BOOM?(t.broken(0),vibration.fruit(),r!==-1&&this.fruits.splice(r,1),score.number(++this.scoreNumber),this.applyScore(this.scoreNumber)):(lose.die(),this.pauseAllFruit(),this.boomSnd.play(),background.wobble(),vibration.boom(),light.start(t,background.stop)))}pauseAllFruit(){this.gameInterval.stop(),knifes.pause(),this.fruits.invoke("pause")}}const game=new Game,homeMask=displacementFactory.create({layer:LAYERS.START_SCREEN,imageSrc:HOME_MASK_CONFIG.image,width:HOME_MASK_CONFIG.width,height:HOME_MASK_CONFIG.height,startX:HOME_MASK_CONFIG.startX,startY:HOME_MASK_CONFIG.startY,endX:HOME_MASK_CONFIG.endX,endY:HOME_MASK_CONFIG.endY,animMap:exponential.co,duration:HOME_MASK_CONFIG.duration}),homeLogo=displacementFactory.create({layer:LAYERS.START_SCREEN,imageSrc:HOME_LOGO_CONFIG.image,width:HOME_LOGO_CONFIG.width,height:HOME_LOGO_CONFIG.height,startX:HOME_LOGO_CONFIG.startX,startY:HOME_LOGO_CONFIG.startY,endX:HOME_LOGO_CONFIG.endX,endY:HOME_LOGO_CONFIG.endY,animMap:exponential.co,duration:HOME_LOGO_CONFIG.duration});class HomeText{constructor(){N(this,"setTimeout",timeline.setTimeout.bind(timeline)),N(this,"anim",exponential.co),N(this,"anims",[]),N(this,"text1"),N(this,"text2"),N(this,"text3")}set(){this.text1=layer.createText(LAYERS.START_SCREEN,HOME_TEXT_CONFIG.text1Value,HOME_TEXT_CONFIG.text1Sx,HOME_TEXT_CONFIG.text1Y,HOME_TEXT_CONFIG.text1Fill,HOME_TEXT_CONFIG.text1Size,HOME_TEXT_CONFIG.text1Weight,HOME_TEXT_CONFIG.text1Anchor).hide(),this.text2=layer.createText(LAYERS.START_SCREEN,HOME_TEXT_CONFIG.text2Value,HOME_TEXT_CONFIG.text2Sx,HOME_TEXT_CONFIG.text2Y,HOME_TEXT_CONFIG.text2Fill,HOME_TEXT_CONFIG.text2Size,HOME_TEXT_CONFIG.text2Weight,HOME_TEXT_CONFIG.text2Anchor).hide(),this.text3=layer.createText(LAYERS.START_SCREEN,HOME_TEXT_CONFIG.text3Value,HOME_TEXT_CONFIG.text3Sx,HOME_TEXT_CONFIG.text3Y,HOME_TEXT_CONFIG.text3Fill,HOME_TEXT_CONFIG.text3Size,HOME_TEXT_CONFIG.text3Weight,HOME_TEXT_CONFIG.text3Anchor).hide()}show(t){timeline.createTask({start:t,duration:HOME_TEXT_CONFIG.animLength,data:[MODES.SHOW,HOME_TEXT_CONFIG.text1Sx,HOME_TEXT_CONFIG.text1Ex,HOME_TEXT_CONFIG.text2Sx,HOME_TEXT_CONFIG.text2Ex,HOME_TEXT_CONFIG.text3Sx,HOME_TEXT_CONFIG.text3Ex],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:HOME_TEXT_CONFIG.animLength,data:[MODES.HIDE,HOME_TEXT_CONFIG.text1Ex,HOME_TEXT_CONFIG.text1Sx,HOME_TEXT_CONFIG.text2Ex,HOME_TEXT_CONFIG.text2Sx,HOME_TEXT_CONFIG.text3Ex,HOME_TEXT_CONFIG.text3Sx],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}onTimeUpdate(t,r,h,c,S,O,L,B){this.text1.attr("x",this.anim(t,h,c-h,HOME_TEXT_CONFIG.animLength)),this.text2.attr("x",this.anim(t,S,O-S,HOME_TEXT_CONFIG.animLength)),this.text3.attr("x",this.anim(t,L,B-L,HOME_TEXT_CONFIG.animLength))}onTimeStart(t){t===MODES.SHOW&&[this.text1,this.text2,this.text3].invoke(t)}onTimeEnd(t){t===MODES.HIDE&&[this.text1,this.text2,this.text3].invoke(t)}}const homeText=new HomeText;class HomeButton{constructor(){N(this,"text"),N(this,"button"),N(this,"group"),N(this,"anims",[]),N(this,"anim",exponential.co)}set(){this.button=layer.createImage(LAYERS.START_SCREEN,START_BUTTON_CONFIG.image,START_BUTTON_CONFIG.startX,START_BUTTON_CONFIG.startY,START_BUTTON_CONFIG.width,START_BUTTON_CONFIG.height).hide(),this.text=layer.createText(LAYERS.START_SCREEN,START_BUTTON_CONFIG.textValue,START_BUTTON_CONFIG.textStartX,START_BUTTON_CONFIG.textStartY,START_BUTTON_CONFIG.textFill,START_BUTTON_CONFIG.textSize,START_BUTTON_CONFIG.textWeight,START_BUTTON_CONFIG.textAnchor),this.group=layer.getLayer(LAYERS.START_SCREEN).set(),this.group.push(this.button,this.text),layer.hideLayer(LAYERS.START_SCREEN),this.group.click(()=>{message.postMessage(MESSAGES.START_GAME),vibration.vibrate()})}show(t){timeline.createTask({start:t,duration:START_BUTTON_CONFIG.animLength,data:[MODES.SHOW,START_BUTTON_CONFIG.startY,START_BUTTON_CONFIG.endY,START_BUTTON_CONFIG.textStartY,START_BUTTON_CONFIG.textEndY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:START_BUTTON_CONFIG.animLength,data:[MODES.SHOW,START_BUTTON_CONFIG.endY,START_BUTTON_CONFIG.startY,START_BUTTON_CONFIG.textEndY,START_BUTTON_CONFIG.textStartY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}onTimeUpdate(t,r,h,c,S,O){this.button.attr("y",this.anim(t,h,c-h,HOME_TEXT_CONFIG.animLength)),this.text.attr("y",this.anim(t,S,O-S,HOME_TEXT_CONFIG.animLength))}onTimeStart(t){t===MODES.SHOW&&[this.button].invoke(t)}onTimeEnd(t){t===MODES.HIDE&&[this.button].invoke(t)}}const homeButton=new HomeButton,resultLogo=displacementFactory.create({layer:LAYERS.RESULT_SCREEN,imageSrc:RESULT_LOGO_CONFIG.image,width:RESULT_LOGO_CONFIG.width,height:RESULT_LOGO_CONFIG.height,startX:RESULT_LOGO_CONFIG.startX,startY:RESULT_LOGO_CONFIG.startY,endX:RESULT_LOGO_CONFIG.endX,endY:RESULT_LOGO_CONFIG.endY,animMap:exponential.co,duration:RESULT_LOGO_CONFIG.duration});class ResultText{constructor(){N(this,"setTimeout",timeline.setTimeout.bind(timeline)),N(this,"anim",exponential.co),N(this,"anims",[]),N(this,"text1"),N(this,"text2"),N(this,"text3"),N(this,"text4"),N(this,"text5"),N(this,"text6"),N(this,"text7"),message.addEventListener(MESSAGES.GAME_OVER,()=>{this.text3.attr("text",game.scoreNumber)})}set(){this.text1=layer.createText(LAYERS.RESULT_SCREEN,RESULT_TEXT_CONFIG.text1Value,RESULT_TEXT_CONFIG.text1X,RESULT_TEXT_CONFIG.text1Sy,RESULT_TEXT_CONFIG.text1Fill,RESULT_TEXT_CONFIG.text1Size,RESULT_TEXT_CONFIG.text1Weight,RESULT_TEXT_CONFIG.text1Anchor).hide(),this.text2=layer.createText(LAYERS.RESULT_SCREEN,RESULT_TEXT_CONFIG.text2Value,RESULT_TEXT_CONFIG.text2X,RESULT_TEXT_CONFIG.text2Sy,RESULT_TEXT_CONFIG.text2Fill,RESULT_TEXT_CONFIG.text2Size,RESULT_TEXT_CONFIG.text2Weight,RESULT_TEXT_CONFIG.text2Anchor).hide(),this.text3=layer.createText(LAYERS.RESULT_SCREEN,game.scoreNumber,RESULT_TEXT_CONFIG.text3X,RESULT_TEXT_CONFIG.text3Sy,RESULT_TEXT_CONFIG.text3Fill,RESULT_TEXT_CONFIG.text3Size,RESULT_TEXT_CONFIG.text3Weight,RESULT_TEXT_CONFIG.text3Anchor).attr("stroke","white").attr("stroke-width",3).hide(),this.text4=layer.createText(LAYERS.RESULT_SCREEN,RESULT_TEXT_CONFIG.text4Value,RESULT_TEXT_CONFIG.text4Sx,RESULT_TEXT_CONFIG.text4Y,RESULT_TEXT_CONFIG.text4Fill,RESULT_TEXT_CONFIG.text4Size,RESULT_TEXT_CONFIG.text4Weight,RESULT_TEXT_CONFIG.text4Anchor).hide(),this.text5=layer.createText(LAYERS.RESULT_SCREEN,RESULT_TEXT_CONFIG.text5Value,RESULT_TEXT_CONFIG.text5Sx,RESULT_TEXT_CONFIG.text5Y,RESULT_TEXT_CONFIG.text5Fill,RESULT_TEXT_CONFIG.text5Size,RESULT_TEXT_CONFIG.text5Weight,RESULT_TEXT_CONFIG.text5Anchor).attr("stroke","white").attr("stroke-width",2).hide(),this.text6=layer.createText(LAYERS.RESULT_SCREEN,RESULT_TEXT_CONFIG.text6Value,RESULT_TEXT_CONFIG.text6Sx,RESULT_TEXT_CONFIG.text6Y,RESULT_TEXT_CONFIG.text6Fill,RESULT_TEXT_CONFIG.text6Size,RESULT_TEXT_CONFIG.text6Weight,RESULT_TEXT_CONFIG.text6Anchor).hide(),this.text7=layer.createText(LAYERS.RESULT_SCREEN,RESULT_TEXT_CONFIG.text7Value,RESULT_TEXT_CONFIG.text7Sx,RESULT_TEXT_CONFIG.text7Y,RESULT_TEXT_CONFIG.text7Fill,RESULT_TEXT_CONFIG.text7Size,RESULT_TEXT_CONFIG.text7Weight,RESULT_TEXT_CONFIG.text7Anchor).attr("stroke","white").attr("stroke-width",2).hide()}show(t){timeline.createTask({start:t,duration:RESULT_TEXT_CONFIG.animLength,data:[MODES.SHOW,RESULT_TEXT_CONFIG.text1Sy,RESULT_TEXT_CONFIG.text1Ey,RESULT_TEXT_CONFIG.text2Sy,RESULT_TEXT_CONFIG.text2Ey,RESULT_TEXT_CONFIG.text3Sy,RESULT_TEXT_CONFIG.text3Ey,RESULT_TEXT_CONFIG.text4Sx,RESULT_TEXT_CONFIG.text4Ex,RESULT_TEXT_CONFIG.text5Sx,RESULT_TEXT_CONFIG.text5Ex,RESULT_TEXT_CONFIG.text6Sx,RESULT_TEXT_CONFIG.text6Ex,RESULT_TEXT_CONFIG.text7Sx,RESULT_TEXT_CONFIG.text7Ex],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:RESULT_TEXT_CONFIG.animLength,data:[MODES.HIDE,RESULT_TEXT_CONFIG.text1Ey,RESULT_TEXT_CONFIG.text1Sy,RESULT_TEXT_CONFIG.text2Ey,RESULT_TEXT_CONFIG.text2Sy,RESULT_TEXT_CONFIG.text3Ey,RESULT_TEXT_CONFIG.text3Sy,RESULT_TEXT_CONFIG.text4Ex,RESULT_TEXT_CONFIG.text4Sx,RESULT_TEXT_CONFIG.text5Ex,RESULT_TEXT_CONFIG.text5Sx,RESULT_TEXT_CONFIG.text6Ex,RESULT_TEXT_CONFIG.text6Sx,RESULT_TEXT_CONFIG.text7Ex,RESULT_TEXT_CONFIG.text7Sx],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}onTimeUpdate(t,r,h,c,S,O,L,B,H,p,U,C,M,Z,y,j){this.text1.attr("y",this.anim(t,h,c-h,RESULT_TEXT_CONFIG.animLength)),this.text2.attr("y",this.anim(t,S,O-S,RESULT_TEXT_CONFIG.animLength)),this.text3.attr("y",this.anim(t,L,B-L,RESULT_TEXT_CONFIG.animLength)),this.text4.attr("x",this.anim(t,H,p-H,RESULT_TEXT_CONFIG.animLength)),this.text5.attr("x",this.anim(t,U,C-U,RESULT_TEXT_CONFIG.animLength)),this.text6.attr("x",this.anim(t,M,Z-M,RESULT_TEXT_CONFIG.animLength)),this.text7.attr("x",this.anim(t,y,j-y,RESULT_TEXT_CONFIG.animLength))}onTimeStart(t){t===MODES.SHOW&&[this.text1,this.text2,this.text3,this.text4,this.text5,this.text6,this.text7].invoke(t)}onTimeEnd(t){t===MODES.HIDE&&[this.text1,this.text2,this.text3,this.text4,this.text5,this.text6,this.text7].invoke(t)}}const resultText=new ResultText;class ResultButtonNext{constructor(){N(this,"text"),N(this,"button"),N(this,"group"),N(this,"anims",[]),N(this,"anim",exponential.co)}set(){this.button=layer.createImage(LAYERS.RESULT_SCREEN,RESULT_BUTTON_NEXT_CONFIG.image,RESULT_BUTTON_NEXT_CONFIG.startX,RESULT_BUTTON_NEXT_CONFIG.startY,RESULT_BUTTON_NEXT_CONFIG.width,RESULT_BUTTON_NEXT_CONFIG.height).hide(),this.text=layer.createText(LAYERS.RESULT_SCREEN,RESULT_BUTTON_NEXT_CONFIG.textValue,RESULT_BUTTON_NEXT_CONFIG.textStartX,RESULT_BUTTON_NEXT_CONFIG.textStartY,RESULT_BUTTON_NEXT_CONFIG.textFill,RESULT_BUTTON_NEXT_CONFIG.textSize,RESULT_BUTTON_NEXT_CONFIG.textWeight,RESULT_BUTTON_NEXT_CONFIG.textAnchor),this.group=layer.getLayer(LAYERS.RESULT_SCREEN).set(),this.group.push(this.button,this.text),layer.hideLayer(LAYERS.RESULT_SCREEN),this.group.click(()=>{vibration.vibrate(),message.postMessage(SCENES.BRAND_INTRO,MESSAGES.SCENE_SWITCH_SCENE)})}show(t){timeline.createTask({start:t,duration:RESULT_BUTTON_NEXT_CONFIG.animLength,data:[MODES.SHOW,RESULT_BUTTON_NEXT_CONFIG.startY,RESULT_BUTTON_NEXT_CONFIG.endY,RESULT_BUTTON_NEXT_CONFIG.textStartY,RESULT_BUTTON_NEXT_CONFIG.textEndY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:RESULT_BUTTON_NEXT_CONFIG.animLength,data:[MODES.SHOW,RESULT_BUTTON_NEXT_CONFIG.endY,RESULT_BUTTON_NEXT_CONFIG.startY,RESULT_BUTTON_NEXT_CONFIG.textEndY,RESULT_BUTTON_NEXT_CONFIG.textStartY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}onTimeUpdate(t,r,h,c,S,O){this.button.attr("y",this.anim(t,h,c-h,HOME_TEXT_CONFIG.animLength)),this.text.attr("y",this.anim(t,S,O-S,HOME_TEXT_CONFIG.animLength))}onTimeStart(t){t===MODES.SHOW&&[this.button].invoke(t)}onTimeEnd(t){t===MODES.HIDE&&[this.button].invoke(t)}}const resultButtonNext=new ResultButtonNext;class ResultButtonReplay{constructor(){N(this,"text"),N(this,"button"),N(this,"group"),N(this,"anims",[]),N(this,"anim",exponential.co)}set(){this.button=layer.createImage(LAYERS.RESULT_SCREEN,RESULT_BUTTON_REPLAY_CONFIG.image,RESULT_BUTTON_REPLAY_CONFIG.startX,RESULT_BUTTON_REPLAY_CONFIG.startY,RESULT_BUTTON_REPLAY_CONFIG.width,RESULT_BUTTON_REPLAY_CONFIG.height).hide(),this.text=layer.createText(LAYERS.RESULT_SCREEN,RESULT_BUTTON_REPLAY_CONFIG.textValue,RESULT_BUTTON_REPLAY_CONFIG.textStartX,RESULT_BUTTON_REPLAY_CONFIG.textStartY,RESULT_BUTTON_REPLAY_CONFIG.textFill,RESULT_BUTTON_REPLAY_CONFIG.textSize,RESULT_BUTTON_REPLAY_CONFIG.textWeight,RESULT_BUTTON_REPLAY_CONFIG.textAnchor),this.group=layer.getLayer(LAYERS.RESULT_SCREEN).set(),this.group.push(this.button,this.text),layer.hideLayer(LAYERS.RESULT_SCREEN),this.group.click(()=>{message.postMessage(MESSAGES.START_GAME),vibration.vibrate()})}show(t){timeline.createTask({start:t,duration:RESULT_BUTTON_REPLAY_CONFIG.animLength,data:[MODES.SHOW,RESULT_BUTTON_REPLAY_CONFIG.startY,RESULT_BUTTON_REPLAY_CONFIG.endY,RESULT_BUTTON_REPLAY_CONFIG.textStartY,RESULT_BUTTON_REPLAY_CONFIG.textEndY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:RESULT_BUTTON_REPLAY_CONFIG.animLength,data:[MODES.SHOW,RESULT_BUTTON_REPLAY_CONFIG.endY,RESULT_BUTTON_REPLAY_CONFIG.startY,RESULT_BUTTON_REPLAY_CONFIG.textEndY,RESULT_BUTTON_REPLAY_CONFIG.textStartY],object:this,onTime:this.onTimeUpdate,recycle:this.anims})}onTimeUpdate(t,r,h,c,S,O){this.button.attr("y",this.anim(t,h,c-h,HOME_TEXT_CONFIG.animLength)),this.text.attr("y",this.anim(t,S,O-S,HOME_TEXT_CONFIG.animLength))}onTimeStart(t){t===MODES.SHOW&&[this.button].invoke(t)}onTimeEnd(t){t===MODES.HIDE&&[this.button].invoke(t)}}const resultButtonReplay=new ResultButtonReplay,bottom=displacementFactory.create({layer:LAYERS.DEFAULT,imageSrc:BOTTOM_CONFIG.image,width:BOTTOM_CONFIG.width,height:BOTTOM_CONFIG.height,startX:BOTTOM_CONFIG.startX,startY:BOTTOM_CONFIG.startY,endX:BOTTOM_CONFIG.endX,endY:BOTTOM_CONFIG.endY,animMap:exponential.co,duration:BOTTOM_CONFIG.duration});class FPS{constructor(){N(this,"text"),N(this,"prefix",FPS_CONFIG.prefix),N(this,"fill",FPS_CONFIG.fill)}set(){DEBUG_MODE&&(this.text=layer.createText(LAYERS.DEFAULT,this.prefix+"0",FPS_CONFIG.x,FPS_CONFIG.y).attr("fill",this.fill))}update(){DEBUG_MODE&&this.text.attr("text",this.prefix+(timeline.getFPS()>>0))}}const fps=new FPS;class BrandQuestion{constructor(){N(this,"setTimeout",timeline.setTimeout.bind(timeline)),N(this,"anim",exponential.co),N(this,"anims",[]),N(this,"text1"),N(this,"text2"),N(this,"text3"),N(this,"text4"),N(this,"answer1"),N(this,"answer2")}set(){this.text2=layer.createText(LAYERS.BRAND_QUESTION,BRAND_QUESTION_TEXT2_CONFIG.textValue,BRAND_QUESTION_TEXT2_CONFIG.textStartX,BRAND_QUESTION_TEXT2_CONFIG.textY,BRAND_QUESTION_TEXT2_CONFIG.textFill,BRAND_QUESTION_TEXT2_CONFIG.textSize,BRAND_QUESTION_TEXT2_CONFIG.textWeight,BRAND_QUESTION_TEXT2_CONFIG.textAnchor).hide(),this.answer1=layer.createImage(LAYERS.BRAND_QUESTION,BRAND_ANSWER1_CONFIG.image,BRAND_ANSWER1_CONFIG.buttonX,BRAND_ANSWER1_CONFIG.buttonStartY,BRAND_ANSWER1_CONFIG.width,BRAND_ANSWER1_CONFIG.height).hide(),this.text3=layer.createText(LAYERS.BRAND_QUESTION,BRAND_ANSWER1_CONFIG.textValue,BRAND_ANSWER1_CONFIG.textX,BRAND_ANSWER1_CONFIG.textStartY,BRAND_ANSWER1_CONFIG.textFill,BRAND_ANSWER1_CONFIG.textSize,BRAND_ANSWER1_CONFIG.textWeight,BRAND_ANSWER1_CONFIG.textAnchor).hide(),this.answer2=layer.createImage(LAYERS.BRAND_QUESTION,BRAND_ANSWER2_CONFIG.image,BRAND_ANSWER2_CONFIG.buttonX,BRAND_ANSWER2_CONFIG.buttonStartY,BRAND_ANSWER2_CONFIG.width,BRAND_ANSWER2_CONFIG.height).hide(),this.text4=layer.createText(LAYERS.BRAND_QUESTION,BRAND_ANSWER2_CONFIG.textValue,BRAND_ANSWER2_CONFIG.textX,BRAND_ANSWER2_CONFIG.textStartY,BRAND_ANSWER2_CONFIG.textFill,BRAND_ANSWER2_CONFIG.textSize,BRAND_ANSWER2_CONFIG.textWeight,BRAND_ANSWER2_CONFIG.textAnchor).hide(),this.group1=layer.getLayer(LAYERS.RESULT_SCREEN).set(),this.group1.push(this.answer1,this.text3),this.group2=layer.getLayer(LAYERS.RESULT_SCREEN).set(),this.group2.push(this.answer2,this.text4),this.group1.click(()=>{vibration.vibrate(),message.postMessage(SCENES.HOME_MENU,MESSAGES.SCENE_SWITCH_SCENE)}),this.group2.click(()=>{vibration.vibrate(),message.postMessage(SCENES.HOME_MENU,MESSAGES.SCENE_SWITCH_SCENE)}),layer.getLayer(LAYERS.BRAND_QUESTION).set(),layer.hideLayer(LAYERS.BRAND_QUESTION)}show(t){timeline.createTask({start:t,duration:BRAND_QUESTION_TEXT1_CONFIG.animLength,data:[MODES.SHOW,BRAND_QUESTION_TEXT1_CONFIG.textStartX,BRAND_QUESTION_TEXT1_CONFIG.textEndX,BRAND_QUESTION_TEXT2_CONFIG.textStartX,BRAND_QUESTION_TEXT2_CONFIG.textEndX,BRAND_ANSWER1_CONFIG.textStartY,BRAND_ANSWER1_CONFIG.textEndY,BRAND_ANSWER1_CONFIG.buttonStartY,BRAND_ANSWER1_CONFIG.buttonEndY,BRAND_ANSWER2_CONFIG.textStartY,BRAND_ANSWER2_CONFIG.textEndY,BRAND_ANSWER2_CONFIG.buttonStartY,BRAND_ANSWER2_CONFIG.buttonEndY],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:BRAND_QUESTION_TEXT1_CONFIG.animLength,data:[MODES.HIDE,BRAND_QUESTION_TEXT1_CONFIG.textEndX,BRAND_QUESTION_TEXT1_CONFIG.textStartX,BRAND_QUESTION_TEXT2_CONFIG.textEndX,BRAND_QUESTION_TEXT2_CONFIG.textStartX,BRAND_ANSWER1_CONFIG.textEndY,BRAND_ANSWER1_CONFIG.textStartY,BRAND_ANSWER1_CONFIG.buttonEndY,BRAND_ANSWER1_CONFIG.buttonStartY,BRAND_ANSWER2_CONFIG.textEndY,BRAND_ANSWER2_CONFIG.textStartY,BRAND_ANSWER2_CONFIG.buttonEndY,BRAND_ANSWER2_CONFIG.buttonStartY],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}onTimeUpdate(t,r,h,c,S,O,L,B,H,p,U,C,M,Z){this.text1&&this.text1.attr("x",this.anim(t,h,c-h,BRAND_QUESTION_TEXT1_CONFIG.animLength)),this.text2&&this.text2.attr("x",this.anim(t,S,O-S,BRAND_QUESTION_TEXT2_CONFIG.animLength)),this.text3&&this.text3.attr("y",this.anim(t,L,B-L,BRAND_ANSWER1_CONFIG.animLength)),this.text4&&this.text4.attr("y",this.anim(t,U,C-U,BRAND_ANSWER2_CONFIG.animLength)),this.answer1&&this.answer1.attr("y",this.anim(t,H,p-H,BRAND_ANSWER1_CONFIG.animLength)),this.answer2&&this.answer2.attr("y",this.anim(t,M,Z-M,BRAND_ANSWER2_CONFIG.animLength))}onTimeStart(t){const r=[];this.text1&&r.push(this.text1),this.text2&&r.push(this.text2),this.text3&&r.push(this.text3),this.text4&&r.push(this.text4),this.answer1&&r.push(this.answer1),this.answer2&&r.push(this.answer2),t===MODES.SHOW&&r.invoke(t)}onTimeEnd(t){const r=[];this.text1&&r.push(this.text1),this.text2&&r.push(this.text2),this.text3&&r.push(this.text3),this.text4&&r.push(this.text4),this.answer1&&r.push(this.answer1),this.answer2&&r.push(this.answer2),t===MODES.HIDE&&r.invoke(t)}}const brandQuestion=new BrandQuestion;class BrandIntro{constructor(){N(this,"setTimeout",timeline.setTimeout.bind(timeline)),N(this,"anim",exponential.co),N(this,"anims",[]),N(this,"text"),N(this,"answerText"),N(this,"answerButton")}set(){this.text=layer.createText(LAYERS.BRAND_INTRO,BRAND_INTRO_CONFIG.textValue,BRAND_INTRO_CONFIG.textX,BRAND_INTRO_CONFIG.textStartY,BRAND_INTRO_CONFIG.textFill,BRAND_INTRO_CONFIG.textSize,BRAND_INTRO_CONFIG.textWeight,BRAND_INTRO_CONFIG.textAnchor).hide(),this.answerButton=layer.createImage(LAYERS.BRAND_INTRO,BRAND_INTRO_BUTTON_CONFIG.image,BRAND_INTRO_BUTTON_CONFIG.buttonX,BRAND_INTRO_BUTTON_CONFIG.buttonStartY,BRAND_INTRO_BUTTON_CONFIG.width,BRAND_INTRO_BUTTON_CONFIG.height).hide(),this.answerText=layer.createText(LAYERS.BRAND_INTRO,BRAND_INTRO_BUTTON_CONFIG.textValue,BRAND_INTRO_BUTTON_CONFIG.textX,BRAND_INTRO_BUTTON_CONFIG.textStartY,BRAND_INTRO_BUTTON_CONFIG.textFill,BRAND_INTRO_BUTTON_CONFIG.textSize,BRAND_INTRO_BUTTON_CONFIG.textWeight,BRAND_INTRO_BUTTON_CONFIG.textAnchor).hide(),this.group1=layer.getLayer(LAYERS.BRAND_INTRO).set(),this.group1.push(this.answerText,this.answerButton),this.group1.click(()=>{vibration.vibrate(),message.postMessage(SCENES.BRAND_QUESTION,MESSAGES.SCENE_SWITCH_SCENE)}),layer.getLayer(LAYERS.BRAND_INTRO).set(),layer.hideLayer(LAYERS.BRAND_INTRO)}show(t){timeline.createTask({start:t,duration:BRAND_INTRO_CONFIG.animLength,data:[MODES.SHOW,BRAND_INTRO_CONFIG.textStartY,BRAND_INTRO_CONFIG.textEndY,BRAND_INTRO_BUTTON_CONFIG.textStartY,BRAND_INTRO_BUTTON_CONFIG.textEndY,BRAND_INTRO_BUTTON_CONFIG.buttonStartY,BRAND_INTRO_BUTTON_CONFIG.buttonEndY],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}hide(t){timeline.createTask({start:t,duration:BRAND_INTRO_CONFIG.animLength,data:[MODES.HIDE,BRAND_INTRO_CONFIG.textEndY,BRAND_INTRO_CONFIG.textStartY,BRAND_INTRO_BUTTON_CONFIG.textEndY,BRAND_INTRO_BUTTON_CONFIG.textStartY,BRAND_INTRO_BUTTON_CONFIG.buttonEndY,BRAND_INTRO_BUTTON_CONFIG.buttonStartY],object:this,onTimeUpdate:this.onTimeUpdate,onTimeStart:this.onTimeStart,onTimeEnd:this.onTimeEnd,recycle:this.anims})}onTimeUpdate(t,r,h,c,S,O,L,B){this.text&&this.text.attr("y",this.anim(t,h,c-h,BRAND_INTRO_CONFIG.animLength)),this.answerText&&this.answerText.attr("y",this.anim(t,S,O-S,BRAND_ANSWER1_CONFIG.animLength)),this.answerButton&&this.answerButton.attr("y",this.anim(t,L,B-L,BRAND_ANSWER1_CONFIG.animLength))}onTimeStart(t){const r=[];this.text&&r.push(this.text),this.answerText&&r.push(this.answerText),this.answerButton&&r.push(this.answerButton),t===MODES.SHOW&&r.invoke(t)}onTimeEnd(t){const r=[];this.text&&r.push(this.text),this.answerText&&r.push(this.answerText),this.answerButton&&r.push(this.answerButton),t===MODES.SHOW&&r.invoke(t)}}const brandIntro=new BrandIntro;class Scene{constructor(){N(this,"menuSnd"),N(this,"gameStartSnd"),N(this,"setTimeout",timeline.setTimeout.bind(timeline)),N(this,"setInterval",timeline._setInterval.bind(timeline)),message.addEventListener(MESSAGES.SCENE_SWITCH_SCENE,t=>{this.switchScene(t)}),message.addEventListener(MESSAGES.TOGGLE_SOUND,()=>{this.toggleSound()})}init(){this.menuSnd=soundFactory.create(SOUNDS.MENU),this.gameStartSnd=soundFactory.create(SOUNDS.START),[background,homeMask,homeLogo,homeText,homeButton,score,lose,gameOver,flash,bottom,resultLogo,resultText,resultButtonNext,resultButtonReplay,soundButton,brandQuestion,brandIntro,fps].invoke("set"),this.setInterval(fps.update.bind(fps),500)}switchScene(t){const r=()=>c.set(SCENE_STATES.READY),h=state(STATE_KEYS.SCENE_NAME),c=state(STATE_KEYS.SCENE_STATE);if(h.is(t))return;const S=()=>{switch(h.set(t),c.set(SCENE_STATES.ENTERING),t){case SCENES.HOME_MENU:this.showMenu(r);break;case SCENES.GAME_BODY:this.showGame(r);break;case SCENES.GAME_OVER:this.showGameOver(r);break;case SCENES.GAME_RESULT:this.showResult(r);break;case SCENES.BRAND_INTRO:this.showBrandIntro(r);break;case SCENES.BRAND_QUESTION:this.showBrandQuestion(r);break}};c.set(SCENE_STATES.EXITING),h.isunset()?S():h.is(SCENES.HOME_MENU)?this.hideMenu(S):h.is(SCENES.GAME_BODY)?this.hideGame(S):h.is(SCENES.GAME_OVER)?this.hideGameOver(S):h.is(SCENES.GAME_RESULT)?this.hideResult(S):h.is(SCENES.BRAND_INTRO)?this.hideBrandIntro(S):h.is(SCENES.BRAND_QUESTION)&&this.hideBrandQuestion(S)}toggleSound(){const t=state(STATE_KEYS.SCENE_NAME),r=soundButton.isOn?"play":"stop";t.is(SCENES.HOME_MENU)?this.menuSnd[r]():t.is(SCENES.GAME_BODY)?this.gameStartSnd[r]():t.is(SCENES.GAME_RESULT)&&this.menuSnd[r]()}showMenu(t){layer.showLayer(LAYERS.START_SCREEN),[[homeMask,0],[homeLogo,0],[homeText,1e3],[bottom,1e3],[homeButton,1200]].invoke(MODES.SHOW),this.menuSnd.play(),soundButton.showHomeSoundButton(1200),this.setTimeout(t,2500)}hideMenu(t){[homeButton,homeMask,homeLogo,homeText].invoke(MODES.HIDE),soundButton.hideHomeSoundButton(),this.menuSnd.stop(),this.setTimeout(()=>{t(),layer.hideLayer(LAYERS.START_SCREEN)},1200)}showGame(t){layer.showLayer(LAYERS.FRUIT),score.show(),lose.show(),game.start(),this.gameStartSnd.play(),soundButton.showGameSoundButton(),this.setTimeout(t,700)}hideGame(t){score.hide(),lose.hide(),soundButton.hideGameSoundButton(),this.gameStartSnd.stop(),this.setTimeout(()=>{t(),layer.hideLayer(LAYERS.FRUIT)},700)}showGameOver(t){[[gameOver,0]].invoke(MODES.SHOW),this.setTimeout(()=>{t(),this.switchScene(SCENES.GAME_RESULT)},2e3)}hideGameOver(t){[gameOver].invoke(MODES.HIDE),this.setTimeout(t,1e3)}showResult(){layer.showLayer(LAYERS.RESULT_SCREEN),[[resultLogo,0],[resultText,700],[resultButtonNext,1e3],[resultButtonReplay,1e3]].invoke(MODES.SHOW),this.menuSnd.play(),soundButton.showResultSoundButton()}hideResult(t){[resultLogo,resultText,resultButtonNext,resultButtonReplay].invoke(MODES.HIDE),soundButton.hideResultSoundButton(),this.menuSnd.stop(),this.setTimeout(()=>{t(),layer.hideLayer(LAYERS.RESULT_SCREEN)},1e3)}showBrandIntro(){layer.showLayer(LAYERS.BRAND_INTRO),[[brandIntro,0]].invoke(MODES.SHOW),soundButton.showResultSoundButton()}hideBrandIntro(t){[brandIntro].invoke(MODES.HIDE),soundButton.hideResultSoundButton(),this.setTimeout(()=>{t(),layer.hideLayer(LAYERS.BRAND_INTRO)},1e3)}showBrandQuestion(){layer.showLayer(LAYERS.BRAND_QUESTION),[[brandQuestion,0]].invoke(MODES.SHOW),soundButton.showResultSoundButton()}hideBrandQuestion(t){[brandQuestion].invoke(MODES.HIDE),soundButton.hideResultSoundButton(),this.setTimeout(()=>{t(),layer.hideLayer(LAYERS.BRAND_QUESTION)},1e3)}}const scene=new Scene;class Console{constructor(){N(this,"x",CONSOLE_CONFIG.x),N(this,"y",CONSOLE_CONFIG.y),N(this,"texts",[])}set(){}clear(){const t=this.texts.length;for(let r=0;r<t;r++)this.texts[r].remove();this.texts.length=0,this.y=CONSOLE_CONFIG.y}log(t){this.y+=20,this.texts.push(layer.createText("default",t,this.x,this.y))}}const csl=new Console;class Main{constructor(){N(this,"setTimeout",timeline.setTimeout.bind(timeline)),N(this,"log",(()=>{let h=1e3;const c=300,S=function(O){setTimeout(function(){csl.log(O)},h),h+=c};return S.clear=function(){setTimeout(csl.clear.bind(csl),h),h+=c},S})());var t,r;(r=(t=window.Telegram)==null?void 0:t.WebApp)!=null&&r.disableVerticalScroll&&window.Telegram.WebApp.disableVerticalScroll(!0),document.addEventListener("touchstart",h=>{h.preventDefault()},{passive:!1}),document.addEventListener("touchmove",h=>{h.preventDefault()},{passive:!1}),message.addEventListener(MESSAGES.SLICE,h=>{const c=collide.checkSlice(h);if(c.length){const S=tools.getAngleByRadian(tools.pointToRadian(h.slice(0,2),h.slice(2,4)));c.forEach(O=>message.postMessage(O,S,MESSAGES.SLICE_AT))}}),message.addEventListener(MESSAGES.TOUCH,h=>{const c=collide.checkTouch(h);c.length&&c.forEach(S=>message.postMessage(S,MESSAGES.TOUCH_AT))}),message.addEventListener(MESSAGES.SLICE_AT,(h,c)=>{state(STATE_KEYS.SCENE_STATE).isnot(SCENE_STATES.READY)||state(STATE_KEYS.SCENE_NAME).is(SCENES.GAME_BODY)&&game.sliceAt(h,c)}),message.addEventListener(MESSAGES.TOUCH_AT,h=>{state(STATE_KEYS.SCENE_STATE).isnot(SCENE_STATES.READY)||state(STATE_KEYS.SCENE_NAME).is(SCENES.GAME_BODY)&&game.catchFruit(h)}),message.addEventListener(MESSAGES.START_GAME,()=>{scene.switchScene(SCENES.GAME_BODY)}),preload()}start(){[timeline,scene,control].invoke("init"),this.log.clear(),this.setTimeout(scene.switchScene.saturate(scene,SCENES.HOME_MENU),3e3)}}const main=new Main;main.start();
//# sourceMappingURL=fruitNinja-Bv2fp8jw.js.map
