{"version":3,"file":"jigsawPuzzle-cusBQOJY.js","sources":["../../../libs/dist/index.mjs","../../../jigsaw-puzzle/src/config/default.ts","../../../jigsaw-puzzle/src/config/config.ts","../../../jigsaw-puzzle/src/game/board/board.ts","../../../jigsaw-puzzle/src/factories/board.factory.ts","../../../jigsaw-puzzle/src/game/piece/piece.ts","../../../jigsaw-puzzle/src/factories/piece.factory.ts","../../../../node_modules/@tweenjs/tween.js/dist/tween.esm.js","../../../jigsaw-puzzle/src/game/root/root.ts","../../../jigsaw-puzzle/src/services/board/board.service.ts","../../../jigsaw-puzzle/src/services/canvas/canvas.service.ts","../../../jigsaw-puzzle/src/services/piece/piece.service.ts","../../../jigsaw-puzzle/src/services/shuffle/shuffle.service.ts","../../../jigsaw-puzzle/src/services/ui/ui.service.ts","../../../jigsaw-puzzle/src/index.ts","../../src/jigsaw-puzzle.ts"],"sourcesContent":["function g(e) {\n  return e instanceof HTMLElement;\n}\nfunction i(e) {\n  return typeof e == \"string\";\n}\nfunction a() {\n}\nclass c {\n  constructor(n) {\n    this._logger = n;\n  }\n  load(n) {\n    return new Promise((r, s) => {\n      const o = new Image();\n      o.src = n, o.onload = () => {\n        this._logger.debug(\"Image loaded\"), r(o);\n      }, o.onerror = () => {\n        const t = \"Image not loaded: \" + n;\n        this._logger.debug(t), s(t);\n      };\n    });\n  }\n}\nexport {\n  c as ImageService,\n  g as isHTMLElement,\n  i as isString,\n  a as noop\n};\n//# sourceMappingURL=index.mjs.map\n","export const DEFAULT_ROWS           = 3;\nexport const DEFAULT_COLS           = 2;\nexport const DEFAULT_SHOW_CURVES    = true;\nexport const DEFAULT_STROKE_STYLE   = 'gold';\nexport const DEFAULT_LINE_WIDTH     = 2;\nexport const DEFAULT_LINE_CAP       = 'round';\nexport const DEFAULT_FILL_STYLE     = 'rgba(255, 230, 0, .25)';\nexport const DEFAULT_BOARD_FILL     = 'rgb(221, 250, 182)';\nexport const DEFAULT_IMAGE_URL      = './default.jpg';\nexport const DEFAULT_ROOT_ELEMENT   = 'jigsaw_puzzle_root';\nexport const DEFAULT_CANVAS_WIDTH   = 375;\nexport const DEFAULT_CANVAS_HEIGHT  = 500;\nexport const DEFAULT_FPS            = 30;\nexport const DEFAULT_OFFSET         = 0;\nexport const DEFAULT_RADIUS         = 30;\nexport const DEFAULT_LOCAL_PADDING  = 0;\nexport const DEFAULT_PIECE_DISTANCE = 50;\n","import { isHTMLElement, LoggerInterface, noop } from '@games/libs';\nimport { ConfigInterface } from './config.interface';\nimport {\n    DEFAULT_BOARD_FILL,\n    DEFAULT_CANVAS_HEIGHT, DEFAULT_CANVAS_WIDTH, DEFAULT_COLS, DEFAULT_FILL_STYLE, DEFAULT_FPS, DEFAULT_IMAGE_URL,\n    DEFAULT_LINE_CAP, DEFAULT_LINE_WIDTH, DEFAULT_LOCAL_PADDING, DEFAULT_OFFSET, DEFAULT_RADIUS, DEFAULT_ROOT_ELEMENT,\n    DEFAULT_ROWS, DEFAULT_SHOW_CURVES, DEFAULT_STROKE_STYLE, DEFAULT_PIECE_DISTANCE,\n} from './default';\n\n\nexport class Config implements ConfigInterface {\n    private readonly _rows: number;\n    private readonly _columns: number;\n    private readonly _imageUrl: string;\n    private readonly _showCurves: boolean;\n    private readonly _strokeStyle: string;\n    private readonly _lineWidth: number;\n    private readonly _lineCap: CanvasLineCap;\n    private readonly _fillStyle: string;\n    private readonly _rootElement: HTMLElement | null;\n    private readonly _canvasWidth: number;\n    private readonly _canvasHeight: number;\n    private readonly _fps: number;\n    private readonly _offset: number;\n    private readonly _radius: number;\n    private readonly _localPadding: number;\n    private readonly _boardFill: string;\n    private readonly _pieceDistance: number;\n    private readonly _onReady: () => void;\n    private readonly _onReset: () => void;\n    private readonly _onSuccess: () => void;\n    private readonly _onError: (error: string) => void;\n\n    constructor (\n        private readonly _config: Partial<ConfigInterface>,\n        private readonly _logger: LoggerInterface,\n    ) {\n        this._rows          = this._config.rows          || DEFAULT_ROWS;\n        this._columns       = this._config.columns       || DEFAULT_COLS;\n        this._imageUrl      = this._config.imageUrl      || DEFAULT_IMAGE_URL;\n        this._showCurves    = this._config.showCurves    || DEFAULT_SHOW_CURVES;\n        this._strokeStyle   = this._config.strokeStyle   || DEFAULT_STROKE_STYLE;\n        this._lineWidth     = this._config.lineWidth     || DEFAULT_LINE_WIDTH;\n        this._lineCap       = this._config.lineCap       || DEFAULT_LINE_CAP;\n        this._fillStyle     = this._config.fillStyle     || DEFAULT_FILL_STYLE;\n        this._canvasWidth   = this._config.canvasWidth   || DEFAULT_CANVAS_WIDTH;\n        this._canvasHeight  = this._config.canvasHeight  || DEFAULT_CANVAS_HEIGHT;\n        this._fps           = this._config.fps           || DEFAULT_FPS;\n        this._offset        = this._config.offset        || DEFAULT_OFFSET;\n        this._radius        = this._config.radius        || DEFAULT_RADIUS;\n        this._localPadding  = this._config.localPadding  || DEFAULT_LOCAL_PADDING;\n        this._boardFill     = this._config.boardFill     || DEFAULT_BOARD_FILL;\n        this._pieceDistance = this._config.pieceDistance || DEFAULT_PIECE_DISTANCE;\n        this._onReady       = this._config.onReady       || noop;\n        this._onReset       = this._config.onReset       || noop;\n        this._onSuccess     = this._config.onSuccess     || noop;\n        this._onError       = this._config.onError       || noop;\n        this._rootElement   = this.getRoot(this._config.rootElement!);\n    }\n\n    getRoot (rootElement: HTMLElement | null) {\n        if (isHTMLElement(rootElement)) return rootElement;\n\n        this._logger.warn('Root element is not an HTMLElement. Using default root element selector');\n        const root = document.getElementById(DEFAULT_ROOT_ELEMENT);\n        if (root) return root;\n\n        this._logger.error(`Root element not found`);\n        return null;\n    }\n\n    get localPadding (): number {\n        return this._localPadding;\n    }\n\n    get radius (): number {\n        return this._radius;\n    }\n\n    get offset (): number {\n        return this._offset;\n    }\n\n    get fps (): number {\n        return this._fps;\n    }\n\n    get onReady () {\n        return this._onReady;\n    }\n\n    get onReset () {\n        return this._onReset;\n    }\n\n    get onSuccess () {\n        return this._onSuccess;\n    }\n\n    get onError () {\n        return this._onError;\n    }\n\n    get rootElement () {\n        return this._rootElement;\n    }\n\n    get columns () {\n        return this._columns;\n    }\n\n    get fillStyle () {\n        return this._fillStyle;\n    }\n\n    get imageUrl () {\n        return this._imageUrl;\n    }\n\n    get lineCap () {\n        return this._lineCap;\n    }\n\n    get lineWidth () {\n        return this._lineWidth;\n    }\n\n    get rows () {\n        return this._rows;\n    }\n\n    get showCurves () {\n        return this._showCurves;\n    }\n\n    get strokeStyle () {\n        return this._strokeStyle;\n    }\n\n    get canvasWidth (): number {\n        return this._canvasWidth;\n    }\n\n    get canvasHeight (): number {\n        return this._canvasHeight;\n    }\n\n    get boardFill (): string {\n        return this._boardFill;\n    }\n\n    get pieceDistance (): number {\n        return this._pieceDistance;\n    }\n}\n","import { LoggerInterface } from '@games/libs';\nimport { ConfigInterface } from '../../config';\nimport { PieceServiceInterface } from '../../services/piece/piece.service.interface';\nimport { BoardInterface } from './board.interface';\nimport { PieceInterface } from '../piece';\n\n\nexport class Board implements BoardInterface {\n    private readonly _rows: number;\n    private readonly _columns: number;\n    private readonly _pieceWidth: number;\n    private readonly _pieceHeight: number;\n    private readonly _x: number;\n    private readonly _y: number;\n    private _pieces: PieceInterface[];\n\n    constructor (\n        private readonly _config: ConfigInterface,\n        private readonly _image: HTMLImageElement,\n        private readonly _pieceService: PieceServiceInterface,\n        private readonly _logger: LoggerInterface,\n    ) {\n        this._rows        = this._config.rows;\n        this._columns     = this._config.columns;\n        this._x           = this._config.offset;\n        this._y           = this._config.offset;\n        this._pieceWidth  = _image.width / this._columns;\n        this._pieceHeight = _image.height / this._rows;\n        this._pieces      = this._pieceService.createPieces(\n            this._x,\n            this._y,\n            this._rows,\n            this._columns,\n            this.mask.bind(this),\n            this._image,\n        );\n\n        this._logger.debug('Board constructor done');\n    }\n\n    public positionByIndex (index: number) {\n        return {\n            x: index % this._columns,\n            y: Math.floor(index / this._columns),\n        };\n    }\n\n    public checkPieces () {\n        let count = 0;\n\n        for (let i = 0; i < this._pieces.length; i++) {\n            if (\n                this._pieces[i].index !== count ||\n                this._pieces[i].x !== 0 ||\n                this._pieces[i].y !== 0\n            ) return false;\n\n            count++;\n        }\n\n        return true;\n    }\n\n    public unHoverPieces () {\n        this._pieces.forEach(piece => piece.unHover());\n    }\n\n    public getPieceByPosition (ctx: CanvasRenderingContext2D, x: number, y: number) {\n        return this.piecesByZDesc.find(piece => {\n            const mask = piece.maskPiece();\n            return mask && ctx.isPointInPath(mask, x, y, 'nonzero');\n        }) ?? null;\n    }\n\n    public render (ctx: CanvasRenderingContext2D) {\n        ctx.save();\n        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n        const pieces = this.piecesByZAsc;\n\n        if (!pieces.length) {\n            ctx.drawImage(this._image, this._x, this._y, this._image.width, this._image.height);\n            ctx.restore();\n            return;\n        }\n\n        ctx.fillStyle = this._config.boardFill;\n        ctx.rect(this._x, this._y, this._image.width, this._image.height);\n        ctx.fill();\n\n        pieces.forEach(piece => piece.render(ctx));\n\n        ctx.restore();\n    }\n\n    public mask (x: number, y: number, radius: number) {\n        return (pieceX: number, pieceY: number) => {\n            let mask = new Path2D();\n\n            mask.moveTo(\n                pieceX + this._x + x * this._pieceWidth,\n                pieceY + this._y + y * this._pieceHeight\n            );\n\n            // top\n            if (y === 0) {\n                mask.lineTo(\n                    pieceX + this._x + (x + 1) * this._pieceWidth,\n                    pieceY + this._y + y * this._pieceHeight\n                );\n            } else {\n                mask.lineTo(\n                    pieceX + this._x + (x + .5) * this._pieceWidth - radius,\n                    pieceY + this._y + y * this._pieceHeight\n                );\n                mask.arc(\n                    pieceX + this._x + (x + .5) * this._pieceWidth,\n                    pieceY + this._y + y * this._pieceHeight,\n                    radius,\n                    Math.PI,\n                    0,\n                    true\n                );\n                mask.lineTo(\n                    pieceX + this._x + (x + 1) * this._pieceWidth,\n                    pieceY + this._y + y * this._pieceHeight\n                );\n            }\n\n            // right\n            if (x === this._columns - 1) {\n                mask.lineTo(\n                    pieceX + this._x + (x + 1) * this._pieceWidth,\n                    pieceY + this._y + (y + 1) * this._pieceHeight\n                );\n            } else {\n                mask.lineTo(\n                    pieceX + this._x + (x + 1) * this._pieceWidth,\n                    pieceY + this._y + (y + .5) * this._pieceHeight - radius\n                );\n                mask.arc(\n                    pieceX + this._x + (x + 1) * this._pieceWidth,\n                    pieceY + this._y + (y + .5) * this._pieceHeight,\n                    radius,\n                    -Math.PI / 2,\n                    Math.PI / 2,\n                    false\n                );\n                mask.lineTo(\n                    pieceX + this._x + (x + 1) * this._pieceWidth,\n                    pieceY + this._y + (y + 1) * this._pieceHeight\n                );\n            }\n\n            // bottom\n            if (y === this._rows - 1) {\n                mask.lineTo(\n                    pieceX + this._x + x * this._pieceWidth,\n                    pieceY + this._y + (y + 1) * this._pieceHeight\n                );\n            } else {\n                mask.lineTo(\n                    pieceX + this._x + (x + .5) * this._pieceWidth + radius,\n                    pieceY + this._y + (y + 1) * this._pieceHeight\n                );\n                mask.arc(\n                    pieceX + this._x + (x + .5) * this._pieceWidth,\n                    pieceY + this._y + (y + 1) * this._pieceHeight,\n                    radius,\n                    0,\n                    Math.PI,\n                    false\n                );\n                mask.lineTo(\n                    pieceX + this._x + x * this._pieceWidth,\n                    pieceY + this._y + (y + 1) * this._pieceHeight\n                );\n            }\n\n            // left\n            if (x === 0) {\n                mask.lineTo(\n                    pieceX + this._x + x * this._pieceWidth,\n                    pieceY + this._y + y * this._pieceHeight\n                );\n            } else {\n                mask.lineTo(\n                    pieceX + this._x + x * this._pieceWidth,\n                    pieceY + this._y + (y + .5) * this._pieceHeight + radius\n                );\n                mask.arc(\n                    pieceX + this._x + x * this._pieceWidth,\n                    pieceY + this._y + (y + .5) * this._pieceHeight,\n                    radius,\n                    Math.PI / 2,\n                    -Math.PI / 2,\n                    true\n                );\n                mask.lineTo(\n                    pieceX + this._x + x * this._pieceWidth,\n                    pieceY + this._y + y * this._pieceHeight\n                );\n            }\n\n            return mask;\n        };\n    }\n\n    public get pieceWidth () {\n        return this._pieceWidth;\n    }\n\n    public get pieceHeight () {\n        return this._pieceHeight;\n    }\n\n    public get pieces () {\n        return this._pieces;\n    }\n\n    public set pieces (value: PieceInterface[]) {\n        this._pieces = value;\n    }\n\n    private get piecesByZAsc () {\n        return [ ...this._pieces ].sort((a, b) => a.z - b.z);\n    }\n\n    private get piecesByZDesc () {\n        return [ ...this._pieces ].sort((a, b) => b.z - a.z);\n    }\n}\n","import { LoggerInterface } from '@games/libs';\nimport { ConfigInterface } from '../config';\nimport { Board, BoardInterface } from '../game/board';\nimport { PieceServiceInterface } from '../services/piece/piece.service.interface';\n\n\nexport type BoardFactory = (\n    config: ConfigInterface,\n    image: HTMLImageElement,\n    pieceService: PieceServiceInterface,\n    logger: LoggerInterface\n) => BoardInterface;\n\n\nexport const boardFactory: BoardFactory = (config, image, pieceService, logger) => {\n    return new Board(config, image, pieceService, logger);\n};\n","import { LoggerInterface } from '@games/libs';\nimport { ConfigInterface } from '../../config';\nimport { PieceInterface } from './piece.interface';\n\n\nexport class Piece implements PieceInterface {\n    private _x: number     = 0;\n    private _y: number     = 0;\n    private _z: number     = 0;\n    private _index: number = 0;\n    private _image: HTMLImageElement | null = null;\n    private _mask: ((x: number, y: number) => Path2D) | null = null;\n    private _isHover: boolean = false;\n    private _placed: boolean = true;\n\n    constructor (\n        private readonly _boardX: number,\n        private readonly _boardY: number,\n        private readonly _config: ConfigInterface,\n        private readonly _logger: LoggerInterface,\n    ) {\n        this._logger.debug('Piece constructor done');\n    }\n\n    public isNearToPlace () {\n        const distance = Math.sqrt(Math.pow(this._x, 2) + Math.pow(this._y, 2));\n        return distance < this._config.pieceDistance;\n    }\n\n    public hover () {\n        this._isHover = true;\n        this.z = this._placed ? 0 : 100;\n    }\n\n    public unHover () {\n        this._isHover = false;\n        this.dropZ();\n    }\n\n    public render (ctx: CanvasRenderingContext2D) {\n        ctx.save();\n\n        const mask = this.maskPiece();\n\n        if (!mask || !this._image) return;\n\n        ctx.strokeStyle = this._config.strokeStyle;\n        ctx.lineWidth   = this._config.lineWidth;\n        ctx.lineCap     = this._config.lineCap;\n\n        ctx.stroke(mask);\n        ctx.clip(mask, 'evenodd');\n        ctx.drawImage(\n            this._image,\n            this._x + this._boardX,\n            this._y + this._boardY,\n            this._image.width,\n            this._image.height\n        );\n\n        if (this._isHover) {\n            ctx.fillStyle = this._config.fillStyle;\n            ctx.fill(mask);\n        }\n\n        ctx.restore();\n    }\n\n    public dropZ () {\n        this.z = this._placed ? 0 : this._index + 1;\n    }\n\n    public maskPiece () {\n        return this._mask && this._mask(this._x, this._y);\n    }\n\n    public get mask () {\n        return this._mask;\n    }\n\n    public set mask (value: ((x: number, y: number) => Path2D) | null) {\n        this._mask = value;\n    }\n\n    public get x (): number {\n        return this._x;\n    }\n\n    public set x (value: number) {\n        this._x = value;\n    }\n\n    public get y (): number {\n        return this._y;\n    }\n\n    public set y (value: number) {\n        this._y = value;\n    }\n\n    public get z () {\n        return this._z;\n    }\n\n    public set z (value: number) {\n        this._z = value;\n    }\n\n    public get index () {\n        return this._index;\n    }\n\n    public set index (value: number) {\n        this._index = value;\n    }\n\n    public get image (): HTMLImageElement | null {\n        return this._image;\n    }\n\n    public set image (image: HTMLImageElement) {\n        this._image = image;\n    }\n\n    get placed (): boolean {\n        return this._placed;\n    }\n\n    set placed (value: boolean) {\n        this._placed = value;\n    }\n}\n","import { LoggerInterface } from '@games/libs';\nimport { ConfigInterface } from '../config';\nimport { Piece, PieceInterface } from '../game/piece';\n\n\nexport type PieceFactory = (\n    boardX: number,\n    boardY: number,\n    config: ConfigInterface,\n    logger: LoggerInterface\n) => PieceInterface;\n\n\nexport const pieceFactory: PieceFactory = (boardX, boardY, config, logger) => {\n    return new Piece(boardX, boardY, config, logger);\n};\n","/**\n * The Ease class provides a collection of easing functions for use with tween.js.\n */\nvar Easing = Object.freeze({\n    Linear: Object.freeze({\n        None: function (amount) {\n            return amount;\n        },\n        In: function (amount) {\n            return this.None(amount);\n        },\n        Out: function (amount) {\n            return this.None(amount);\n        },\n        InOut: function (amount) {\n            return this.None(amount);\n        },\n    }),\n    Quadratic: Object.freeze({\n        In: function (amount) {\n            return amount * amount;\n        },\n        Out: function (amount) {\n            return amount * (2 - amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount;\n            }\n            return -0.5 * (--amount * (amount - 2) - 1);\n        },\n    }),\n    Cubic: Object.freeze({\n        In: function (amount) {\n            return amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount + 2);\n        },\n    }),\n    Quartic: Object.freeze({\n        In: function (amount) {\n            return amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return 1 - --amount * amount * amount * amount;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount;\n            }\n            return -0.5 * ((amount -= 2) * amount * amount * amount - 2);\n        },\n    }),\n    Quintic: Object.freeze({\n        In: function (amount) {\n            return amount * amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount * amount * amount + 2);\n        },\n    }),\n    Sinusoidal: Object.freeze({\n        In: function (amount) {\n            return 1 - Math.sin(((1.0 - amount) * Math.PI) / 2);\n        },\n        Out: function (amount) {\n            return Math.sin((amount * Math.PI) / 2);\n        },\n        InOut: function (amount) {\n            return 0.5 * (1 - Math.sin(Math.PI * (0.5 - amount)));\n        },\n    }),\n    Exponential: Object.freeze({\n        In: function (amount) {\n            return amount === 0 ? 0 : Math.pow(1024, amount - 1);\n        },\n        Out: function (amount) {\n            return amount === 1 ? 1 : 1 - Math.pow(2, -10 * amount);\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            if ((amount *= 2) < 1) {\n                return 0.5 * Math.pow(1024, amount - 1);\n            }\n            return 0.5 * (-Math.pow(2, -10 * (amount - 1)) + 2);\n        },\n    }),\n    Circular: Object.freeze({\n        In: function (amount) {\n            return 1 - Math.sqrt(1 - amount * amount);\n        },\n        Out: function (amount) {\n            return Math.sqrt(1 - --amount * amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return -0.5 * (Math.sqrt(1 - amount * amount) - 1);\n            }\n            return 0.5 * (Math.sqrt(1 - (amount -= 2) * amount) + 1);\n        },\n    }),\n    Elastic: Object.freeze({\n        In: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return -Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n        },\n        Out: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return Math.pow(2, -10 * amount) * Math.sin((amount - 0.1) * 5 * Math.PI) + 1;\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            amount *= 2;\n            if (amount < 1) {\n                return -0.5 * Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n            }\n            return 0.5 * Math.pow(2, -10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI) + 1;\n        },\n    }),\n    Back: Object.freeze({\n        In: function (amount) {\n            var s = 1.70158;\n            return amount === 1 ? 1 : amount * amount * ((s + 1) * amount - s);\n        },\n        Out: function (amount) {\n            var s = 1.70158;\n            return amount === 0 ? 0 : --amount * amount * ((s + 1) * amount + s) + 1;\n        },\n        InOut: function (amount) {\n            var s = 1.70158 * 1.525;\n            if ((amount *= 2) < 1) {\n                return 0.5 * (amount * amount * ((s + 1) * amount - s));\n            }\n            return 0.5 * ((amount -= 2) * amount * ((s + 1) * amount + s) + 2);\n        },\n    }),\n    Bounce: Object.freeze({\n        In: function (amount) {\n            return 1 - Easing.Bounce.Out(1 - amount);\n        },\n        Out: function (amount) {\n            if (amount < 1 / 2.75) {\n                return 7.5625 * amount * amount;\n            }\n            else if (amount < 2 / 2.75) {\n                return 7.5625 * (amount -= 1.5 / 2.75) * amount + 0.75;\n            }\n            else if (amount < 2.5 / 2.75) {\n                return 7.5625 * (amount -= 2.25 / 2.75) * amount + 0.9375;\n            }\n            else {\n                return 7.5625 * (amount -= 2.625 / 2.75) * amount + 0.984375;\n            }\n        },\n        InOut: function (amount) {\n            if (amount < 0.5) {\n                return Easing.Bounce.In(amount * 2) * 0.5;\n            }\n            return Easing.Bounce.Out(amount * 2 - 1) * 0.5 + 0.5;\n        },\n    }),\n    generatePow: function (power) {\n        if (power === void 0) { power = 4; }\n        power = power < Number.EPSILON ? Number.EPSILON : power;\n        power = power > 10000 ? 10000 : power;\n        return {\n            In: function (amount) {\n                return Math.pow(amount, power);\n            },\n            Out: function (amount) {\n                return 1 - Math.pow((1 - amount), power);\n            },\n            InOut: function (amount) {\n                if (amount < 0.5) {\n                    return Math.pow((amount * 2), power) / 2;\n                }\n                return (1 - Math.pow((2 - amount * 2), power)) / 2 + 0.5;\n            },\n        };\n    },\n});\n\nvar now = function () { return performance.now(); };\n\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tween\n */\nvar Group = /** @class */ (function () {\n    function Group() {\n        this._tweens = {};\n        this._tweensAddedDuringUpdate = {};\n    }\n    Group.prototype.getAll = function () {\n        var _this = this;\n        return Object.keys(this._tweens).map(function (tweenId) {\n            return _this._tweens[tweenId];\n        });\n    };\n    Group.prototype.removeAll = function () {\n        this._tweens = {};\n    };\n    Group.prototype.add = function (tween) {\n        this._tweens[tween.getId()] = tween;\n        this._tweensAddedDuringUpdate[tween.getId()] = tween;\n    };\n    Group.prototype.remove = function (tween) {\n        delete this._tweens[tween.getId()];\n        delete this._tweensAddedDuringUpdate[tween.getId()];\n    };\n    Group.prototype.update = function (time, preserve) {\n        if (time === void 0) { time = now(); }\n        if (preserve === void 0) { preserve = false; }\n        var tweenIds = Object.keys(this._tweens);\n        if (tweenIds.length === 0) {\n            return false;\n        }\n        // Tweens are updated in \"batches\". If you add a new tween during an\n        // update, then the new tween will be updated in the next batch.\n        // If you remove a tween during an update, it may or may not be updated.\n        // However, if the removed tween was added during the current batch,\n        // then it will not be updated.\n        while (tweenIds.length > 0) {\n            this._tweensAddedDuringUpdate = {};\n            for (var i = 0; i < tweenIds.length; i++) {\n                var tween = this._tweens[tweenIds[i]];\n                var autoStart = !preserve;\n                if (tween && tween.update(time, autoStart) === false && !preserve) {\n                    delete this._tweens[tweenIds[i]];\n                }\n            }\n            tweenIds = Object.keys(this._tweensAddedDuringUpdate);\n        }\n        return true;\n    };\n    return Group;\n}());\n\n/**\n *\n */\nvar Interpolation = {\n    Linear: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.Linear;\n        if (k < 0) {\n            return fn(v[0], v[1], f);\n        }\n        if (k > 1) {\n            return fn(v[m], v[m - 1], m - f);\n        }\n        return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n    },\n    Bezier: function (v, k) {\n        var b = 0;\n        var n = v.length - 1;\n        var pw = Math.pow;\n        var bn = Interpolation.Utils.Bernstein;\n        for (var i = 0; i <= n; i++) {\n            b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n        }\n        return b;\n    },\n    CatmullRom: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.CatmullRom;\n        if (v[0] === v[m]) {\n            if (k < 0) {\n                i = Math.floor((f = m * (1 + k)));\n            }\n            return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n        }\n        else {\n            if (k < 0) {\n                return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n            }\n            if (k > 1) {\n                return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n            }\n            return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n        }\n    },\n    Utils: {\n        Linear: function (p0, p1, t) {\n            return (p1 - p0) * t + p0;\n        },\n        Bernstein: function (n, i) {\n            var fc = Interpolation.Utils.Factorial;\n            return fc(n) / fc(i) / fc(n - i);\n        },\n        Factorial: (function () {\n            var a = [1];\n            return function (n) {\n                var s = 1;\n                if (a[n]) {\n                    return a[n];\n                }\n                for (var i = n; i > 1; i--) {\n                    s *= i;\n                }\n                a[n] = s;\n                return s;\n            };\n        })(),\n        CatmullRom: function (p0, p1, p2, p3, t) {\n            var v0 = (p2 - p0) * 0.5;\n            var v1 = (p3 - p1) * 0.5;\n            var t2 = t * t;\n            var t3 = t * t2;\n            return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n        },\n    },\n};\n\n/**\n * Utils\n */\nvar Sequence = /** @class */ (function () {\n    function Sequence() {\n    }\n    Sequence.nextId = function () {\n        return Sequence._nextId++;\n    };\n    Sequence._nextId = 0;\n    return Sequence;\n}());\n\nvar mainGroup = new Group();\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar Tween = /** @class */ (function () {\n    function Tween(_object, _group) {\n        if (_group === void 0) { _group = mainGroup; }\n        this._object = _object;\n        this._group = _group;\n        this._isPaused = false;\n        this._pauseStart = 0;\n        this._valuesStart = {};\n        this._valuesEnd = {};\n        this._valuesStartRepeat = {};\n        this._duration = 1000;\n        this._isDynamic = false;\n        this._initialRepeat = 0;\n        this._repeat = 0;\n        this._yoyo = false;\n        this._isPlaying = false;\n        this._reversed = false;\n        this._delayTime = 0;\n        this._startTime = 0;\n        this._easingFunction = Easing.Linear.None;\n        this._interpolationFunction = Interpolation.Linear;\n        // eslint-disable-next-line\n        this._chainedTweens = [];\n        this._onStartCallbackFired = false;\n        this._onEveryStartCallbackFired = false;\n        this._id = Sequence.nextId();\n        this._isChainStopped = false;\n        this._propertiesAreSetUp = false;\n        this._goToEnd = false;\n    }\n    Tween.prototype.getId = function () {\n        return this._id;\n    };\n    Tween.prototype.isPlaying = function () {\n        return this._isPlaying;\n    };\n    Tween.prototype.isPaused = function () {\n        return this._isPaused;\n    };\n    Tween.prototype.getDuration = function () {\n        return this._duration;\n    };\n    Tween.prototype.to = function (target, duration) {\n        if (duration === void 0) { duration = 1000; }\n        if (this._isPlaying)\n            throw new Error('Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.');\n        this._valuesEnd = target;\n        this._propertiesAreSetUp = false;\n        this._duration = duration < 0 ? 0 : duration;\n        return this;\n    };\n    Tween.prototype.duration = function (duration) {\n        if (duration === void 0) { duration = 1000; }\n        this._duration = duration < 0 ? 0 : duration;\n        return this;\n    };\n    Tween.prototype.dynamic = function (dynamic) {\n        if (dynamic === void 0) { dynamic = false; }\n        this._isDynamic = dynamic;\n        return this;\n    };\n    Tween.prototype.start = function (time, overrideStartingValues) {\n        if (time === void 0) { time = now(); }\n        if (overrideStartingValues === void 0) { overrideStartingValues = false; }\n        if (this._isPlaying) {\n            return this;\n        }\n        // eslint-disable-next-line\n        this._group && this._group.add(this);\n        this._repeat = this._initialRepeat;\n        if (this._reversed) {\n            // If we were reversed (f.e. using the yoyo feature) then we need to\n            // flip the tween direction back to forward.\n            this._reversed = false;\n            for (var property in this._valuesStartRepeat) {\n                this._swapEndStartRepeatValues(property);\n                this._valuesStart[property] = this._valuesStartRepeat[property];\n            }\n        }\n        this._isPlaying = true;\n        this._isPaused = false;\n        this._onStartCallbackFired = false;\n        this._onEveryStartCallbackFired = false;\n        this._isChainStopped = false;\n        this._startTime = time;\n        this._startTime += this._delayTime;\n        if (!this._propertiesAreSetUp || overrideStartingValues) {\n            this._propertiesAreSetUp = true;\n            // If dynamic is not enabled, clone the end values instead of using the passed-in end values.\n            if (!this._isDynamic) {\n                var tmp = {};\n                for (var prop in this._valuesEnd)\n                    tmp[prop] = this._valuesEnd[prop];\n                this._valuesEnd = tmp;\n            }\n            this._setupProperties(this._object, this._valuesStart, this._valuesEnd, this._valuesStartRepeat, overrideStartingValues);\n        }\n        return this;\n    };\n    Tween.prototype.startFromCurrentValues = function (time) {\n        return this.start(time, true);\n    };\n    Tween.prototype._setupProperties = function (_object, _valuesStart, _valuesEnd, _valuesStartRepeat, overrideStartingValues) {\n        for (var property in _valuesEnd) {\n            var startValue = _object[property];\n            var startValueIsArray = Array.isArray(startValue);\n            var propType = startValueIsArray ? 'array' : typeof startValue;\n            var isInterpolationList = !startValueIsArray && Array.isArray(_valuesEnd[property]);\n            // If `to()` specifies a property that doesn't exist in the source object,\n            // we should not set that property in the object\n            if (propType === 'undefined' || propType === 'function') {\n                continue;\n            }\n            // Check if an Array was provided as property value\n            if (isInterpolationList) {\n                var endValues = _valuesEnd[property];\n                if (endValues.length === 0) {\n                    continue;\n                }\n                // Handle an array of relative values.\n                // Creates a local copy of the Array with the start value at the front\n                var temp = [startValue];\n                for (var i = 0, l = endValues.length; i < l; i += 1) {\n                    var value = this._handleRelativeValue(startValue, endValues[i]);\n                    if (isNaN(value)) {\n                        isInterpolationList = false;\n                        console.warn('Found invalid interpolation list. Skipping.');\n                        break;\n                    }\n                    temp.push(value);\n                }\n                if (isInterpolationList) {\n                    // if (_valuesStart[property] === undefined) { // handle end values only the first time. NOT NEEDED? setupProperties is now guarded by _propertiesAreSetUp.\n                    _valuesEnd[property] = temp;\n                    // }\n                }\n            }\n            // handle the deepness of the values\n            if ((propType === 'object' || startValueIsArray) && startValue && !isInterpolationList) {\n                _valuesStart[property] = startValueIsArray ? [] : {};\n                var nestedObject = startValue;\n                for (var prop in nestedObject) {\n                    _valuesStart[property][prop] = nestedObject[prop];\n                }\n                // TODO? repeat nested values? And yoyo? And array values?\n                _valuesStartRepeat[property] = startValueIsArray ? [] : {};\n                var endValues = _valuesEnd[property];\n                // If dynamic is not enabled, clone the end values instead of using the passed-in end values.\n                if (!this._isDynamic) {\n                    var tmp = {};\n                    for (var prop in endValues)\n                        tmp[prop] = endValues[prop];\n                    _valuesEnd[property] = endValues = tmp;\n                }\n                this._setupProperties(nestedObject, _valuesStart[property], endValues, _valuesStartRepeat[property], overrideStartingValues);\n            }\n            else {\n                // Save the starting value, but only once unless override is requested.\n                if (typeof _valuesStart[property] === 'undefined' || overrideStartingValues) {\n                    _valuesStart[property] = startValue;\n                }\n                if (!startValueIsArray) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n                }\n                if (isInterpolationList) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStartRepeat[property] = _valuesEnd[property].slice().reverse();\n                }\n                else {\n                    _valuesStartRepeat[property] = _valuesStart[property] || 0;\n                }\n            }\n        }\n    };\n    Tween.prototype.stop = function () {\n        if (!this._isChainStopped) {\n            this._isChainStopped = true;\n            this.stopChainedTweens();\n        }\n        if (!this._isPlaying) {\n            return this;\n        }\n        // eslint-disable-next-line\n        this._group && this._group.remove(this);\n        this._isPlaying = false;\n        this._isPaused = false;\n        if (this._onStopCallback) {\n            this._onStopCallback(this._object);\n        }\n        return this;\n    };\n    Tween.prototype.end = function () {\n        this._goToEnd = true;\n        this.update(Infinity);\n        return this;\n    };\n    Tween.prototype.pause = function (time) {\n        if (time === void 0) { time = now(); }\n        if (this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = true;\n        this._pauseStart = time;\n        // eslint-disable-next-line\n        this._group && this._group.remove(this);\n        return this;\n    };\n    Tween.prototype.resume = function (time) {\n        if (time === void 0) { time = now(); }\n        if (!this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = false;\n        this._startTime += time - this._pauseStart;\n        this._pauseStart = 0;\n        // eslint-disable-next-line\n        this._group && this._group.add(this);\n        return this;\n    };\n    Tween.prototype.stopChainedTweens = function () {\n        for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n            this._chainedTweens[i].stop();\n        }\n        return this;\n    };\n    Tween.prototype.group = function (group) {\n        if (group === void 0) { group = mainGroup; }\n        this._group = group;\n        return this;\n    };\n    Tween.prototype.delay = function (amount) {\n        if (amount === void 0) { amount = 0; }\n        this._delayTime = amount;\n        return this;\n    };\n    Tween.prototype.repeat = function (times) {\n        if (times === void 0) { times = 0; }\n        this._initialRepeat = times;\n        this._repeat = times;\n        return this;\n    };\n    Tween.prototype.repeatDelay = function (amount) {\n        this._repeatDelayTime = amount;\n        return this;\n    };\n    Tween.prototype.yoyo = function (yoyo) {\n        if (yoyo === void 0) { yoyo = false; }\n        this._yoyo = yoyo;\n        return this;\n    };\n    Tween.prototype.easing = function (easingFunction) {\n        if (easingFunction === void 0) { easingFunction = Easing.Linear.None; }\n        this._easingFunction = easingFunction;\n        return this;\n    };\n    Tween.prototype.interpolation = function (interpolationFunction) {\n        if (interpolationFunction === void 0) { interpolationFunction = Interpolation.Linear; }\n        this._interpolationFunction = interpolationFunction;\n        return this;\n    };\n    // eslint-disable-next-line\n    Tween.prototype.chain = function () {\n        var tweens = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            tweens[_i] = arguments[_i];\n        }\n        this._chainedTweens = tweens;\n        return this;\n    };\n    Tween.prototype.onStart = function (callback) {\n        this._onStartCallback = callback;\n        return this;\n    };\n    Tween.prototype.onEveryStart = function (callback) {\n        this._onEveryStartCallback = callback;\n        return this;\n    };\n    Tween.prototype.onUpdate = function (callback) {\n        this._onUpdateCallback = callback;\n        return this;\n    };\n    Tween.prototype.onRepeat = function (callback) {\n        this._onRepeatCallback = callback;\n        return this;\n    };\n    Tween.prototype.onComplete = function (callback) {\n        this._onCompleteCallback = callback;\n        return this;\n    };\n    Tween.prototype.onStop = function (callback) {\n        this._onStopCallback = callback;\n        return this;\n    };\n    /**\n     * @returns true if the tween is still playing after the update, false\n     * otherwise (calling update on a paused tween still returns true because\n     * it is still playing, just paused).\n     */\n    Tween.prototype.update = function (time, autoStart) {\n        var _this = this;\n        var _a;\n        if (time === void 0) { time = now(); }\n        if (autoStart === void 0) { autoStart = true; }\n        if (this._isPaused)\n            return true;\n        var property;\n        var endTime = this._startTime + this._duration;\n        if (!this._goToEnd && !this._isPlaying) {\n            if (time > endTime)\n                return false;\n            if (autoStart)\n                this.start(time, true);\n        }\n        this._goToEnd = false;\n        if (time < this._startTime) {\n            return true;\n        }\n        if (this._onStartCallbackFired === false) {\n            if (this._onStartCallback) {\n                this._onStartCallback(this._object);\n            }\n            this._onStartCallbackFired = true;\n        }\n        if (this._onEveryStartCallbackFired === false) {\n            if (this._onEveryStartCallback) {\n                this._onEveryStartCallback(this._object);\n            }\n            this._onEveryStartCallbackFired = true;\n        }\n        var elapsedTime = time - this._startTime;\n        var durationAndDelay = this._duration + ((_a = this._repeatDelayTime) !== null && _a !== void 0 ? _a : this._delayTime);\n        var totalTime = this._duration + this._repeat * durationAndDelay;\n        var calculateElapsedPortion = function () {\n            if (_this._duration === 0)\n                return 1;\n            if (elapsedTime > totalTime) {\n                return 1;\n            }\n            var timesRepeated = Math.trunc(elapsedTime / durationAndDelay);\n            var timeIntoCurrentRepeat = elapsedTime - timesRepeated * durationAndDelay;\n            // TODO use %?\n            // const timeIntoCurrentRepeat = elapsedTime % durationAndDelay\n            var portion = Math.min(timeIntoCurrentRepeat / _this._duration, 1);\n            if (portion === 0 && elapsedTime === _this._duration) {\n                return 1;\n            }\n            return portion;\n        };\n        var elapsed = calculateElapsedPortion();\n        var value = this._easingFunction(elapsed);\n        // properties transformations\n        this._updateProperties(this._object, this._valuesStart, this._valuesEnd, value);\n        if (this._onUpdateCallback) {\n            this._onUpdateCallback(this._object, elapsed);\n        }\n        if (this._duration === 0 || elapsedTime >= this._duration) {\n            if (this._repeat > 0) {\n                var completeCount = Math.min(Math.trunc((elapsedTime - this._duration) / durationAndDelay) + 1, this._repeat);\n                if (isFinite(this._repeat)) {\n                    this._repeat -= completeCount;\n                }\n                // Reassign starting values, restart by making startTime = now\n                for (property in this._valuesStartRepeat) {\n                    if (!this._yoyo && typeof this._valuesEnd[property] === 'string') {\n                        this._valuesStartRepeat[property] =\n                            // eslint-disable-next-line\n                            // @ts-ignore FIXME?\n                            this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\n                    }\n                    if (this._yoyo) {\n                        this._swapEndStartRepeatValues(property);\n                    }\n                    this._valuesStart[property] = this._valuesStartRepeat[property];\n                }\n                if (this._yoyo) {\n                    this._reversed = !this._reversed;\n                }\n                this._startTime += durationAndDelay * completeCount;\n                if (this._onRepeatCallback) {\n                    this._onRepeatCallback(this._object);\n                }\n                this._onEveryStartCallbackFired = false;\n                return true;\n            }\n            else {\n                if (this._onCompleteCallback) {\n                    this._onCompleteCallback(this._object);\n                }\n                for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n                    // Make the chained tweens start exactly at the time they should,\n                    // even if the `update()` method was called way past the duration of the tween\n                    this._chainedTweens[i].start(this._startTime + this._duration, false);\n                }\n                this._isPlaying = false;\n                return false;\n            }\n        }\n        return true;\n    };\n    Tween.prototype._updateProperties = function (_object, _valuesStart, _valuesEnd, value) {\n        for (var property in _valuesEnd) {\n            // Don't update properties that do not exist in the source object\n            if (_valuesStart[property] === undefined) {\n                continue;\n            }\n            var start = _valuesStart[property] || 0;\n            var end = _valuesEnd[property];\n            var startIsArray = Array.isArray(_object[property]);\n            var endIsArray = Array.isArray(end);\n            var isInterpolationList = !startIsArray && endIsArray;\n            if (isInterpolationList) {\n                _object[property] = this._interpolationFunction(end, value);\n            }\n            else if (typeof end === 'object' && end) {\n                // eslint-disable-next-line\n                // @ts-ignore FIXME?\n                this._updateProperties(_object[property], start, end, value);\n            }\n            else {\n                // Parses relative end values with start as base (e.g.: +10, -3)\n                end = this._handleRelativeValue(start, end);\n                // Protect against non numeric properties.\n                if (typeof end === 'number') {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _object[property] = start + (end - start) * value;\n                }\n            }\n        }\n    };\n    Tween.prototype._handleRelativeValue = function (start, end) {\n        if (typeof end !== 'string') {\n            return end;\n        }\n        if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n            return start + parseFloat(end);\n        }\n        return parseFloat(end);\n    };\n    Tween.prototype._swapEndStartRepeatValues = function (property) {\n        var tmp = this._valuesStartRepeat[property];\n        var endValue = this._valuesEnd[property];\n        if (typeof endValue === 'string') {\n            this._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(endValue);\n        }\n        else {\n            this._valuesStartRepeat[property] = this._valuesEnd[property];\n        }\n        this._valuesEnd[property] = tmp;\n    };\n    return Tween;\n}());\n\nvar VERSION = '23.1.1';\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar nextId = Sequence.nextId;\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tweens.\n */\nvar TWEEN = mainGroup;\n// This is the best way to export things in a way that's compatible with both ES\n// Modules and CommonJS, without build hacks, and so as not to break the\n// existing API.\n// https://github.com/rollup/rollup/issues/1961#issuecomment-423037881\nvar getAll = TWEEN.getAll.bind(TWEEN);\nvar removeAll = TWEEN.removeAll.bind(TWEEN);\nvar add = TWEEN.add.bind(TWEEN);\nvar remove = TWEEN.remove.bind(TWEEN);\nvar update = TWEEN.update.bind(TWEEN);\nvar exports = {\n    Easing: Easing,\n    Group: Group,\n    Interpolation: Interpolation,\n    now: now,\n    Sequence: Sequence,\n    nextId: nextId,\n    Tween: Tween,\n    VERSION: VERSION,\n    getAll: getAll,\n    removeAll: removeAll,\n    add: add,\n    remove: remove,\n    update: update,\n};\n\nexport { Easing, Group, Interpolation, Sequence, Tween, VERSION, add, exports as default, getAll, nextId, now, remove, removeAll, update };\n","// @ts-expect-error\nimport { update } from '@tweenjs/tween.js';\nimport { ImageServiceInterface, LoggerInterface } from '@games/libs';\nimport { RootInterface } from './root.interface';\nimport { ConfigInterface } from '../../config';\nimport { BoardInterface } from '../board';\nimport { BoardServiceInterface } from '../../services/board';\nimport { CanvasServiceInterface } from '../../services/canvas';\nimport { ShuffleServiceInterface } from '../../services/shuffle';\nimport { UIServiceInterface } from '../../services/ui';\n\n\nexport class Root implements RootInterface {\n    private _image: HTMLImageElement | null   = null;\n    private _canvas: HTMLCanvasElement | null = null;\n    private _board: BoardInterface | null              = null;\n    private _deltaTime                        = 0;\n    private _fpsDeltaTime  = 0;\n    private _fpsDeltaLimit = 0;\n\n    constructor (\n        private readonly _config: ConfigInterface,\n        private readonly _imageService: ImageServiceInterface,\n        private readonly _canvasService: CanvasServiceInterface,\n        private readonly _boardService: BoardServiceInterface,\n        private readonly _shuffleService: ShuffleServiceInterface,\n        private readonly _uiService: UIServiceInterface,\n        private readonly _logger: LoggerInterface\n    ) {\n        if (!this._config.rootElement) {\n            this._logger.error('Root element not found');\n            return;\n        }\n\n        this.fpsDeltaLimit = 1000 / this._config.fps;\n\n        this.reset().then(() => {\n            this.render(0);\n            this._logger.debug('Game ready');\n            this._config.onReady();\n        }).catch((e) => {\n            this._logger.error(e);\n            this._logger.error('Game not ready');\n            this._config.onError('game.init.error');\n        });\n    }\n\n    public shuffle () {\n        this._shuffleService.shuffle(this.board, this.canvas);\n        this._uiService.setShuffled(true);\n    }\n\n    public async reset () {\n        this._canvasService.clear();\n        this._logger.debug('Canvas cleared');\n\n        this.image = await this._imageService.load(this._config.imageUrl);\n        this._logger.debug('Image received');\n\n        this.canvas = this._canvasService.createCanvas();\n        this._logger.debug('Canvas created');\n\n        this._canvasService.setSize(this.canvas, this.image);\n        this._logger.debug('Canvas prepared');\n\n        this.ctx.drawImage(this.image, 0, 0, this.canvas.width, this.canvas.height);\n        this._logger.debug('Image drawn on canvas');\n\n        this.rootElement.appendChild(this.canvas);\n        this._logger.debug('Canvas appended to root element');\n\n        this.board = this._boardService.createBoard(this.image);\n        this._logger.debug('Board created');\n\n        this._uiService.addListeners(this.board, this.ctx, this._config.onSuccess);\n        this._logger.debug('UIService ready');\n    }\n\n    private render (time: number) {\n        this.deltaTime = time - this.deltaTime;\n        this.fpsDeltaTime += this.deltaTime;\n\n        if (this.fpsDeltaTime >= this.fpsDeltaLimit) {\n            update(time);\n            this.board.render(this.ctx);\n            this.fpsDeltaTime = 0;\n        }\n\n        this.deltaTime = time;\n        requestAnimationFrame(this.render.bind(this));\n    }\n\n    private get fpsDeltaTime (): number {\n        return this._fpsDeltaTime;\n    }\n\n    private set fpsDeltaTime (value: number) {\n        this._fpsDeltaTime = value;\n    }\n\n    private get deltaTime (): number {\n        return this._deltaTime;\n    }\n\n    private set deltaTime (value: number) {\n        this._deltaTime = value;\n    }\n\n    private get fpsDeltaLimit (): number {\n        return this._fpsDeltaLimit;\n    }\n\n    private set fpsDeltaLimit (value: number) {\n        this._fpsDeltaLimit = value;\n    }\n\n    private get board (): BoardInterface {\n        return this._board!;\n    }\n\n    private set board (value: BoardInterface) {\n        this._board = value;\n    }\n\n    private get image (): HTMLImageElement {\n        return this._image!;\n    }\n\n    private set image (value: HTMLImageElement) {\n        this._image = value;\n    }\n\n    private get canvas (): HTMLCanvasElement {\n        return this._canvas!;\n    }\n\n    private set canvas (value: HTMLCanvasElement) {\n        this._canvas = value;\n    }\n\n    private get ctx (): CanvasRenderingContext2D {\n        return this.canvas.getContext('2d')!;\n    }\n\n    private get rootElement (): HTMLElement {\n        return this._config.rootElement!;\n    }\n}\n","import { LoggerInterface } from '@games/libs';\nimport { ConfigInterface } from '../../config';\nimport { BoardFactory } from '../../factories/board.factory';\nimport { PieceServiceInterface } from '../piece/piece.service.interface';\nimport { BoardServiceInterface } from './board.service.interface';\n\n\nexport class BoardService implements BoardServiceInterface {\n    constructor (\n        private readonly _boardFactory: BoardFactory,\n        private readonly _config: ConfigInterface,\n        private readonly _pieceService: PieceServiceInterface,\n        private readonly _logger: LoggerInterface,\n    ) {}\n\n    createBoard (image: HTMLImageElement) {\n        const board = this._boardFactory(this._config, image, this._pieceService, this._logger);\n        this._logger.debug('Board instantiated');\n\n        return board;\n    }\n}\n","import { LoggerInterface } from '@games/libs';\nimport { ConfigInterface } from '../../config';\nimport { CanvasServiceInterface } from './canvas.service.interface';\n\n\nexport class CanvasService implements CanvasServiceInterface {\n    constructor (\n        private readonly _config: ConfigInterface,\n        private readonly _logger: LoggerInterface,\n    ) {}\n\n    public clear () {\n        this._config.rootElement!.innerHTML = '';\n    }\n\n    public createCanvas () {\n        return document.createElement('canvas');\n    }\n\n    public setSize (canvas: HTMLCanvasElement, image: HTMLImageElement) {\n        const { width, height } = this.getFitSize(image);\n\n        canvas.width  = width;\n        canvas.height = height;\n\n        image.width  = width;\n        image.height = height;\n    }\n\n    private getFitSize (image: HTMLImageElement) {\n        const imageRatio = this.getImageRatio(image);\n        const { canvasWidth } = this.canvasSize;\n\n        return {\n            height: canvasWidth / imageRatio,\n            width : canvasWidth,\n        };\n    }\n\n    private getImageRatio ({ width, height }: HTMLImageElement) {\n        if (width  === 0) this._logger.warn('Image width is 0');\n        if (height === 0) this._logger.warn('Image height is 0');\n\n        return (height === width || height === 0 || width === 0)\n            ? 1\n            : width / height;\n    }\n\n    private get canvasSize () {\n        const rootWidth = this.rootWidth;\n        const { canvasWidth, canvasHeight } = this._config;\n\n        if (canvasWidth <= rootWidth) return {\n            canvasHeight: canvasHeight,\n            canvasWidth : canvasWidth,\n        };\n\n        const canvasRatio = canvasWidth / canvasHeight;\n\n        return {\n            canvasHeight: rootWidth / canvasRatio,\n            canvasWidth : rootWidth,\n        };\n    }\n\n    get rootWidth () {\n        return this._config.rootElement!.clientWidth;\n    }\n}\n","import { LoggerInterface } from '@games/libs';\nimport { ConfigInterface } from '../../config';\nimport { PieceFactory } from '../../factories/piece.factory';\nimport { PieceServiceInterface } from './piece.service.interface';\n\n\nexport class PieceService implements PieceServiceInterface {\n    constructor (\n        private readonly _pieceFactory: PieceFactory,\n        private readonly _config: ConfigInterface,\n        private readonly _logger: LoggerInterface,\n    ) {}\n\n    createPieces (\n        boardX: number,\n        boardY: number,\n        rows: number,\n        columns: number,\n        getMask: (x: number, y: number, radius: number) => (px: number, py: number) => Path2D,\n        image: HTMLImageElement\n    ) {\n        const pieces = [];\n\n        for (let y = 0; y < rows; y++) {\n            for (let x = 0; x < columns; x++) {\n                const piece = this.createPiece(boardX, boardY);\n                piece.image = image;\n                piece.index = this.getIndex(x, y, columns);\n                piece.mask  = getMask(x, y, this._config.radius);\n                pieces.push(piece);\n            }\n        }\n\n        this._logger.debug('Pieces instantiated');\n\n        return pieces;\n    }\n\n    createPiece (boardX: number, boardY: number) {\n        const piece = this._pieceFactory(boardX, boardY, this._config, this._logger);\n        this._logger.debug('Piece instantiated');\n\n        return piece;\n    }\n\n    getIndex (x: number, y: number, columns: number) {\n        return x + y * columns;\n    }\n}\n","// @ts-expect-error\nimport { Easing, Tween } from '@tweenjs/tween.js';\nimport { LoggerInterface } from '@games/libs';\nimport { ConfigInterface } from '../../config';\nimport { Coordinates, Limits, Positions } from '../../types';\nimport { BoardInterface } from '../../game/board';\nimport { ShuffleServiceInterface } from './shuffle.service.interface';\n\n\nexport class ShuffleService implements ShuffleServiceInterface {\n    constructor (\n        private readonly _config: ConfigInterface,\n        private readonly _logger: LoggerInterface\n    ) {}\n\n    public shuffle (board: BoardInterface, canvas: HTMLCanvasElement) {\n        this._logger.debug('Shuffling');\n\n        const positions = this.randomizePiecePositions(board, canvas);\n        this._logger.debug('Got pieces positions');\n\n        this.animatePieces(board, positions);\n        this._logger.debug('Shuffled');\n    }\n\n    private randomizePiecePositions (board: BoardInterface, canvas: HTMLCanvasElement) {\n        const limits = this.getLimits(canvas);\n\n        return board.pieces.reduce<Positions>((acc, _, index) => {\n            const coordinates = board.positionByIndex(index);\n            acc.randomPosition.push(this.getPieceRandomPosition(coordinates, board, limits));\n            acc.currentPosition.push({ x: 0, y: 0 });\n            return acc;\n        }, this.getInitialPositions());\n    }\n\n    private getLimits (canvas: HTMLCanvasElement): Limits {\n        return {\n            left  : this._config.localPadding,\n            top   : this._config.localPadding,\n            right : canvas.width  - 2 * this._config.localPadding,\n            bottom: canvas.height - 2 * this._config.localPadding,\n        };\n    }\n\n    private getPieceRandomPosition (coordinates: Coordinates, board: BoardInterface, limits: Limits) {\n        const pieceHeight = board.pieceHeight;\n        const pieceWidth  = board.pieceWidth;\n        const pieceX = coordinates.x * pieceWidth;\n        const pieceY = coordinates.y * pieceHeight;\n\n        return {\n            x: limits.left - pieceX + Math.random() * (limits.right  - limits.left - pieceWidth),\n            y: limits.top  - pieceY + Math.random() * (limits.bottom - limits.top  - pieceHeight),\n        };\n    }\n\n    private getInitialPositions = (): Positions => ({\n        randomPosition : [],\n        currentPosition: [],\n    });\n\n    private animatePieces (board: BoardInterface, positions: Positions) {\n        board.pieces.forEach((piece, index) => new Tween(positions.currentPosition[index])\n            .to(positions.randomPosition[index], 1000)\n            .easing(Easing.Quadratic.Out)\n            .onUpdate(() => {\n                piece.x = positions.currentPosition[index].x;\n                piece.y = positions.currentPosition[index].y;\n                piece.z = index + 10\n            })\n            .onComplete(() => {\n                piece.placed = false;\n                piece.dropZ();\n            })\n            .start()\n        );\n    }\n}\n","// @ts-expect-error\nimport { Easing, Tween } from '@tweenjs/tween.js';\nimport { LoggerInterface } from '@games/libs';\nimport { BoardInterface } from '../../game/board';\nimport { UIServiceInterface } from './ui.service.interface';\nimport { UIStateInterface } from './ui.state.interface';\n\n\nexport class UIService implements UIServiceInterface {\n    private _shuffled = false;\n\n    constructor (\n        private readonly _logger: LoggerInterface,\n    ) {}\n\n    public addListeners (\n        board: BoardInterface,\n        ctx: CanvasRenderingContext2D,\n        onComplete: () => void\n    ) {\n        const state = this.getInitialState();\n\n        ctx.canvas.addEventListener('pointerup', this.onUp(state, board, onComplete));\n        ctx.canvas.addEventListener('pointerdown', this.onDown(state, board, ctx));\n        ctx.canvas.addEventListener('pointermove', this.onMove(state, board, ctx));\n        ctx.canvas.addEventListener('pointerleave', this.onLeave(state));\n        ctx.canvas.addEventListener('pointerenter', this.onEnter(state));\n\n        this._shuffled = false;\n\n        this._logger.debug('Canvas listeners added');\n    }\n\n    private onEnter (state: UIStateInterface) {\n        return () => {\n            state._isMouseIn = true;\n        };\n    }\n\n    private onLeave (state: UIStateInterface) {\n        return () => {\n            state._isMouseIn     = false;\n            state._isPieceMoving = false;\n            state._piece         = null;\n        };\n    }\n\n    private onMove (state: UIStateInterface, board: BoardInterface, ctx: CanvasRenderingContext2D) {\n        return (event: PointerEvent) => {\n            if (UIService.isMouse(event) && !state._isPieceMoving && state._isMouseIn && board) {\n                state._piece = board.getPieceByPosition(ctx, event.offsetX, event.offsetY);\n                board.unHoverPieces();\n                if (state._piece) state._piece.hover();\n            }\n\n            if (UIService.isTouch(event) && state._isPieceMoving && state._piece) {\n                state._piece.x += event.movementX;\n                state._piece.y += event.movementY;\n            } else if (state._isPieceMoving && state._piece) {\n                state._piece.x += event.offsetX - state._pointerCoordinates.x;\n                state._piece.y += event.offsetY - state._pointerCoordinates.y;\n            }\n\n            state._pointerCoordinates.x = event.offsetX;\n            state._pointerCoordinates.y = event.offsetY;\n        }\n    }\n\n    private onDown  (state: UIStateInterface, board: BoardInterface, ctx: CanvasRenderingContext2D) {\n        return (event: PointerEvent) => {\n            if (UIService.isTouch(event) && !state._isPieceMoving && state._isMouseIn && board) {\n                state._piece = board.getPieceByPosition(ctx, event.offsetX, event.offsetY);\n                board.unHoverPieces();\n                if (state._piece) state._piece.hover();\n            }\n\n            if (state._piece) state._isPieceMoving = true;\n        };\n    }\n\n    private onUp (state: UIStateInterface, board: BoardInterface, onComplete: () => void) {\n        return () => {\n            state._isPieceMoving = false;\n\n            if (state._piece && state._piece.isNearToPlace()) {\n                const piece = state._piece;\n                const pieceCoordinates = { x: piece.x, y: piece.y };\n                new Tween(pieceCoordinates)\n                    .to({ x: 0, y: 0 }, 250)\n                    .easing(Easing.Quadratic.In)\n                    .onUpdate(() => {\n                        piece.x = pieceCoordinates.x;\n                        piece.y = pieceCoordinates.y;\n                        piece.z = 100;\n                    })\n                    .onComplete(() => {\n                        piece.placed = true;\n                        piece.dropZ();\n                        piece.unHover();\n                        if (board.checkPieces() && this._shuffled) {\n                            onComplete();\n                            board.pieces = [];\n                        }\n                    })\n                    .start();\n            } else if (state._piece) {\n                state._piece.dropZ();\n            }\n\n            state._piece = null;\n        };\n    }\n\n    private static isMouse (event: PointerEvent) {\n        return event.pointerType === 'mouse';\n    }\n\n    private static isTouch (event: PointerEvent) {\n        return event.pointerType === 'touch';\n    }\n\n    private getInitialState (): UIStateInterface {\n        return {\n            _isMouseIn: false,\n            _isPieceMoving: false,\n            _piece: null,\n            _pointerCoordinates: { x: 0, y: 0 },\n        };\n    }\n\n    setShuffled (value: boolean) {\n        this._shuffled = value;\n    }\n}\n","import { ImageService, LoggerInterface } from '@games/libs';\nimport * as DEFAULTS from './config/default';\nimport { ConfigInterface, Config } from './config';\nimport { boardFactory } from './factories/board.factory';\nimport { pieceFactory } from './factories/piece.factory';\nimport { Root } from './game/root';\nimport { BoardService } from './services/board';\nimport { CanvasService } from './services/canvas';\nimport { PieceService } from './services/piece';\nimport { ShuffleService } from './services/shuffle';\nimport { UIService } from './services/ui';\n\n\nexport type { ConfigInterface } from './config';\nexport { DEFAULTS };\n\n\nexport function init (options: Partial<ConfigInterface>, logger: LoggerInterface = console) {\n    const config = new Config(options, logger);\n    const imageService = new ImageService(logger);\n    const canvasService = new CanvasService(config, logger);\n    const pieceService = new PieceService(pieceFactory, config, logger);\n    const boardService = new BoardService(boardFactory, config, pieceService, logger);\n    const shuffleService = new ShuffleService(config, logger);\n    const uiService = new UIService(logger);\n\n    return new Root(\n        config,\n        imageService,\n        canvasService,\n        boardService,\n        shuffleService,\n        uiService,\n        logger\n    );\n}\n","import { init, DEFAULTS } from 'jigsaw-puzzle';\n\n\nconst game = init({\n    rootElement: document.getElementById(DEFAULTS.DEFAULT_ROOT_ELEMENT),\n});\n\nconst shuffleButton = document.getElementById('shuffle');\nshuffleButton && shuffleButton.addEventListener('click', () => {\n    game.shuffle();\n});\n\nconst resetButton = document.getElementById('reset');\nresetButton && resetButton.addEventListener('click', async () => {\n    await game.reset();\n});\n"],"names":["g","a","c","n","r","s","o","t","DEFAULT_ROWS","DEFAULT_COLS","DEFAULT_SHOW_CURVES","DEFAULT_STROKE_STYLE","DEFAULT_LINE_WIDTH","DEFAULT_LINE_CAP","DEFAULT_FILL_STYLE","DEFAULT_BOARD_FILL","DEFAULT_IMAGE_URL","DEFAULT_ROOT_ELEMENT","DEFAULT_CANVAS_WIDTH","DEFAULT_CANVAS_HEIGHT","DEFAULT_FPS","DEFAULT_OFFSET","DEFAULT_RADIUS","DEFAULT_LOCAL_PADDING","DEFAULT_PIECE_DISTANCE","nt","Config","_config","_logger","noop","rootElement","isHTMLElement","Board","_image","_pieceService","index","count","piece","ctx","x","y","mask","pieces","radius","pieceX","pieceY","value","b","boardFactory","config","image","pieceService","logger","Piece","_boardX","_boardY","pieceFactory","boardX","boardY","Easing","amount","power","now","Group","_this","tweenId","tween","time","preserve","tweenIds","i","autoStart","Interpolation","v","k","m","f","fn","pw","bn","p0","p1","fc","p2","p3","v0","v1","t2","t3","Sequence","mainGroup","Tween","_object","_group","target","duration","dynamic","overrideStartingValues","property","tmp","prop","_valuesStart","_valuesEnd","_valuesStartRepeat","startValue","startValueIsArray","propType","isInterpolationList","endValues","temp","l","nestedObject","numChainedTweens","group","times","yoyo","easingFunction","interpolationFunction","tweens","_i","callback","_a","endTime","elapsedTime","durationAndDelay","totalTime","calculateElapsedPortion","timesRepeated","timeIntoCurrentRepeat","portion","elapsed","completeCount","start","end","startIsArray","endIsArray","endValue","TWEEN","update","Root","_imageService","_canvasService","_boardService","_shuffleService","_uiService","e","BoardService","_boardFactory","board","CanvasService","canvas","width","height","imageRatio","canvasWidth","rootWidth","canvasHeight","canvasRatio","PieceService","_pieceFactory","rows","columns","getMask","ShuffleService","positions","limits","acc","_","coordinates","pieceHeight","pieceWidth","UIService","onComplete","state","event","pieceCoordinates","init","options","imageService","ImageService","canvasService","boardService","shuffleService","uiService","game","DEFAULTS","shuffleButton","resetButton"],"mappings":"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","x_google_ignoreList":[7]}